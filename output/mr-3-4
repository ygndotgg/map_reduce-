D,1;
T,1;
R,1;
R,1;
E,1;
R,1;
E,1;
E,1;
D,1;
D,1;
E,1;
V,1;
E,1;
E,1;
R,1;
E,1;
for
Experienced,1;
No,1;
work,1;
copyright,1;
and,1;
Jill,1;
Manager,1;
and,1;
Illustrator:,1;
Reviewer:,1;
Maureen,1;
translations,,1;
No,1;
Starch,1;
Inc.,1;
Starch,1;
Street,,1;
Congress,1;
Control,1;
2021944983
No,1;
Starch,1;
and,1;
No,1;
Starch,1;
No,1;
Starch,1;
Inc.,1;
and,1;
Rather
than,1;
trademarked,1;
and,1;
infringement,1;
trademark.
The,1;
No,1;
Starch,1;
Inc.,1;
entity,1;
early,1;
of
Rust,1;
and,1;
relational,1;
database,1;
course,1;
and,1;
runtime
Tokio,,1;
and,1;
as,1;
sessions.,1;
and,1;
and,1;
well-known,,1;
and,1;
and,1;
He,1;
85
Chapter,1;
101
Chapter,1;
8:,1;
Code,1;
141
Chapter,1;
10:,1;
Concurrency,1;
167
Chapter,1;
Function,1;
Standard,1;
211
Chapter,1;
The,1;
T,1;
E,1;
T,1;
D,1;
E,1;
L
FOREWORDxv
PREFACExvii
ACKNOWLEDGMENTSxix
INTRODUCTIONxxi
What’s,1;
2
Variables,1;
7
Borrowing,1;
and,1;
References,1;
References,1;
23
Dynamically,1;
and,1;
and,1;
and,1;
and,1;
INTERFACES
37
Unsurprising,1;
45
Fallible,1;
and,1;
and,1;
Including,1;
Features,1;
68
Using,1;
Features,1;
Metadata,1;
73
Build,1;
84
x
Contents,1;
Detail6
TESTING
85
Rust,1;
Mechanisms,1;
90
Additional,1;
92
Test,1;
Augmentation,1;
96
Performance,1;
102
How,1;
Write,1;
106
Procedural,1;
Procedural,1;
Procedural,1;
You,1;
Think,1;
You,1;
Work?,1;
Deal,1;
119
Asynchronous,1;
and,1;
Unpin,1;
133
Fulfilling,1;
and,1;
144
Contents,1;
147
Implementing,1;
and,1;
Write,1;
Documentation,1;
166
10
CONCURRENCY,1;
PARALLELISM)
167
The,1;
Trouble,1;
Concurrency,1;
and,1;
175
Lower-Level,1;
Concurrency,1;
and,1;
Methods,1;
Concurrency,1;
188
Start,1;
189
Use,1;
Concurrency,1;
FUNCTION,1;
194
Symbols,1;
198
Types,1;
200
Allocations,1;
204
Safety,1;
and,1;
Detail12
RUST,1;
LIBRARY
211
Opting,1;
Standard,1;
215
The,1;
Hardware,1;
225
Rust,1;
Tooling,1;
228
The,1;
Standard,1;
233
Index,1;
236
Staying,1;
Detail
xiiiFORE,1;
course,1;
experience,1;
see,1;
top,1;
libraries,1;
and,1;
applications.
Libraries,1;
and,1;
build,,1;
(it’s,1;
experience,1;
will,1;
consider,1;
source,1;
everything,1;
they,1;
library.
In,1;
will,1;
find,1;
nuance,1;
and,1;
and,1;
structs,
and,1;
about,1;
APIs,1;
than,1;
slowing,1;
who’s,1;
digested,1;
The,1;
The,1;
time,1;
they,1;
intohigh-quality,1;
starting
point,1;
polished,1;
You,1;
will,1;
and,1;
and,1;
want
you,1;
got,1;
current,1;
guidance,1;
and,1;
than,1;
what
anybody,1;
and,1;
Tolnay
xvi
﻿PR,1;
E,1;
serve,1;
compiler,1;
experts,1;
design,1;
checker.,1;
coding
sessions,1;
time—not,1;
toy
projects,1;
introductions,1;
libraries,1;
thinking,1;
see,1;
experienced,1;
programmer,1;
go,1;
and,1;
in
order,1;
Rust.,1;
and,1;
frustrating,1;
years,,1;
own,1;
resource,1;
they,1;
own,1;
just,1;
find,1;
works,1;
and,1;
those,1;
video,1;
isn’t,1;
make,1;
were,1;
those,1;
and,1;
situations,1;
as,1;
time,1;
spent,1;
important,1;
early,1;
quickly,1;
barring,1;
experienced,1;
time,1;
works,1;
as,1;
comprehensive,,1;
fall,1;
The,1;
intuition,,1;
and,1;
The,1;
and,1;
idioms,1;
And,1;
ultimately,,1;
truly,1;
they,1;
do.
Now,,1;
words,1;
and,1;
iterations,1;
of
you,1;
plugging,1;
find,1;
and,1;
closer,1;
S
Having,1;
naively,1;
sequence,1;
book
has,1;
spent,1;
and,1;
And,1;
and,1;
late,1;
spent,1;
project—
without,1;
experience,1;
and,1;
community,,1;
and,1;
continue,1;
find,1;
and,1;
and
teach,1;
The,1;
place,1;
and,1;
half,1;
as,1;
delight,1;
theory
and,1;
attention,1;
and,1;
truly,1;
and,1;
insightful,1;
entire,1;
in
ways,1;
than,1;
they,1;
editor,,1;
and,1;
No,1;
see,1;
picked,1;
and,1;
was
thrilled,1;
truly,1;
The,1;
there,1;
were,1;
and,1;
accessible,1;
Steve,1;
and,1;
The,1;
introduction
to,1;
Rust.,1;
sequel,1;
book
and,1;
accessible,1;
and,1;
nod,1;
and,1;
And,1;
pick,1;
whether
virtually,1;
own,1;
as,1;
and,1;
experience
is,1;
wide.,1;
Over,1;
build,1;
and,1;
patterns,1;
work,1;
and,1;
discover,1;
libraries,1;
and,1;
own,1;
experience,1;
The,1;
book”),1;
suited,1;
programmer,1;
go,1;
trade.,1;
deeper,1;
as,1;
and,1;
macros.,1;
API,1;
and,1;
demystify,1;
advanced
and,1;
features,1;
and,1;
build,1;
ergo-
nomic,,1;
and,1;
forward.
What’s,1;
as,1;
guide,1;
and,1;
as,1;
The,1;
skip,1;
1,1;
and,1;
as,1;
they,1;
lay,1;
foundation
for,1;
and,1;
will,1;
quick,1;
find,1;
deeper,,1;
concepts,1;
ownership,,1;
and,1;
familiar,1;
and,1;
compiler,1;
reasons,1;
features,1;
and,1;
and,1;
design,1;
APIs,1;
and,1;
system,1;
API,1;
contracts,,1;
and,1;
when
to,1;
two,1;
primary,1;
and,1;
appropriate,,1;
and,1;
handled.
Chapter,1;
5,,1;
parts,1;
as,1;
and,1;
features,,1;
and
versioning.
Chapter,1;
Testing,,1;
and,1;
and,1;
go,1;
beyond
standard,1;
and,1;
integration,1;
as,1;
and,1;
and,1;
and,1;
Programming,,1;
and,1;
and,1;
and,1;
Pin,1;
and,1;
and,1;
await.,1;
The,1;
executor,1;
and,1;
and,1;
those,1;
about,1;
as,1;
as,1;
Concurrency,1;
and,1;
difficult,1;
and,1;
closer,1;
and,1;
Function,1;
make,1;
Rust
cooperate,1;
nicely,1;
and,1;
FFI,1;
Standard,1;
about,1;
Rust
in,1;
situations,1;
isn’t,1;
as
on,1;
devices,1;
you’re
restricted,1;
and,1;
alloc,1;
The,1;
subject
but,1;
broader,1;
guidance,1;
about,1;
contains,1;
design,1;
date,1;
and,1;
and,1;
accumulated,1;
isn’t,1;
errata,,1;
and,1;
find,1;
page,1;
No,1;
Starch,1;
only,1;
left,1;
{
Introduction
xxiii1
F,1;
S
As,1;
dive,1;
important,1;
ensure
you,1;
fun-
damentals.,1;
as,1;
programming
language,,1;
concepts,1;
important,1;
as,1;
they,1;
they,1;
and,1;
they,1;
and,1;
they,1;
and,1;
We’ll,1;
then,1;
discuss,1;
the
subtleties,1;
ownership,,1;
and,1;
continue,1;
top,1;
can
use,1;
as,1;
concepts,1;
only,1;
as,1;
about,1;
work,1;
will,1;
quickly,1;
more
advanced,1;
lead,1;
equal.,1;
registers,,1;
registers,,1;
memory-mapped,1;
and,1;
Which,1;
implica-
tions,1;
store,1;
there,,1;
and,1;
The,1;
and,1;
important,1;
about,1;
they,1;
dive,1;
about,1;
and,1;
and,1;
domain,1;
can
be,1;
sequence,1;
its
own,1;
u8,1;
and,1;
domain,1;
whose,1;
those,1;
stored.
A,1;
place,1;
The,1;
place,1;
store,1;
a
variable,,1;
named,1;
stack.
A,1;
pointer,1;
the
pointer,1;
place.,1;
pointer,1;
to.,1;
store,1;
pointer
in,1;
than,1;
and,1;
refer,1;
and,1;
thus,1;
underlying
value.
Consider,1;
illustrates,1;
=,1;
=,1;
=,1;
=,1;
=,1;
1-1:,1;
and,1;
pointers
2
Chapter,1;
there,1;
values:,1;
43,1;
and,1;
and,1;
The,1;
two,1;
pointer,1;
and,1;
store,1;
they,1;
store,1;
copies,1;
change
the,1;
=,1;
side.
An,1;
val-
ues,,1;
and,1;
important,1;
=,1;
actual
value,1;
pointer,1;
and,1;
might,1;
say,
“But,1;
stored,,1;
then?,1;
the
pointer,1;
keen,1;
second.
NOTE
Technically,,1;
length.,1;
We’ll,1;
talk,1;
about,1;
Chapter,1;
discuss,1;
pointer,1;
gave,1;
earlier,1;
and,1;
and,1;
As,1;
encounter,1;
you’ll
need,1;
model,1;
and,1;
speaking,,1;
they,1;
can
be,1;
two,1;
and,1;
thinking,1;
about,1;
and,1;
about,1;
and,1;
The,1;
following,1;
two,1;
will,1;
as,1;
places,1;
just,1;
as,1;
as,1;
they,1;
instanti-
ated,,1;
and,1;
a
variable,,1;
then,1;
named,1;
variable
is,1;
two,1;
drawn,1;
only,1;
as,1;
legal,1;
whose,1;
uninitialized,1;
been
Foundations
3moved,,1;
isn’t,1;
entire,1;
program
consists,1;
there,1;
tracing,1;
lifetime
for,1;
The,1;
compiler,1;
parallel,1;
For
example,,1;
there,1;
two,1;
parallel,1;
mutable,1;
value.
Nor,1;
there,1;
there,1;
assert_eq!(x,,1;
42);
1,1;
=,1;
=,1;
&x;
//,1;
mutable,1;
=,1;
turn,1;
x!
4,1;
42);
Listing,1;
will,1;
catch
First,,1;
two,1;
1,1;
(&),1;
1,1;
The,1;
and,1;
checks,1;
exist
concurrently.,1;
case,,1;
terminates,1;
and,1;
borrow
checker,1;
(correctly),1;
Notice,1;
4,1;
there,,1;
fine!,1;
The,1;
terminate,1;
and,1;
when
the,1;
as,1;
The,1;
two,1;
longer,1;
earlier,1;
and,1;
reasons,1;
about,1;
and,1;
the
compiler,1;
legal,1;
as,1;
and,1;
and,1;
replaced.,1;
compiler,1;
checks,1;
isn’t,1;
as,1;
uninitialized,1;
pointer,1;
refers,1;
and,1;
room,1;
well-defined,1;
(its,1;
as,1;
=,1;
then,1;
representing,1;
you
assign,1;
they,1;
model,1;
model,1;
and,1;
and,1;
about,1;
registers,1;
and,1;
as,1;
compiler,1;
register,1;
back,1;
find,1;
model,1;
than,1;
wrap,1;
and,1;
model,1;
consider,1;
perspectives,,1;
will,1;
find,1;
and,1;
they,1;
and,1;
work,1;
as,1;
refer,1;
talk,1;
Which,1;
significant,1;
The,1;
important,1;
purposes,1;
writ-
ing,1;
and,1;
Stack
The,1;
as,1;
calls.,1;
time,1;
chunk,1;
of
memory,1;
top,1;
main,1;
and,1;
as,1;
function’s,1;
within,1;
make,1;
function’s,1;
local,1;
as,1;
they,1;
whose,1;
And,1;
they,1;
they,1;
use,,1;
as,1;
ones,1;
were,1;
and,1;
they,1;
Rust.,1;
accessed,1;
as,1;
as,1;
heap,1;
isn’t,1;
current,1;
the
program.,1;
heap,1;
they,1;
function’s,1;
function’s,1;
returns.,1;
to,,1;
current,1;
store,1;
heap,1;
pointer,1;
segment
of,1;
memory.,1;
it;,1;
process,1;
as,1;
library.,1;
allocations,1;
heap,1;
go,1;
pass,1;
pointer,1;
and,1;
have
that,1;
continue,1;
heap-allocate,1;
pointer,1;
keeps,1;
primary,1;
mechanism,1;
heap,1;
Box::new(value),,1;
back,1;
pointer,1;
Box,1;
deallocate,1;
heap,1;
will,1;
will,1;
eat,1;
and,1;
However,
there,1;
cases,1;
memory.,1;
read-only,1;
entire,1;
be
able,1;
You,1;
heap,1;
and,1;
with
Box::leak,1;
file,1;
compiled,1;
These,1;
is
executed.,1;
entire,1;
contains,1;
code,
which,1;
as,1;
As,1;
walks
through,1;
and
jumps,1;
as,1;
as,1;
special,1;
gets,1;
as,1;
as,1;
variable’s
memory,1;
in
static,1;
as,1;
deallocated,1;
The,1;
references
that,1;
might,1;
as
well,1;
as,1;
as,1;
as,1;
wishes.
You,1;
will,1;
encounter,1;
than,1;
truly,1;
example)
when,1;
Rust.,1;
T,1;
T,1;
and,1;
thus,1;
will,1;
as,1;
pass,1;
'static.,1;
current,1;
refer,1;
The,1;
refer,1;
only,1;
will,1;
entire,1;
remaining
duration,1;
differs,1;
The,1;
item,1;
as,1;
refers,1;
associated,1;
You,1;
as,1;
value.
Ownership
Rust’s,1;
model,1;
idea,1;
(usually,1;
as,1;
variable,
pushing,1;
vector,,1;
placing,1;
point,,1;
original,1;
make,1;
rebels,1;
and,1;
special,1;
and,1;
destination,1;
as,1;
and,1;
possible,1;
as,1;
as,1;
resource,1;
deallocate,1;
the
value,1;
see,1;
why,,1;
consider,1;
happen,1;
Box,1;
were,1;
=,1;
then,1;
and,1;
heap,1;
and,1;
they,1;
they,1;
Freeing,1;
longer,1;
owner’s,1;
happens,1;
they,1;
own,1;
isn’t,1;
dropped
when,1;
1-3,1;
quick,1;
summary,1;
and,1;
and,1;
x1,1;
=,1;
=,1;
z,1;
=,1;
(x1,,1;
z,1;
and,1;
turn,1;
x1,1;
and,1;
y1
2,1;
=,1;
y2,1;
=,1;
and,1;
two,1;
and,1;
Box,1;
The,1;
place,1;
x1,1;
and,1;
tuple,1;
z,1;
x1,1;
point,,1;
x1,1;
accessible,1;
and,1;
inaccessible,1;
and,1;
z,1;
tuple,1;
contains,1;
turn,1;
x1,1;
and,1;
y1.
When,1;
Box,1;
heap,1;
used
to,1;
store,1;
they,1;
go,1;
as,1;
x1,1;
and,1;
The,1;
and,1;
nested,1;
might,1;
and,1;
then,1;
table,1;
table,1;
then,1;
reference!,1;
general,
later,1;
earlier,1;
happen,1;
And,1;
order.
Now,,1;
behavior,1;
nested,1;
array,,1;
two,1;
The,1;
and,1;
behavior,1;
tuple,1;
then,1;
and,1;
there,1;
case,,1;
So,,1;
option.
Borrowing,1;
and,1;
ownership,,1;
References,1;
they,1;
as,1;
as,1;
pointer,1;
make,1;
modify,1;
to,,1;
cast,1;
shared
reference,1;
mutable,1;
compiler,1;
assume,1;
refer-
ence,1;
will,1;
compiler,1;
within,1;
only,1;
and,1;
=,1;
*input,1;
*input;
assert_eq!(*sum,,1;
*,1;
immutable.
Whether,1;
compiler,1;
The,1;
compiler,1;
against,1;
compiler,1;
mutable,1;
With
mutable,1;
references,,1;
compiler,1;
make,1;
comes,1;
compiler,1;
there
are,1;
shared
reference,1;
mutable,1;
*input,1;
==,1;
1,1;
=,1;
2;
}
2,1;
*input,1;
1,1;
{
*output,1;
=,1;
mutable,1;
compiler,1;
assume,1;
and,1;
memory.,1;
reassignment,1;
1,1;
and,1;
entire,1;
compiled,1;
as,1;
compiler,1;
1,1;
then,1;
mutable,1;
lets,1;
only,1;
to.,1;
the
immediate,1;
methods,1;
1-6.
let,1;
=,1;
=,1;
&i32
let,1;
z,1;
=,1;
z,1;
1-6:,1;
only,1;
pointer,1;
(that,1;
(that,1;
the
value,1;
pointer,1;
z,1;
primary,1;
difference,1;
and,1;
longer,1;
necessary.,1;
Apart,1;
own,1;
mutable,1;
then,1;
place.,1;
to
drop,1;
there,1;
the
value,1;
mutable,1;
as,1;
empty:
1,1;
=,1;
=,1;
=,1;
was;
//,1;
&mut:
let,1;
=,1;
=,1;
mutable,1;
operations.,1;
1,1;
and,1;
5,,1;
double,1;
just,1;
behind,,1;
Default::default());,1;
mutable,1;
place.,1;
The,1;
5.
Alternatively,,1;
already,1;
own,1;
leaving,1;
mutable,1;
immediately.
Finally,,1;
two,1;
mutable,1;
references,,1;
will,1;
mutability,,1;
they,1;
These,1;
fall,1;
two,1;
those,1;
mutable,1;
and,1;
those,1;
and,1;
they,1;
to,,1;
only,1;
mutable,1;
Under,1;
those,1;
whose,1;
make,1;
will,1;
Chapter,1;
but
for,1;
only,1;
those,1;
that
do,1;
mutable,1;
just,1;
methods,1;
place.,1;
The,1;
std::sync::atomic,1;
and,1;
fall,1;
i32,1;
and,1;
time.
NOTE
The,1;
and,1;
methods,1;
the
value,1;
entirely,1;
exist
to,1;
And,1;
isn’t,1;
will,1;
probably,1;
already,1;
familiar,1;
compiler,1;
will,1;
serve,1;
well
for,1;
will,1;
as,1;
dive,1;
deeper,1;
parts,1;
will,1;
model,1;
taught,1;
as,1;
begins,1;
some
variable,1;
and,1;
and,1;
for.,1;
will,1;
to,,1;
as,1;
will,1;
see,1;
section.
12
Chapter,1;
1Lifetimes,1;
and,1;
Borrow,1;
checker.,1;
'a,1;
checks,1;
'a,1;
tracing,1;
back,1;
'a,1;
starts—where,1;
taken—from,1;
and,1;
checking,1;
there,1;
ensures,1;
similar,1;
flow”
mental,1;
model,1;
discussed,1;
earlier,1;
chapter;,1;
compiler,1;
checks,1;
conflict,1;
simple,1;
=,1;
=,1;
&x;
//,1;
'a
if,1;
>,1;
=,1;
println!("{}",,1;
1-8:,1;
1,1;
then,1;
modify,1;
The,1;
mutable,1;
and,1;
checks,1;
finds,1;
between
when,1;
and,1;
accepts,1;
as,1;
thinking,1;
about,1;
enough,1;
this
branch,1;
taken,,1;
and,1;
mutably,1;
accessed,1;
1,1;
there,1;
and,1;
there,1;
The,1;
then,1;
finds,1;
print,1;
walks,1;
back,1;
1,1;
and,1;
finds,1;
path),,1;
accepts,1;
as,1;
were,1;
4,1;
longer,1;
The,1;
'a,1;
then,1;
1,1;
way
until,1;
4,1;
and,1;
discover,1;
quite,1;
see,1;
and,1;
=,1;
z,1;
=,1;
&x;
//,1;
0..100,1;
println!("{}",,1;
=,1;
z,1;
=,1;
&x;
//,1;
1,1;
then,1;
'a,1;
longer,1;
valid.,1;
accepts,1;
'a,1;
ended,1;
Then,,1;
z,1;
Regardless,1;
loops
back,1;
print,1;
statement,,1;
and,1;
there,1;
flows,
so,1;
accepts,1;
model,1;
z,1;
stops,1;
z,1;
entirely,1;
only,1;
point
forward.,1;
just,1;
happens,1;
named,1;
weird.
NOTE
The,1;
and,1;
unsure,1;
as,1;
allowing,1;
disas-
trous.,1;
The,1;
keeps,1;
smarter,,1;
there,1;
legal.,1;
Rust.
Generic,1;
store,1;
within,1;
own,1;
types.,1;
their
validity,1;
they,1;
methods,1;
true,1;
self.
Rust,1;
lets,1;
make,1;
lifetimes,
just,1;
as,1;
make,1;
types.,1;
The,1;
Steve,1;
and,1;
(No,1;
Starch,1;
covers
this,1;
basics,1;
as,1;
write
more,1;
there,1;
two,1;
and,1;
then,1;
over.,1;
when
an,1;
will,1;
legal,1;
those,1;
implement,1;
as,1;
as,1;
We’ll,1;
talk,1;
Chapter,1;
only,1;
signature.
Usually,,1;
and,1;
compiler
will,1;
as,1;
You,1;
only,1;
parameters,1;
contains,1;
references,,1;
and,1;
only,1;
references.
Consider,1;
1-10,,1;
parts
of,1;
separated,1;
str,
document:,1;
Iterator,1;
=,1;
next(&self),1;
}.next()
}
Listing,1;
construct,1;
delimiter,1;
and,1;
happen,1;
The,1;
and,1;
make,1;
impossible,1;
associated,1;
local,1;
reject,1;
glance,,1;
and,1;
place,1;
speaking,,1;
is
a,1;
as,1;
as,1;
rea-
son,1;
why,,1;
Java,,1;
pass,1;
accepts,1;
why,,1;
pass,1;
str,1;
a
function,1;
accepts,1;
&'a,1;
comes,1;
Animal
Foundations
15because,1;
than,1;
and,1;
'a,1;
as,1;
as,1;
'a,1;
and,1;
more
useful.,1;
'a,1;
outlives,1;
then,1;
'b,1;
formal,1;
gets,1;
close,1;
enough,1;
be
of,1;
similar,1;
can
be,1;
place.,1;
variance:,1;
and,1;
contravariant.,1;
just,1;
place,1;
&'a,1;
T,1;
&'a,1;
T,1;
&'a,1;
T,1;
pass,1;
T,1;
&mut
Vec<&'a,1;
pass,1;
T,1;
Vec,,1;
then,1;
continue,1;
using,,1;
thinking,1;
were,1;
and,1;
thus,1;
were,1;
reason—for
example,,1;
comes,1;
argument,1;
own,1;
as,1;
stricter,,1;
useful
fn,1;
T.
So,1;
about,1;
comes,1;
relevant,1;
consider,1;
checker.,1;
&'a,1;
str
}
let,1;
=,1;
}.s,1;
=,1;
"world";
println!("{}",,1;
glance,,1;
two,1;
parts,1;
as,1;
StrSplit,1;
longer,1;
compiles!,1;
And,1;
1,1;
holding
a,1;
and,1;
then,1;
=,1;
except,1;
and,1;
compiler,1;
to.,1;
there,1;
two,1;
'a,1;
and,1;
'b,1;
there,1;
just,1;
the
compiler,1;
infers,1;
shared
reference,1;
print,1;
compiler,1;
mutable,1;
s.
In,1;
case,,1;
'a,1;
just,1;
and,1;
single-lifetime,1;
case,,1;
The,1;
compiler,1;
str,1;
&'a,1;
str,1;
T,1;
&mut
T,,1;
relevant,1;
sub-,1;
and,1;
mutably,1;
Ouch!
Because,1;
as,1;
parameters,1;
as,1;
arguments,,1;
the
cognitive,1;
parameter,1;
against,1;
build,1;
By,1;
and,1;
and,1;
that
those,1;
You,1;
might,1;
and,1;
pieces,1;
here
already,,1;
of
how,1;
fits,1;
will,1;
similar,1;
We’ll,1;
go,1;
see,1;
and,1;
and,1;
and,1;
constructs,1;
system.,1;
basics,1;
The,1;
and,1;
dive,1;
and,1;
and,1;
types,,1;
and,1;
crate
boundaries.
Types,1;
serve,1;
purposes,1;
as,1;
roles,1;
to
interpret,1;
memory.,1;
sequence,1;
0b10111101,1;
as,1;
0xBD),1;
and,1;
189.,1;
–67.,1;
own,1;
types,,1;
appear,1;
sequence,1;
important,1;
works,1;
as,1;
and,1;
talk,1;
about,1;
determined,
we,1;
discuss,1;
the
bytes,1;
Once,1;
might,1;
there,1;
as,1;
true,1;
constrains,1;
can
be,1;
The,1;
T,1;
4,1;
refer,1;
a
pointer,1;
only,1;
1,1;
8).,1;
values,
no,1;
stringent,1;
alignment,1;
than,1;
just,1;
and,1;
accessed,1;
in
blocks,1;
than,1;
64-bit,1;
accessed,1;
as,1;
then,1;
cleverness,1;
handle,1;
and,1;
val-
ues,,1;
alignment.,1;
see,1;
why,,1;
consider,1;
happens,1;
an
i64,1;
block,1;
(that,1;
pointer,1;
The,1;
will,1;
two,1;
half,1;
block,1;
i64,,1;
and,1;
first
half,1;
block,1;
then,1;
different
thread.,1;
You,1;
might,1;
4,1;
and,1;
4,1;
data,1;
aligned,1;
as,1;
and,1;
lead,1;
poor,1;
and,1;
prefer,
that,1;
naturally,1;
aligned.,1;
naturally,1;
aligned,1;
alignment,1;
So,,1;
8-byte-aligned.
Since,1;
aligned,1;
and,1;
stronger,1;
compiler,1;
advantage,1;
giving,1;
alignment,1;
contains.,1;
aligned,1;
u8,1;
u16,1;
4-byte-
aligned,,1;
and,1;
Complex,1;
largest,1;
alignment,1;
they
contain.,1;
contains,1;
and,1;
will,1;
about,1;
as,1;
layout,,1;
as,1;
see,1;
compiler,1;
types,,1;
poor,1;
under-
standing,1;
definitions,1;
The,1;
will,1;
see,,1;
see,1;
As,1;
is
compatible,1;
C++,1;
compiler,1;
lay,1;
using
the,1;
talk,1;
about,1;
Chapter,1;
as,1;
Rust
will,1;
expectations,1;
and,1;
cast,1;
two,1;
only,1;
types
with,1;
and,1;
as,1;
comes,1;
and,1;
as,1;
they,1;
were,1;
compiler,1;
they,1;
will,1;
let’s,1;
compiler,1;
lay,1;
with
repr(C):,1;
Foo,1;
2-1.,1;
How,1;
compiler,1;
Foo,1;
u8,
long:,1;
compiler,1;
tiny,,1;
whose,1;
1,1;
and,1;
1,1;
4-byte-aligned.,1;
Foo,1;
1,1;
we
allocated,1;
make,1;
alignment.,1;
compiler,1;
indeterminate,1;
ignored,1;
and,1;
No,1;
go,1;
alignment,1;
and
the,1;
current,1;
1,1;
4,1;
=,1;
already,1;
go,1;
1,1;
4,1;
1,1;
=,1;
Foo.,1;
Foo,1;
then,1;
must
insert,1;
make,1;
aligned,1;
ensures,1;
2-byte,1;
alignment,1;
total,1;
bytes.,1;
Now,1;
alignment,1;
Foo,1;
The,1;
largest,1;
alignment,1;
will,1;
So,,1;
Foo,1;
aligned,1;
array,,1;
the
compiler,1;
then,1;
make,1;
multiple
of,1;
alignment,1;
32,1;
ready,1;
shed,1;
and,1;
consider,1;
2-1.,1;
place,1;
they,1;
appear,1;
original,1;
a
couple,1;
as,1;
happen,1;
two,1;
place,1;
them
in,1;
longer,1;
padding
between,1;
Foo,1;
just,1;
only,1;
bytes.,1;
reasons,1;
about,1;
giving,1;
compiler,1;
code.
It,1;
lay,1;
and,1;
compiler,1;
doing
so,,1;
using
misaligned,1;
The,1;
felt,,1;
as,1;
medium,1;
Keep,1;
lead,1;
crash,1;
only,1;
aligned,1;
align-
ment,1;
than,1;
You,1;
different
values,1;
huge,1;
two,1;
they,1;
about,1;
Chapter,1;
Types
You,1;
might,1;
about,1;
compiler,1;
in
memory.,1;
quick,1;
as,1;
as,1;
sequence,1;
type
with,1;
variant.,1;
as,1;
discriminant.,1;
The,1;
the
value,1;
The,1;
and,1;
Pointers
You,1;
corners
of,1;
and,1;
comes,1;
up
because,1;
compiler,1;
Sized,,1;
implement,1;
they,1;
two,1;
common
types,1;
objects,1;
and,1;
those,1;
well-defined,1;
only,1;
and,1;
they,1;
sized,1;
time,1;
Iterator,1;
problem:,1;
the
compiler,1;
as,1;
tuple,1;
isn’t,1;
Sized,,1;
isn’t,1;
compiler,1;
fields,
function,1;
arguments,,1;
types,,1;
and,1;
you
Types
23write,1;
be”).,1;
and
want,1;
slice,1;
as,1;
and,1;
sized,1;
pointer,1;
as,1;
just,1;
about,1;
pointer,1;
you
take,1;
compiler,1;
constructs,1;
length,1;
the
slice.,1;
And,1;
and,1;
type.
NOTE
Box,1;
and,1;
pointers,,1;
they,1;
and,1;
allows
types,1;
they,1;
about,1;
they,1;
The,1;
and,1;
go,1;
technical,1;
to,,1;
and,1;
traits.
Compilation,1;
and,1;
probably,1;
parameters,1;
and,1;
and,1;
and,1;
happens,1;
happens
when,1;
compiler,1;
make,1;
construct,1;
HashMap<String,,1;
and,1;
replaces,1;
instances,1;
parameter,1;
type
you,1;
provided.,1;
Vec,1;
T,1;
with
i32,,1;
and,1;
V,1;
2
In,1;
compiler,1;
copies,1;
only,1;
parts,1;
use,,1;
find,1;
find,1;
won’t
be,1;
and,1;
2-2,,1;
method.
impl,1;
fn,1;
2-2:,1;
dispatch
A,1;
pattern,1;
<T:,1;
is_contained_in,1;
The,1;
told
where,1;
jump,1;
and,1;
continue,1;
com-
piler,1;
place,1;
pattern
type,1;
there,1;
could
use,1;
its
own,1;
jump,1;
to.,1;
as,1;
refer,1;
be
treated,1;
as,1;
then,1;
as,1;
Chapter,1;
process,1;
and,1;
just,1;
as,1;
as,1;
By,1;
time,1;
com-
piler,1;
as,1;
were,1;
there,1;
and,1;
known.,1;
result,,1;
just,1;
as,1;
as,1;
is_contained_in,1;
were,1;
and,1;
is_contained_in,1;
comes,1;
those,1;
compiled,1;
time,1;
the
compiler,1;
away.,1;
monomorphized,1;
own,1;
chunk,1;
make,1;
And,1;
as,1;
copies,1;
Consider,
for,1;
The,1;
the
hash,1;
find,1;
insertion,1;
cases,1;
parts,1;
and,1;
only,1;
generate
distinct,1;
copies,1;
pattern,1;
cases,1;
only,1;
compiler,1;
you
while,1;
allowing,1;
comes,1;
module,1;
You,1;
outside,1;
just,1;
careful,1;
make,1;
block,,1;
as,1;
then,1;
will,1;
enables
code,1;
earlier,1;
instances,1;
wouldn’t,1;
jump,1;
is_contained_in,1;
you
replace,1;
they,1;
pieces,1;
argument:,1;
pattern,1;
and
the,1;
is_contained_in,1;
a
pointer,1;
chunk,1;
virtual,1;
methods,1;
is_contained_in,1;
vtable
and,1;
then,1;
calls,1;
contains,1;
about,1;
and,1;
alignment
since,1;
work,1;
type.
You’ll,1;
place,1;
The,1;
time,1;
pattern,1;
!,1;
make,1;
as,1;
2argument,,1;
place,1;
pointer,1;
pass,1;
table,1;
pointer,1;
pointer,1;
vtable.,1;
You,1;
can
use,1;
pointer,1;
&mut,,1;
and,1;
fn,1;
and,1;
as,1;
objects,,1;
whose,1;
returns,1;
and,1;
compiler,1;
library,,1;
there,1;
were,1;
place,1;
might,1;
These,1;
and,1;
object-safe,,1;
Self,1;
methods,1;
(that,1;
methods,1;
whose,1;
argument,1;
dereference
to,1;
impossible,1;
call.,1;
about,1;
objects,,1;
see,1;
Self:,1;
Self,1;
then,1;
You,1;
place,1;
make,1;
Methods,1;
Self:,1;
are
exempted,1;
checking,1;
object-safe.
Dynamic,1;
longer,1;
necessary
to,1;
copies,1;
and,1;
and,1;
the
efficiency,1;
com-
piler,1;
compiler,1;
find,1;
longer,1;
as,1;
will,1;
call.,1;
and,1;
speaking,,1;
libraries,1;
and,1;
your
binaries.,1;
library,,1;
them,,1;
they,1;
there,1;
consider,1;
except,1;
those,1;
and,1;
will,1;
(usually),1;
performance
cost,,1;
binaries.
Generic,1;
two,1;
parameters,1;
associated,1;
Foo,1;
Bar;,1;
}.,1;
The,1;
difference
between,1;
thumb,1;
associated,1;
only,1;
and,1;
parameter,1;
associated,1;
work,1;
with,,1;
will,1;
implementations.,1;
So,,1;
put,,1;
just,1;
associated,1;
and,1;
those,1;
quickly,1;
parameter,1;
And,1;
compiler,1;
time,1;
use,,1;
calls,1;
implement,1;
implement,1;
against,1;
implement,1;
and,1;
FromIterator<&T>,1;
associated,1;
types,,1;
compiler,1;
and,1;
associated,1;
follow
(since,1;
there,1;
only,1;
implementation).,1;
and,1;
turn,,1;
allows
the,1;
associated,1;
affecting,1;
associated,1;
implement,1;
Deref,1;
against,1;
implement,1;
Iterator,1;
and,1;
fairly,1;
strict,1;
about,1;
implement,1;
implement,1;
These,1;
the
28
Chapter,1;
and,1;
there,1;
only,1;
see,1;
consider,1;
happen,1;
own,1;
Display,1;
library.,1;
print,1;
and
includes,1;
compiler,1;
pick,1;
implemen-
tation,1;
library.,1;
than,1;
and,1;
compiler,1;
The,1;
issue,1;
two,1;
and,1;
implement,1;
The,1;
compiler,1;
situations,1;
and,1;
make,1;
there,1;
will,1;
only,1;
implement,1;
then,1;
there,1;
and,1;
make,1;
as,1;
there,1;
and,1;
own,1;
types,,1;
got,1;
own,1;
The,1;
implement,1;
only,1;
own,1;
another:,1;
crates!,1;
find,1;
balances,1;
downstream,1;
own,1;
against,1;
own,1;
refers,1;
and,1;
downstream,1;
refers,1;
they,1;
refer,1;
authoritative,1;
compiler,1;
your
“upstream.”
In,1;
Simply
stated,,1;
implement,1;
local,1;
So,,1;
implement,1;
own,1;
and,1;
implement,1;
MyNeatTrait,1;
bool,,1;
will,1;
compile,,1;
and,1;
the
compiler,1;
will,1;
there,1;
gets,1;
implement,1;
own,1;
and,1;
implement,1;
own,1;
story.,1;
caveats,,1;
and,1;
of.
Types
29Blanket,1;
implement,1;
range,1;
impl<T>,1;
T,1;
and,1;
just,1;
range
of,1;
types.,1;
and,1;
consid-
ered,1;
were,1;
downstream,1;
Foo,1;
just,1;
about,1;
them,,1;
These,1;
marked,1;
and,1;
&,,1;
purposes,1;
as
well,1;
to,,1;
implement,1;
just,1;
permitted
since,1;
and,1;
&
both,1;
library.,1;
cases,1;
allow.
The,1;
simplest,1;
impl
From<MyType>,1;
as,1;
Vec,1;
there,1;
only,1;
MyType),
which,1;
only,1;
Ti
is,1;
local,1;
and,1;
T,1;
types
P1..=Pn.,1;
parameters,1;
appear,1;
as,1;
they,1;
T,1;
parameter,1;
stands,1;
its
own,1;
just,1;
So,,1;
2-4,1;
MyType<T>
impl<T>,1;
From<MyType>,1;
T>,1;
2-4:,1;
Valid,1;
types
This,1;
particular,,1;
trait
is,1;
only,1;
contains,1;
local,1;
and,1;
impl<T>,1;
T>,1;
ForeignType,1;
but
impl<T>,1;
ForeignType,1;
impl<T>,1;
and,1;
impl<T>,1;
and,1;
conflict,1;
only,1;
two,1;
were,1;
pattern,1;
local,1;
tie,1;
and,1;
ensures,1;
they,1;
implement,1;
'static.,1;
certainly,1;
as,1;
over.,1;
As,1;
find,1;
let’s,1;
and,1;
Trait
where,1;
T,1;
over.,1;
and,1;
parameters,,1;
arguments,,1;
local,1;
types.,1;
You,1;
true,1;
local,1;
types.,1;
You,1;
parameters,1;
appear,1;
only,1;
left-hand
side.,1;
only,1;
construct,1;
whose,1;
T,1;
Hash
+,1;
saves,1;
methods,1;
and,1;
communicates,1;
As,1;
see,,1;
complexity,1;
trait
methods,1;
V,1;
E,1;
extremely,1;
Many
#[derive(Trait)],1;
Trait.,1;
want,,1;
happens,1;
and,1;
Foo,1;
contains,1;
T,1;
Foo,1;
will,1;
implement,1;
only,1;
T,1;
isn’t,1;
rename,1;
Shared<NotClone>,1;
will,1;
the
compiler,1;
they,1;
time,1;
as,1;
associated,1;
over.,1;
As,1;
consider,1;
flatten,,1;
turn,1;
implement,1;
Iterator,1;
those,1;
iterators.,1;
The,1;
iterator.
Flatten,1;
Iterator,1;
Iterator,1;
and,1;
implement,1;
lets,1;
refer,1;
associated,1;
refer,1;
If
a,1;
associated,1;
as,1;
trait
that,1;
associated,1;
there,1;
as
Trait>::AssocType.,1;
only,1;
outer
iterator,1;
item,1;
iterator.
In,1;
find,1;
to
write,1;
about,1;
parameter,1;
as,1;
of
bound,1;
as,1;
bound,,1;
and,1;
T,1;
and,1;
returns,1;
that
T.,1;
those,1;
as,1;
as,1;
as,1;
input.”,1;
&'a,1;
compiler,1;
enough,1;
The,1;
that,
at,1;
time,1;
just,1;
happen,1;
and,1;
worth,1;
consider,1;
2-6,,1;
can
be,1;
implement,1;
and,1;
AnyIterable
where,1;
&'a,1;
Self:,1;
IntoIterator,
for<'a>,1;
Self,1;
as,1;
IntoIterator>::Item:,1;
fmt(&self,,1;
Error>,1;
iterable,1;
collec-
tion,1;
and,1;
just,1;
illustrates,1;
quite,1;
Traits
Usually,,1;
sup-
port;,1;
and,1;
way.,1;
property,1;
methods,1;
associated,1;
and,1;
serve,1;
just,1;
certain,1;
way.,1;
implement,1;
isn’t,1;
methods,1;
associated,1;
just,1;
about,1;
The
standard,1;
Sized,,1;
and,1;
except,1;
compiler,1;
implement,1;
serve,1;
important,1;
they,1;
to
write,1;
semantic,1;
requirements,1;
and,1;
compiler,1;
programmer,1;
and,1;
we’d,1;
data,1;
races,,1;
and,1;
types.,1;
These,1;
data,1;
and,1;
as,1;
They
come,1;
make,1;
impossible,1;
consider,1;
authenticated,1;
You,1;
and,1;
then,1;
two,1;
Unauthenticated,1;
they,1;
block,,1;
only,1;
connect.,1;
returns,1;
and,1;
only,1;
block,1;
methods,1;
such.,1;
will,1;
pattern,1;
Chapter,1;
3.
Existential,1;
methods,1;
call.,1;
compiler,1;
what
type,1;
based,1;
compiler,1;
will,1;
only,1;
and,1;
definitions,1;
functions,
types,,1;
and,1;
types.,1;
reasons,1;
primary,1;
one
is,1;
inference,1;
inference,1;
easy,,1;
block,1;
handle,1;
situations,1;
types.,1;
already,1;
seen,1;
fn,1;
return
type:,1;
true,1;
just,1;
a
hint,1;
returns,1;
And,1;
only,1;
those,1;
and,1;
isn’t,1;
strictly,1;
true,1;
and,1;
The,1;
compiler,1;
will,1;
and,1;
We’ll,1;
chapter.
This,1;
behavior,1;
there,1;
and,1;
compiler,1;
find,1;
The,1;
compiler,1;
will,1;
then,1;
go,1;
inference,1;
2Not,1;
instances,1;
types.,1;
argument,1;
just,1;
parameter,1;
fn,1;
just,1;
fn,1;
S).
Existential,1;
implement,1;
associated,1;
types.,1;
associated,1;
associated,1;
as,1;
=,1;
Self::Item>
and,1;
just,1;
fn,1;
into_iter(self),1;
as,1;
and,1;
type.
Existential,1;
convenience:,1;
erasure.,1;
just,1;
they,1;
appear,1;
futures,1;
relevant,1;
only,1;
as,1;
downstream,1;
system.,1;
We’ve
looked,1;
compiler,1;
manifests,1;
and,1;
rea-
sons,1;
about,1;
important,1;
and,1;
chapters.,1;
find,1;
design,1;
T,1;
E,1;
R,1;
project,,1;
and
some,1;
top,1;
internal,1;
and,1;
own,1;
API,1;
As,1;
and,1;
find,1;
worth-
while,1;
thought,1;
and,1;
care,1;
design,1;
inter-
nal,1;
APIs,1;
make,1;
experience,1;
and,1;
as,1;
pleasant,1;
as,1;
important,1;
considerations
for,1;
those,1;
own,1;
library.,1;
These,1;
and,1;
discuss,1;
guidance,1;
and,1;
API,1;
tool,,1;
(https://rust-lang.github.io/rfcs/1105-api-evolution.html),1;
and,1;
chapter
of,1;
The,1;
and,1;
as,1;
comes,1;
and,1;
true,1;
as,1;
they,1;
correctly.,1;
everything,1;
about,1;
unsurprising,1;
The,1;
close,1;
already,1;
relearn,1;
concepts,1;
than,1;
to.,1;
brain,1;
interface.
There,1;
make,1;
naming,,1;
and,1;
ergonomic
trait,1;
tricks,1;
Practices
A,1;
will,1;
encounter,1;
they,1;
types,,1;
and,1;
libraries,1;
they,1;
methods,1;
and,1;
will,1;
they,1;
make,1;
certain,1;
about,1;
and,1;
types.,1;
probably,1;
and,1;
prob-
ably,1;
iterator.,1;
probably,1;
self
and,1;
returns,1;
std::error::Error,1;
and,1;
Results.,1;
make,1;
and,1;
understand
the,1;
about,1;
interface.
A,1;
way.,1;
implement,1;
Error—the,1;
will,1;
based,1;
they,1;
will,1;
and,1;
and,1;
will,1;
time,1;
differs,1;
will,1;
make,1;
everything,1;
just,1;
print,1;
{:?}
and,1;
and,1;
everything,1;
and,1;
they,1;
surprising,1;
and,1;
implement,1;
discussed,1;
Chapter,1;
compiler,1;
implement,1;
they,1;
implement,1;
Clone),1;
one
from,1;
wrap,1;
own,1;
and,1;
then,1;
quite,1;
difficult,1;
can,
and,1;
implement,1;
only,1;
implement,1;
your
interface,,1;
same
bound,1;
You,1;
close,1;
and,1;
implement,1;
it
should,1;
can’t,1;
and,1;
can’t,1;
contains,1;
a
thread,1;
can’t,1;
just,1;
work,1;
world,1;
and,1;
will,1;
implement,1;
implement,1;
and,1;
why,,1;
implement,1;
and
Default.,1;
These,1;
and,1;
make,1;
implement,1;
types.,1;
implement,1;
traits,
make,1;
as,1;
will,1;
new),1;
instances,1;
as,1;
they,1;
see,1;
they,1;
they,1;
will,1;
and,1;
The,1;
will,1;
they,1;
==,1;
Even
if,1;
equal,1;
only,1;
it’s
worth,1;
assert_eq!.
PartialOrd,1;
and,1;
specialized,,1;
and,1;
quite,1;
possible,1;
will,1;
implement,1;
true,1;
might,1;
as,1;
std::collection,1;
types,,1;
they,1;
tend
to,1;
and,1;
semantic,1;
those,1;
of
PartialEq,1;
and,1;
These,1;
documentation
Designing,1;
Interfaces
39for,1;
those,1;
and,1;
implement,1;
only,1;
type.
Finally,,1;
types,,1;
implement,1;
and,1;
These,1;
derived,,1;
and,1;
comes,1;
just,1;
variant.,1;
libraries,1;
therefore
choose,1;
only,1;
it.
You,1;
might,1;
two,1;
traits
mentioned.,1;
The,1;
Copy;
quite,1;
they,1;
they,1;
two,1;
copies,1;
they,1;
might,1;
simple,1;
happen,
and,1;
contrast,,1;
implement,1;
foo<T:,1;
&Bar,,1;
Trait.,1;
methods,1;
self,1;
behavior,1;
might,1;
surprising,1;
user
who,1;
only,1;
methods!
For,1;
as,1;
T,1;
and,1;
Trait.,1;
You,1;
only,1;
methods,1;
similar,1;
leads,1;
surprises,1;
over,,1;
consider,1;
and,1;
loops,1;
work,1;
as,1;
just,1;
and,1;
T,1;
and,1;
methods,1;
=,1;
user,,1;
and,1;
3If,1;
implement,1;
Deref,1;
just,1;
also
consider,1;
AsRef,,1;
&InnerType.,1;
types,,1;
will,1;
and,1;
possible,1;
Borrow,1;
Deref,1;
and,1;
narrower,1;
allowing,1;
essentially,1;
per-
haps,,1;
&str,1;
same
could,1;
AsRef,,1;
and,1;
as,1;
Borrow,1;
Borrow<T>,1;
and,1;
Borrow,1;
only,1;
essentially,1;
Deref,1;
and,1;
INHERENT,1;
THODS
The,1;
and,1;
Deref,1;
and,1;
there,1;
methods,1;
T,1;
T,1;
methods,1;
isn’t,1;
methods.
It’s,1;
Vec,1;
slice,
since,1;
time,1;
soon.,1;
you
add,1;
and,1;
thus,1;
methods,1;
fn,1;
calls,1;
and,1;
T,1;
requirements,1;
and,1;
about,1;
designing
a,1;
about,1;
thumb,1;
imposing,1;
unnecessary,1;
and,1;
only,1;
make
promises,1;
removing,1;
semantic,1;
and,1;
giving,1;
types,,1;
and,1;
implementations
and,1;
types.,1;
signatures,1;
frobnicate1(s:,1;
signatures,1;
signatures,1;
and,1;
they,1;
contracts.
The,1;
own,1;
and,1;
will,1;
and,1;
make,1;
longer,1;
own-
ership,1;
back,1;
own,1;
string.,1;
The,1;
promise,1;
The,1;
they,1;
own,
they,1;
&str,1;
function.
The,1;
only,1;
user
pass,1;
and,1;
signatures,1;
than,1;
argument,1;
and,1;
to,,1;
design
decisions,1;
and,1;
implications,1;
interface
contract.
42
Chapter,1;
3Generic,1;
place,1;
own,1;
and,1;
Foo.,1;
than,1;
types,,1;
to
pass,1;
only,1;
&str,1;
AsRef<str>
is,1;
go,1;
about,1;
relaxing
requirements,1;
argument,1;
no
bounds,,1;
and,1;
then,1;
just,1;
compiler,1;
discover,1;
make,1;
own,1;
and,1;
understand.,1;
make,1;
parameter,1;
generic,,1;
thumb,1;
make,1;
argument,1;
might,1;
and,1;
with.
You,1;
Chapter,1;
idea,1;
might,1;
make,1;
worried,1;
about,1;
discussed,1;
(usually),1;
and,1;
not
Sized,,1;
and,1;
pointer,1;
replace
your,1;
argument,1;
go,1;
there,1;
consider.,1;
will,1;
comes,1;
time,1;
will,1;
work,1;
only,1;
simple,1;
AsRef<str>,1;
does
not,1;
construct,1;
Eq.,1;
And,1;
turn,1;
necessarily,1;
see,1;
why,,1;
fn,1;
&Vec<usize>),1;
fn,1;
&Vec<usize>,1;
happens,1;
invokes,1;
original,1;
com-
piler,1;
Vec,,1;
just,1;
types,,1;
caller’s,1;
longer,1;
and,1;
Dispatch”,1;
Chapter,1;
object-safe,,1;
implement,1;
as,1;
Trait.,1;
isn’t,
the,1;
compiler,1;
will,1;
You,1;
comes,1;
(such,1;
as,1;
AsRef<str>,1;
consider,1;
parameters,1;
Self:,1;
possible,1;
only,1;
with
a,1;
You,1;
pattern,1;
Iterator,1;
and,1;
methods,1;
make,1;
recommendation,1;
consider,1;
will,1;
and,1;
as,1;
instances,1;
than,1;
wouldn’t,1;
construct,1;
place.,1;
fairly,1;
as,1;
seek,,1;
T,1;
might,1;
as,1;
as,1;
there,1;
libraries,1;
just,1;
types.,1;
For
example,,1;
deferred,1;
as,1;
just,1;
deferred,1;
only,1;
and,1;
enough,,1;
contains,1;
Drop.
Remember,1;
modify,1;
object-safe,,1;
semantic,1;
and,1;
just,1;
to,,1;
make,1;
will,1;
ergonomics,1;
and,1;
make,1;
data,,1;
as,1;
methods,1;
self,1;
data,1;
thread,
it,1;
store,1;
own,1;
data,,1;
it
should,1;
make,1;
data,,1;
and,1;
and,1;
about,1;
own,1;
bool,,1;
cheap,1;
store,1;
and,1;
as,1;
store,1;
references.
Be,1;
true,1;
types,,1;
store,1;
and,1;
clear-cut.
Sometimes,,1;
will,1;
need
to,1;
own,1;
data,1;
sequence,1;
only,1;
case,,1;
lets,1;
data,1;
and,1;
top,1;
(even,1;
certain,1;
pieces
of,1;
data,1;
cheap,1;
not
Designing,1;
Interfaces
45part,1;
might,1;
huge,1;
chunk,1;
bytes.
Fallible,1;
and,1;
flushing,1;
remote,1;
The,1;
place,1;
cleanup
is,1;
longer,1;
except,1;
similar,1;
there,1;
work,1;
By,1;
time,1;
executor,1;
and,1;
comes,1;
own,1;
as,1;
will,1;
see,1;
Chapter,1;
solution,1;
and,1;
will,1;
fall,1;
back,1;
implementation.
For,1;
and,1;
might,1;
gets,1;
could.
However,,1;
providing,1;
self
and,1;
destruction.,1;
careful,1;
then,1;
associated,1;
documentation!
As,1;
The,1;
moment,1;
will,1;
two,1;
longer,1;
will,1;
self,1;
and,1;
make,1;
turn,1;
You,1;
then,1;
and,1;
only,1;
already,1;
implement,1;
all
the,1;
The,1;
methods,1;
type.
46
Chapter,1;
make,1;
You,1;
can
“take”,1;
as,1;
can
take,1;
Vec,1;
values—std::mem::take,1;
gets,1;
and,1;
then,1;
modify,1;
data,1;
which
dereferences,1;
You,1;
The,1;
unsafe.,1;
place,1;
the
value,1;
will,1;
and,1;
will,1;
approaches,1;
fits,1;
err,1;
option,
and,1;
only,1;
find,1;
solution,1;
simple,1;
enough,1;
and,1;
so.
Obvious
While,1;
familiar,1;
they,1;
only,1;
moon,1;
a
47-degree,1;
and,1;
will,1;
they,1;
signatures.,1;
make,1;
as,1;
as,1;
possible,1;
and,1;
as,1;
as,1;
possible,1;
The,1;
two,1;
and,1;
let’s,1;
those,1;
turn.
NOTE
You,1;
advantage,1;
than,1;
meets,1;
named,1;
will,1;
entire,1;
let’s,1;
cases,1;
circumstances:,1;
might,1;
cases,1;
does.,1;
module,1;
These,1;
important,1;
than,1;
they,1;
everything,1;
fits
together.,1;
soon,1;
methods,1;
and,1;
and,1;
they,1;
and,1;
they,1;
and,1;
and,1;
then,1;
modify,1;
suit,1;
work,1;
than,1;
components.
NOTE
Very,1;
returns,1;
about,1;
organize,1;
types,,1;
module,1;
difficult,1;
advantage,1;
items.,1;
Then,,1;
about,1;
then,1;
make,1;
your
interface,,1;
they,1;
important,1;
consider,1;
parts,1;
reasons,1;
#[doc(hidden)],,1;
documentation.
And,1;
data,1;
elsewhere.
RFCs,,1;
and,1;
Use
#[doc(cfg(..))],1;
only,1;
certain,1;
quickly,1;
realizes,1;
isn’t,1;
=,1;
"...")],1;
make,1;
types,,1;
and,1;
system,1;
self-documenting,,1;
and,1;
misuse-resistant.,1;
You,1;
make,1;
and,1;
they,1;
will,1;
correctly.
The,1;
semantic,1;
typing,,1;
just,1;
The,1;
arguments,,1;
will,1;
and,1;
only,1;
three
arguments,1;
two-variant,1;
types,,1;
the
order,1;
compiler,1;
they,1;
will,1;
as,1;
You,1;
semantic,1;
as,1;
pointer,1;
only,1;
those,1;
true,1;
about,1;
operations
(methods),1;
make,1;
only,1;
example,
impossible,1;
rocket,1;
already,1;
it
should,1;
probably,1;
possible,1;
tank,1;
rocket,1;
model,1;
as,1;
then,1;
and,1;
we’d,1;
as,1;
Stage,,1;
and,1;
methods,1;
Grounded;
struct,1;
Launched;
//,1;
and,1;
=,1;
stage:,1;
fn,1;
fn,1;
fn,1;
fn,1;
color(&self),1;
Color,1;
fn,1;
}
}
Listing,1;
implementations
We,1;
rocket,1;
store,1;
stage—only,1;
store,1;
PhantomData,1;
Then,,1;
only,1;
You,1;
construct,1;
rocket,1;
only,1;
and,1;
only,1;
3.
Only,1;
rocket,1;
4.
There,1;
rocket,,1;
and,1;
those,1;
place,1;
block,1;
possible,1;
and,1;
as,1;
pointer,1;
argument,1;
argument,1;
combine,1;
two,1;
and,1;
true,1;
a
pointer,,1;
misunderstand,1;
rela-
tionship,1;
idea,1;
make,1;
and,1;
compiler,1;
will
issue,1;
warning,1;
or
calls,1;
and,1;
handle,1;
You,1;
already,1;
returns,1;
and,1;
compiler,1;
Be,1;
only,1;
make,1;
they,1;
will,1;
property,1;
bug,1;
true,1;
librar-
ies,1;
As,1;
result,,1;
make,1;
a
new,1;
make,1;
will,1;
and,1;
removing,1;
and,1;
tie
in,1;
and,1;
plan,1;
see,1;
against,1;
got,1;
give.
Type,1;
will,1;
certainly,1;
advantage,1;
pub(crate),1;
and,1;
path),,1;
The,1;
public
types,1;
than,1;
just,1;
and,1;
u,1;
=,1;
lib::Unit;
Listing,1;
consider,1;
happens,1;
Unit.,1;
Even
though,1;
will,1;
they,1;
Similarly,
consider,1;
and,1;
true,1;
3-4:,1;
User,1;
will,1;
this
time,1;
pattern,1;
checking,1;
see
parts,1;
see.,1;
there,1;
them,,1;
and,1;
pattern,1;
as,1;
similar,1;
issue,1;
turn,1;
tuple,1;
named,1;
are
exactly,1;
patterns,1;
will,1;
longer,1;
You,1;
and,1;
compiler,1;
will,1;
true,1;
and,1;
pattern,1;
(that,1;
patterns,1;
to
modify,1;
future.,1;
as,1;
users’,1;
pattern,1;
Chapter,1;
downstream,1;
true,1;
foreign
Designing,1;
change.
Removing,1;
conflict,1;
type.
Perhaps,1;
careful,1;
about,1;
see,1;
why,,1;
consider,1;
fn,1;
1.0
use,1;
crate1::{Unit,,1;
fn,1;
downstream,1;
will,1;
to
foo,1;
downstream,1;
and,1;
probably,1;
implementations.,1;
existing
implementations,1;
will,1;
continue,1;
apply.
I,1;
and,1;
“most”,1;
as,1;
lets,1;
skirt,1;
and,1;
For
example,,1;
there
are,1;
outside,1;
current,1;
consider.,1;
Similarly,
you,1;
implement,1;
types,,1;
implement,1;
other
traits.,1;
You,1;
only,1;
make,1;
implement,1;
usefulness,1;
downstream,1;
will,1;
longer,1;
implement,1;
for
52
Chapter,1;
3their,1;
own,1;
types.,1;
You,1;
can
be,1;
as,1;
arguments,,1;
as,1;
only,1;
and,1;
Launched,1;
and,1;
then,1;
implemen-
tations,1;
1,1;
impl<T>,1;
T,1;
TraitBounds,1;
T,1;
TraitBounds,1;
How,1;
and,1;
it
The,1;
empty,1;
as,1;
reach,1;
and,1;
thus,1;
implement,1;
The,1;
implement,1;
only,1;
explicitly
allow,1;
implement,1;
make,1;
implement,1;
make,1;
contract
elsewhere,1;
The,1;
two,1;
primary,1;
hap-
pens,1;
re-exports,1;
and,1;
auto-traits.
Re-Exports
If,1;
types,,1;
then,1;
those,1;
example,
consider,1;
happens,1;
your
interface.,1;
and,1;
as,1;
change
the,1;
longer,1;
true,1;
though
the,1;
bestiter
pub,1;
fn,1;
it:,1;
it:,1;
make,1;
does
not,1;
will,1;
longer,1;
no
types,1;
compiler,1;
(correctly),1;
itercrate2.0::Empty,1;
types.,1;
wrap,1;
using
the,1;
and,1;
then,1;
only,1;
parts,1;
only,1;
contract
to,1;
By,1;
make,1;
V,1;
way.,1;
type
did,1;
then,1;
compiler,1;
complicated.,1;
assume,1;
just,1;
two,1;
they,1;
the
same.,1;
simple,1;
a
#[derive(Copy)],1;
And,1;
work,1;
over
time,,1;
happen,1;
semantic,1;
happens,1;
level,,1;
ago,,1;
contributions),1;
He,1;
“the,1;
The,1;
T,1;
then,1;
and,1;
replaces,1;
T,1;
T,1;
there,1;
only,1;
versions.,1;
turn,,1;
on
1.0,1;
will,1;
T,1;
and,1;
And,1;
trick,,1;
were,1;
will,1;
continue,1;
contains.,1;
The,1;
relevant,1;
and,1;
Sized,,1;
and,1;
similar,1;
By,1;
These,1;
(generally),1;
they,1;
longer,1;
So,,1;
contains,1;
and,1;
longer,1;
then,1;
not
Send.,1;
and,1;
cases,1;
they,1;
simple,1;
might,1;
3-8:,1;
compiles.,1;
longer,1;
will,1;
and,1;
will,1;
just,1;
implementation.
HIDING,1;
lets,1;
item,1;
inaccessible,1;
happens,1;
methods,1;
and,1;
How,1;
a
matter,1;
marked,1;
as,1;
as,1;
effects;,1;
then,1;
methods,1;
make,1;
those,1;
And,1;
Interfaces
55Summary
In,1;
just,1;
as,1;
within,1;
and,1;
ultimately,,1;
guide,1;
unsurprising,,1;
and,1;
will,1;
and,1;
handle,1;
HANDLING
For,1;
simplest,1;
methods,1;
fail.,1;
and,1;
those,1;
and
the,1;
and,1;
We’ll,1;
including
enumeration,1;
and,1;
erasure,,1;
and,1;
then,1;
examine,1;
cases,1;
and,1;
handling.
It’s,1;
worth,1;
still
an,1;
active,1;
and,1;
time,1;
ecosystem
has,1;
will,1;
and,1;
than,1;
patterns.Representing,1;
Errors
When,1;
important,1;
will,1;
need
to,1;
and,1;
about,1;
will,1;
they,1;
and,1;
as,1;
receiving,1;
turn
will,1;
errors.
You,1;
two,1;
main,1;
representing,1;
errors:,1;
and,1;
era-
sure.,1;
possible,1;
them,,1;
just,1;
discuss,1;
two,1;
copies,1;
The,1;
two,1;
streams,,1;
and,1;
to,,1;
and
you,1;
During,1;
entirely
possible,1;
will,1;
a
web,1;
file,1;
might,1;
just,1;
disconnected.,1;
The,1;
copies,1;
shut,1;
The,1;
cases,1;
they,1;
named,1;
{
In(std::io::Error),
Out(std::io::Error),
}
Listing,1;
4-1:,1;
enumerated,1;
as,1;
about,1;
as,1;
own,1;
nicely,1;
implement,1;
std::error::Error,1;
methods,1;
types.,1;
The,1;
main,1;
mechanism,1;
find,1;
print,1;
backtrace,1;
trace,1;
back,1;
root,1;
source,1;
self,1;
and,1;
extract
and,1;
implement,1;
Display,1;
and,1;
print,1;
implement,1;
Display,1;
The,1;
and,1;
fits,1;
nicely,1;
tracking,1;
as,1;
and,1;
sufficient,1;
for.
NOTE
In,1;
see,1;
Error::description,1;
Display.
Third,,1;
implement,1;
and,1;
boundaries.,1;
thread-safe,,1;
will,1;
find,1;
impossible,1;
your
crate,1;
multithreaded,1;
implement,1;
and,1;
wrap,1;
implement,1;
and,1;
Sync.,1;
all
error,1;
and,1;
as,1;
thread-local,1;
resources,,1;
and,1;
okay.,1;
You’re,1;
probably,1;
those
errors,1;
go,1;
placing,1;
Rc<String>,1;
and,1;
'static.,1;
The,1;
types,
as,1;
see,1;
let’s,1;
consider,1;
library.,1;
and,1;
resolve,1;
and,1;
important,1;
algorithm,1;
Probably,1;
can’t,1;
from
either,1;
cases,1;
use,,1;
there,1;
only,1;
implement,1;
and,1;
source,1;
You,1;
fine-grained,1;
there,1;
need
to,1;
those,1;
library.,1;
only,1;
serve,1;
to
unnecessarily,1;
and,1;
complexity,1;
API.
Error,1;
It
could,1;
just,1;
only,1;
meth-
ods,1;
and,1;
severely
type-erased,1;
'static>,,1;
which
reveals,1;
than,1;
and,1;
make,1;
there,1;
description.,1;
Error>,,1;
bubble,1;
might,1;
truly,1;
if
it’s,1;
just,1;
deeper,1;
as,1;
consensus,1;
and,1;
should
not,1;
pointer,1;
as,1;
Box,1;
types.,1;
and,1;
then,1;
and,1;
they,1;
will,1;
'static>,1;
time,1;
erasure.,1;
about,1;
failed,,1;
bigger,1;
the
process,1;
item,1;
and,1;
casting,1;
cases,1;
general,1;
provide.,1;
downcasting,1;
particular
action,1;
they,1;
std::io::ErrorKind
::WouldBlock,,1;
they,1;
gets,1;
they,1;
The,1;
returns,1;
And,1;
key
observation:,1;
works,1;
only,1;
argument,1;
'static.,1;
an
opaque,1;
of
error,1;
they,1;
wish.
There’s,1;
about,1;
of
60
Chapter,1;
and,1;
as,1;
Error>,,1;
The,1;
hasn’t,1;
they,1;
back,1;
Error>,1;
about,1;
downcasting.
NOTE
While,1;
implement,1;
consider,1;
erasure,1;
libraries,1;
implement,1;
argument,1;
type
T?,1;
The,1;
for
any,1;
and,1;
The,1;
identifier,1;
The,1;
has
a,1;
whose,1;
TypeId::of::<Self>().,1;
and,1;
returns,1;
Self,1;
so
this,1;
identifier,1;
calls,1;
sized,1;
Chapter,1;
and,1;
they,1;
then,1;
and,1;
cast,1;
Cases
Some,1;
see,1;
as,1;
they
convey,1;
semantic,1;
meanings,,1;
and,1;
Option<T>.,1;
failed
and,1;
reported,,1;
None,
on,1;
conveys,1;
only,1;
return;
it,1;
exceptional,1;
should
be,1;
You,1;
see,1;
important,1;
Handling
61NOTE
You,1;
(),1;
implement,1;
Error>,1;
and,1;
own,1;
and,1;
as,1;
(),1;
those,1;
only,1;
occurs,,1;
they,1;
never
type,,1;
!,1;
The,1;
generated.,1;
You,1;
construct,1;
­yourself—
the,1;
only,1;
make,1;
special,1;
compiler,1;
Err,1;
will,1;
!,1;
!>,,1;
will,1;
only,1;
will,1;
compiler,1;
that
any,1;
!,1;
will,1;
as,1;
on
Result<T,,1;
And,1;
pattern,1;
compiler,1;
contains,1;
!,1;
Pretty,1;
=,1;
seen,1;
far.,1;
only,1;
and,1;
The,1;
only,1;
case,,1;
than,1;
and
the,1;
argument,1;
truly,1;
(even,1;
string).
Propagating,1;
as,1;
tricks,1;
worth
knowing,1;
returns,1;
erasure,1;
just,1;
and,1;
about,1;
and,1;
will,1;
just,1;
two,1;
ones,1;
and,1;
might,1;
strike,1;
as,1;
why
do,1;
and,1;
let’s,1;
start
with,1;
historical,1;
wouldn’t,1;
possible,1;
just,1;
discussed,1;
Chapter,1;
2.,1;
implement,1;
and,1;
You,1;
impl<T>,1;
MyType<T>,1;
and,1;
MyType<T>,1;
enough,,1;
only,1;
impl<T>,1;
impl<T>
Into<MyType<T>>,1;
compiler,1;
reject,1;
1.41.0,,1;
types
was,1;
they,1;
legal.,1;
And,1;
1.41.0,,1;
historical,1;
there,1;
rea-
sons,1;
Foo,
would,1;
From<T>?
And,1;
turn,1;
as,1;
Both,1;
and,1;
in
your,1;
The,1;
implement,1;
The,1;
for
any,1;
T,1;
Into!
Of,1;
as,1;
simple,1;
quite,1;
compiler,1;
through”,1;
as,1;
bound,,1;
than,1;
And,1;
the
compiler,1;
quite,1;
enough,1;
time,1;
time,1;
make,1;
difference,,1;
implement,1;
libraries,1;
implement,1;
As,1;
compiler,1;
gets,1;
smarter,,1;
will,1;
will,1;
go,1;
Handling
63The,1;
tentatively,1;
time,1;
time,1;
will,1;
only,1;
outline,1;
than,1;
signatures.,1;
whose,1;
path),,1;
will,1;
correctly,1;
continue,1;
and,1;
fur-
ther,1;
possible,1;
as,1;
about,1;
than,1;
continue,1;
None,,1;
continuing.,1;
pattern,1;
types,,1;
E>>,,1;
whose,1;
cases,1;
than,1;
might,1;
stabilizes,
we,1;
see,1;
work,1;
make,1;
path
code,1;
already,1;
and,1;
in
fn,1;
reach,1;
potential,,1;
this
error,1;
consider,1;
4-2.
fn,1;
do_the_thing(),1;
Error>,1;
=,1;
and,1;
quite,1;
work,1;
as,1;
and,1;
early,1;
entire,1;
skip,1;
single-iteration,1;
and,1;
block,1;
fix,1;
as,1;
do_the_thing(),1;
Error>,1;
=,1;
Thing::setup()?;
let,1;
=,1;
and,1;
cleans,1;
4Try,1;
time,1;
there,1;
enough
of,1;
consensus,1;
usefulness,1;
here.
Summary
This,1;
two,1;
primary,1;
construct,1;
and,1;
erasure.,1;
and,1;
and,1;
back,1;
and,1;
structure,1;
and,1;
as,1;
as
how,1;
and,1;
subcrates.,1;
simple,1;
structure,1;
You
may,1;
and,1;
about,1;
as,1;
a
project,1;
and,1;
find,1;
go,1;
compilation,1;
time,1;
integration.,1;
will,1;
and,1;
particular,,1;
make,1;
primary,1;
fea-
ture,1;
just,1;
build,1;
flag,1;
pass,1;
dependencies,1;
Features,1;
semantic,1;
and,1;
features,1;
components,1;
and,1;
augment,1;
features,1;
they,1;
signatures.,1;
stems,1;
simple,1;
make,1;
compiling.,1;
features,,1;
C,,1;
then,1;
against,1;
features,,1;
it
should,1;
features,1;
enabled,1;
quite,1;
two,1;
crates
(A,1;
and,1;
C,,1;
they,1;
features
on,1;
C,,1;
will,1;
only,1;
features,1;
features,1;
and,1;
crates;,1;
two,1;
will,1;
features,,1;
and,1;
those,1;
features,1;
downstream,1;
will,1;
integration,1;
infrastructure,1;
find,1;
and,1;
Including,1;
5-1,1;
simple,1;
syn.
[package]
name,1;
=,1;
"foo"
...
[features]
derive,1;
=,1;
=,1;
=,1;
=,1;
true,1;
5-1:,1;
dependency
When,1;
will,1;
time,1;
The,1;
will,1;
only,1;
downstream,1;
APIs,1;
enabled,1;
derive
feature,1;
and,1;
downstream
crate,1;
and,1;
thus,1;
=,1;
=,1;
=,1;
features,1;
=,1;
Enabling,1;
features,1;
than,1;
features,1;
And,1;
similarly,,1;
features,1;
5-3,1;
make,1;
enabled,1;
of
some,1;
features,1;
and,1;
only,1;
ones,1;
feature.
[package]
name,1;
=,1;
"foo"
...
[features]
derive,1;
=,1;
=,1;
=,1;
=,1;
=,1;
=,1;
true
Listing,1;
and,1;
features,,1;
and,1;
thus,1;
and,1;
features,,1;
will,1;
turn,,1;
will
be,1;
only,1;
features,,1;
and,1;
features,1;
and,1;
only,1;
need,,1;
equal,1;
5-3,,1;
as,1;
see,1;
as,1;
features,1;
and,1;
dependencies,1;
works,1;
time,1;
named,1;
package,1;
=,1;
"",1;
collision.,1;
The,1;
features,1;
features,1;
dependencies.
For,1;
=,1;
fea-
ture,1;
dependency.
Project,1;
Features,1;
features,,1;
make,1;
And,1;
make,1;
isn’t,1;
enabled,,1;
lets,1;
compilation,1;
behavior,1;
based,1;
similar,1;
You,1;
as,1;
see,1;
=,1;
“thing”,1;
source,1;
compiled,1;
only,1;
cfg!(feature,1;
=,1;
true,1;
only,1;
enabled,1;
than,1;
because
the,1;
behavior,1;
based,1;
difficult,1;
features,1;
You,1;
place,1;
certain,1;
as,1;
and,1;
and,1;
as,1;
certain,1;
arguments,,1;
and,1;
The,1;
go,1;
just,1;
appear,1;
compilation,1;
can’t,1;
and,1;
certain,1;
parts,1;
API,1;
inad-
vertently,1;
make,1;
turn,1;
make,1;
You,1;
for
backward,1;
as,1;
thumb,1;
feature,
then,1;
enabled,1;
tree.
NOTE
If,1;
will,1;
only,1;
consider,1;
components,1;
(usually
modules),1;
to,,1;
and,1;
compi-
lation,1;
only,1;
parts,1;
they,1;
roles,1;
Rust—they,1;
dependency
graph,,1;
and,1;
as,1;
compilation
70
Chapter,1;
compiler,1;
as,1;
source,1;
as,1;
chunk,1;
work,1;
compiler,1;
the
entire,1;
what,,1;
anything,,1;
speed,1;
and,1;
parallel,1;
generation,,1;
your
crate,1;
compile.
For,1;
as,1;
just,1;
make,1;
workspaces.,1;
col-
lection,1;
subcrates),1;
top-level
Cargo.toml,1;
file,1;
=,1;
own,1;
Cargo.toml,1;
they,1;
file,1;
and,1;
The,1;
members.,1;
required,,1;
prefix,
usually,1;
as,1;
tokio
crate,,1;
tokio-macros,,1;
and,1;
important,1;
invoking,1;
root,1;
they,1;
will,1;
will,1;
quite,1;
as
convenient,1;
as,1;
everything,1;
go,1;
every-
thing,1;
will,1;
need
to,1;
as,1;
two,1;
-p,1;
flag,1;
pass,1;
Cargo.toml,1;
workspace
members,,1;
path
dependencies,,1;
as,1;
=,1;
=,1;
}
#,1;
=,1;
=,1;
Intercrate,1;
dependencies,1;
make,1;
then,1;
only,1;
crate
is,1;
and,1;
compiler,1;
entire,1;
source,1;
DEPENDENCIES
The,1;
as,1;
instead.
Say,1;
=,1;
git,1;
=,1;
".,1;
and,1;
bar),1;
=,1;
will,1;
repository,,1;
entire,1;
and,1;
see,1;
turn,1;
located,1;
=,1;
"1.0.0",1;
and,1;
Git
repository,1;
two,1;
just,1;
happen,1;
name.
You,1;
already,1;
see,1;
API,1;
accepts,1;
compiler,1;
compiler,1;
they,1;
And,1;
will,1;
compiler,1;
will,1;
foo::Type,,1;
got
foo::Type.”
The,1;
dependencies,1;
only,1;
they,1;
As,1;
as,1;
=,1;
"1.0.0",1;
And,1;
depend
on,,1;
Now,1;
and,1;
see,1;
will,1;
tested,1;
probably,1;
integration,1;
infrastructure,1;
subcrate,1;
latest,1;
and,1;
path
dependencies.
72
Chapter,1;
sets,1;
Cargo.toml,1;
and,1;
empty,1;
of
dependencies.,1;
will,1;
as,1;
there
are,1;
Metadata
The,1;
and,1;
Cargo.toml,1;
meta-
data,1;
directives,1;
and,1;
run
with,1;
(default-run),,1;
and,1;
and,1;
help
crates.io,1;
layout,,1;
and,1;
These,1;
and,1;
published,1;
By,1;
directory,1;
except,1;
.gitignore,1;
not
be,1;
data,1;
directory,1;
As,1;
and,1;
patterns,
respectively.
NOTE
If,1;
published,1;
only,1;
cer-
tain,1;
(that,1;
publish,1;
directive
to,1;
directives,1;
page,1;
build,1;
to
write,1;
build,1;
Chapter,1;
two,1;
patches,1;
and,1;
Cargo.toml,1;
source,1;
for
a,1;
patched,1;
need
to,1;
against,1;
bug,1;
improvement,,1;
about,1;
local,1;
=,1;
=,1;
}
#,1;
git,1;
=,1;
git,1;
=,1;
=,1;
"faster",1;
}
#,1;
git,1;
dependency
[patch.'https://github.com/jonhoo/project.git']
project,1;
=,1;
=,1;
Cargo.toml,1;
care,1;
patching,1;
giving,1;
as,1;
=,1;
=,1;
package,1;
=,1;
=,1;
=,1;
package,1;
=,1;
Cargo.toml,1;
[patch]
Cargo,1;
will,1;
Cargo.toml,1;
4,1;
and,1;
contains,1;
5,,1;
and,1;
two,1;
The,1;
package,1;
nom,1;
cases,1;
left),1;
as,1;
default.,1;
You,1;
package,1;
way
in,1;
dependencies,1;
as,1;
rename,1;
patches,1;
account,1;
publish,1;
your
crate,1;
will,1;
only,1;
own,1;
crate!
CR,1;
V,1;
PACK,1;
difference,1;
package,1;
and,1;
two,1;
contexts,,1;
definitions,1;
as,1;
module,1;
root,1;
file,1;
contrast,,1;
package,1;
and,1;
metadata,,1;
Cargo.toml,1;
integration,1;
and,1;
Cargo.toml,1;
lets,1;
pass,1;
These,1;
fall,1;
pri-
marily,1;
options,,1;
options,,1;
and
options,1;
behavior,1;
primary,1;
The,1;
tweaks,1;
the
compiler,1;
aggressively,1;
all,”,1;
as,1;
The,1;
make,1;
comes,1;
cost
of,1;
only,1;
about,1;
the
compiler,1;
compilation,1;
(code,1;
compilation,1;
The,1;
pieces,1;
a
large,1;
compilation,1;
will,1;
compile,,1;
work,1;
segment—since,1;
two,1;
can’t
happen!,1;
By,1;
as,1;
as,1;
and,1;
time,1;
lto,1;
(LTO),,1;
the
compiler,1;
technical,1;
about,1;
as,1;
compilation,1;
were,1;
compiled,1;
The,1;
idea,1;
compilation
unit,1;
about,1;
all
the,1;
pass,1;
and,1;
pass,1;
time,1;
recovers,1;
particular,,1;
significant,1;
boosts,1;
might,1;
Beware,,1;
within,1;
by
default,1;
make,1;
only,1;
within,1;
than,1;
pass,1;
isn’t,1;
and,1;
time,1;
than,1;
time,1;
as,1;
pass,1;
pass,1;
flag,1;
and,1;
The,1;
flag,1;
compiled,1;
and,1;
than,1;
just
instruction,1;
and,1;
The,1;
debug-assertions,1;
and,1;
The,1;
flag,,1;
as,1;
checks,1;
operations.,1;
(notice,1;
tricky,1;
early,1;
By,1;
and,1;
flag,1;
deserves,1;
own,1;
subsection:,1;
happens,1;
calls,1;
You,1;
to
either,1;
We’ll,1;
talk,1;
and,1;
Chapter,1;
quick,1;
summary,1;
here.
Normally,1;
You,1;
as,1;
current,1;
main,1;
bar,,1;
and,1;
then,1;
bar,,1;
then,1;
and,1;
will
drop,1;
resources,,1;
and,1;
exit,1;
and,1;
unwinds,,1;
continue,1;
ran,1;
main,1;
terminate.,1;
in
which,1;
updat-
ing,1;
handle,1;
inconsistent,1;
will,1;
they,1;
were,1;
encounters,1;
will,1;
terminates,1;
entire,1;
than,1;
and,1;
special,1;
compiler,1;
and,1;
For
example,,1;
ensures,1;
and,1;
and,1;
immediately.
WARNING
The,1;
dependencies,1;
print,1;
calls,1;
discussed,1;
You,1;
rustc,,1;
back,1;
just,1;
profile,
using,1;
5-8,1;
and,1;
=,1;
=,1;
2
Listing,1;
(such,1;
as,1;
decompression,1;
video,1;
and,1;
to
complete.,1;
You,1;
file,1;
parameters,1;
parameters,1;
only,1;
compiled,1;
as,1;
crate;
if,1;
Structure
77the,1;
will,1;
monomorphized,1;
and,1;
your
crate,,1;
and,1;
will,1;
those,1;
Compilation
Most,1;
work,1;
system,1;
special,1;
work,1;
Windows,,1;
ARM,1;
or
when,1;
compiled,1;
against,1;
Or,1;
integration,1;
cases,1;
con-
ditional,1;
compiled,1;
certain,1;
true,1;
compilation,1;
compilation,1;
Features,1;
attribute)],,1;
compiled,1;
as,1;
and,1;
no-op,1;
You,1;
as,1;
construct,1;
options,,1;
=,1;
and,1;
and,1;
probably,1;
simple,1;
pairs,1;
those,1;
make,1;
go,1;
them,,1;
already,1;
seen,1;
=,1;
"name-of-feature",1;
and,1;
true,1;
named,1;
fea-
ture,1;
You,1;
features,1;
=,1;
"f1",,1;
true,1;
system,1;
options
These,1;
and,1;
and,1;
linux.,1;
You,1;
target_family,,1;
windows,1;
These,1;
are
common,1;
enough,1;
they,1;
own,1;
named,1;
and,1;
compiled,1;
only,1;
and
Windows,,1;
=,1;
5Context,1;
options
These,1;
compilation,1;
The,1;
true,1;
only,1;
crate
is,1;
compiled,1;
Keep,1;
integration,1;
compiled,1;
compiled,1;
(that,1;
The,1;
and,1;
doctest,1;
options,,1;
and,1;
(more,1;
compilation,1;
tools.
Usually,,1;
named,1;
under
Miri,,1;
options
These,1;
based,1;
compiler
is,1;
You,1;
target_arch,
which,1;
and,1;
find,1;
and
target_pointer_width,1;
options
These,1;
compiled,1;
msvc,,1;
and,1;
historical,1;
You,1;
only,1;
as,1;
against,1;
also
be,1;
only,1;
Windows,,1;
and,1;
probably,1;
Unix-based,1;
can
use,1;
=,1;
=,1;
"0.17"
Listing,1;
dependencies
Project,1;
only,1;
and,1;
0.17,1;
only
under,1;
and,1;
Unix-based,1;
early,1;
build,1;
only,1;
certain,1;
available.
In,1;
particular,,1;
and,1;
pull,1;
dependencies,1;
based,1;
contexts.,1;
You,1;
only,1;
as,1;
as,1;
infrastructure,1;
dependencies,1;
and,1;
These,1;
will,1;
cases,1;
unmaintained,1;
the
quality,1;
quite,1;
simple,1;
own,1;
You,1;
just,1;
make,1;
--cfg=myoption,1;
The,1;
machine:,1;
--cfg=ci,1;
and,1;
then,1;
and,1;
Cargo.toml,1;
and,1;
implemen-
tation,1;
semantic,1;
and,1;
and,1;
The,1;
worth,1;
(it’s,1;
version
change;,1;
and,1;
bug,1;
only,1;
constitutes,1;
Rust,
and,1;
touched,1;
go,1;
about,1;
different
types,1;
own,1;
debate,1;
about,1;
comes,1;
and,1;
and,1;
The,1;
they,1;
advantage,1;
APIs,,1;
will,1;
latest,1;
and,1;
will,1;
be
left,1;
two,1;
authors,1;
make,1;
easier
for,1;
The,1;
will,1;
The,1;
latest,1;
compiler,1;
(usually,1;
as,1;
pain,,1;
as,1;
advantage,1;
latest,1;
and,1;
greatest,1;
offer,,1;
will,1;
make,1;
make,1;
time,1;
So,,1;
release
version,1;
and,1;
then,1;
and,1;
your
crate,1;
specifier,1;
=,1;
important,1;
you
increment,1;
just,1;
fixes,1;
they,1;
and,1;
downstream,1;
will,1;
than,1;
strict,1;
requirements,1;
will,1;
see,1;
bug,1;
fixes,1;
with-
out,1;
issue,1;
as,1;
As,1;
solutions,1;
drawbacks.
Enforcing,1;
today,1;
guarantees,,1;
and,1;
your
dependencies,1;
will,1;
they,1;
turn,1;
and,1;
continue,1;
And,1;
carries,1;
build,1;
checking,1;
as,1;
Structure
81Minimal,1;
just,1;
current,1;
By,1;
compile,
but,1;
cases,1;
consider,1;
=,1;
latest,1;
published,1;
Now,1;
somewhere
depends,1;
they,1;
careful
about,1;
they,1;
=,1;
run
into,1;
=,1;
only,1;
then,1;
and
reports,1;
there,1;
there,1;
reasons,1;
The,1;
ones,1;
requirements,1;
will,1;
hasn’t,1;
and,1;
only,1;
as,1;
1.5.6.,1;
latest,1;
consider,1;
solution,1;
=,1;
then?,1;
quite,1;
only,1;
while
1.6.2,1;
You,1;
wouldn’t,1;
situations,1;
up
getting,1;
=,1;
compile!
The,1;
and,1;
make,1;
even
as,1;
and,1;
error?,1;
-Zminimal-versions,1;
flag,,1;
than,1;
Then,,1;
dependencies,1;
just,1;
latest,1;
compile,,1;
and,1;
dependencies,1;
don’t.
Rinse,1;
and,1;
everything,1;
and,1;
worth,1;
checking,1;
flag,1;
still
unstable).,1;
and,1;
=,1;
=,1;
"1.4",,1;
will,1;
flag,1;
it
82
Chapter,1;
versions.,1;
You,1;
work,1;
dependencies,1;
workarounds,1;
and,1;
You,1;
end
up,1;
dependencies,1;
only,1;
and,1;
as,1;
time,1;
current,1;
flag,1;
ones,1;
quite,1;
keeping,1;
frustrating,1;
than,1;
and,1;
then,1;
logs,1;
and,1;
just,1;
logs,1;
file,1;
named,1;
changelog,,1;
useful.
A,1;
simple,1;
Keep,1;
source,1;
semantic,1;
published,1;
Cargo.toml,1;
The,1;
semantic,1;
handle,1;
case,,1;
works,1;
onerous.
After,1;
published,1;
Cargo.toml,1;
suffix,1;
just,1;
make,1;
make,1;
for
additive,1;
happens,,1;
and,1;
current,1;
2.0.4-alpha.2,
and,1;
make,1;
make,1;
already,1;
just,1;
make,1;
suffix,1;
a
prerelease),,1;
then,1;
and,1;
process,1;
two,1;
they,1;
only,1;
will,1;
as,1;
procedure,1;
and,1;
resolve,1;
they,1;
just,1;
isn’t,1;
yet.
They’ve,1;
already,1;
just,1;
they,1;
will,1;
find,1;
longer,1;
will,1;
checkout.,1;
then,1;
will,1;
outdated.
This,1;
and,1;
work,1;
versions.,1;
two,1;
against,1;
and,1;
make,1;
will,1;
worried,1;
about,1;
numbers
in,1;
number.,1;
Be,1;
make,1;
make,1;
quite,1;
and,1;
own,1;
and,1;
and,1;
features,1;
future.,1;
turn,1;
and,1;
you
go,1;
simple,1;
and,1;
love.
84
Chapter,1;
and,1;
facilities,1;
that
are,1;
The,1;
and,1;
These,1;
will,1;
serve,1;
and,1;
scales,1;
and,1;
as,1;
and,1;
go,1;
just,1;
two,1;
main,1;
The,1;
covers
Rust,1;
harness,1;
and,1;
The,1;
as,1;
linting,,1;
and,1;
fuzzing.Rust,1;
Mechanisms
To,1;
provides,,1;
and,1;
only,1;
special,1;
pass,1;
flag,1;
scenes,,1;
primary,1;
(more,1;
main,1;
invokes,1;
run.
The,1;
compiler,1;
generates,1;
harness,1;
main,1;
mix,1;
discuss,1;
Chapter,1;
harness,1;
then,1;
The,1;
descriptor,1;
test’s,1;
harness,1;
them,,1;
results,,1;
and,1;
So,,1;
and,1;
harness,1;
API,1;
build,1;
own,1;
work,1;
fairly,1;
model,1;
as,1;
main,1;
they,1;
process,1;
as,1;
they,1;
compiled,1;
as,1;
they,1;
only,1;
main,1;
and,1;
against,1;
main,1;
compiled,1;
A
test,1;
harness,1;
file,1;
tests/,1;
harness,1;
file,1;
file,1;
You,1;
and,1;
implement,1;
own,1;
main,1;
runner,1;
harness,1;
=,1;
integration,1;
as,1;
The,1;
main,1;
invoked,1;
=,1;
"custom"
path,1;
=,1;
=,1;
harness,,1;
own,1;
main,1;
binary
that,1;
just,1;
happens,1;
test.,1;
for
handling,1;
harness,1;
as,1;
The,1;
harness,1;
property,1;
integration,1;
file,1;
harness,1;
and,1;
T,1;
harness,1;
to
configure,1;
These,1;
and,1;
test.,1;
pass,1;
see,1;
The,1;
--nocapture,1;
flag,1;
that
normally,1;
happens,1;
test’s,1;
time,1;
than,1;
--test-threads,1;
limit,1;
hangs,1;
and,1;
certain,1;
ignored,1;
(such,1;
as,1;
those,1;
run-
ning),,1;
and,1;
just,1;
(with,1;
harness,1;
=,1;
implement,1;
the
ones,1;
main,1;
harness,1;
bench-
marks,,1;
as,1;
see,1;
they,1;
fit,1;
see,1;
fuzzers,,1;
model,1;
and,1;
sets,1;
compiler,1;
then,1;
compilation,1;
compiled,1;
You,1;
exclusively,1;
tight,1;
as
well,1;
as,1;
probably,1;
tests
over,1;
and,1;
when.,1;
data,1;
your
test,1;
returns,1;
You,1;
as,1;
sequence,1;
emitted.
These,1;
and,1;
as,1;
and,1;
mock-
ing,1;
comes,1;
will,1;
facilities,1;
functions),1;
as,1;
as,1;
and,1;
those,1;
happens,1;
as,1;
data,1;
object),,1;
will,1;
those,1;
You,1;
constructs,1;
types,,1;
and,1;
situations,1;
inconvenient,1;
users,
you,1;
and,1;
behavior,1;
You,1;
then,1;
methods,1;
and,1;
compilation,1;
mocked
implementation,1;
"test_mock_foo").
At,1;
there,1;
isn’t,1;
library,,1;
mock-
ing,1;
as,1;
True,1;
and,1;
active,1;
and,1;
there,1;
only,1;
correctly,1;
internal,1;
example,
consider,1;
The,1;
just,1;
table,1;
empty,1;
as,1;
6-2.
#[test]
fn,1;
m,1;
=,1;
());
let,1;
=,1;
6-2:,1;
inaccessible,1;
internal,1;
and,1;
thus,1;
will,1;
as,1;
table,1;
RawTable,,1;
as,1;
fix
this,1;
as,1;
internal,1;
as,1;
as,1;
then,1;
internal,1;
RawTable,,1;
solution,1;
only,1;
as,1;
6-3,
and,1;
The,1;
6-2,1;
then,1;
fn,1;
&[Bucket],1;
6-3:,1;
make,1;
internal,1;
accessible,1;
only,1;
augment,1;
then,1;
writ-
ing,1;
own,1;
library.,1;
make,1;
issue,1;
system,1;
The,1;
keep
track,1;
invoked,1;
isn’t,1;
and,1;
and,1;
happen,1;
only,1;
fields...
}
impl<T:,1;
Write,1;
write(&mut,1;
Result<usize>,1;
=,1;
limit,1;
only,1;
compiled,1;
test.,1;
as,1;
For
integration,1;
integration,1;
compiled,1;
test—the,1;
just,1;
compiled,1;
as,1;
and,1;
will,1;
These,1;
as,1;
and,1;
to
mimic,1;
they,1;
they,1;
as,1;
integration,1;
and,1;
and,1;
main,1;
doctest,1;
compiled,1;
as,1;
own,1;
and,1;
just,1;
as,1;
own,1;
program.
Behind,1;
scenes,,1;
compiler,1;
make,1;
fn,1;
main,1;
only,1;
care,1;
about,,1;
parts,1;
and,1;
methods,1;
library,,1;
unneces-
sary,1;
own,1;
fn,1;
main,1;
You,1;
main,1;
doctest,,1;
main,1;
as,1;
Debug>,1;
inference,1;
doctest,1;
features,1;
The,1;
doctest,1;
line
is,1;
doctest,1;
compiled,1;
and,1;
lets,1;
hide
details,1;
important,1;
current,1;
as,1;
sequence,1;
code
each,1;
6-5,1;
doctest,1;
frobnifies,1;
I/O.
///
///,1;
```
///,1;
=,1;
=,1;
```
///
///,1;
and,1;
thus,1;
type,
///,1;
don't,1;
```
///,1;
```
///
///,1;
You,1;
entire,1;
block,1;
_very_,1;
```
///,1;
=,1;
=,1;
42;
///,1;
frobnify(i:,1;
std::io::Result<()>,1;
Hiding,1;
doctest,1;
frustrating,1;
they,1;
then,1;
work,1;
doctest,1;
These,1;
go,1;
the
triple-backtick,1;
block,,1;
and,1;
doctest,1;
only,1;
You,1;
run.
The,1;
possible,1;
and,1;
as,1;
relevant,1;
certain,1;
types.,1;
implement,1;
{}
is_send::<MyNonSendType>();
```
Listing,1;
fairly,1;
crude,1;
will,1;
appear,1;
only,1;
have
made,1;
fine-grained,1;
compilation,1;
as,1;
when
developing,1;
than,1;
just,1;
and,1;
and,1;
outside,1;
there,1;
pieces,1;
about,1;
as,1;
consider,1;
checks,1;
they,1;
The,1;
linter,1;
as,1;
6lints.,1;
These,1;
patterns,1;
=,1;
b;,1;
=,1;
and,1;
and,1;
only,1;
y.,1;
as,1;
probably,1;
be.
Clippy,1;
comes,1;
opinionated,1;
than,1;
warning,1;
Rc<Vec<Vec<Box<(u32,,1;
that
warning,1;
encourages,1;
find,1;
lint,,1;
just,1;
just,1;
compiler,1;
comes,1;
own,1;
than,1;
checking,1;
com-
piler,1;
as,1;
compiler,1;
enabled,1;
default.,1;
about,1;
than,1;
lint,,1;
enabled,,1;
compiler,1;
will,1;
types,
respectively.
Test,1;
And,1;
only,1;
behaviors,1;
were,1;
time,1;
advantage,1;
and,1;
thor-
ough,1;
These,1;
application’s
correctness.,1;
own,1;
strengths,1;
and
weaknesses,,1;
only,1;
main,1;
and,1;
property,1;
testing.
Fuzzing
Entire,1;
about,1;
idea,1;
inputs,1;
and,1;
see,1;
crashes.,1;
and,1;
results:,1;
then,1;
and,1;
will,1;
time,1;
tricky,1;
modern,1;
to
explore,1;
lets,1;
reach,1;
degrees
of,1;
than,1;
inputs,1;
were,1;
truly,1;
cases,1;
correctly.,1;
just,1;
“fuzzable”,1;
and,1;
goes.,1;
might,1;
Ok(s),1;
=,1;
=,1;
6-7:,1;
libfuzzer
The,1;
will,1;
inputs,1;
and,1;
will,1;
Notice,1;
fails—instead,,1;
it’s
looking,1;
cases,1;
crashes,1;
inter-
nal,1;
keeps,1;
terminate,1;
tools
come,1;
mechanism,1;
certain,1;
isn’t,1;
table—you,1;
turn,1;
generates,1;
The,1;
method,
arbitrary,,1;
constructs,1;
source,1;
construct,1;
BTreeSet,1;
length,1;
and,1;
then,1;
their
inner,1;
types.,1;
just,1;
only,1;
crash,1;
comes,1;
and,1;
then,1;
property
testing,1;
generates,1;
inputs,1;
and,1;
checks,1;
those,1;
6A,1;
simple
but,1;
Then,,1;
and,1;
property,1;
as,1;
strictly,1;
time,1;
for
one,1;
than,1;
The,1;
difference,1;
and,1;
and,1;
make,1;
might,1;
augment,1;
std::collections::VecDeque),,1;
algorithm,1;
inputs,1;
than,1;
“it,1;
inputs.,1;
Whereas,1;
will,1;
possible,1;
property,1;
anno-
tations,1;
and,1;
contains,1;
property,1;
quickly,1;
reach,1;
cases,1;
time,1;
encounter,1;
and,1;
important,1;
inputs.,1;
As,1;
and,1;
of
constraint-based,1;
as,1;
about,1;
generation,,1;
OPER,1;
ATIONS
Since,1;
and,1;
property,1;
types,
you,1;
say
you,1;
Foo,1;
correctly,1;
sequence,1;
You,1;
and,1;
make,1;
Vec<Operation>.,1;
Foo,1;
and,1;
other.
Most,1;
they,1;
will,1;
sequence,1;
property,1;
and,1;
crashes,1;
reasons,1;
might,1;
only,1;
two,1;
and,1;
undefined,1;
behavior,1;
uninitialized,1;
sufficient,1;
and,1;
system,1;
factors,1;
You,1;
there
are,1;
augment,1;
make,1;
MIR,1;
compiler,1;
find,1;
and
check,1;
consider,1;
Rust
itself.,1;
Running,1;
as,1;
simple,1;
as,1;
interprets,1;
than,1;
and,1;
slower.,1;
entire,1;
as,1;
and,1;
certain,1;
undefined,1;
as,1;
uninitialized,1;
Rather,1;
than,1;
only,1;
crashes),
Miri,1;
they,1;
happen,1;
and,1;
consider,1;
two,1;
=,1;
i32,1;
=,1;
(x1,,1;
=,1;
Wildly,1;
incorrect
At,1;
time,1;
Undefined,1;
reborrow,1;
tag,1;
item,1;
(x1,,1;
=,1;
};
|
^^,1;
reborrow,1;
parent,1;
tag,1;
item,1;
6NOTE
Miri,1;
and,1;
time,1;
already,1;
worth,1;
relevant,1;
level,,1;
keeps,1;
and,1;
and,1;
over,,1;
in
which,1;
those,1;
So,,1;
and,1;
will,1;
and,1;
keeps,1;
accesses,,1;
and,1;
discuss,1;
Chapter,1;
and,1;
checks,1;
crash,1;
difficult,1;
having
such,1;
important;,1;
spot,1;
regression.,1;
might,1;
Both,1;
reasons,1;
as,1;
direction,,1;
about,1;
well-defined,1;
will,1;
processed,1;
relevant,1;
difficult,1;
about,1;
general,1;
encounter,1;
and,1;
miti-
gate,1;
compiler,1;
and,1;
Variance
Performance,1;
huge,1;
and,1;
factors,1;
sequence,1;
and,1;
clock,1;
length,1;
might,1;
and,1;
room,1;
might,1;
significant,1;
viewed,1;
benchmarking,1;
results,,1;
happen,1;
important,1;
as,1;
and,1;
then,1;
look
at,1;
than,1;
just,1;
than,1;
range,1;
rigorous,,1;
build,1;
confidence,1;
true,1;
and,1;
just,1;
work,1;
already,1;
and,1;
you
have,1;
and,1;
will,1;
reliable.,1;
then,1;
summary,1;
results,,1;
outliers,,1;
and,1;
can’t,1;
just,1;
executions.
Compiler,1;
and,1;
vs,1;
=,1;
Vec::with_capacity(4);
let,1;
=,1;
0..4,1;
suspiciously,1;
were,1;
compiled,1;
calls,1;
and,1;
and,1;
The,1;
compiler,1;
and,1;
as,1;
compiler,1;
within,1;
benchmarking,1;
not
particularly,1;
helpful.
To,1;
std::hint::black_box.,1;
of
much,1;
debate,1;
and,1;
and,1;
stabilization,1;
time,1;
of
writing,,1;
worth,1;
identity,1;
and,1;
returns,1;
the
compiler,1;
assume,1;
argument,1;
arbitrary
(legal),1;
compiler,1;
compiler,1;
encourages,1;
compiler,1;
actually
compute,1;
argument,1;
will
be,1;
and,1;
store,1;
accessible,1;
that
black_box,1;
The,1;
compiler,1;
to,
say,,1;
argument,1;
admittedly,1;
longer,1;
as,1;
vs,1;
=,1;
Vec::with_capacity(4);
let,1;
=,1;
0..4,1;
{
black_box(vs.as_ptr());
vs.push(i);
black_box(vs.as_ptr());
}
println!("took,1;
corrected,1;
compiler,1;
assume,1;
vs,1;
and,1;
calls,1;
compiler,1;
assume,1;
black_box,1;
vs,1;
call.
Note,1;
and,1;
compiler,1;
assume,1;
black_box,1;
legal,1;
legal,1;
Vec,1;
refer-
ence,,1;
compiler,1;
might,1;
vs,1;
will,1;
iterations,1;
and,1;
implement,1;
based,1;
Measurement
When,1;
benchmarks,,1;
time,1;
might,1;
6-11,,1;
my_function,1;
=,1;
benchmarking,1;
my_function,1;
print,1;
million,1;
The,1;
println!,1;
work,1;
printing,,1;
system,1;
and,1;
then,1;
lock.,1;
only,1;
system,1;
might,1;
block,1;
print,1;
time,1;
my_function,1;
might,1;
similar,1;
happens,1;
numbers.
If,1;
time,1;
million,1;
The,1;
current,1;
speaking,,1;
time,1;
issue,1;
work,1;
are
aware,1;
benchmarking,1;
contains
almost,1;
measure.,1;
begins,1;
outside,1;
loops,1;
there,1;
benchmarking,1;
capabilities,1;
Rust
offers,1;
facilities,1;
book.
Starting,1;
and,1;
page!
100
Chapter,1;
compiler,1;
You,1;
compiler,1;
formula,1;
parameters,,1;
and,1;
compiler
replaces,1;
You,1;
as,1;
and,1;
make,1;
implement,1;
The,1;
two,1;
and,1;
and,1;
will,1;
We’ll,1;
and,1;
coming,1;
the
unholy,1;
and,1;
C++,1;
true,1;
West,1;
macros.,1;
well-defined,1;
and,1;
fairly,1;
Macros
Declarative,1;
those,1;
name
of,1;
as,1;
and,1;
and,1;
experience,1;
point,,1;
as,1;
macros.,1;
and,1;
another.
The,1;
!,1;
suffix,1;
compiler,1;
will
be,1;
source,1;
and,1;
parses,1;
only,1;
places,1;
work,1;
places,1;
block,,1;
every-
where.,1;
time,1;
identifier,1;
arm,1;
everything,1;
In
this,1;
context,,1;
refers,1;
translated,1;
just,1;
You,1;
and,1;
com-
piler,1;
happen,1;
make,1;
concise,1;
and,1;
make,1;
find,1;
and,1;
over,,1;
and,1;
to,,1;
fairly,1;
generation,,1;
are
likely,1;
cases,1;
find,1;
and,1;
similar,1;
as,1;
and,1;
trait
102
Chapter,1;
slightly,1;
might,1;
frobnify:,1;
...
#[test]
fn,1;
and,1;
as,1;
{
($($t:ty,1;
as,1;
{
u8,1;
as,1;
as,1;
7-2:,1;
Making,1;
you
This,1;
own,1;
then,1;
contains,1;
two,1;
calls,1;
test_inner,1;
and,1;
isn’t,1;
more
tests,1;
and
the,1;
will,1;
care,1;
true,1;
and,1;
implement,1;
library,,1;
those,1;
imagine
you,1;
and,1;
implement,1;
library.,1;
for
each,1;
clone_from_copy,1;
Self,1;
f32,,1;
implement,1;
similar,1;
just,1;
*,1;
You,1;
don’t
add,1;
T,1;
own,1;
compiler,1;
time,1;
stabilization,1;
So,,1;
time,1;
being,,1;
pattern,1;
simple,1;
implement,1;
AddOne,1;
find,1;
than,1;
constructs,1;
of
thumb:,1;
based,1;
indi-
vidual,1;
make,1;
source,1;
tokens.
Tokens,1;
as,1;
and,1;
and,1;
identifiers;,1;
level,,1;
and,1;
sequence,1;
grammar.,1;
The,1;
process,1;
layer,1;
the
compiler,1;
and,1;
text.,1;
token,1;
there,1;
and,1;
"/*foo*/",1;
and,1;
token,1;
source,1;
sequence,1;
the
compiler,1;
walks,1;
sequence,1;
and,1;
For
example,,1;
()-delimited,1;
make,1;
!,1;
and,1;
process,1;
structure,1;
As,1;
consider,1;
=,1;
sequence,1;
(keyword),,1;
(identifier),,1;
=,1;
instances,1;
and,1;
4,1;
compiler,1;
that
into,1;
as,1;
whose,1;
pattern,1;
identifier,1;
whose,1;
empty,1;
argument,1;
and,1;
a
literal,1;
4,1;
as,1;
Notice,1;
than,1;
token,1;
token,1;
combinations,1;
following,1;
sequence,1;
compiler,1;
encounters,1;
will,1;
point,,1;
compiler,1;
and,1;
might,1;
compiler,1;
within,1;
delimiters,1;
and,1;
remem-
bers,1;
token,1;
compiler,1;
ready,1;
token,1;
parses,1;
yields,,1;
and,1;
substitutes,1;
compiler,1;
parses,1;
groups,1;
and,1;
sequence,1;
token,1;
trees,1;
than,1;
-,1;
parses,1;
as,1;
sequence,1;
three
token,1;
The,1;
token,1;
token,1;
identifier,1;
token,1;
-,,1;
and,1;
as,1;
a
sequence,1;
token,1;
(another
identifier),,1;
and,1;
4,1;
necessarily,1;
compiler,1;
you
couldn’t,1;
outside,1;
as,1;
as,1;
syntax.
On,1;
pass,1;
as,1;
You,1;
half,1;
block,1;
as,1;
=,1;
item,1;
block,,1;
resistant,1;
generates,1;
there,1;
compiler,1;
encounters,1;
delimiters,1;
parses,1;
and,1;
replaces,1;
Write,1;
outside,1;
basics,1;
as,1;
there,1;
worth,1;
two,1;
main,1;
parts:,1;
matchers,1;
and,1;
and,1;
compiler,1;
finds,1;
matchers,1;
and,1;
finds,1;
substitutes,1;
parts,1;
fit,1;
together.
macro_rules!,1;
{
(/*,1;
1st,1;
1st,1;
as,1;
token,1;
compiler,1;
and,1;
predefined,1;
token,1;
As,1;
consider,1;
$b:expr.,1;
will,1;
identifier,1;
(:ident),1;
*,1;
5,,1;
compiler,1;
sets,1;
$a,1;
=,1;
=,1;
*,1;
*,1;
compiler
realizes,1;
*,1;
and,1;
accepts,1;
:expr,1;
part).
Matchers,1;
they,1;
huge,1;
power,
much,1;
not-too-hairy,1;
sequence,1;
invokes,1;
value—the,1;
will,1;
make,1;
and,1;
partitioned
appropriately.
Macro,1;
fragment,1;
already,1;
and,1;
:expr,1;
there,1;
token,1;
You,1;
find,1;
frag-
ment,1;
Chapter,1;
(https://doc.rust-lang
.org/reference/macros-by-example.html).,1;
mechanism,1;
match-
ing,1;
pattern,1;
repeatedly,1;
($()),,1;
find,1;
difficult,1;
instead,
106
Chapter,1;
7where,1;
strict,1;
requires.
We’ll,1;
compiler,1;
associated,1;
The,1;
and,1;
compiler,1;
substitutes,1;
section),1;
matcher.
If,1;
and,1;
will,1;
for
each,1;
following,1;
$key/$value,1;
pair,1;
semicolon,1;
just,1;
place,1;
semicolon,1;
there,1;
than,1;
and,1;
work,1;
with,,1;
necessarily,1;
under-
standing,1;
means.,1;
(generally),1;
the
name,1;
and,1;
then,1;
named,1;
place,1;
(even,1;
they,1;
as,1;
they,1;
expand,1;
fails),1;
shadow,1;
=,1;
=,1;
1;
//,1;
=,1;
own,1;
Mostly.
Macros
107After,1;
compiler,1;
original,1;
and,1;
and,1;
they,1;
happen,1;
the
compiler,1;
will,1;
debug—you
don’t,1;
about,1;
just,1;
types,,1;
invoking,1;
module,1;
that
can,1;
then,1;
accessed,1;
and,1;
broader,1;
be
much,1;
types,,1;
implementa-
tions,,1;
and,1;
they,1;
important,1;
reusable,,1;
assume,1;
about,1;
will,1;
calls,1;
std,1;
own,1;
make,1;
refer,1;
special,1;
will,1;
continue,1;
work,1;
and,1;
caller’s,1;
The,1;
identifier,1;
originated,,1;
identifier,1;
will,1;
to.,1;
=,1;
and,1;
will,1;
$foo:ident
as,1;
argument,1;
and,1;
then,1;
=,1;
invokes,1;
!(foo),,1;
identifier,1;
will,1;
and,1;
refer,1;
caller’s,1;
identifier,1;
quite,1;
either;,1;
outside,1;
will,1;
identifier,1;
caller’s,1;
7-6,,1;
identifier,1;
:expr,1;
caller’s,1;
$x:expr),1;
=,1;
7}
let,1;
=,1;
=,1;
1,1;
=,1;
1,1;
as,1;
and,1;
unlike,1;
source,1;
only,1;
declared.,1;
will,1;
project;,1;
module,1;
and,1;
another,,1;
module,1;
appear,1;
earlier,1;
and,1;
root,1;
and,1;
use,,1;
appear,1;
(formally,1;
textual,1;
and,1;
#[macro_export].,1;
root,1;
and,1;
as,1;
then,1;
as,1;
and,1;
level,,1;
with
procedural,1;
compiler,1;
sequence,1;
and,1;
generate
code,1;
than,1;
just,1;
gets,1;
gener-
ated.,1;
smarts,1;
as,1;
source,1;
The,1;
about,1;
Procedural,1;
flavors,,1;
case:
•
•
•
Function-like,1;
ones,1;
compiler,1;
sequence,1;
and,1;
produce
Macros
109a,1;
sequence,1;
they,1;
invoked,1;
and,1;
We’ll,1;
simplest,1;
replaces,1;
returns.,1;
unlike,1;
rails,1;
mac-
ros),1;
and,1;
will,1;
overlap
with,1;
Span::call_site),1;
and,1;
be
treated,1;
as,1;
Span::mixed_site,,1;
replaces,1;
item,1;
two,1;
token,1;
(minus,1;
and,1;
token,1;
entire,1;
to,,1;
item,1;
Attribute
macros,1;
as,1;
slightly,1;
two,1;
adds
to,,1;
than,1;
were,1;
original,1;
macros.,1;
implement,1;
simplest,1;
they,1;
append,1;
only,1;
item;,1;
can’t,1;
item,,1;
and,1;
Derive,1;
helper
attributes—attributes,1;
and,1;
Procedural,1;
talk,1;
about,1;
worth,1;
before
you,1;
reach,1;
reasons.,1;
The,1;
they,1;
7heavy,1;
token,1;
experience,1;
procedural
macros,1;
seconds,1;
You,1;
should),1;
features,1;
and,1;
Code,1;
and,1;
time,1;
they,1;
make,1;
saves,1;
compiler,1;
compile,,1;
and,1;
As,1;
up,
and,1;
times.
That,1;
time,1;
compiler,1;
heavy,1;
significant,1;
chunk,1;
time,1;
code,
which,1;
worth,1;
keeping,1;
You,1;
Think,1;
You,1;
macros.
When,1;
Derive,1;
thing,,1;
and,1;
automate,1;
only,1;
implemented
often,1;
and,1;
fairly,1;
The,1;
sense;,1;
be
implemented,1;
only,1;
probably,1;
worth,1;
and,1;
main-
taining,1;
it.
The,1;
however:,1;
and,1;
were,1;
And,1;
about,1;
probably,1;
just,1;
does.,1;
we
expect,1;
and,1;
and,1;
just,1;
intuition,1;
probably,1;
does.,1;
there,1;
probably,1;
giving,1;
general,1;
thumb,1;
for.,1;
function-
like,1;
can’t,1;
fairly,1;
You,1;
two,1;
reasons,1;
reach,1;
already,1;
and,1;
hairy,1;
maintain.
If,1;
time,1;
generates,1;
and,1;
replaces,1;
bytes.,1;
time,1;
just,1;
within,1;
a
feature,1;
and,1;
very
carefully,1;
it.
When,1;
macros.,1;
they,1;
Over,1;
and,1;
time,1;
and,1;
time,1;
seen,1;
which
attribute,1;
different
configurations,,1;
similar,1;
bootstrapping,1;
and,1;
maintain,1;
and,1;
rocket,1;
augment,1;
and
types,1;
then,1;
without
the,1;
manual,1;
#[get("/<name>")],1;
fn,1;
and
112
Chapter,1;
7the,1;
make,1;
(DSL),1;
that’d,1;
lets,1;
fn,1;
and,1;
main,1;
libraries,1;
application’s
functionality.,1;
tracing,1;
and,1;
libraries,1;
tracing,1;
libraries,1;
and,1;
then,1;
will,1;
dictated,1;
go,1;
way.,1;
The,1;
primary,1;
implement,1;
strict,1;
Pin,1;
type
and,1;
Unpin,1;
talk,1;
about,1;
those,1;
Chapter,1;
8).
It,1;
types,,1;
methods,1;
and,1;
checks,1;
which
violates,1;
Work?
At,1;
make,1;
delimiter,1;
(),1;
By
walking,1;
TokenStream,,1;
as,1;
as,1;
will,1;
and,1;
turn,1;
AST.
With,1;
only,1;
invokes,1;
two,1;
main,1;
The,1;
and,1;
The,1;
lets,1;
You,1;
mix,1;
and,1;
just,1;
construct,1;
and,1;
then,1;
append,1;
original,1;
comes,1;
slightly,1;
magical,1;
than,1;
and,1;
the
compiler,1;
back,1;
source,1;
token,1;
(declarative),1;
generates,1;
type.
macro_rules!,1;
{
($t:ty),1;
fmt(&self,,1;
}
},1;
simple,1;
let’s,1;
invokes,1;
name_as_debug!
(u31).,1;
compiler,1;
handle,1;
compiler,1;
code—and,1;
then,1;
com-
piler,1;
and,1;
associated,1;
eventual,1;
compiler,1;
compiler,1;
will,1;
print,1;
will,1;
associated,1;
quite,1;
and,1;
they,1;
procedural
macros,1;
As,1;
com-
piler,1;
as,1;
pair,1;
equal,1;
compiler,1;
compiler,1;
and,1;
two,1;
relevant,1;
though
the,1;
compiler,1;
only,1;
own,1;
macro
hygiene,1;
construct,1;
and,1;
identi-
fier.,1;
and,1;
will,1;
thus,1;
then,1;
(variable),1;
will,1;
named,1;
variables
at,1;
identifier,1;
as,1;
discussed,1;
identifier,1;
for
variables,1;
and,1;
types,,1;
and,1;
everything,1;
and,1;
and
looked,1;
might,1;
find,1;
own,1;
We
also,1;
deeper,1;
dive,1;
and,1;
features,1;
and,1;
write
your,1;
own,1;
macros.,1;
asyn-
chronous,1;
and,1;
just,1;
as,1;
the
name,1;
level,,1;
asyn-
chronous,1;
will,1;
instead
­continue,1;
already,1;
familiar,1;
programming,,1;
defini-
tion,1;
as,1;
asynchronous
programming,1;
and,1;
works,1;
important
in,1;
concepts,1;
and,1;
solution,1;
We’ll,1;
quick,1;
as,1;
works,1;
hood.
What’s,1;
Deal,1;
and,1;
quick,1;
is
actually,1;
fast.,1;
fast.,1;
they,1;
of
their,1;
time,1;
files,
encoding,1;
crunching,1;
just,1;
main,1;
CPU’s
perspective,,1;
eons,1;
go,1;
events.,1;
occur,,1;
then,1;
back,1;
a
look,1;
probably,1;
digits,
and,1;
hovers,1;
in
your,1;
only,1;
see,1;
go,1;
and,1;
they,1;
and,1;
continue,1;
The,1;
this,
as,1;
see,1;
asynchronous
takes,1;
asyn-
chrony,,1;
sticking,1;
model,1;
waiting;,1;
calls,1;
a
function,1;
and,1;
time,1;
and,1;
happens,1;
system,1;
and,1;
then,1;
The,1;
experiences,1;
as,1;
time,1;
isn’t,1;
just,1;
waiting.
An,1;
as,1;
event,1;
happen,1;
make,1;
event,1;
refer,1;
as,1;
idea,1;
same:,1;
appli-
cation,1;
current,1;
finishes.,1;
work,1;
simple,1;
about,,1;
just,1;
8But,1;
they,1;
only,1;
system,1;
work,1;
file,1;
execution!
Multithreading
By,1;
solution,1;
allowing,1;
multithreaded,1;
sequence,1;
and
the,1;
system,1;
and,1;
continue,1;
­useful,1;
lock,1;
coor-
dinate,1;
might,1;
packets,,1;
and,1;
those,1;
threads.
Multithreading,1;
concurrency—the,1;
case,,1;
blocked,1;
and,1;
next.
If,1;
gets,1;
quite,1;
way.,1;
keeping,1;
quickly,1;
gets,1;
simple,1;
ones,1;
the
threads,1;
and,1;
complexity,1;
keep
track,1;
those,1;
and,1;
gets,1;
time,1;
stops,1;
and,1;
back,1;
up
in,1;
system,1;
scheduler,
and,1;
fairly
heavyweight,1;
miti-
gate,1;
and,1;
system,1;
calls,1;
block,1;
left,1;
problem:,1;
as,1;
calls,1;
The,1;
and,1;
important:,1;
interleaved,,1;
you
have,1;
two,1;
ASCII,1;
might,1;
imply,1;
might,1;
only,1;
go,1;
You,1;
make,1;
two,1;
but
that,1;
cores—it,1;
must
handle,1;
truly,1;
simultaneous,1;
data,1;
means
moving,1;
and,1;
Arc
and,1;
forces,1;
We’ll,1;
look
at,1;
Chapter,1;
and,1;
will,1;
than,1;
asyn-
chronous,1;
returns,1;
as,1;
The,1;
back,1;
whose,1;
start
with,1;
poll—these,1;
methods,1;
they,1;
We’ll,1;
they,1;
general,1;
they,1;
as,1;
as,1;
they,1;
oper-
ation,1;
they,1;
block,,1;
and,1;
then,1;
And,1;
they,1;
left,1;
they,1;
later
when,1;
made.
These,1;
tasks
concurrently.,1;
keyboard,,1;
event,1;
returns,1;
No,1;
for
any,1;
synchronization!
The,1;
make,1;
You,1;
your
program,1;
billion,1;
world,1;
system,1;
to
sleep,1;
and,1;
then,1;
care,1;
relevant,1;
event,1;
burning,1;
will,1;
about.
120
Chapter,1;
Polling
To,1;
world,1;
fashion,
we,1;
own,1;
and,1;
back,1;
8-2:,1;
view,1;
trait
Types,1;
implement,1;
as,1;
futures,1;
and,1;
comes,1;
time,1;
moves,
or,1;
just,1;
time,1;
You,1;
=,1;
Foo>,1;
as,1;
will,1;
Foo,1;
future.”,1;
as,1;
promise
that,1;
they,1;
will,1;
pattern,1;
providing,1;
methods,1;
and,1;
methods,1;
and,1;
keypress,1;
later—but,1;
there,1;
and,1;
need
to,1;
within,1;
panic.,1;
as,1;
see,1;
why,,1;
fairly,1;
asyn-
chronous,1;
block,1;
tx.
async,1;
fn,1;
Sender<T>),1;
{
while,1;
=,1;
and,1;
and,1;
similar,1;
and,1;
read.,1;
there,1;
and,1;
place,1;
might,1;
about,1;
top,1;
package,1;
continue,1;
The,1;
fairly,1;
as,1;
8-4,1;
=,1;
();,1;
self,1;
=,1;
Some(v),1;
=,1;
tx,1;
=,1;
4
*self,1;
=,1;
Some(rx));,1;
make,1;
sending.
return,1;
No,1;
rx),1;
=,1;
=,1;
=,1;
Some(tx));
//,1;
make,1;
receiving.
return,1;
self.poll();
},1;
work,1;
let’s,1;
as,1;
track
of,1;
consequence,1;
will,1;
top,1;
were,1;
continue,1;
keep
track,1;
time,1;
we
are,1;
and,1;
SendFuture.,1;
The,1;
might
strike,1;
as,1;
back,1;
those,1;
shortly.
When,1;
implement,1;
(with,1;
forwarding,1;
forwarding,1;
might,1;
and,1;
back,1;
function
that’s,1;
forwarding.,1;
compli-
cated,1;
enough,1;
left,1;
off,
which,1;
find,1;
go,1;
current,1;
receive,,1;
we
poll,1;
and,1;
SendFuture.,1;
If
that,1;
returns,1;
then,1;
make,1;
current,1;
work,1;
futures,1;
self,1;
Receiver::receive,1;
can’t,1;
So,,1;
about,1;
self,1;
5,
and,1;
hence,1;
will,1;
Some,,1;
tricks,1;
make,1;
make,1;
then,1;
self,1;
make,1;
receive,,1;
back,1;
as,1;
just,1;
machine:,1;
and,1;
events.,1;
simple,1;
machine,,1;
for
more,1;
cases,1;
machine,,1;
futures,1;
and,1;
Receiver::receive,1;
those,1;
methods,1;
Future,,1;
variants.,1;
The,1;
and,1;
and,1;
futures,1;
they,1;
the
Asynchronous,1;
store,1;
those,1;
futures,1;
Receiver,1;
Others,1;
thing,,1;
and,1;
implement,1;
poll_next.
Down,1;
as,1;
up
with,1;
as,1;
and,1;
complexity,1;
1.39,1;
gave,1;
and,1;
original,1;
mechanism,1;
they,1;
machine!
async,1;
fn,1;
Sender<T>),1;
{
while,1;
=,1;
and,1;
8-3
If,1;
experience,1;
and,1;
difference
between,1;
8-4,1;
and,1;
might,1;
idea,1;
excited,1;
see,1;
land.,1;
intermedi-
ate,1;
let’s,1;
dive,1;
deeper,1;
just,1;
segment
of,1;
longer,1;
manual,1;
that,
we,1;
talk,1;
about,1;
mechanism,1;
implemented.
Generators
Briefly,1;
generator,1;
chunk,1;
midway,1;
then,1;
8-3,,1;
gets,1;
The,1;
can’t,1;
make,1;
block,1;
to
return.,1;
Now,1;
and,1;
proceed
with,1;
and
the,1;
item,1;
tried,1;
will,1;
good.,1;
Instead,
we,1;
turn,1;
8Whenever,1;
generator,1;
make,1;
store,1;
current,1;
resumes,1;
place,1;
saves,1;
associated,1;
data,1;
structure,1;
contains,1;
generator,1;
data,1;
structure,1;
generated),1;
then,1;
current,1;
and,1;
generator,1;
make,1;
progress.
This,1;
returns,1;
keeping,1;
generator,1;
async
generators),,1;
and,1;
generator,1;
8-4!,1;
desugars,1;
fn,1;
Sender<T>),1;
=,1;
=,1;
Poll::Ready(r),1;
=,1;
},1;
=,1;
=,1;
=,1;
Poll::Ready(r),1;
=,1;
},1;
time,1;
generators,1;
only,1;
compiler,1;
implement,1;
async/await—but,1;
future.,1;
cases,
such,1;
as,1;
implement,1;
Iterator,1;
time.
If,1;
and,1;
they,1;
there,1;
local,1;
and,1;
generators,1;
comes,1;
The,1;
compiler,1;
those,1;
and,1;
associated,1;
data,1;
than,1;
time,1;
to,,1;
local,1;
self.a.,1;
really
quite,1;
important,1;
difference,1;
manual,1;
and,1;
references
across,1;
and,1;
self,1;
than,1;
self,1;
they,1;
tried,1;
self,1;
methods,1;
manual,1;
enforce
that,1;
Receiver,1;
and,1;
returns,1;
and,1;
Receiver,1;
compiler,1;
Receiver,1;
and,1;
accessed,1;
data,1;
structure,1;
back,1;
com-
bined,1;
fn,1;
generator,1;
fn,1;
local,1;
and,1;
thus,1;
futures,1;
based,1;
async
functions,1;
and,1;
quite,1;
turn,1;
those,1;
generators,1;
calls,1;
and,1;
and,1;
data,1;
of
memory,1;
futures,1;
affecting,1;
spent,1;
futures,1;
isn’t,1;
easy,,1;
and,1;
time,1;
find,1;
two,1;
local,1;
need,,1;
heap,1;
(with,1;
pointer,1;
The,1;
and,1;
pointer,1;
indirection.,1;
then,1;
guide,1;
and,1;
quite,1;
done.,1;
generators,1;
as,1;
far.,1;
particular,,1;
generator,1;
equivalently,,1;
block),1;
local,1;
8-5,,1;
returns,1;
necessarily,1;
generator,1;
yields,,1;
and,1;
contains,1;
happens,1;
generator,1;
moved?,1;
calls,1;
fn,1;
try_forward<T>(rx:,1;
Sender<T>),1;
=,1;
},1;
}
}
Listing,1;
it
The,1;
try_forward,1;
only,1;
as,1;
as,1;
possible,1;
more
messages,1;
(that,1;
deferred,1;
time,1;
returning
the,1;
forwarding,1;
caller,,1;
work,1;
happens,1;
about,1;
far.,1;
unknown,1;
and,1;
returns,1;
either
Poll::Ready(()),1;
generator,1;
contains,1;
rx.next()
or,1;
tx.send(t).,1;
futures,1;
and,1;
also
be,1;
try_forward,1;
returns,1;
entire,1;
generator,1;
and,1;
tx,1;
longer,1;
and,1;
longer,1;
data,1;
structure:,1;
data,1;
and,1;
structures,1;
and,1;
significant,1;
ergonomics,1;
The,1;
(ingenious)
solution,1;
data,1;
structures,1;
comes,1;
the
form,1;
Pin,1;
and,1;
Unpin,1;
Pin,1;
and,1;
Unpin,1;
Pin.
Pin
There’s,1;
nuance,1;
let’s,1;
Pin,1;
gave,1;
ready,1;
back,1;
closer,1;
view,1;
particular,,1;
constitutes,1;
value
will,1;
construct,1;
heart’s,1;
as,1;
Pin,1;
Pin,1;
for
any,1;
data,1;
Pin,1;
And,1;
Pin,1;
see,1;
let’s,1;
look
at,1;
and,1;
Deref,1;
fn,1;
Self;
}
impl<'a,,1;
T>,1;
T>,1;
fn,1;
&'a,1;
Deref,1;
Deref,1;
=,1;
and,1;
and,1;
go,1;
make,1;
me.
First,,1;
Pin,1;
pointer,1;
than,1;
T,1;
directly,,1;
Deref,1;
This
means,1;
than,1;
The,1;
design,1;
primary,1;
make,1;
place,1;
T,1;
as,1;
might,1;
Pin,1;
just,1;
T,1;
directly,,1;
then,1;
Pin,1;
enough,1;
refer,1;
pointer,1;
and,1;
T,1;
as,1;
unsafe.,1;
compiler,1;
pointer,1;
(target),1;
were,1;
thus,1;
Self,1;
and,1;
then,1;
point,,1;
modify,1;
as,1;
as,1;
liked,,1;
longer
borrowed—including,1;
then,1;
and,1;
wiser,1;
time,1;
invalid.
128
Chapter,1;
8PIN,1;
CONS,1;
T,1;
Pin,1;
and,1;
thus,1;
freely,1;
code),1;
The,1;
The,1;
only,1;
pointer,1;
T>,1;
and,1;
self,1;
they,1;
then,1;
T,1;
pointer,1;
promise,1;
T,1;
T,1;
could
call,1;
and,1;
then,1;
two,1;
then,1;
were,1;
then,1;
Self,1;
hasn’t,1;
vio-
lated,,1;
and,1;
internal,1;
=,1;
entirely,1;
The,1;
T
without,1;
as,1;
Chapter,1;
just,1;
contains.,1;
T,1;
and,1;
you
have,1;
violated,1;
T,1;
Pin,1;
move,
even,1;
place,1;
Pin,1;
self,1;
and,1;
as,1;
possible,1;
place,1;
and,1;
new
value,1;
there,1;
accessed,1;
outside,1;
Pin,1;
The,1;
Key,1;
Safe,1;
might,1;
mutable,1;
Pin,1;
T,1;
than,1;
pointer,1;
make,1;
contract
for,1;
only,1;
Pin.
The,1;
Pin,1;
enables.,1;
Recall,1;
Pin,1;
place,1;
and,1;
methods,1;
and,1;
thus,1;
internal,1;
valid.,1;
Pin,1;
lets,1;
system,1;
great.,1;
design,1;
Pin,1;
work,1;
it
always,1;
and,1;
care,1;
Unpin,1;
comes,1;
Unpin,1;
asserts,1;
as,1;
will,1;
about,1;
referent,1;
as,1;
and,1;
thus,1;
those,1;
Unpin,1;
and,1;
and,1;
compiler,1;
contains,1;
only,1;
Unpin,1;
members.,1;
generators),1;
and,1;
those,1;
as,1;
Unpin,1;
fn,1;
Unpin,1;
The,1;
API,1;
Pin,1;
Unpin,1;
types
To,1;
make,1;
API,1;
about,1;
safety
requirements,1;
methods,1;
promise,1;
outside,1;
and,1;
implementations
of,1;
and,1;
pointer,1;
they,1;
requirements,1;
there,1;
Pin,1;
T,1;
But
if,1;
T,1;
care,1;
T,1;
T—but,1;
T,1;
longer,1;
those,1;
methods,1;
(DerefMut
being,1;
a
Pin::into_inner,1;
back,1;
Pin,1;
essentially,1;
Pin,1;
and,1;
make,1;
8-8,1;
requires
Pin<&mut,1;
The,1;
construct,1;
just,1;
two,1;
main,1;
The,1;
primary,1;
Pin,1;
The,1;
API,1;
methods,1;
and,1;
main
role,1;
constructs,1;
Pin,1;
Pin,1;
referent,1;
The,1;
place,1;
referent,1;
and,1;
then,1;
place,1;
just,1;
pointer,1;
You,1;
then,1;
Pin,1;
heart’s,1;
tar-
get,1;
will,1;
method
Box::pin,,1;
T,1;
and,1;
returns,1;
it;,1;
it
simply,1;
asserts,1;
Box,1;
Pin,1;
and,1;
BOX
While,1;
Unpin,1;
The,1;
Box,1;
unconditionally,1;
Unpin,1;
T,1;
might,1;
strike,1;
as,1;
earlier,1;
only,1;
Box,1;
Pin,1;
constructor:,1;
the
T.,1;
asserts,1;
Pin,1;
T,1;
T,1;
and,1;
time,1;
accessed,1;
Pin,1;
dropped.,1;
as,1;
make,1;
=,1;
=,1;
8-11:,1;
the
stack,1;
The,1;
ensures,1;
drop
the,1;
Pin,1;
and,1;
continue,1;
unpinned,1;
By,1;
$var,,1;
ensures,1;
bind-
ing,1;
declarations,1;
original,1;
=,1;
poll,,1;
then,1;
Pin,1;
unlike,1;
Box,1;
and,1;
works,1;
and,1;
means.,1;
important,1;
and,1;
await.,1;
And,1;
because
the,1;
compiler,1;
back,1;
discussed,1;
8-5,,1;
that
<expr>.await,1;
desugars,1;
Poll::Ready(r),1;
=,1;
expr.poll(),1;
},1;
},1;
ever-so-slight,1;
because,,1;
as,1;
can
call,1;
Future::poll,1;
only,1;
future.,1;
The,1;
as,1;
yield,
}
}
}
Listing,1;
1,1;
only,1;
expan-
sion,1;
then,1;
main,1;
2.,1;
block,1;
already,1;
And,1;
block,1;
reach
132
Chapter,1;
generator,1;
pinned.,1;
generator,1;
block,1;
will,1;
will,1;
accessible,1;
except,1;
Pin,1;
the
loop,,1;
pinned.,1;
meet,1;
all
the,1;
requirements,1;
and,1;
there,1;
issue,1;
futures,1;
mak-
ing,1;
brain,1;
Future::poll,1;
returns,1;
time,1;
executor.,1;
executor
could,1;
simple,1;
futures,1;
you
could,1;
probably,1;
things,,1;
executor,1;
work,1;
and,1;
then,1;
go,1;
make,1;
and,1;
only,1;
then,1;
determines,1;
back,1;
might,1;
“when,1;
“when,1;
“after,1;
time,1;
top,1;
own,1;
futures,1;
and,1;
they,1;
futures,1;
own,1;
entirely,1;
accommodate,1;
executor,1;
futures,1;
The,1;
executor
constructs,1;
mechanism,1;
executor,1;
and,1;
parameter,1;
Future::poll,1;
far.,1;
Sorry,1;
about
that.,1;
and,1;
true,1;
Future—no,1;
8-13:,1;
The,1;
contains,1;
The,1;
argument,1;
directly,,1;
augment,1;
with
additional,1;
futures,1;
primary,1;
make,1;
arguments,,1;
and,1;
entirely,1;
executor,1;
You,1;
see,,1;
executor.,1;
gets,1;
happens,1;
and
when,1;
dropped.,1;
happens,1;
implemented
vtable,,1;
discussed,1;
Chapter,1;
2.
It’s,1;
process,1;
construct,1;
Waker,,1;
and,1;
mechan-
ics,1;
important,1;
see,1;
library.,1;
constructor
that,1;
and,1;
as,1;
as,1;
The,1;
pointer,1;
data,1;
and,1;
RawWaker.
That,1;
turn,1;
Waker::from_raw,1;
skirted,1;
fairly,1;
Future::poll,1;
returns,1;
calls,1;
make,1;
futures,1;
returning,1;
only,1;
fulfills,1;
there,1;
can’t,1;
all
the,1;
point,,1;
reach,1;
other
futures,1;
These,1;
as,1;
futures,1;
resource,1;
ready,1;
result.
NOTE
The,1;
back,1;
8-4,1;
futures,1;
two,1;
shapes:,1;
those,1;
within,1;
process,1;
process,1;
internal,1;
will,1;
find,1;
and,1;
generates,1;
relevant,1;
event.,1;
example,
consider,1;
and,1;
and,1;
then,1;
returns,1;
Poll::Pending.,1;
comes,1;
and,1;
there,1;
and,1;
calls,1;
Now,1;
and,1;
futures,1;
as,1;
generates,1;
event,1;
wakers.,1;
system,1;
ready,1;
timer,1;
invokes,1;
callback),1;
and,1;
then,1;
internal,1;
and,1;
left,1;
things.
Instead,,1;
executor,1;
system.,1;
How,1;
executor,1;
and,1;
executor,1;
keeps,1;
event,1;
it
should,1;
time,1;
about,1;
executor,1;
crate),1;
event,1;
source,1;
executor,1;
longer,1;
event,1;
and,1;
futures,1;
event.,1;
system,1;
and,1;
similar,1;
executor,1;
calls,1;
associated,1;
event,1;
and,1;
thus,1;
executor,1;
futures,1;
register,1;
event,1;
executor,1;
work,1;
possible,1;
executor,1;
and,1;
reactor,,1;
as,1;
two,1;
co-optimized,1;
tight,1;
integration,1;
futures,1;
and
the,1;
executor,1;
futures,1;
executor,1;
executor.,1;
Or,1;
they,1;
the
leaf,1;
executor,1;
and,1;
register,1;
event,1;
source,1;
executor,1;
against,1;
and,1;
event,1;
source,1;
will,1;
and,1;
as,1;
futures,1;
executor
if,1;
already,1;
advisable,1;
as,1;
and,1;
debugging.
Library,1;
store,1;
+
AsyncWrite.,1;
and,1;
moment,1;
fairly,1;
make,1;
truly,1;
executor.,1;
AsyncWrite,1;
discuss,1;
representing,1;
Misnomer
You,1;
already,1;
necessarily,1;
executor,1;
already,1;
awake,,1;
and,1;
might,1;
to
then,1;
belongs,1;
executor,1;
The,1;
executor,1;
make,1;
gets,1;
than,1;
go,1;
sleep
again,,1;
make,1;
might,1;
executor,1;
will,1;
go,1;
than,1;
primary,1;
important,1;
executor,1;
futures,1;
two,1;
reasons.,1;
go,1;
sufficient,1;
just,1;
might,1;
make,1;
possible,1;
earlier,1;
future.,1;
two,1;
futures,1;
and,1;
ready,,1;
and,1;
case,,1;
executor,1;
go,1;
as,1;
there,1;
work,1;
do.
Second,,1;
futures,1;
lets,1;
executor,1;
futures,1;
executor,1;
just,1;
event,1;
indeed.
Tasks,1;
and,1;
futures,1;
tree:,1;
turn,1;
futures,1;
wakers.,1;
The,1;
root,1;
main,1;
futures,1;
and,1;
they,1;
only,1;
executor,1;
and,1;
futures,1;
tree.,1;
The,1;
executor,1;
calls,1;
relevant,1;
leaf.
Executors,1;
construct,1;
they,1;
they,1;
just,1;
runnable
and,1;
as,1;
such.,1;
pointer,1;
sharing,1;
executor,1;
top,1;
Future::poll,1;
and,1;
there,1;
deeper,1;
make,1;
only,1;
about,1;
own,1;
and,1;
about,1;
this
all,1;
happens,1;
calls,1;
blocked,1;
futures,1;
make,1;
select),,1;
futures,1;
make,1;
be
quite,1;
wrap,1;
they,1;
poll’s,1;
own,1;
they,1;
future.,1;
they,1;
they,1;
just,1;
own,1;
they,1;
original,1;
executor,1;
subexecutor,1;
the
subexecutor,1;
consult,1;
own,1;
internal,1;
current,1;
poll,,1;
and,1;
then,1;
only,1;
those.
BLOCKING,1;
careful,1;
about,1;
time,1;
executor,1;
current,1;
time,1;
it’s
not,1;
current,1;
time,1;
yielding,1;
back,1;
system,1;
subexecutor,1;
occasionally,,1;
tight,1;
then,1;
current,1;
executor,1;
manifests,1;
as,1;
delays,1;
make,1;
(such,1;
as,1;
and,1;
multithreaded,1;
implement,1;
executor,1;
executor,1;
than,1;
executor,1;
and,1;
thus,1;
completes.
In,1;
careful,1;
block,1;
then,1;
a
primitive,1;
might,1;
block,1;
yielding,1;
loops,1;
might
otherwise,1;
than,1;
1,1;
Poll::Pending.
Asynchronous,1;
future.,1;
means!,1;
consider,1;
simple,1;
fn,1;
Interact,1;
fn,1;
TcpListener),1;
{
while,1;
=,1;
essentially,1;
and,1;
executor,1;
and,1;
this,”,1;
and,1;
then,1;
exit,1;
probably,1;
block,1;
future.,1;
executor,1;
will,1;
time,1;
comes,1;
handle,1;
and,1;
then,1;
connection.
The,1;
only,1;
handle,1;
Once,1;
accepts,1;
and,1;
handle_client’s,1;
left).
We,1;
keeping,1;
futures,1;
accepts,1;
all
the,1;
futures,1;
see,1;
make,1;
8-15,1;
might,1;
fn,1;
TcpListener),1;
clients,1;
=,1;
=,1;
{
clients.push(handle_client(stream));
}
}
}
Listing,1;
manual,1;
handles,1;
already,1;
and,1;
And,1;
won’t
know,1;
ones,1;
make,1;
can’t,1;
futures,1;
You,1;
own,1;
only,1;
make,1;
own,1;
sticking,1;
just,1;
contains,1;
futures,1;
just,1;
and,1;
only,1;
solution,1;
make,1;
own,1;
and,1;
executor,1;
Which,,1;
future.,1;
The,1;
executor,1;
will,1;
continue,1;
block,1;
make,1;
will,1;
its
execution,1;
make,1;
meantime
behind,1;
And,1;
executor,1;
multithreaded,1;
futures,1;
parallel,1;
concurrently.,1;
might,1;
fn,1;
TcpListener),1;
{
while,1;
=,1;
client.
//,1;
The,1;
current,1;
will,1;
continue,1;
just,1;
and,1;
will,1;
parallel),1;
handle_client.
spawn(handle_client(stream));
}
}
Listing,1;
futures,1;
and,1;
thus,1;
make,1;
The,1;
and,1;
mul-
tiplexed,1;
executor.,1;
spawned,1;
spawned,1;
executor.,1;
executor,1;
stops,1;
or
because,1;
longer,1;
those,1;
spawned,1;
tasks
will,1;
will,1;
main,1;
back,1;
continue,1;
doing,,1;
executor,1;
back,1;
executor,1;
Rust.,1;
seen,1;
compiler,1;
and,1;
types,,1;
and,1;
work,1;
as,1;
futures,1;
and,1;
make,1;
and,1;
discussed,1;
area
of,1;
and,1;
then,1;
turn,1;
community,,1;
and,1;
some
maintain,1;
“no,1;
decry,1;
as,1;
“the,1;
rea-
son,1;
pull,1;
back,1;
go,1;
about,1;
time,1;
requirements,1;
and,1;
they,1;
were,1;
description,1;
arm,1;
intuition,,1;
and,1;
you’ll
need,1;
main,1;
the
mechanism,1;
advantage,1;
compiler,1;
We’ll,1;
in
which,1;
those,1;
and,1;
as,1;
result.IN,1;
S
Throughout,1;
about,1;
just,1;
a
fancy,1;
true,1;
references,,1;
and,1;
dangle—they,1;
You,1;
“the,1;
pointer,1;
pointer”,1;
“the,1;
skirt,1;
those,1;
on
you,1;
misleading
as,1;
context,,1;
those
operations,1;
We’ll,1;
then,1;
to
write,1;
about,1;
go,1;
about,1;
discuss,1;
talk,1;
two,1;
The,1;
as,1;
and,1;
marked,1;
as,1;
contains,1;
as,1;
warning,1;
check.
impl<T>,1;
fn,1;
contains,1;
only,1;
9-2,1;
illustrates,1;
as,1;
contains,1;
fn,1;
&*self.ptr,1;
contains,1;
two,1;
they,1;
careful,1;
they,1;
careful,1;
methods,1;
see,1;
why,,1;
reference-counted,1;
only,1;
turn,1;
undefined,1;
behavior,1;
and,1;
then,1;
zero,1;
and,1;
T,1;
will,1;
might,1;
and,1;
behavior,1;
invari-
ants,1;
undefined,1;
entirely,1;
We’ll,1;
undefined,1;
behavior,1;
as,1;
as,1;
there,1;
pointer,1;
the
pointer,1;
valid.,1;
API,1;
historical,1;
fn,1;
contains,1;
fn,,1;
methods,1;
and,1;
reverted,1;
already,1;
accepted,1;
and,1;
warns,1;
fn,1;
block,1;
The,1;
will,1;
Rust.,1;
The,1;
idea,1;
unsafe
fn,1;
block,,1;
then,1;
might,1;
current,1;
annotation.
The,1;
as,1;
and,1;
as,1;
about,1;
fn,1;
careful,1;
fn,1;
and,1;
they,1;
function’s,1;
Code
143Meanwhile,,1;
block,1;
block,1;
analogy,,1;
fn,1;
an
unsigned,1;
“solemnly,1;
and,1;
all
the,1;
within,1;
Keep,1;
as,1;
Honestly,,1;
Or,1;
new
features.,1;
Inside,1;
block,,1;
and,1;
fns.
That’s,1;
there,1;
mutable,1;
and,1;
and,1;
those,1;
And,1;
havoc,,1;
casting,1;
&'a,1;
about,1;
go,1;
We’ll,1;
comes,1;
and,1;
reasons,1;
T,1;
and,1;
You,1;
as,1;
and,1;
except,1;
they,1;
and,1;
as,1;
These,1;
as,1;
and,1;
pointers,,1;
refer,1;
to
references,1;
as,1;
pointers,,1;
and,1;
*,1;
than,1;
&,,1;
cast,1;
pointer
even,1;
outside,1;
go,1;
&,,1;
unsafe.,1;
turn,1;
pointer,1;
back,1;
refer-
ence,1;
data,,1;
as,1;
is
unsafe,1;
},1;
The,1;
*,1;
there,1;
as,1;
T,1;
and,1;
then,1;
just,1;
You,1;
*,1;
mutable,1;
pointer,1;
to.
144
Chapter,1;
9POINTER,1;
T,1;
difference,1;
T,1;
and,1;
primary,1;
difference,1;
T,1;
and,1;
T,1;
T,1;
Chapter,1;
two,1;
As,1;
T,1;
T,1;
is.
My,1;
intuition
about,1;
were,1;
&,,1;
and,1;
pointer,1;
compiler,1;
with-
out,1;
pointer!,1;
The,1;
pointer,1;
NonNull<T>
type.,1;
pointer,1;
might,1;
And,1;
they,1;
within,1;
as,1;
generators,1;
discussed,1;
Chapter,1;
pointer,1;
self,1;
as,1;
as,1;
self,1;
Pin,1;
isn’t,1;
And,1;
entire,1;
it
were,1;
static,,1;
then,1;
gave,1;
pointer,1;
else,,1;
continue,1;
self,1;
as,1;
example;,1;
store,1;
&'a,1;
{
bytes:,1;
Person<'???>,
}
Listing,1;
and,1;
reference
Unsafe,1;
refer,1;
data,1;
there,1;
longer,1;
they,1;
circumvent,1;
just,1;
make,1;
}.,1;
store,1;
str,1;
and,1;
then,1;
turn,1;
pointer,1;
similar,1;
issue,1;
Arc,,1;
pointer,1;
value
that’s,1;
only,1;
dropped.,1;
The,1;
pointer,1;
case,,1;
pointer,1;
longer,1;
when
the,1;
“when,1;
isn’t,1;
Arc,,1;
isn’t,1;
So,,1;
and,1;
internally.
Pointer,1;
pointers,,1;
pointer,1;
just,1;
C,,1;
.add(),,1;
and,1;
pointer,1;
within,1;
allocation.,1;
data,1;
and,1;
fairly,1;
and,1;
about,1;
for
hashbrown::RawTable,1;
more!
The,1;
pointer,1;
methods,1;
turn,1;
pointer,1;
reasons,1;
main,1;
make,1;
originally,1;
to.,1;
Doing
so,1;
undefined,1;
and,1;
compiler,1;
and,1;
only,1;
understand.,1;
and,1;
Again
Often,1;
pointers,,1;
and,1;
and,1;
then,1;
go,1;
back,1;
original,1;
as,1;
pointer,1;
and,1;
and,1;
turn,1;
back,1;
those,1;
data,1;
pointer,1;
as_ptr,1;
and,1;
You,1;
then,1;
slice,1;
providing,1;
those
146
Chapter,1;
std::slice::from_raw_parts.,1;
Vec,,1;
Arc,,1;
and,1;
similar
methods,1;
pointer,1;
and,1;
Box,1;
and,1;
and,1;
Loose,1;
T,1;
and,1;
as,1;
lightning-fast,1;
zero-copy,1;
with
some,1;
and,1;
pointer,1;
can
cast,1;
T,1;
mut),,1;
and,1;
The,1;
comes,1;
only,1;
cast,1;
pointer,1;
as,1;
as,1;
as,1;
pointer,1;
casting,1;
comes,1;
cast,1;
pointer,1;
a
*const,1;
and,1;
then,1;
pass,1;
pointer,1;
cast,1;
back,1;
original,1;
as,1;
these—or,1;
as,1;
a
byte,1;
those,1;
they,1;
level,,1;
calls.
There’s,1;
limit,1;
might,1;
entirely,1;
libraries,1;
camps:,1;
those,1;
those,1;
skip,1;
and,1;
those,1;
Function,1;
lets,1;
and,1;
than,1;
discuss,1;
Chapter,1;
block,,1;
within,1;
will,1;
source,1;
when
the,1;
as,1;
outside,1;
control,,1;
they,1;
might,1;
entire,1;
and,1;
neatly,1;
an
extern,1;
block,,1;
as,1;
as,1;
entirely,1;
item,1;
slice,1;
might,1;
item,1;
length,1;
indexing,1;
unsafe.,1;
(depending,1;
there,1;
behavior,1;
pass,1;
ensures,1;
try
to,1;
find,1;
checks,1;
just,1;
situations,1;
data,1;
alternate,1;
methods,1;
methods,1;
they,1;
and,1;
those,1;
slice::get_unchecked,,1;
NonZero::new_unchecked,,1;
and,1;
and,1;
meth-
ods,1;
worth,1;
As,1;
then,1;
degree.,1;
those,1;
library.,1;
fall,1;
general,1;
summary,1;
and,1;
Rust.,1;
You,1;
as,1;
T,1;
legal,1;
as,1;
T,1;
MaybeUninit<NonNull>,1;
pointer,
a,1;
heap,1;
and,1;
pattern,1;
comes,1;
uninitialized,1;
will,1;
(such,1;
as,1;
std::io::Read::read).,1;
The,1;
assume_init,1;
asserts,1;
T,1;
and,1;
as,1;
T.
ManuallyDrop::drop
The,1;
T,1;
T,1;
dropped.,1;
it
decouples,1;
T,1;
through
DerefMut<Target,1;
=,1;
T>,1;
T,1;
self,1;
despite
dropping,1;
and,1;
comes,1;
in
handy,1;
Once,1;
longer,1;
asserts,1;
T,1;
will,1;
accessed,1;
lets,1;
will,1;
left,1;
then,1;
as,1;
allocator,,1;
and,1;
drop
an,1;
place,1;
Chapter,1;
about,1;
and,1;
pointer,1;
and,1;
as,1;
and,1;
drop,,1;
and,1;
respectively).,1;
Waker::from_raw,1;
executor,1;
asserts,1;
module,1;
hints,1;
compiler,1;
compiler,1;
impossible,1;
reach,1;
turn,1;
compiler,1;
make,1;
based,1;
Code
149knowledge,,1;
as,1;
reach,1;
predict.,1;
The,1;
compiler,1;
will,1;
true,1;
module,1;
work,1;
meet,1;
about,1;
The,1;
T,1;
T,1;
alignment,1;
align-
ment,1;
Chapter,1;
might,1;
happen,1;
T,1;
The,1;
pair,1;
read_volatile,1;
memory.,1;
will,1;
pointer,1;
and,1;
compiler,1;
relative,1;
memory—we’ll,1;
discuss,1;
Chapter,1;
methods,1;
they,1;
pointer,1;
as,1;
associated,1;
so.
std::thread::Builder::spawn_unchecked
The,1;
and,1;
'static.,1;
stems,1;
the
spawned,1;
might,1;
indeterminate,1;
were,1;
to,,1;
caller’s,1;
spawned,1;
Sometimes,,1;
will,1;
spawned,1;
might,1;
the
value,1;
only,1;
strictly,1;
spawned,1;
longer,1;
comes,1;
and,1;
thus,1;
lets,1;
implement,1;
those,1;
cases,1;
as,1;
happen,1;
as,1;
Be,1;
careful,1;
might,1;
earlier,1;
than,1;
and,1;
spawned,1;
methods,1;
methods,1;
use,,1;
Like
unsafe,1;
as,1;
worth,1;
and,1;
and,1;
We’ll,1;
talk,1;
about,1;
they,1;
as,1;
and,1;
will,1;
be
implemented,1;
pointers,,1;
Sync.,1;
glance,,1;
reasonable:,1;
compiler,1;
they,1;
Now,1;
argument,1;
dereferenc-
ing,1;
pointer,1;
already,1;
of
Send,1;
and,1;
different?
Strictly,1;
speaking,,1;
and,1;
Sync.,1;
The,1;
they,1;
and,1;
might,1;
The,1;
might,1;
then,1;
thinking,1;
about,1;
happen,1;
were,1;
sent,1;
and,1;
thus,1;
undefined,1;
pointer,1;
block,1;
these
automatic,1;
as,1;
authors,1;
they,1;
and,1;
and,1;
Send>,1;
implement,1;
Rust.,1;
talk,1;
about,1;
interesting.,1;
methods,1;
fn,1;
fn,1;
dealloc(&self,,1;
The,1;
chunk,1;
and,1;
chunk,1;
The
Layout,1;
argument,1;
and,1;
as,1;
discussed,1;
2.,1;
those,1;
methods,1;
and,1;
carries,1;
places,1;
ensures,1;
that
Rust,1;
allocator,,1;
as,1;
library’s
implementation,1;
implement,1;
sized,1;
allocations,1;
thus,1;
Unpin,1;
comes,1;
as,1;
devel-
opers.,1;
as,1;
Chapter,1;
they,1;
internal,1;
(that,1;
strange,,1;
Unpin,1;
Pin.
There,1;
two,1;
main,1;
reasons,1;
Unpin,1;
isn’t,1;
Unpin,1;
Second,
there,1;
already,1;
implement,1;
Pin,1;
and,1;
!Unpin,,1;
Pin,1;
those,1;
correctly,1;
implemented
correctly.
The,1;
here—safe,1;
and,1;
pass,1;
spawned,1;
sequence,1;
lead,1;
unsafety.
Consider,1;
happen,1;
Rc<Box>,1;
and,1;
sent,1;
another
thread:,1;
two,1;
deallocate,1;
Box,1;
correctly,1;
synchronize,1;
Unpin,1;
possible,1;
write
unsafe,1;
Unpin,1;
entirely,1;
Unpin,1;
process),
but,1;
err,1;
and,1;
just,1;
havoc,,1;
not
necessarily,1;
make,1;
unsafe.,1;
The,1;
first
and,1;
cases,1;
just,1;
and,1;
there,1;
world,1;
go,1;
time,1;
certainly,1;
there,1;
an
implementation,1;
true,1;
Deref,1;
Deref,1;
hold;,1;
and,1;
Deref.,1;
Or,1;
authors,1;
make,1;
important,1;
and,1;
Deref,1;
only,1;
mainly,1;
those,1;
only,1;
only,1;
pointer,1;
as,1;
moment,1;
requirements,1;
things,,1;
only,1;
those,1;
tools.
That,,1;
two,1;
and,1;
familiar,1;
time,1;
Code,1;
work,1;
nailing,1;
and,1;
don’ts,,1;
unanswered.,1;
make,1;
will,1;
careful,1;
about,1;
and,1;
prompt,1;
can’t,1;
about,1;
happens,1;
those,1;
construct,1;
as,1;
Undefined,1;
behavior,1;
manifests,1;
The,1;
truly,1;
compiler
generated,1;
way.,1;
and,1;
slightly,1;
compiler,1;
sur-
rounding,1;
compiler,1;
longer,1;
and,1;
compiled,1;
host,,1;
might,1;
undefined,1;
behavior,1;
everything,1;
work,1;
undefined,1;
behavior,1;
will,1;
likelihood)
crash,1;
then,1;
back,1;
root,1;
as,1;
exit,,1;
there,1;
bug,1;
go,1;
fix.
The,1;
undefined,1;
behavior,1;
there,1;
invisibly,1;
might,1;
slightly,1;
they,1;
might,1;
internal,1;
The,1;
undefined,1;
behavior,1;
corruption,,1;
extremely,1;
outages.,1;
Part,1;
with
undefined,1;
behavior,1;
as,1;
behavior,1;
compiler,1;
might,1;
sur-
rounding,1;
entirely,1;
does.,1;
The,1;
undefined,1;
behavior,1;
argument,1;
comes,1;
about,1;
undefined,1;
compiler,1;
undefined,1;
and,1;
be
near-impossible,1;
impossible,1;
undefined,1;
behavior,1;
happens,1;
compiler
simply,1;
turn,1;
case—which,1;
difficult,1;
predict,1;
might,1;
and,1;
and,1;
slightly,1;
were,1;
compiler,1;
they,1;
about,1;
we’d,1;
range,1;
they,1;
implement,1;
with
great,1;
make,1;
and,1;
specifications,1;
and,1;
compiler,1;
important,1;
The,1;
let’s,1;
dive,1;
strict,1;
about,1;
and,1;
and,1;
and,1;
then,1;
constraint,1;
contains,1;
contains,1;
T,1;
you
could,1;
unsafe.,1;
The,1;
only,1;
and,1;
strict,1;
many
years,,1;
impossible,1;
uninitialized,1;
undefined,,1;
only,1;
by
writing,1;
as,1;
some_struct,1;
and,1;
thus,1;
is
illegal!,1;
some_struct,1;
isn’t,1;
then,1;
some_struct,1;
mechanism,1;
(not,1;
were,1;
time,1;
they,1;
can
hold.,1;
as,1;
1,1;
only,1;
0x01,,1;
and,1;
surrogate,1;
types,,1;
and
indeed,1;
memory.,1;
These,1;
wouldn’t,1;
possible,1;
about,1;
pointer,1;
earlier,1;
certain,1;
ever
be,1;
None,,1;
and,1;
thus,1;
avoid
spending,1;
(plus,1;
store,1;
discriminator,1;
and,1;
it
even,1;
0x01,,1;
and,1;
nice,1;
and,1;
and,1;
as,1;
bool,,1;
and,1;
then,1;
place,1;
important,1;
compiler,1;
The,1;
bug,1;
behavior,1;
they,1;
Box,1;
and,1;
Vec,,1;
as,1;
they,1;
accessed,1;
compiler,1;
memory
is,1;
aliased,1;
and,1;
based,1;
extracted,1;
pointer,1;
Box,1;
two,1;
pointer,1;
and,1;
only,1;
isn’t,1;
set-
tled,1;
consensus,1;
store,1;
isn’t,1;
chunk,1;
of
memory,1;
T,1;
and,1;
then,1;
isn’t,1;
T.
Even,1;
just,1;
tried,1;
slice,1;
those,1;
u8,1;
uninitialized,1;
undefined,1;
mechanism,1;
valid.,1;
T,1;
compiler,1;
make,1;
about,1;
assume,1;
isn’t,1;
T,1;
store,1;
aliased,1;
Box<T>
or,1;
surrogate,1;
friend.
You,1;
will,1;
only,1;
using
the,1;
T,1;
MaybeUninit::assume_init.
As,1;
T,1;
uninitialized,1;
memory.,1;
The,1;
gives
you,1;
pointer,1;
T,1;
then,1;
uninitialized,1;
And,1;
assume_init,1;
and,1;
returns,1;
as,1;
T,1;
following,1;
might,1;
=,1;
=,1;
{
buf[i],1;
=,1;
=,1;
=,1;
9-5:,1;
initialize,1;
as,1;
would
require,1;
those,1;
wouldn’t,1;
and,1;
then,1;
only,1;
careful,1;
memory.,1;
early,1;
to
take,1;
care,1;
only,1;
parts,1;
T,1;
You,1;
just,1;
and,1;
important,1;
and,1;
using
unsafe,1;
particular,,1;
as,1;
discussed,1;
Chapter,1;
5,,1;
default
panic,1;
will,1;
crash,1;
panic
but,1;
will,1;
current,1;
everything,1;
current,1;
returns,1;
current,1;
everything,1;
and,1;
hits,1;
account,1;
consider,1;
Vec,1;
fn,1;
fill_default(&mut,1;
=,1;
-,1;
==,1;
return;,1;
=,1;
9for,1;
0..fill,1;
=,1;
9-6:,1;
happens,1;
will,1;
local,1;
just,1;
integers),1;
and,1;
The,1;
will,1;
then,1;
Vec.,1;
vector,,1;
length,1;
own,1;
very
first,1;
will,1;
fix,1;
length,1;
writ-
ing,1;
wouldn’t,1;
there,1;
consider,1;
code.
When,1;
and,1;
they,1;
will,1;
panic.,1;
calls,1;
user-provided,1;
those,1;
have
no,1;
and,1;
assume,1;
will,1;
similar,1;
make,1;
worth,1;
keep-
ing,1;
discussed,1;
Chapter,1;
two,1;
they,1;
and,1;
turn,1;
cast,1;
two,1;
types.,1;
Rust
doesn’t,1;
two,1;
instances,1;
way.,1;
and,1;
=,1;
=,1;
predictable.
The,1;
important,1;
casting,1;
two,1;
necessarily,1;
two,1;
quick,1;
time,1;
represented,,1;
work,1;
were,1;
in-memory
representation,,1;
are
nested.,1;
MaybeUninit<T>,,1;
and,1;
T,1;
and,1;
cast,1;
heart’s,1;
advantage,1;
T,1;
and,1;
just,1;
As,1;
and,1;
T::Sneaky,
iter:,1;
=,1;
();
}
impl,1;
=,1;
make,1;
casting,1;
isn’t,1;
cast,1;
Rust.,1;
and,1;
You,1;
just,1;
about,1;
turn,1;
a
160
Chapter,1;
How,1;
implications,1;
let’s,1;
and,1;
two,1;
a
look,1;
three-liner,1;
mutable,1;
and,1;
then,1;
after.
let,1;
=,1;
=,1;
Foo(&mut,1;
=,1;
false;
Listing,1;
The,1;
Foo,1;
=,1;
false,,1;
there,1;
hanging
around,1;
will,1;
mutable,1;
mutable,1;
borrow
that’s,1;
modify,1;
allowing,1;
allowing,1;
mutation,1;
only,1;
Foo,1;
Foo,1;
implement,1;
then,1;
Foo,1;
we
need,1;
Foo,1;
implement,1;
can’t,1;
9-10.,1;
snippet,,1;
mutable,1;
buried,1;
Bar<Foo<’a>>,1;
=,1;
=,1;
barify(&mut,1;
=,1;
false;
Listing,1;
The,1;
Foo,1;
and,1;
definitions,1;
Foo,1;
and,1;
Bar,,1;
consider,1;
happens,1;
gets,1;
turn,1;
as,1;
might,1;
However,
Bar,1;
Foo,1;
just,1;
though
the,1;
and,1;
compiler,1;
will,1;
compiler,1;
finds,1;
just,1;
as,1;
behavior,1;
Code
161Imagine,1;
own,1;
and,1;
as,1;
9-9.,1;
Box,1;
T,1;
Since
dropping,1;
entirely,1;
time,1;
Box,1;
accessed,1;
dropck_eye-
patch,1;
blind).,1;
The,1;
and,1;
serve,1;
only,1;
as,1;
mechanism,1;
The,1;
fea-
ture,1;
as,1;
generic
lifetimes,1;
and,1;
You,1;
T>,1;
isn’t,1;
cases,1;
However,
it,1;
heap,1;
and,1;
T,1;
#[may_dangle].,1;
T
makes,1;
own,1;
and,1;
Combined,1;
T,1;
con-
cludes,1;
T,1;
9-10).,1;
x.
Luckily,,1;
fix,1;
and,1;
T,1;
own,1;
T,1;
and,1;
will,1;
Box,1;
dropped.,1;
9-11
shows,1;
Box,1;
T
}
unsafe,1;
T>,1;
Box,1;
and,1;
only,1;
will,1;
warning,1;
see,1;
as,1;
well!
NOTE
162
Chapter,1;
make,1;
lets,1;
T,1;
continue,1;
self,1;
dropped.,1;
you’re
implementing,1;
'static.,1;
T,1;
=,1;
T,1;
Fear
With,1;
afraid,1;
than,1;
were,1;
started.,1;
it’s
important,1;
only,1;
possible,1;
time,1;
The,1;
make,1;
half,1;
And,1;
there,1;
isn’t,1;
resorting
to,1;
it.
Manage,1;
about,1;
consider,1;
block,1;
just,1;
thinking,1;
about,1;
Unfortunately,
that,1;
local,1;
comes,1;
back,1;
Unpin,1;
entirely,1;
then,1;
later
point,1;
might,1;
and,1;
longer,1;
even
though,1;
property,1;
only,1;
privacy,1;
Privacy,1;
isn’t,1;
formal,1;
as,1;
describing,1;
can
fiddle,1;
Foo,1;
module,1;
marked,1;
then,1;
implement,1;
methods,1;
and,1;
Foo.,1;
So,,1;
safety
of,1;
Foo,1;
or
methods,1;
block,1;
time,1;
Foo.,1;
Foo,1;
entire,1;
then,1;
and,1;
Foo,1;
then,1;
only,1;
current,1;
module,1;
and,1;
certain,1;
then,1;
those,1;
code),1;
within,1;
privacy,1;
boundary
of,1;
privacy,1;
as,1;
can.
Provide,1;
and,1;
Code
163module,1;
entirely,1;
only,1;
module,1;
Or,1;
own,1;
can’t,1;
holes,1;
accident!
It’s,1;
possible,1;
case,,1;
narrow
down,1;
parts,1;
you
have,1;
only,1;
them,,1;
care,1;
and,1;
then,1;
internal,1;
all,
inside,1;
frobnify,1;
previously
called,1;
lead,1;
cleaner
code,1;
paged,1;
just,1;
those,1;
And,1;
Plus,,1;
make,1;
about,1;
enough,1;
argument,1;
and,1;
Write,1;
call.,1;
and,1;
already,1;
certain,1;
they,1;
function’s,1;
they,1;
probably,1;
and,1;
and,1;
as,1;
providing,1;
For
example,,1;
within,1;
slice;,1;
just,1;
in
bounds.,1;
block,1;
and,1;
thing.,1;
block,1;
and,1;
road,1;
you
have,1;
modify,1;
and,1;
And,1;
will,1;
contribu-
tor,1;
just,1;
and,1;
go,1;
(https://doc.rust-lang.org/nomicon/)
cover,1;
cover.,1;
and,1;
back,1;
You,1;
make,1;
liberal,1;
doubt.,1;
and,1;
slightly,1;
unsure,1;
will,1;
doesn’t,,1;
consider,1;
issue,1;
and,1;
triple-checked
all,1;
and,1;
ready,1;
there,1;
suite
through,1;
mid-level,1;
visibility
into,1;
doing,,1;
turn,1;
your
program,1;
uninitialized
memory.,1;
and,1;
and,1;
than,1;
only,1;
your
test,1;
only,1;
and,1;
thus,1;
You,1;
as,1;
extension,1;
as,1;
behavior,1;
The,1;
and,1;
greatly,,1;
as,1;
and,1;
and,1;
fairly,1;
fast—usually,1;
within,1;
magnitude.,1;
they,1;
analyzing,1;
vital.
The,1;
automate,1;
integration,1;
and
to,1;
time,1;
as,1;
discover,1;
as,1;
quality,1;
as,1;
fix,1;
earn-
ing,1;
double,1;
than,1;
undefined,1;
can—even,1;
about,1;
make,1;
and,1;
construct,1;
only,1;
and,1;
contexts.
A,1;
CARDS?
Unsafe,1;
guarantees,,1;
and,1;
argument,1;
The,1;
only,1;
house,1;
and,1;
Proponents,1;
argument,1;
only,1;
call
unsafe,1;
argument,1;
true,1;
implications,1;
argument,1;
facility,1;
writ-
ten,1;
as,1;
those,1;
those,1;
extension,1;
Rust
(unsafe,1;
Rust).,1;
closer,1;
integration,1;
and,1;
turn,1;
The,1;
closer,1;
integration,1;
write
tools,1;
as,1;
And,1;
be
subject,1;
isn’t,1;
checks,1;
place,1;
and,1;
those,1;
We
also,1;
about,1;
and,1;
thinking,1;
about,1;
as,1;
the
next,1;
jump,1;
and,1;
see,1;
those,1;
cores,1;
pull,1;
R,1;
E,1;
and,1;
you’ll
need,1;
advantage,1;
and,1;
correctly.,1;
won’t
directly,1;
implement,1;
structure,1;
application.,1;
mechanisms
that,1;
wield,1;
comes,1;
single-thread,1;
(like
with,1;
as,1;
discussed,1;
Chapter,1;
and,1;
true,1;
system,1;
scheduling,1;
and,1;
we
won’t,1;
level,,1;
only,1;
Either,1;
than,1;
assume,1;
there,1;
multiple
threads,,1;
there,1;
and,1;
be
talking,1;
about,1;
two,1;
parallel
or,1;
simple,,1;
concurrency
in,1;
about,1;
system,1;
and,1;
out
to,1;
entire,1;
checking,1;
alone.
The,1;
already,1;
basics,1;
and,1;
and,1;
except,1;
it’s
worth,1;
difficult,1;
and,1;
patterns,1;
those,1;
We’ll,1;
and,1;
they,1;
don’t)
before,1;
implement,1;
operations.,1;
close,1;
sanity,1;
Trouble,1;
dive,1;
patterns,1;
and,1;
worth,1;
time,1;
place.,1;
why
do,1;
special,1;
patterns,1;
and,1;
primary,1;
coordinating,1;
access—in,1;
resource,1;
of
threads,1;
resource,1;
purposes,1;
place,1;
to,,1;
and,1;
done.,1;
data,1;
Briefly,,1;
parts,1;
wrote,,1;
see,1;
all!,1;
data,1;
undefined,1;
broader,1;
possible,1;
relative,1;
These,1;
code,
a,1;
timer,1;
coming,1;
unlike,1;
data,1;
races,,1;
undefined,1;
they,1;
occur,,1;
as,1;
the
hope,1;
they,1;
will,1;
advantage,1;
cores,1;
work,1;
simultaneously,,1;
happen,1;
they,1;
talk
about,1;
“the,1;
scales,1;
cores,”,1;
implying,1;
its
performance,1;
than,1;
cores,1;
work,1;
Linear,1;
as,1;
go
from,1;
cores,1;
experience,1;
giving,1;
cores,1;
throughput,,1;
might,1;
bubbles
on,1;
bubble,1;
some
point,1;
returns,1;
as,1;
crowding,1;
and,1;
all!,1;
parallel,1;
and,1;
well.
Contention,1;
primary,1;
offenders,1;
exclusion,,1;
resource,1;
and,1;
Parallelism)
169Mutual,1;
only,1;
The,1;
exclusion
lock,,1;
mutex,,1;
only,1;
gets,1;
happen,1;
implicitly,,1;
resource,1;
and,1;
jobs,1;
exclusion,,1;
only,1;
gets,1;
invoking,1;
system,1;
or
library,1;
calls,1;
years,,1;
allocator,1;
significant,1;
system,1;
as,1;
two,1;
happen,1;
allocations,1;
parallel,1;
forces,1;
make,1;
total,1;
length,1;
Be,1;
mindful,1;
and,1;
only,1;
strictly,1;
necessary.
NOTE
For,1;
as,1;
mutu-
ally,1;
Exhaustion
Unfortunately,,1;
within,1;
tasks,
the,1;
those,1;
The,1;
handle,1;
only,1;
bus,1;
only,1;
and,1;
cases,1;
talk,1;
about,1;
and,1;
just,1;
for.
170
Chapter,1;
sharing,1;
two,1;
simultaneous,1;
happens,1;
two,1;
happen,1;
intersect,1;
resource,1;
they,1;
parts,1;
simplest,1;
lock,1;
lock,1;
and,1;
two,1;
independent
both,1;
lock,1;
parts,1;
turn,1;
cases,1;
possible,1;
lock,1;
disjoint,1;
parallel.
However,,1;
lock,1;
lock,1;
lock,1;
parts,1;
Usually,1;
lock,,1;
careful,1;
about,1;
two,1;
them
in,1;
entirely,1;
lock-free,1;
those,1;
tricky,1;
sharing,1;
and,1;
there,1;
isn’t,1;
identi-
fying,1;
sharing,1;
level,,1;
as,1;
Chapter,1;
2.,1;
The,1;
than,1;
For
example,,1;
Intel,1;
bytes.,1;
This
means,1;
some
multiple,1;
bytes.,1;
The,1;
sharing,1;
comes,1;
two,1;
two,1;
happen,1;
fall,1;
those,1;
might,1;
sharing,1;
parallel,1;
application.,1;
Imagine
that,1;
fall,1;
within,1;
parallel,1;
will,1;
they,1;
time,1;
spent,1;
on
those,1;
sharing,1;
they,1;
two,1;
only,1;
T,1;
SCAL,1;
Y
A,1;
mindful,1;
place.,1;
than,1;
make,1;
parallel,1;
than,1;
counterpart,,1;
important,1;
and,1;
and,1;
about,1;
Models
Rust,1;
patterns,1;
fairly,1;
actors.,1;
Going,1;
just,1;
the
threads,1;
might,1;
disjoint,1;
pieces,1;
data,,1;
disjoint,1;
Vec,
or,1;
they,1;
as,1;
database,1;
handles,1;
data,1;
structures,1;
store,1;
table,1;
data,1;
might,1;
lock,1;
might,1;
and,1;
lock,1;
might
allow,1;
target,,1;
rare.
In,1;
data,1;
10that,1;
as,1;
close,1;
advantage,1;
care,1;
about,1;
those,1;
fit,1;
cases,1;
f,,1;
and,1;
necessary.,1;
two,1;
patterns,1;
as,1;
they,1;
lead,1;
As,1;
cores,1;
than,1;
they,1;
As,1;
then,1;
jobs,1;
a
shared,1;
they,1;
then,1;
entirely,1;
Web
servers,,1;
and,1;
multithreaded,1;
futures,1;
and,1;
are
often,1;
as,1;
they,1;
jobs,1;
and,1;
they,1;
jobs,1;
back,1;
queue.,1;
data,1;
vector
in,1;
and,1;
then,1;
finishes,1;
The,1;
all
the,1;
and,1;
data,1;
structure,1;
work,1;
The,1;
finishes,1;
work,1;
and,1;
jobs,1;
already,1;
jobs,1;
time,1;
complete,,1;
same
number,1;
jobs,,1;
finishing,1;
jobs,1;
Rather,1;
than,1;
and,1;
jobs,1;
complete,,1;
those,1;
early,1;
sooner.
It’s,1;
quite,1;
implement,1;
data,1;
structure,1;
work,1;
significant,1;
con-
stantly,1;
work,1;
another,,1;
find,1;
already,1;
seen,1;
data,1;
structures,1;
fit,1;
work,1;
data,1;
parallel,1;
they,1;
just,1;
multithreaded,1;
calls,1;
they,1;
just,1;
design,1;
probably,1;
construct,1;
keeps,1;
and,1;
com-
mon,1;
design,1;
pattern,1;
libraries,1;
services.
If,1;
isn’t,1;
a
connection,,1;
returns,1;
and,1;
thus,1;
to
other,1;
connection
life,1;
The,1;
associated,1;
as,1;
fresh,,1;
model,1;
Whereas,1;
model,1;
queues,,1;
feeds,1;
jobs,1;
database,1;
data,1;
structure,
or,1;
structure,1;
be
able,1;
and,1;
the
owning,1;
the
owning,1;
message,,1;
the
messaging.
A,1;
pattern,1;
talk,1;
another.
If,,1;
file,1;
and,1;
might,1;
those,,1;
and,1;
then,1;
event.,1;
model,1;
a
web,1;
than,1;
spokes,1;
might,1;
as,1;
might,1;
transi-
tively,1;
system,1;
model,1;
own,1;
there,1;
and,1;
than,1;
only,1;
and,1;
care,1;
they,1;
model,1;
Tokio,1;
for
each,1;
and,1;
Tokio,1;
will,1;
then,1;
make,1;
as,1;
and,1;
time,1;
model,1;
suited,1;
and,1;
there,1;
is
little,1;
within,1;
system,1;
might,1;
hardware
device,,1;
and,1;
might,1;
backend,1;
database
connection.,1;
The,1;
model,1;
work,1;
only,1;
work,1;
skewed,1;
those,1;
speed,1;
system.,1;
And,1;
slice,1;
can’t,1;
parallelize,1;
actor.
Asynchrony,1;
and,1;
discussed,1;
Chapter,1;
constructs,1;
and,1;
futures,1;
and,1;
continue,1;
there,1;
futures,1;
fundamentally,1;
those,1;
futures,1;
as,1;
fundamen-
tally,1;
executor,1;
futures,1;
Parallelism)
175However,,1;
and,1;
constructs,1;
and,1;
active,1;
probably,1;
executor,1;
advantage,1;
than,1;
happen,1;
executor,1;
futures,1;
parallel,1;
and,1;
particular,,1;
two,1;
pieces,1;
work,1;
futures,1;
pool
of,1;
The,1;
futures,1;
they,1;
aren’t,
the,1;
executor,1;
futures,1;
and,1;
only,1;
futures,1;
back,1;
futures,1;
Chapter,1;
8:,1;
contains,1;
the
executor,1;
Future,,1;
and,1;
futures,1;
executor,1;
will,1;
PRIMITI,1;
V,1;
ES
Most,1;
(think
std::sync),1;
counterparts.,1;
and,1;
other
similar,1;
because,,1;
as,1;
discussed,1;
Chapter,1;
blocking
inside,1;
will,1;
work,1;
executor,1;
and,1;
counterparts,1;
executor.,1;
generally
true,1;
acquiring,1;
might,1;
block,1;
might,1;
true,1;
for
a,1;
acquired,1;
only,1;
rarely,,1;
and,1;
only,1;
case,,1;
time,1;
becomes
available,1;
might,1;
You,1;
will,1;
holding
the,1;
barring,1;
problems.
As,1;
make,1;
only,1;
significant,1;
syn-
chronous,1;
probably,1;
worth,1;
std::sync::atomic,1;
constructs,1;
and,1;
These,1;
AtomicI32,
AtomicBool,,1;
and,1;
on—the,1;
and,1;
two,1;
and,1;
We’ll,1;
build,1;
and,1;
constructs,1;
excessive—for,1;
coun-
ter,1;
special,1;
they,1;
happens,1;
concurrently.,1;
store,,1;
and,1;
those,1;
and,1;
for.,1;
talk,1;
and,1;
refer,1;
as,1;
from”,1;
memory.,1;
level,,1;
behave.
The,1;
compiler,1;
to
perform,1;
and,1;
statements,,1;
redundant,,1;
registers,1;
than,1;
The,1;
compiler,1;
of
restrictions,1;
only,1;
as,1;
level,,1;
two,1;
main,1;
shapes:,1;
pulls,1;
and,1;
store,1;
register,1;
memory.
Loads,1;
and,1;
modern,1;
CPUs.,1;
accessed,1;
store,,1;
compiler,1;
store,1;
as,1;
appropriate.,1;
The,1;
has
some,1;
make,1;
and,1;
dependencies,1;
and,1;
necessarily,1;
see,1;
latest,1;
store,1;
wall-clock,1;
time.
In,1;
compiler,1;
and,1;
only,1;
parallel,1;
and,1;
store,1;
about,1;
and,1;
they,1;
parallel,1;
CPUs.,1;
compilers,1;
(or
rather,,1;
compiler,1;
compiles),1;
of
their,1;
those,1;
the
atomic,1;
and,1;
they,1;
accessed,1;
atomic-type,1;
and,1;
only,1;
(yet).,1;
non-atomic,1;
types.,1;
reassigning,1;
a
tuple,1;
two,1;
store,1;
were,1;
those,1;
stores,
another,1;
store,1;
and,1;
thus,1;
up
with,1;
inconsistent,1;
view,1;
and,1;
only,1;
certain,1;
there,1;
types,,1;
to,,1;
and,1;
and,1;
pointer,1;
as,1;
methods,1;
and,1;
they,1;
and,1;
methods,1;
programmer,1;
and,1;
per-
forms,1;
store,1;
64-bit,1;
methods,1;
argument,1;
to.,1;
and,1;
compiler,1;
and,1;
only,1;
atomic
operations,1;
Over,1;
see,1;
some
examples,1;
important,1;
and,1;
get
the,1;
compiler,1;
and,1;
comes,1;
as,1;
top,1;
and,1;
hits,1;
and,1;
already,1;
sequence,1;
coming,1;
and,1;
two,1;
and,1;
both
write,1;
then,1;
as,1;
stopwatch,,1;
appear,1;
two,1;
execution.
Essentially,,1;
wall-clock,1;
time,1;
account,1;
location—all,1;
programmer,1;
constitutes,1;
execution.
For,1;
and,1;
then,1;
then
writes,1;
recognize,1;
as,1;
and,1;
specifications,1;
describe,1;
construct,1;
model,1;
underlying
hardware,1;
registers,1;
and
the,1;
two,1;
and,1;
lay-
ers,1;
pieces,1;
a
thread,1;
store,1;
happens,1;
register,1;
that
then,1;
make,1;
main,1;
layer,1;
and,1;
returns,1;
Herein,1;
problem:,1;
updated,,1;
against,1;
and,1;
happens,1;
for
a,1;
operation.
With,1;
let’s,1;
the
primary,1;
mechanism,1;
as,1;
as,1;
10-1.
Concurrency,1;
The,1;
places,1;
source
code,1;
and,1;
turn,1;
essentially,1;
about,1;
about,1;
relative,1;
weakest,1;
simple,1;
two,1;
access
two,1;
Ordering::Relaxed.
static,1;
X:,1;
=,1;
Y:,1;
=,1;
=,1;
=,1;
=,1;
=,1;
Ordering::Relaxed)
});
Listing,1;
Ordering::Relaxed
Looking,1;
spawned,1;
as,1;
might,1;
true,1;
The,1;
to
reorder,1;
and,1;
hap-
pens,1;
make,1;
=,1;
true,1;
4,1;
happen,1;
4
doesn’t,1;
4,1;
So,,1;
make,1;
go,1;
The,1;
thus,1;
and,1;
4
first,,1;
=,1;
hasn’t,1;
Then,,1;
system,1;
and,1;
compiler,1;
1,1;
true,1;
(written,1;
and,1;
then,1;
back,1;
3,
which,1;
and,1;
gets,1;
as,1;
compiler,1;
only,1;
dependen-
cies,1;
as,1;
involved);
it,1;
make,1;
about,1;
and,1;
4,1;
so
it,1;
as,1;
just,1;
keeps,1;
relative,1;
and,1;
already,1;
and,1;
thus,1;
erro-
neously,1;
they,1;
already,1;
make,1;
promise,1;
there,1;
is
no,1;
difference,1;
as,1;
and,1;
everything,1;
just,1;
as,1;
as,1;
synonyms.
Acquire/Release,1;
hierarchy,,1;
have
Ordering::Acquire,,1;
and,1;
Ordering::AcqRel,1;
level,,1;
between
a,1;
store,1;
and,1;
and,1;
then,1;
and,1;
only,1;
store,1;
and,1;
and,1;
store,1;
store,1;
B),,1;
then,1;
write
in,1;
happen,1;
store,1;
A.
NOTE
The,1;
only,1;
loads,,1;
only,1;
stores,
and,1;
only,1;
and,1;
store,1;
place,1;
following,1;
and,1;
store,1;
and,1;
back,1;
with
Ordering::Acquire.
3.,1;
see,1;
happened
before,1;
store,1;
see,1;
things,,1;
10-3,1;
Release.
static,1;
X:,1;
=,1;
Y:,1;
=,1;
=,1;
=,1;
=,1;
=,1;
ordering
These,1;
longer,1;
possible,1;
=,1;
see,1;
why,,1;
consider,1;
primary,1;
1,1;
and,1;
2.,1;
The,1;
on
stores,1;
1,1;
simple,1;
implement,1;
lock.,1;
You,1;
and,1;
lock,1;
only,1;
lock,,1;
and,1;
lock,1;
and,1;
By,1;
store,1;
lock,1;
and,1;
to
acquire,1;
lock,,1;
and,1;
lock,1;
acquired,1;
lock,1;
and,1;
there,1;
and,1;
see,1;
Relaxed,1;
weaker,1;
guarantees.
Sequentially,1;
Ordering
Sequentially,1;
memory
ordering,1;
to.,1;
broadly,,1;
only,1;
see,1;
as,1;
seen,1;
behavior,1;
and,1;
two,1;
and,1;
two,1;
and,1;
Y,,1;
and,1;
will,1;
see,1;
pattern,1;
Y.,1;
fairly,1;
abstract,,1;
consider,1;
10-4,
182
Chapter,1;
see,1;
X:,1;
=,1;
Y:,1;
=,1;
=,1;
=,1;
=,1;
t3,1;
=,1;
{
while,1;
{
Z.fetch_add(1,,1;
Ordering::Relaxed);,1;
=,1;
{
while,1;
{
Z.fetch_add(1,,1;
Ordering::Relaxed);,1;
10-4:,1;
Weird,1;
two,1;
and,1;
and,1;
checks,1;
true,1;
1,1;
and,1;
then,1;
checks,1;
1,1;
possible
values,1;
work,1;
definitions,1;
and,1;
let’s,1;
true,1;
observes,1;
can
happen,1;
only,1;
t3,1;
true,1;
observes,1;
only,1;
2.,1;
runs.
Logically,,1;
the
order,1;
and,1;
and,1;
then,1;
t3,1;
and,1;
find
that,1;
just,1;
t4’s,1;
0,,1;
how-
ever,,1;
t3,1;
t3,1;
only,1;
and,1;
true,1;
time,1;
and,1;
will,1;
stems,1;
inclina-
tion,1;
then,1;
then,1;
and,1;
to
box,1;
and,1;
t3,1;
order
for,1;
and,1;
as,1;
As,1;
as,1;
fine
to,1;
t3,1;
as,1;
t3,1;
observes
that,1;
observes,1;
true,1;
observes,1;
observes,1;
that
Y,1;
true,1;
discussed,1;
only,1;
see,1;
before
an,1;
store,1;
just,1;
t3,1;
==,1;
true,
and,1;
=,1;
==,1;
false,,1;
main,1;
there,1;
relevant,1;
=,1;
true,1;
and,1;
=,1;
none.,1;
==,1;
false,,1;
main,1;
No,1;
just,1;
make,1;
and,1;
closer,1;
observes,1;
about,1;
and,1;
marked,1;
com-
piler,1;
(such,1;
as,1;
special,1;
those,1;
and,1;
fairly,1;
ensures,1;
SeqCst,1;
were,1;
and,1;
just,1;
as,1;
Under,1;
possible,1;
ran,1;
ran,1;
so
the,1;
t3,1;
and,1;
see,1;
and,1;
thus,1;
Z
cannot,1;
0.
Compare,1;
and,1;
and,1;
store,,1;
and,1;
You,1;
and,1;
with,,1;
and,1;
will,1;
only,1;
as
it,1;
observed,1;
see,1;
look
at,1;
lock,1;
keeps,1;
lock,1;
LOCK.,1;
true,1;
the
lock,1;
lock,,1;
false,,1;
true,1;
again;,1;
then,1;
and,1;
sets,1;
lock,1;
work,1;
done.
static,1;
=,1;
lock,1;
Call,1;
lock.
f();
//,1;
might,1;
==,1;
time,1;
and,1;
true,1;
and,1;
prevent!
The,1;
issue,1;
there,1;
load
the,1;
current,1;
and,1;
might,1;
and,1;
the
value,1;
only,1;
and,1;
corrected,1;
=,1;
lock,1;
=,1;
break,
Ok(true),1;
unreachable!(),
Concurrency,1;
}
}
}
//,1;
Call,1;
lock.
f();
//,1;
10-6:,1;
corrected,1;
time,1;
around,,1;
and,1;
checking,1;
lock,1;
and,1;
true,1;
lock,1;
as,1;
appropriate.,1;
happens,1;
and,1;
case,,1;
and,1;
then,1;
as,1;
true,1;
only,1;
current,1;
returns,1;
the
value,1;
(Err).
In,1;
case,,1;
returns,1;
current,1;
isn’t,1;
current,1;
will,1;
store,1;
and,1;
then,1;
checks,1;
only,1;
as,1;
that
was,1;
as,1;
current,1;
and,1;
then,1;
original,1;
will,1;
succeed.,1;
as,1;
simple,1;
and,1;
two,1;
The,1;
and,1;
memory
ordering,1;
and,1;
store,1;
The,1;
and,1;
current,1;
These,1;
and,1;
appropriate,,1;
this
case,,1;
and,1;
iterations,1;
and,1;
they,1;
outside,1;
it.
Even,1;
simple,,1;
powerful
synchronization,1;
build,1;
consensus,1;
only
compare_exchange!,1;
constructs,1;
implementation
details.
Be,1;
has
exclusive,1;
and,1;
turn,1;
quickly,1;
only,1;
make,1;
will,1;
cores.,1;
probably,1;
than,1;
that—the,1;
only,1;
time,1;
protocol,1;
and,1;
E,1;
E,1;
careful,1;
will,1;
named,1;
compare_exchange_weak,,1;
and,1;
The,1;
might,1;
except,1;
the
value,1;
The,1;
system,1;
ARM,1;
and,1;
store,1;
store,1;
will,1;
associated,1;
The,1;
ARM,1;
pair,1;
and,1;
returning,1;
only,1;
nested,1;
and,1;
already,1;
case,,1;
and,1;
ARM,1;
and,1;
compiled,1;
x86!
The,1;
methods,1;
(fetch_add,,1;
and,1;
in.,1;
The,1;
two,1;
single
atomic,1;
will,1;
will,1;
and,1;
they,1;
and,1;
there,1;
will,1;
simple,1;
than,1;
and,1;
then,1;
current,1;
happens,1;
Think,1;
AtomicUsize,1;
of
Concurrency,1;
Parallelism)
187operations,1;
two,1;
a
job,1;
as,1;
methods,1;
implement,1;
commutative,1;
and,1;
store,1;
store,1;
As,1;
1,1;
current,1;
and,1;
returns,1;
the
value,1;
AtomicUsize,1;
1,1;
methods,1;
than,1;
they,1;
and,1;
threads
contend,1;
as,1;
grows.,1;
enough,1;
those,1;
will,1;
and,1;
algorithm,1;
than,1;
named—behind,1;
scenes,,1;
just,1;
will,1;
than,1;
and,1;
than,1;
consider,1;
only,1;
possible,1;
and,1;
disposal,,1;
it’s
easy,1;
and,1;
just,1;
concurrency
altogether.,1;
and,1;
much),1;
simple,,1;
code—always
start,1;
simplest,1;
design,1;
then,1;
measure,
and,1;
only,1;
patterns,1;
that
do,1;
fine-grained,1;
and,1;
and,1;
then,1;
care,1;
You’re,1;
make,1;
than,1;
pieces,1;
and,1;
effort,1;
and,1;
simple,1;
enough,1;
case,,1;
and,1;
then,1;
system,1;
scales,1;
poorly.,1;
bottle-
neck,1;
isolation,1;
and,1;
adjustments
where,1;
enough,1;
lock,1;
two,1;
than,1;
and,1;
than,1;
implement,1;
lock-free,1;
work,1;
queue.,1;
work,1;
and,1;
keep
things,1;
simple,1;
optimize—use,1;
and,1;
then,1;
find,1;
those,1;
becoming,1;
care,1;
necessarily,1;
those,1;
(yet,,1;
necessarily,1;
sequence,1;
simple,1;
parallel.
For,1;
were,1;
and,1;
those,1;
instead
tries,1;
possible,1;
hopes,1;
might,1;
reveal,1;
themselves.
Stress,1;
ways;,1;
gener-
ates,1;
inputs,1;
and,1;
schedules.,1;
only,1;
as,1;
as,1;
about,1;
bug,1;
panic.,1;
idea,1;
worried,1;
about,1;
Concurrency,1;
primary,1;
handle,1;
As,1;
just,1;
possible,1;
legal,1;
only,1;
very
low-level,1;
and,1;
system,1;
already,1;
relative,1;
and,1;
as,1;
date,1;
time,1;
overview,1;
cases,1;
closures
that,1;
pass,1;
The,1;
model,1;
keeps,1;
and,1;
possible,1;
iterations,1;
interactions,,1;
all
the,1;
and,1;
as,1;
and,1;
The,1;
tie,1;
executor,1;
and,1;
they,1;
possible,1;
point,,1;
and,1;
they,1;
inform,1;
new
possible,1;
consider.,1;
all
the,1;
possible,1;
possible,1;
and,1;
then,1;
them,,1;
possible,1;
test
cases,1;
with,,1;
find,1;
only,1;
find,1;
cases,1;
In
practice,,1;
consider,1;
only,1;
possible,1;
executions,,1;
only,1;
as,1;
time,1;
placing,1;
assertions
in,1;
tracking,1;
and,1;
itera-
tions,1;
ThreadSanitizer,,1;
as,1;
placing,1;
Then,,1;
as,1;
those,1;
bookkeeping
instructions,1;
and,1;
special,1;
con-
current,1;
condition.,1;
For
example,,1;
X,,1;
waving,1;
write/write,1;
bug.
190
Chapter,1;
only,1;
observes,1;
and,1;
execute
it,1;
and,1;
only,1;
(5–15,1;
time,1;
writing),,1;
enough,1;
cases,1;
time,1;
compiler,1;
and,1;
pass,1;
-Zsanitizer=thread,1;
time,1;
will,1;
standard
supported,1;
accesses,,1;
and,1;
of
uninitialized,1;
and,1;
suite
through,1;
those,1;
quite,1;
instrumentation,1;
relative,1;
and,1;
might,1;
longer,1;
statements,,1;
two,1;
reasons,1;
print,1;
The,1;
and,1;
printing,1;
terminal,1;
quite,1;
terminal,1;
system,1;
terminal,1;
own,1;
time,1;
might,1;
disappears.
The,1;
print,1;
(generally),1;
lock.,1;
look
inside,1;
library,,1;
see,1;
isn’t,1;
too
badly,1;
lock,,1;
might,1;
the
lock,1;
will,1;
acquiring,1;
point,,1;
and,1;
printing,1;
in.,1;
two,1;
just,1;
print,1;
might,1;
fix,1;
bug,1;
as,1;
spot,1;
Heisenbug,,1;
find,1;
might,1;
print,1;
only,1;
frameworks,1;
work,1;
those,1;
As,1;
bug,1;
might,1;
Personally,1;
tracing,1;
there,1;
there.
Summary
In,1;
and,1;
pit-
falls,1;
and,1;
work,1;
and,1;
Rust
code.,1;
then,1;
deeper,1;
they,1;
they,1;
and,1;
for.,1;
and,1;
continue,1;
against,1;
R,1;
E,1;
T,1;
T,1;
E,1;
R,1;
Rust.,1;
or
by,1;
allowing,1;
You,1;
primary,1;
mechanism,1;
We’ll,1;
see,1;
and,1;
and,1;
and,1;
outside,1;
Then,,1;
allowing,1;
data,1;
talk,1;
about,1;
nontrivial,1;
FFI.NOTE
While,1;
refer,1;
FFI,1;
as,1;
about,1;
another,,1;
FFI,1;
entirely,1;
two,1;
compiled,1;
you’re
using,1;
happens,1;
just,1;
file—the,1;
ultimately,,1;
about,1;
two,1;
primary,1;
build-
ing,1;
code),1;
and,1;
and,1;
memory.,1;
We’ll,1;
compiler,1;
compiled,1;
the
compiler,1;
about,1;
compiler,1;
pass,1;
compiler,1;
generates,1;
refer,1;
compiler
defaults,1;
semirandom,1;
two,1;
parts,1;
compiler,1;
will,1;
work,1;
isn’t,1;
compiled,1;
as,1;
and,1;
thus,1;
compiled
by,1;
You,1;
can’t,1;
about,1;
semirandom,1;
keeps,1;
can’t,1;
FFI,1;
about,1;
can’t,1;
origin,,1;
about,1;
compiler,1;
than,1;
own
(we’ll,1;
talk,1;
about,1;
happens,1;
two,1;
sharing,1;
place.,1;
likelihood,,1;
compilation,1;
wouldn’t,1;
defini-
tion,1;
(that,1;
quick,1;
about,1;
only,1;
will,1;
link,1;
defini-
tion,1;
found,,1;
if
there,1;
will,1;
and,1;
crash,1;
course,1;
idea,1;
will,1;
You,1;
see,,1;
compiler,1;
isn’t,1;
(typically)
broken,1;
and,1;
level,,1;
there,1;
generation,,1;
and,1;
of
as,1;
“the,1;
and,1;
features,1;
programming
language.,1;
generates,1;
machine
operations.,1;
then,1;
tool,,1;
two,1;
single
big,1;
pass,1;
then,1;
compilation,1;
parallel,1;
as,1;
as,1;
there,1;
isn’t,1;
been
generated,,1;
those,1;
pieces,1;
then,1;
by,,1;
unsurprisingly,,1;
The,1;
linker’s,1;
primary,1;
to
take,1;
artifacts,,1;
and,1;
then,1;
a
symbol,1;
and,1;
separately.
The,1;
FFI,1;
care,1;
the
input,1;
were,1;
just,1;
and,1;
then,1;
file,1;
originally,1;
and,1;
downloaded,1;
as,1;
as,1;
they,1;
will,1;
make,1;
linking
is,1;
as,1;
symbol’s,1;
hand,
Foreign,1;
Function,1;
symbol’s,1;
runs.,1;
We’ll,1;
talk,1;
about,1;
and,1;
mechanism,1;
within,1;
11-1,1;
variable
called,1;
make,1;
whose,1;
unspecified
but,1;
will,1;
=,1;
true;
extern,1;
bool;
}
Listing,1;
and,1;
ensures,1;
retains,1;
compilation,1;
than,1;
compiler,1;
to,,1;
The,1;
as,1;
isn’t,1;
marked,1;
will,1;
accessible,1;
link,1;
against,1;
block,1;
refers,1;
will,1;
based,1;
just,1;
Rust
doesn’t,1;
about,1;
variable,
and,1;
thus,1;
can’t,1;
accessed,1;
only,1;
mutable,1;
an
extern,1;
These,1;
mutable,1;
data,1;
You,1;
as,1;
mut,,1;
access.
The,1;
procedure,1;
FFI,1;
11-2,
we,1;
make,1;
accessible,1;
and,1;
pull,1;
fn,1;
11-2:,1;
and,1;
as,1;
11-1,1;
fn,,1;
there,1;
definitions,1;
FOREIGN_
DEBUG,1;
hello_foreign,,1;
link,1;
against,1;
definitions,1;
block,1;
#[link(name,1;
resolve,1;
functions),1;
against,1;
named,1;
“crypto.”,1;
You,1;
rename
an,1;
=,1;
and,1;
then,1;
item,1;
rename,1;
item,1;
export
using,1;
=,1;
accepts,1;
argument,1;
the
block,1;
The,1;
argument,1;
linking.,1;
The,1;
"static",,1;
block,1;
statically).,1;
essentially,1;
compiler,1;
and,1;
thus,1;
as,1;
they,1;
and,1;
outside,1;
and,1;
and,1;
distribution.,1;
librar-
ies,1;
libraries,1;
against,1;
having
to,1;
recompile,1;
gets,1;
and,1;
and,1;
updated
library,1;
will,1;
library’s
code,1;
recompile,1;
against,1;
and,1;
turn,1;
pulls,1;
item,1;
just,1;
and,1;
then,1;
Function,1;
attractive,,1;
linking:,1;
distribution.,1;
libraries
your,1;
only,1;
they,1;
make,1;
they,1;
This
may,1;
libraries,1;
OpenSSL,1;
The,1;
then,1;
they,1;
and,1;
there,1;
isn’t,1;
and,1;
compilation,1;
judgment!
Calling,1;
Conventions
Symbols,1;
calls,1;
FFI,1;
boundaries.,1;
compiler,1;
technical,1;
as,1;
general,1;
registers,,1;
in
order,1;
jump,1;
back,1;
returns
How,1;
registers,,1;
own,1;
isn’t,1;
compiler,1;
works,1;
as,1;
definitions,1;
and,1;
calls,1;
compiled,1;
about,1;
"Rust",1;
as,1;
there,1;
works,1;
only,1;
isn’t,1;
will,1;
FFI,1;
undefined,1;
FFI,1;
conventions,1;
following,1;
fn,1;
and,1;
block,1;
For
example,,1;
operating
system’s,1;
time,1;
except,1;
Win32,,1;
"stdcall",1;
optimized
external,1;
just,1;
will,1;
function’s,1;
fn()
is,1;
as,1;
"Rust",1;
T,1;
only,1;
build,1;
then,1;
just,1;
source,1;
and,1;
difficult,1;
source,1;
compiler,1;
arguments,,1;
and,1;
those,1;
caller’s,1;
compiler,1;
function’s,1;
speaking,,1;
artifacts,,1;
These,1;
resolve,1;
types,,1;
they,1;
com-
piler,1;
and,1;
can’t,1;
The,1;
solution,1;
and,1;
and,1;
libraries,1;
and,1;
Windows).,1;
they,1;
C.
To,1;
artifacts,,1;
Cargo.toml,1;
The,1;
val-
ues,,1;
just,1;
will,1;
your
crate,1;
types,,1;
relevant,1;
ones,1;
and,1;
are
dynamically,1;
and,1;
Keep,1;
Function,1;
types,,1;
only,1;
and,1;
and,1;
and,1;
marked,1;
data,1;
then,1;
two,1;
will,1;
data,1;
inconsistently.,1;
make,1;
types
match,1;
and,1;
Matching
Types,1;
FFI,1;
entirely,1;
make,1;
those,1;
within,1;
example,
if,1;
and,1;
C-like
types,1;
=,1;
=,1;
signed,,1;
c_long,1;
=,1;
pointer,1;
and,1;
quirky,1;
__be32.,1;
These,1;
and,1;
left,1;
as,1;
example,
__be32,1;
as,1;
i32,1;
and,1;
need
to,1;
represent
a,1;
as,1;
sequence,1;
than,1;
length,1;
C-style,1;
and,1;
For
vectors,,1;
pointer,1;
and,1;
length,1;
Vec::into_raw_parts,1;
in
handy,1;
types,,1;
as,1;
and,1;
and,1;
alignment.,1;
As,1;
discussed,1;
Chapter,1;
undefined,1;
and,1;
as,1;
alignment,1;
removing,1;
possible,1;
C-style,1;
contains,1;
data,1;
Foo,1;
Bar,,1;
Foo,1;
just,1;
compiler,1;
same
number,1;
variants.,1;
The,1;
0,,1;
1,
and,1;
You,1;
as,1;
Foo,1;
=,1;
1,
Baz,1;
=,1;
dataless,1;
variant’s,1;
and,1;
variant’s,1;
than,1;
will,1;
continue,1;
careful,1;
about,1;
as,1;
only,1;
Foo,1;
Rust!,1;
API,1;
bitflags,1;
set
and,1;
unset,1;
consider,1;
inte-
ger,1;
associated,1;
and,1;
improved,1;
Or,1;
bitflags,1;
fieldless,1;
pass,1;
than,1;
will,1;
dis-
criminator,1;
u8)],1;
Function,1;
contains,1;
data,,1;
two,1;
discriminator,1;
as
it,1;
and,1;
a
union,1;
data,1;
structures,1;
variant.,1;
and,1;
associated,1;
Foo,1;
{
Bar(i32),
Baz,1;
a:,1;
bool,,1;
Bar,,1;
a:,1;
bool,,1;
FooBaz,
}
#[repr(C)]
struct,1;
Foo,1;
FooTag,
data:,1;
as,1;
OP,1;
Chapter,1;
about,1;
compiler
uses,1;
patterns,1;
The,1;
leads,1;
FFI,1;
pointer,1;
as,1;
and,1;
data,1;
pointer,1;
can
be,1;
as,1;
These,1;
will,1;
pattern,1;
provided,,1;
and,1;
will,1;
as,1;
Rust.
Allocations
When,1;
belongs,1;
allocator,1;
and,1;
can
be,1;
only,1;
allocator.,1;
within,1;
and,1;
allocator,1;
FFI,1;
and,1;
comes,1;
FFI,1;
will,1;
two,1;
data,1;
methods,1;
they,1;
longer,1;
declarations,1;
signatures,1;
the
OpenSSL,1;
fn,1;
ECDSA_SIG;
//,1;
And,1;
accepts,1;
pointer,1;
and,1;
fn,1;
ECDSA_SIG);
Listing,1;
interface
The,1;
and,1;
pointer,1;
as,1;
and,1;
pass,1;
pointer,1;
and,1;
and,1;
the
free,1;
and,1;
then,1;
The,1;
pointer,1;
chunk,1;
then,1;
own,1;
No,1;
provided,,1;
as,1;
happens,1;
fn,1;
11-6:,1;
memory.,1;
The,1;
heap,
or,1;
mechanism,1;
fit,1;
and,1;
then,1;
library.,1;
The,1;
then,1;
only,1;
FFI,1;
implementation!
You,1;
approaches,1;
FFI,1;
APIs,1;
mix
and,1;
As,1;
general,1;
to
pass,1;
free-
dom,1;
as,1;
appropriate.,1;
allocator,1;
Function,1;
and,1;
allocator,1;
pass,1;
allocations,1;
entirely,1;
memory.,1;
ergonomics,1;
a
caller-managed,1;
work,1;
and,1;
library.
In,1;
impossible,1;
know
ahead,1;
time,1;
thus,1;
over
time,,1;
predict,1;
allocation.,1;
as,1;
will,1;
make,1;
go,1;
those,1;
cases,1;
care,1;
about,1;
allocations,1;
probably,1;
and,1;
then,1;
relevant,1;
pass,1;
FFI,1;
and,1;
those,1;
as,1;
as,1;
function’s,1;
pass,1;
as,1;
will,1;
careful,1;
as,1;
undefined,1;
The,1;
compiler,1;
will,1;
behavior,1;
marked,1;
and,1;
then,1;
FFI,1;
FFI,1;
will,1;
and,1;
will,1;
mainly,1;
mainly,1;
comes,1;
and,1;
then,1;
system,1;
important,1;
accurately,,1;
and,1;
and,1;
go
over,1;
and,1;
will,1;
modify,1;
data,1;
pointer,
make,1;
data,1;
&mut.,1;
and,1;
hell,1;
will,1;
make,1;
as,1;
as,1;
FFI,1;
lets,1;
and,1;
then,1;
lets,1;
as,1;
case,,1;
enforce
that,1;
system,1;
and,1;
implement,1;
and,1;
those,1;
thread-safe!,1;
wrapper’s,1;
and,1;
thus,1;
undefined,1;
enforce
external,1;
event,1;
fn,1;
fn,1;
use
Now,1;
only,1;
page,1;
Chapter,1;
and,1;
as,1;
fn,1;
start(),1;
fn,1;
Option<Event>,1;
=,1;
FFI,1;
empty,1;
connect,1;
Function,1;
only,1;
and,1;
only,1;
“same,1;
nor
Sync,,1;
phantom,1;
pointer,1;
and,1;
and,1;
indirect.,1;
for
EventLoop,1;
difficult,1;
another
thread.,1;
How,1;
handle,1;
as,1;
exercise.
Pointer,1;
FFI,1;
APIs,,1;
necessarily,1;
and,1;
chunk,1;
might,1;
internal,1;
with,,1;
might,1;
difficult,1;
C-style,1;
APIs,1;
pointers,,1;
writ-
ten,1;
as,1;
pointer,1;
just,1;
and,1;
does
not,1;
about,1;
to.,1;
as,1;
serve,1;
FFI,1;
to,,1;
pass,1;
the
pointer,1;
as,1;
and,1;
FFI,1;
methods,1;
another,,1;
as,1;
FFI,1;
and,1;
pointer,1;
than,1;
Rust.,1;
pointer
type,1;
calls,1;
and,1;
con-
struct,1;
empty,1;
two,1;
pointer,1;
Foo(c_void);
#[non_exhaustive],1;
Bar(c_void);
extern,1;
fn,1;
foo(),1;
fn,1;
Foo);
pub,1;
fn,1;
Bar);
}
Listing,1;
Opaque,1;
pointer,1;
Foo,1;
and,1;
types,,1;
they,1;
place,1;
signatures.,1;
they,1;
required,,1;
pointer,1;
got,1;
back,1;
ensures,1;
Foo,1;
and,1;
be
constructed,1;
outside,1;
and,1;
and,1;
be
quite,1;
libraries,1;
enough,1;
signatures,1;
enough,1;
cases,1;
and,1;
that
some,1;
patterns,1;
careful,1;
thought,1;
translate.
Luckily,,1;
process,1;
as,1;
as,1;
header,1;
essentially,1;
all
the,1;
and,1;
discussed,1;
and,1;
generator,1;
header,1;
and,1;
generates,1;
process,1;
necessary.,1;
build,1;
and,1;
just,1;
header,1;
ships,1;
as,1;
directly,,1;
they,1;
will,1;
only,1;
they,1;
were,1;
for.,1;
build,1;
current,1;
build,1;
build,1;
=,1;
as,1;
it;,1;
only,1;
then,1;
source,1;
gets,1;
own,1;
build,1;
Cargo.toml.
Build,1;
scripts,1;
bundled
C,1;
source,,1;
discover,1;
and,1;
build
flags,1;
purposes,1;
recompilation,,1;
source,1;
Function,1;
build,1;
scripts,1;
they,1;
in.,1;
build,1;
compiler,1;
prime,1;
in
Istanbul,1;
compilation,1;
make,1;
developers,,1;
leads,1;
build,1;
special,1;
directory,1;
The,1;
directory,1;
and,1;
accessible,1;
source,1;
time,1;
pick,1;
build,1;
script.,1;
and,1;
Rust
types,1;
build,1;
.h,1;
file,1;
and,1;
turn,1;
file,1;
bindings.rs
inside,1;
You,1;
then,1;
following,1;
file,1;
bindings.rs,1;
compilation,1;
bindings.rs,1;
place,1;
own,1;
and,1;
as,1;
suffix,1;
will,1;
as,1;
two,1;
Cargo.toml,1;
You,1;
essentially,1;
own,1;
issue,1;
adopted,1;
The,1;
those,1;
header,1;
FFI,1;
bindings.
NOTE
Remember,1;
main,1;
constitutes,1;
main,1;
file,1;
publish,1;
header,1;
file,1;
make,1;
header,1;
file,1;
then,1;
date,1;
as
your,1;
as,1;
build,1;
tool,,1;
and,1;
comes
as,1;
and,1;
build,1;
header,1;
file,1;
and,1;
and,1;
header,1;
file,1;
main,1;
computer-readable
208
Chapter,1;
isn’t,1;
general
cbindgen,1;
fairly,1;
doesn’t,,1;
file,1;
mainly,1;
as,1;
describe,1;
libraries,1;
link,1;
against.
Nearly,1;
they,1;
ubiquitous.,1;
C++,1;
libraries,1;
comes,1;
and,1;
signatures,1;
header,1;
time,1;
of
writing,,1;
lacking,1;
manually
call,1;
constructors,,1;
and,1;
of
Rust,1;
as,1;
as,1;
make,1;
discussed,1;
FFI,1;
and,1;
two,1;
mesh,1;
about,1;
and,1;
make,1;
experience,1;
FFI,1;
date,1;
and,1;
where
even,1;
simple,1;
Function,1;
R,1;
D,1;
R,1;
programming,,1;
isn’t,1;
means.,1;
programmer,1;
system,1;
and,1;
with
a,1;
ARM,1;
clock,1;
speed,1;
and,1;
as,1;
those,1;
those,1;
that
don’t,1;
will,1;
alloc,1;
and,1;
tricks,1;
binary
for,1;
Standard,1;
there’s
the,1;
and,1;
and,1;
library,,1;
file,1;
and,1;
facilities,1;
and,1;
and,1;
std,1;
top,1;
two,1;
libraries,1;
and,1;
std,1;
just,1;
those,1;
two,1;
pyramid,1;
and,1;
types,,1;
as,1;
as,1;
The,1;
works,1;
as,1;
system,1;
does
not,1;
there,1;
and,1;
there,1;
allocator,,1;
Vec,,1;
and,1;
as,1;
pointers,,1;
(String).,1;
We’ll,1;
back,1;
alloc,1;
std,1;
re-exports,1;
everything,1;
and
alloc,,1;
about,1;
as,1;
there,1;
Iterator,1;
file,1;
print,1;
terminal,1;
can’t,1;
and,1;
thus,1;
no-go—say,1;
Box,1;
and,1;
than,1;
those,1;
constructs
in,1;
page,1;
outside,1;
might,1;
work,1;
prevent
you,1;
This
may,1;
as,1;
marked,1;
as,1;
features,1;
features,1;
enabled,,1;
APIs,1;
and,1;
authors,1;
cases,1;
and,1;
and,1;
features,1;
additive,,1;
std
feature,,1;
will,1;
only,1;
bare-bones,1;
API,1;
std,1;
then,1;
APIs,1;
they,1;
longer,1;
there,1;
and,1;
and,1;
file,1;
Or,1;
vec![])?,1;
The,1;
module,1;
exports,1;
The,1;
special,1;
types,
traits,,1;
and,1;
Allocation
As,1;
discussed,1;
Chapter,1;
and,1;
and,1;
and,1;
arguments,,1;
and,1;
heap,1;
every-
thing,1;
The,1;
heap,1;
variably,1;
sized,1;
and,1;
those,1;
allocations,1;
to.,1;
heap,1;
extremely,1;
and,1;
as,1;
result,,1;
you
find,1;
Vec,,1;
and,1;
and,1;
heap,1;
and,1;
time,1;
and,1;
Standard,1;
scenes,,1;
heap,1;
just,1;
huge,1;
chunk,1;
allocator.,1;
allocator,1;
allocations,1;
those,1;
allocations,1;
and,1;
longer,1;
system,1;
allocator,,1;
library.,1;
works,1;
allocator,1;
will,1;
trait
combined,1;
#[global_allocator],1;
alloc,1;
returning,1;
allocator,1;
and,1;
system,1;
allocation.,1;
entirely,1;
possible,1;
implement,1;
full-blown,1;
back,1;
just,1;
an
allocator,1;
std,1;
alloc,1;
The,1;
comes,1;
and,1;
favorite,1;
types,,1;
Arc,,1;
and,1;
them,,1;
system,1;
To
use,1;
alloc,1;
context,,1;
those,1;
instead.
Do,1;
alloc,1;
will,1;
longer,1;
allocator,1;
only,1;
(that,1;
pan-
icking).,1;
methods,1;
might,1;
The,1;
methods,1;
methods,1;
than,1;
just,1;
and,1;
those,1;
then,1;
handle,1;
might,1;
strike,1;
as,1;
possible,1;
nontrivial,1;
only,1;
they,1;
can’t,1;
and,1;
they,1;
The,1;
and,1;
example,
for,1;
vector,,1;
enough,1;
function’s,1;
largest,1;
elements
you,1;
and,1;
then,1;
augment,1;
vector,,1;
sized),1;
and,1;
length,1;
N:,1;
usize,
}
impl<T,,1;
N:,1;
try_push(&mut,1;
T>,1;
==,1;
=,1;
type
We,1;
make,1;
and,1;
N,,1;
and,1;
then,1;
as,1;
structure,1;
time,1;
and,1;
inform,1;
[MaybeUninit<T>;,1;
isn’t,1;
true,1;
level—it,1;
collector,,1;
scheduler—it’s,1;
true,1;
special,1;
and,1;
certain,1;
special,1;
code,
which,1;
bare-bones,1;
runtime.
The,1;
Handler
The,1;
special,1;
invoking,1;
panic!,1;
invokes,1;
and,1;
backtrace
to,1;
default.,1;
then,1;
current,1;
compilation,1;
(either,1;
most
embedded,1;
as,1;
there,1;
isn’t,1;
necessarily,1;
don’t
Rust,1;
Standard,1;
handler,,1;
decorate,1;
invokes,1;
and,1;
about,1;
What
the,1;
entirely,1;
!,1;
compiler,1;
The
standard,1;
and,1;
then,1;
terminates,1;
the
program,,1;
even
as,1;
as,1;
resetting,1;
main,1;
main,1;
points
to,1;
per-
forms,1;
stashing
the,1;
place,1;
them,,1;
main,1;
flushing,1;
exit,,1;
and,1;
handlers.,1;
The,1;
turn,1;
calls,1;
main,1;
then,1;
about,1;
and,1;
in.
This,1;
works,1;
and,1;
accessible,1;
completely
omits,1;
lang_start,,1;
as,1;
as,1;
=
"main"],1;
sequence,1;
truly,1;
they,1;
jump,1;
source,1;
initialize,1;
alloc,1;
allocator,,1;
allocator,1;
#[global_allocator],1;
earlier,1;
happens,1;
allocator,1;
fails
216
Chapter,1;
memory.,1;
handler
to,1;
happen,1;
allocator,1;
it.
The,1;
behavior,1;
print,1;
and,1;
then,1;
standard
error,,1;
time,1;
=,1;
"oom"].,1;
Keep,1;
certainly,1;
as,1;
will,1;
continue,1;
time,1;
already,1;
permanent,1;
std,1;
as,1;
handler,,1;
behavior,1;
Chapter,1;
discussed,1;
compiler,1;
amount
of,1;
and,1;
room,1;
Normally,,1;
and,1;
the
compiler,1;
and,1;
advantage,1;
can’t,1;
two,1;
been
reordered,1;
relative,1;
two,1;
two,1;
and,1;
semantics
programmers,1;
optimizations.”,1;
particular,,1;
devices,1;
mapping,,1;
internal,1;
memory.,1;
For
example,,1;
range,1;
0xA0000–
0xBFFFF,1;
crude,1;
range,1;
will,1;
device-mapped,1;
implement,1;
behavior,1;
and,1;
compiler,1;
make,1;
about,1;
and,1;
longer,1;
devices,1;
memory-mapped,1;
registers,1;
Standard,1;
the
compiler,1;
can’t,1;
store,1;
similar,1;
issue,1;
in
ways,1;
and,1;
thus,1;
compiler,1;
might,1;
there,1;
operat-
ing,1;
system,1;
handle,1;
those,1;
active,1;
and,1;
event,1;
event,1;
diversion
instead.,1;
Normally,,1;
compiler,1;
possible,1;
away.,1;
compiler,1;
can’t,1;
predict,1;
exceptional,1;
plan,1;
for
them,1;
event,1;
than,1;
original,1;
exceptional,1;
operations.,1;
These,1;
memory-mapped,1;
they,1;
to
memory,1;
compiler,1;
trickery,,1;
and,1;
relative,1;
possible,1;
happen,1;
they,1;
(such,1;
as,1;
and,1;
store,1;
The,1;
exceptional,1;
as,1;
as,1;
accessed,1;
exceptional,1;
only,1;
com-
piler,1;
accom-
plish,1;
need
to,1;
initialize,1;
issue,1;
manipulate,1;
time,1;
writing,
there,1;
and,1;
syntax
on,1;
discuss,1;
possible,1;
just,1;
build,1;
scripts,1;
Chapter,1;
scripts,1;
certain,1;
special,1;
directives,1;
build,1;
cargo:rustc-link-lib=static=xyz
to,1;
link,1;
file,1;
libxyz.a,1;
and,1;
/some/path,1;
link,1;
those,,1;
file,1;
file,1;
compiler,1;
archive,1;
(usually,1;
The,1;
then,1;
those,1;
two,1;
directives,,1;
OUT_DIR—and,1;
precom-
piled,1;
Hardware,1;
Abstraction
Rust’s,1;
system,1;
and,1;
otherwise
unpleasant,1;
that
more,1;
important,1;
than,1;
world,1;
programming,,1;
and,1;
devices,1;
just,1;
And,1;
might,1;
crash,1;
than,1;
just,1;
important,1;
system,1;
impossible,1;
as,1;
discussed,1;
Chapter,1;
combinations,1;
register,1;
whose,1;
parameters,1;
current,1;
registers,,1;
and,1;
implement,1;
only,1;
legal,1;
transitions,1;
rocket,1;
Chapter,1;
API,1;
design—all,1;
as,1;
consider,1;
pair,1;
registers,1;
“on”,1;
(single-threaded),1;
invariant.
//,1;
register,1;
fn,1;
Standard,1;
Library
219static,1;
=,1;
false;
if,1;
},1;
=,1;
true,1;
};
Some(Pair(PhantomData))
}
}
pub,1;
fn,1;
and,1;
On>
}
impl,1;
fn,1;
and,1;
On>
Listing,1;
Statically,1;
patterns,1;
The,1;
only,1;
checking,1;
only,1;
and,1;
methods,1;
and,1;
only,1;
possible,1;
and,1;
pattern,1;
advantage,1;
and,1;
and,1;
registers,1;
r2
isn’t,1;
already,1;
r1,,1;
writ-
ing,1;
system,1;
and,1;
niceties,1;
modern,1;
93/4,1;
RAM,1;
and,1;
calls,1;
in
your,1;
build,1;
than,1;
build,1;
using,,1;
and,1;
using
cross-compilation.
NOTE
If,1;
as,1;
as,1;
involves,1;
two,1;
and,1;
The,1;
and,1;
target
platform,1;
will,1;
as,1;
will,1;
as,1;
and,1;
compiler,1;
The,1;
vendor,1;
pc,1;
Windows,,1;
and,1;
and,1;
unknown,1;
compilation,1;
left,1;
The,1;
compiler,1;
artifacts,,1;
and,1;
as,1;
to,,1;
already,1;
as,1;
pass,1;
argument,1;
will,1;
then,1;
care,1;
compiler,1;
generates,1;
will,1;
work,1;
will,1;
contains,1;
compilation,1;
system,1;
calls,1;
invoked,1;
and,1;
can’t,1;
components,1;
std,1;
library,,1;
thumbv7m-none-eabi,1;
and,1;
allocator,,1;
alloc,1;
build,1;
comes,1;
write
actually,1;
std,1;
only,1;
std,1;
integration,1;
build,1;
thumbv7m-none-eabi,
any,1;
components,1;
will,1;
will,1;
dependencies,1;
std,1;
Standard,1;
default.,1;
waste,1;
and
bandwidth.,1;
rustup,1;
and,1;
unstable),1;
build-std,1;
build,1;
std,1;
(and/or,1;
and,1;
about,1;
go,1;
and,1;
about,1;
and,1;
place,1;
reach,1;
and,1;
make,1;
fn,1;
main,1;
look
at,1;
device-mapped,1;
and,1;
patterns,1;
happen,1;
lowest,1;
programming,,1;
and,1;
system.,1;
the
very,1;
and
maybe,1;
1213
THE,1;
happens,1;
dependencies,1;
some
code,1;
good,,1;
of
heavy,1;
important,1;
than,1;
libraries,1;
and,1;
and,1;
date,1;
latest,1;
and,1;
greatest,1;
leverage,,1;
back,1;
suggestions,1;
continue,1;
developing,1;
relative,1;
already,1;
enough,1;
that
it’s,1;
everything,1;
you
want,,1;
download,1;
and,1;
make,1;
dependencies.
However,,1;
and,1;
general,1;
might,1;
necessarily,1;
and,1;
difficult,1;
design,1;
go,1;
and,1;
hopes,1;
they,1;
find,1;
time,1;
only,1;
certain,1;
dependencies,1;
and,1;
appear,1;
By,1;
time,1;
there,1;
place.
cargo-expand
Expands,1;
and,1;
lets,1;
spot,1;
macros.,1;
own,1;
macros.
cargo-hack
Helps,1;
works,1;
The,1;
similar,1;
build,,1;
and,1;
given
command,1;
possible,1;
combinations,1;
powerset),1;
crate’s
features.
cargo-llvm-lines
Analyzes,1;
compiler,1;
actually
generates,1;
(LLVM),,1;
and,1;
largest,1;
generates,1;
bigger,1;
unlike,1;
about,1;
check-
ing,1;
dependencies,1;
Cargo.toml,1;
they,1;
case,,1;
dependency
closure.
While,1;
developing,1;
and,1;
ripgrep,1;
prede-
cessors,1;
find,1;
and,1;
and,1;
happen,1;
reach,1;
will,1;
continue,1;
mechanism,1;
subslices,1;
life-
times.,1;
chunk,1;
and,1;
benchmarking,1;
math,1;
eliminate
noise,1;
and,1;
You,1;
certainly,1;
and,1;
mechanism,1;
C++,1;
and,1;
time,1;
worth,1;
and,1;
than,1;
library.,1;
and,1;
oper-
ation,1;
and,1;
those,1;
two,1;
data,1;
histograms,1;
range,1;
averages,1;
min/
max,1;
metrics.
heapless
Supplies,1;
data,1;
structures,1;
structures,1;
situations,1;
Iterator,1;
methods,1;
and,1;
These,1;
extension,1;
methods,1;
in
code,,1;
as,1;
implement,1;
sequence,1;
and,1;
same
time,1;
(Itertools::minmax),,1;
pattern,1;
check-
ing,1;
item,1;
system,1;
calls,1;
systems,
which,1;
experience,1;
than,1;
FFI,1;
directly.
pin-project
Provides,1;
types,,1;
turn,1;
Pin,1;
and
Unpin,1;
own,1;
types.,1;
heavy,1;
slightly,1;
parts,1;
C,,1;
and,1;
simple,,1;
use
cryptography,1;
already,1;
rustls,1;
library,,1;
data,1;
structure,1;
place,1;
only,1;
pattern,1;
comes,1;
current,1;
indi-
vidual,1;
accessible,1;
You,1;
those
guarantees,1;
important.
structopt
Wraps,1;
argument,1;
and,1;
describe,1;
entirely,1;
system,1;
(plus,1;
arguments,,1;
and,1;
checking,1;
and
IDE,1;
enumerated,1;
types,,1;
ones,1;
Chapter,1;
care,1;
following,1;
conventions,1;
and,1;
entire,1;
top,1;
turn,1;
make,1;
build,1;
top,1;
of.
tracing
Provides,1;
trace,1;
applications.,1;
and,1;
those,1;
events.,1;
be
The,1;
and,1;
and,1;
features,1;
for.,1;
These,1;
they,1;
they,1;
tends
to,1;
and,1;
occasionally
use,1;
directory,1;
about,1;
about:,1;
pass,1;
as,1;
argument,1;
Rustup-managed,1;
will,1;
work,1;
as,1;
and,1;
then,1;
back,1;
previ-
ously.,1;
So,,1;
will,1;
will,1;
The,1;
comes,1;
checking,1;
local,1;
current,1;
developing,1;
features,1;
Cargo
itself,1;
primary
purpose,1;
print,1;
as,1;
tree.,1;
identifier,1;
and,1;
current,1;
-i,1;
rand,1;
will,1;
print,1;
or
a,1;
and,1;
keeps,1;
in.,1;
You,1;
pass,1;
features,1;
sharing,1;
just,1;
own,1;
local,1;
invoked,1;
exists.,1;
invokes,1;
and,1;
were,1;
13on,1;
will,1;
cargo-foo,1;
will,1;
cargo-foo,1;
work,1;
isn’t,1;
comes,1;
gets,1;
own,1;
directory,1;
compilation,1;
artifacts,,1;
time,1;
copies,1;
compiled
artifacts,1;
artifacts,1;
as,1;
they,1;
necessarily,1;
projects
(say,,1;
compiler,1;
than,1;
another).,1;
sharing,1;
build,1;
artifacts,1;
entirely,1;
compilation,1;
time,1;
build,1;
artifacts,1;
just,1;
file,1;
directory,1;
those
shared,1;
artifacts,1;
go,1;
and,1;
will,1;
care,1;
No,1;
tar-
get,1;
make,1;
directory,1;
every
now,1;
and,1;
and,1;
will,1;
build,1;
build,1;
directory,1;
assume,1;
com-
piler,1;
artifacts,1;
will,1;
compiler,1;
dependencies,1;
time,1;
directory,1;
suspiciously,1;
time,1;
reach,1;
Running,1;
flag,1;
outputs,1;
about,1;
process,1;
build,1;
scripts,1;
and,1;
might,1;
then,1;
work,1;
reveal,1;
build,1;
make,1;
system,1;
libraries
instead.,1;
dive,1;
deeper,,1;
about,1;
time,1;
spent,1;
only,1;
look-
ing,1;
compiler,1;
compiler,1;
features,1;
The,1;
valuable,1;
source,1;
spent,1;
calls,1;
find,1;
objects,1;
The,1;
alignment,1;
and,1;
places,1;
and,1;
layout,,1;
make,1;
they,1;
You,1;
be
interested,1;
lint,,1;
warning,1;
contains,1;
whose,1;
.cargo/config.toml
to,1;
will,1;
pass,1;
only,1;
=,1;
profiling—at,1;
register,1;
function
calls.,1;
work,1;
just,1;
enabled,1;
=,1;
true,1;
case,,1;
and,1;
care,1;
Standard,1;
those,1;
find,1;
library,,1;
will,1;
find,1;
methods,1;
include,,1;
make,1;
relevant,1;
improves,1;
In
this,1;
types,,1;
and,1;
methods,1;
and,1;
utilities.,1;
lets,1;
socket,,1;
You,1;
already,1;
familiar,1;
works,1;
append,1;
and,1;
comes,1;
allocate,,1;
append,1;
item,1;
about,1;
Chapter,1;
worth,1;
bring-
ing,1;
refer-
ence,1;
T,1;
and,1;
two,1;
referent,1;
and,1;
returns,1;
as,1;
let’s,1;
types.,1;
The,1;
and
BufWriter,1;
issue,1;
calls,1;
These,1;
wrap,1;
Write,1;
and,1;
implement,1;
and,1;
Write,1;
buffer,1;
resource,1;
only,1;
and,1;
only,1;
as,1;
system,1;
system,1;
as,1;
Chapter,1;
flex-
ibility,1;
as,1;
argument,1;
as,1;
as,1;
not
allocate.,1;
fit,1;
as,1;
inputs,1;
as,1;
two,1;
as,1;
and,1;
returns,1;
based,1;
The,1;
only,1;
the
identifier,1;
will,1;
sent,1;
entity,1;
will,1;
deserialized,1;
as,1;
make,1;
&EntityIdentifier,,1;
will,1;
construct,1;
place!,1;
only,1;
&str,1;
types,,1;
then,1;
we’d,1;
two,1;
rescue!,1;
internally.
The,1;
str>,
name:,1;
str>,
}
Listing,1;
just,1;
And,1;
EntityIdentifier<'static>,,1;
Cow::Owned.
One,1;
unnecessary,1;
implement,1;
will,1;
make,1;
they,1;
std::sync::Once,1;
lets,1;
FFI,1;
only,1;
VecDeque,1;
that
I,1;
find,1;
queue.,1;
similar,1;
Vec,,1;
and,1;
Vec,1;
chunk,1;
memory.,1;
The,1;
difference,1;
VecDeque,1;
keeps,1;
and,1;
data,1;
that
single,1;
allocation.,1;
and,1;
as,1;
as,1;
The,1;
longer,1;
necessarily
contiguous,1;
implement,1;
rapid-fire,1;
and,1;
T,1;
other-
wise,,1;
Arc,,1;
and,1;
then,1;
T,1;
single-
ton,1;
than,1;
already,1;
than,1;
=,1;
and,1;
might,1;
implement,1;
work,1;
case,,1;
as,1;
only,1;
isn’t,1;
the
232
Chapter,1;
(debug_struct,1;
about,1;
entry),,1;
and,1;
then,1;
returns,1;
created.,1;
concise,1;
than,1;
earlier,1;
Deref,1;
and,1;
simple,1;
make,1;
Option
much,1;
inscrutable,1;
lets,1;
and,1;
two,1;
limit,1;
limit,1;
returns,1;
than,1;
min,,1;
than,1;
and,1;
and,1;
and,1;
Option.,1;
transposing,1;
E>>,,1;
and,1;
operation
can,1;
make,1;
and,1;
similar
methods,1;
contexts.
Vec::swap_remove,1;
twin.,1;
the
order,1;
vector,,1;
be
very,1;
vectors.,1;
and,1;
then,1;
vector’s
length,1;
Be,1;
shuffle,1;
and,1;
thus,1;
come
across,1;
patterns,1;
discussed,1;
far.,1;
about,1;
will,1;
make,1;
recognize,1;
them,,1;
encounter,1;
You,1;
own,1;
store,1;
data,1;
within,1;
checker.,1;
store,1;
data,1;
accessed,1;
than,1;
as,1;
keeping,1;
store,1;
You,1;
they,1;
unnecessary,1;
and,1;
bookkeeping
requires,1;
store,1;
You,1;
difficult,1;
impossible,1;
Ecosystem
233data,1;
and,1;
data,1;
structure,1;
(it’s,1;
as,1;
discussed,1;
Chapter,1;
8).,1;
You,1;
pointers
combined,1;
Pin,1;
complexity,1;
as,1;
as,1;
then,1;
as,1;
them,,1;
The,1;
idea,1;
store,1;
data,1;
Vec,,1;
and,1;
then,1;
store,1;
just,1;
data,1;
struc-
ture.,1;
then,1;
data,1;
find,1;
data,1;
and,1;
then,1;
No,1;
data,1;
indexmap,1;
insertion,1;
The,1;
store,1;
two,1;
and,1;
two,1;
copies,1;
keeps,1;
pairs,1;
and,1;
then,1;
keeps,1;
Vec,1;
just,1;
walks,1;
Vec.,1;
key,,1;
mapping,,1;
the
key’s,1;
Vec,1;
and,1;
then,1;
petgraph,1;
data,1;
structures,1;
and,1;
algo-
rithms,,1;
The,1;
Vec,1;
node,1;
and,1;
then,1;
only,1;
into
those,1;
refer,1;
node,1;
So,,1;
two,1;
as,1;
two,1;
than,1;
reference-counted,1;
data,1;
data,1;
structures,1;
and,1;
then,1;
root,1;
data,1;
root,1;
data,1;
store,1;
Vec,,1;
removing,1;
data,1;
then,1;
go,1;
data,1;
structures,1;
simple,1;
code
runs,1;
and,1;
under
mutual,1;
Chapter,1;
calls,1;
f,,1;
and,1;
back,1;
happens,1;
will,1;
will,1;
again.
It’s,1;
possible,1;
work,1;
catch_unwind,,1;
13-3,1;
current,1;
gets,1;
reset.
fn,1;
&AtomicBool,,1;
{
lock.store(true,,1;
Ordering::Release);
}
}
let,1;
=,1;
DropGuard(lock);
f();
}
Listing,1;
13-3:,1;
gets,1;
local,1;
DropGuard,1;
and,1;
Then,,1;
construct,1;
just,1;
might
panic,,1;
because
it,1;
returns,1;
lock,1;
is
released,,1;
and,1;
well.
It’s,1;
important,1;
user-provided,1;
refer,1;
guard’s,1;
as,1;
=,1;
user-provided,1;
catch_unwind,,1;
work,1;
only,1;
gets,1;
pattern,1;
local,1;
and,1;
thus,1;
time,1;
Tokio,1;
about,1;
executor,1;
Future::poll,1;
to
leaf,1;
signatures,1;
local,1;
executor,1;
active,1;
Future::poll,1;
Tokio,1;
local,1;
reset.
NOTE
You’ll,1;
see,1;
accessible,1;
only,1;
references,,1;
might,1;
a
thread,1;
local,1;
already,1;
only,1;
use,,1;
and,1;
ideal,1;
implement,1;
itertools
crate,1;
extension,1;
operations.,1;
As
another,1;
ServiceExt,,1;
wrap,1;
as,1;
base,1;
and,1;
thus,1;
unnecessary
ecosystem,1;
splits,,1;
as,1;
Service.
An,1;
extension,1;
base,1;
extension,1;
(trait
ServiceExt:,1;
and,1;
T,1;
base,1;
T,1;
extension,1;
methods,1;
base,1;
trait.
Crate,1;
Chapter,1;
about,1;
and,1;
to
write,1;
similar,1;
own,1;
module,1;
those,1;
types,,1;
and,1;
magical,1;
about,1;
module,1;
and,1;
as,1;
they,1;
The,1;
import,1;
and,1;
quite,1;
*,1;
precedence,1;
than,1;
own,1;
extension,1;
methods,1;
only,1;
databases,,1;
extension,1;
will,1;
work,1;
only,1;
care,1;
13In,1;
careful,1;
as,1;
they,1;
turn,1;
module,1;
module,1;
and,1;
already,1;
will,1;
longer,1;
as,1;
enough,,1;
API,1;
see,1;
issue,1;
The,1;
about,1;
why,,1;
and,1;
consumers.
Specifically,1;
will,1;
module,1;
and,1;
thus,1;
will,1;
take
that,1;
account,1;
Date
Rust,,1;
The,1;
library,,1;
and,1;
broader,1;
infancy,,1;
and,1;
happen,1;
day.,1;
worth,1;
time,1;
up
with,1;
significant,1;
advantage,1;
greatest,1;
features,1;
monitoring,1;
and,1;
https://blog.rust-lang.org/,1;
good,,1;
place,1;
features,1;
announcements,1;
release.,1;
make,1;
as,1;
they,1;
will,1;
slowly,1;
deeper,,1;
and,1;
as,1;
(links,1;
The,1;
enough,1;
be
just,1;
two,1;
The,1;
outlines,1;
advantage,1;
Ecosystem
237If,1;
about,1;
developed,,1;
Inside,1;
It
includes,1;
as,1;
as,1;
proposals,,1;
and,1;
yourself—which,1;
encourage,,1;
as,1;
and,1;
groups,1;
Rust.,1;
appeals,1;
meets,1;
and,1;
to
help.,1;
You,1;
about,1;
internals,1;
thought,1;
design,1;
and,1;
value
is,1;
only,1;
and,1;
discover,1;
and,1;
design,1;
they,1;
and
continuously,1;
and,1;
advantage,1;
and,1;
already,1;
discussed,1;
and,1;
and,1;
just,1;
about,1;
already,1;
places,1;
forum,1;
and,1;
account,1;
You,1;
vibe,1;
and,1;
date,1;
[Rust’s],1;
and,1;
announcements,1;
and
changelogs,1;
as,1;
as,1;
and,1;
resources,,1;
opportunities.,1;
and,1;
truly,1;
all!,1;
valuable,1;
to
you,1;
and,1;
isn’t,1;
just,1;
clicking,1;
appear,1;
Use…
(https://caniuse.rs/),1;
Next?
So,,1;
absorbed,1;
and,1;
there,1;
and,1;
and,1;
subsections,1;
based,1;
find,1;
work,1;
perceive.,1;
simplest,1;
time,1;
refer,1;
and,1;
work,1;
make,1;
and,1;
learning,,1;
and,1;
itself—it’s,1;
just,1;
notice
and,1;
experienced,1;
essentially,1;
and,1;
experienced,1;
thinking,1;
and,1;
explain
tricky,1;
concepts,1;
as,1;
they,1;
pick,1;
a
variety,1;
design,1;
will,1;
and,1;
only,1;
experience,1;
will,1;
make,1;
early,1;
stages,1;
And,1;
experience,1;
interac-
tive,,1;
video,1;
unsurprisingly,,1;
own,1;
mix,1;
and,1;
short(er),1;
code-
based,1;
as,1;
as,1;
dive,1;
stories.
The,1;
resource,1;
and,1;
visual,1;
viewing.
Jonathan,1;
JT,1;
work,1;
providing,1;
it’s
like,1;
work,1;
nontrivial,1;
https://www.youtube.com/c/RyanLevicksVideos/.,1;
concepts,1;
and,1;
FFI,1;
Microsoft,1;
dives,1;
work,1;
make,1;
as,1;
experienced,1;
pair,1;
colleague,1;
expertise,1;
session,1;
together!
Learn,1;
Doing
Since,1;
No,1;
place,1;
dive,1;
general,1;
guidance,1;
pick,1;
care,1;
about,,1;
without
worrying,1;
care,1;
about,1;
there,1;
and,1;
there,1;
as,1;
and,1;
X,”,1;
priority,1;
own,1;
Without
concrete,1;
motivation,,1;
quickly,1;
steam,1;
and,1;
find,1;
The,1;
and,1;
fix,1;
Nothing,1;
rid,1;
nuisance,1;
back,1;
and,1;
consider,1;
compiler,1;
and,1;
associated,1;
and,1;
and,1;
there,1;
mentors,1;
outlines,1;
solving,1;
issue,1;
marked,1;
find,1;
As,1;
use
frequently,1;
and,1;
original,1;
tool,,1;
experience,1;
will,1;
without
having,1;
time,1;
coming,1;
already,1;
there,1;
and,1;
make,1;
find,1;
appeals,1;
back,1;
own,1;
experience,1;
and,1;
similar,1;
ended,1;
languages).,1;
and,1;
library.,1;
that
other,1;
https://github.com/dtolnay/request-for-
implementation/,1;
source,1;
for
something,1;
and,1;
https://github.com/not-yet-awesome-rust/not-yet-awesome-rust/,1;
Reading
Although,1;
col-
lection,1;
favorite,1;
continue,1;
teach
me,1;
serve,1;
as,1;
questions.
First,,1;
virtual,1;
Some,,1;
reference-like,1;
Embedded,1;
technical,1;
about,1;
their
respective,1;
The,1;
worth,1;
checking,1;
(https://rustc-dev-guide.rust-lang.org/),1;
and,1;
Standard,1;
These,1;
fantastic
resources,1;
about,1;
compiler,1;
before
you,1;
The,1;
guidelines
are,1;
already,1;
Rust
API,1;
Code,1;
and,1;
time,1;
there,1;
https://www.rust-lang.org/learn/,1;
essentially,1;
parts
of,1;
quite,1;
basics,1;
about,1;
in-
memory,1;
types,,1;
and,1;
behavior,1;
virtual,1;
valuable,1;
experience,1;
and,1;
The,1;
(https://veykril.github.io/tlborm/),,1;
nontrivial,1;
and,1;
The,1;
(https://nnethercote.github.io/perf-book/),1;
and
the,1;
(https://
rust-fuzz.github.io/book/),,1;
Cookbook,1;
solutions,1;
books,,1;
The,1;
Tokio,1;
and,1;
extremely,1;
and,1;
serve,1;
as,1;
guide,1;
asynchronous
code.,1;
data,1;
structures,1;
(https://rust-unofficial.github.io/too-many-lists/),1;
and,1;
gets,1;
about,1;
closer,1;
system,1;
good
Rust,1;
patterns,1;
Amos’s,1;
dives,1;
and,1;
quick,1;
than,1;
tutorial,,1;
(https://cheats.rs/),1;
nice,1;
visual,1;
familiar,1;
go,1;
there,,1;
comes,1;
with
a,1;
experience,1;
and,1;
time
I,1;
make,1;
video,1;
podcast,1;
So,,1;
about,1;
things
you’ve,1;
video,1;
giving,1;
talk.,1;
The,1;
important,1;
own,1;
words,1;
already,1;
back,1;
comes,1;
a
slightly,1;
time,1;
humbling,1;
and,1;
deeply
educational,1;
and,1;
make,1;
Rust
Mentors,1;
local,1;
and,1;
date,1;
as,1;
and,1;
then,1;
and,1;
back,1;
discussed,1;
go,1;
continue,1;
And,1;
than,1;
Ecosystem
243INDEX
Symbols
!,1;
(exclamation,1;
104–105
acquire,1;
150
alloc,1;
library,,1;
89
architecture,,1;
146
array,,1;
23
AsRef,1;
165–166
asterisk,1;
120
blocking,,1;
types,,1;
177–178
attributes
fundamental,,1;
30
global_allocator,,1;
214,,1;
196,,1;
239
B
benchmarking,,1;
artifacts,,1;
library,,1;
library,,1;
99
blanket,1;
40
blocking,,1;
Error>,1;
and,1;
types,,1;
library,,1;
209
callbacks,,1;
224
cargo-llvm-lines,,1;
224–225
cargo-outdated,,1;
library,,1;
88
changelogs,,1;
83,,1;
generation,,1;
184–187
compare_exchange_weak,1;
and,1;
177–188
models,,1;
70,,1;
pools,,1;
7
contention,,1;
library,,1;
212
correctness,1;
library,,1;
220–221
cxx,1;
library,,1;
races,,1;
168–169
Debug,1;
options,,1;
102–109
dependency,1;
40–41,,1;
86
Deserialize,1;
46
Display,1;
44–46
drop,1;
197
dynamic,1;
26–27,,1;
43
dynamic,1;
213–215
dynamically,1;
sized,1;
237
editions,,1;
237
Eq,1;
references,,1;
types,,1;
186
false,1;
pointers,,1;
methods,1;
library,,1;
library,,1;
226
foreign,1;
(FFI),,1;
types,,1;
pointers,,1;
150
spawn,,1;
150
unreachable_unchecked,,1;
150
fundamental,1;
types,,1;
131
heapless,1;
library,,1;
191–192
hidden,1;
items,,1;
arguments,,1;
151–152
grammar,,1;
148
I
immutable,1;
references,,1;
9–10
implementation-managed,1;
pointers,,1;
233–234
indexmap,1;
library,,1;
mutability,,1;
63
intra-workspace,1;
40
iter::once,1;
230–231
itertools,1;
library,,1;
Many
Linked,1;
Lists,,1;
207–209
bitflags,,1;
113
nix,,1;
226–227
serde,,1;
40
slab,,1;
227
thiserror,,1;
(LTO),,1;
library,,1;
190
M
macros,,1;
101–115,,1;
112
panic!,,1;
47
ManuallyDrop::drop,1;
types,,1;
Tim,,1;
mapping,,1;
handler,,1;
153
memory,1;
library,,1;
233
MaybeUninit::assume_init,,1;
148–149
Option::as_deref,,1;
165
misaligned,1;
accesses,,1;
88
monomorphization,,1;
references,,1;
exclusion,,1;
185–186
N
naming,1;
aligned,1;
library,,1;
216
#[no_mangle],1;
196,,1;
232
opaque,1;
pointers,,1;
39
Ord::clamp,1;
handler,,1;
216–217
ownership,,1;
handler,,1;
215–216
#[panic_handler],1;
76–77
panics,,1;
204
parallelism,,1;
175–176
PartialEq,1;
39
PartialOrd,1;
39
patches,,1;
169
performance
concurrency,1;
library,,1;
library,,1;
pointers,,1;
230
index,1;
pointers,,1;
pointers,,1;
206
overview,,1;
types,,1;
pointers,,1;
144–147
void,1;
pointers,,1;
pointers,,1;
24
poll,1;
contracts,,1;
contracts,,1;
types,,1;
156
Principle,1;
109–115
profiles,,1;
216
projects
configuration,,1;
73–77
structure,,1;
(?),,1;
pointers,,1;
references,,1;
135
read_unaligned,1;
types,,1;
21
representation,,1;
library,,1;
215–217
Rust,1;
API,1;
Cheat,1;
Language
(Klabnik,1;
and,1;
2585,,1;
143
RFC,1;
Code,1;
172
sealed,1;
data,1;
127
semantic,1;
typing,,1;
48–49
semantic,1;
trick,,1;
182–184
250
Index
serde,1;
library,,1;
40
shadowing,,1;
references,,1;
9–10
#[should_panic],1;
92
Sized,1;
library,,1;
227
spans,,1;
to,,1;
library,,1;
230–233
Standard,1;
6–7
static,1;
library,,1;
library,,1;
136–137
success,1;
151,,1;
205–206
synchronous,1;
105
Systems,1;
221
target,1;
harness,,1;
APIs,,1;
89
textual,1;
library,,1;
113–114
token,1;
David,,1;
library,,1;
library,,1;
objects,,1;
27
traits
AsRef,,1;
41
Clone,,1;
24–28
Copy,,1;
59
Deref,,1;
40–41,,1;
40
dispatch,,1;
59
Drop,,1;
63
generic,,1;
51–53
Into,,1;
28–31
PartialEq,,1;
151,,1;
205–206
trait,1;
objects,,1;
190–191
tuple,,1;
Error>,,1;
and,1;
231
Cell,,1;
231–232
dynamically,1;
sized,1;
30
HashMap,,1;
34
MaybeUninit<T>,,1;
147
pointer,,1;
232
Weak,,1;
146
zero-sized,,1;
143,,1;
241
unwinding,,1;
158–159
V
validity,,1;
7–8
variables
high-level,1;
17
Vec,1;
157
VecDeque,1;
232
Vec::swap_remove,1;
80–84
252
Index
virtual,1;
(vtables),,1;
pointers,,1;
20
wide,1;
pointers,,1;
pools,,1;
173–174
working,1;
groups,,1;
70–72
work,1;
173
wrapper,1;
types,,1;
40–41
write!,1;
230
write_unaligned,1;
242
Y
yielding,,1;
types,,1;
flag,,1;
flag,,1;
flag,,1;
flag,,1;
flag,,1;
The,1;
and,1;
Inc.,1;
Michigan.Never,1;
world,1;
and,1;
and,1;
innovation,1;
people—
more,1;
than,1;
years,,1;
and,1;
developing,1;
over-
come,1;
obstacles,1;
and,1;
expression.
This,1;
empowers,1;
EFF.ORG/NO-STARCH-PRESSRESOURCES
Visit,1;
errata,1;
and,1;
Engineer
by,1;
loren,1;
kohnfelderby,1;
pp.,,1;
$49.99
isbn,1;
978-1-7185-0192-8
THE,1;
PROGRAMMING
LANGUAGE
by,1;
pp.,,1;
pp.,,1;
$24.98
isbn,1;
Secure,,1;
High-Performance
Applications
by,1;
rick,1;
pp.,,1;
978-1-7185-0144-7
phone:
800.420.7240,1;
or
415.863.9900
THE,1;
Code
by,1;
e.,1;
pp.,,1;
$44.95
isbn,1;
978-1-59327-970-7
HOW,1;
Know
by,1;
pp.,,1;
$49.99
isbn,1;
V,1;
D,1;
T,1;
AY
A,1;
DIVE
INTO,1;
Rust.,1;
everything,1;
need
to,1;
build,1;
and,1;
maintain,1;
and,1;
and,1;
and,1;
complexity,1;
Pin,1;
and,1;
as,1;
as,1;
programming
language,,1;
ownership,,1;
and,1;
and,1;
world,1;
guidance,1;
API,1;
and,1;
and,1;
will,1;
and,1;
Write,1;
and,1;
and,1;
based,1;
Distinguish,1;
and,1;
Write,1;
and,1;
and,1;
and,1;
they,1;
insights,1;
and,1;
await,
pinning,,1;
and,1;
frequent
­contributor,1;
and,1;
relational,1;
database,1;
course,1;
E,1;
E,1;
T,1;
E,1;
E,1;
E,1;
T,1;
E,1;
E,1;
T,1;
