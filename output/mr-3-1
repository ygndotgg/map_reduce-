FOR
RUS,1;
P,1;
G,1;
G,1;
R
E,1;
P,1;
L,1;
P,1;
TA,1;
G,1;
g,1;
t
San,1;
Copyright,1;
by,1;
part,1;
may,1;
or,1;
form,1;
or,1;
by,1;
means,
electronic,1;
or,1;
or,1;
by,1;
storage,1;
or,1;
22,1;
(print)
ISBN-13:,1;
(ebook)
Publisher:,1;
William,1;
Chadwick
Cover,1;
Design:,1;
Type-O-Rama
Proofreader:,1;
on,1;
distributors,1;
or,1;
directly:
No,1;
Inc.
245,1;
CA,1;
1.415.863.9900;,1;
info@nostarch.com
www.nostarch.com
Library,1;
Number:,1;
company,1;
herein,1;
may,1;
owners.,1;
every,1;
only
in,1;
an,1;
benefit,1;
no,1;
distributed,1;
on,1;
an,1;
“As,1;
Is”,1;
every,1;
been,1;
work,,1;
or,1;
or,1;
damage,1;
or,1;
by,1;
high-performance,1;
over,1;
MIT.,1;
been,1;
asynchronous,1;
maintains,1;
such,1;
hdrhistogram,1;
been,1;
Since,1;
cover,1;
like,1;
variance,
atomics,,1;
dispatch,,1;
been,1;
received,1;
enthusiasti-
cally,1;
by,1;
community.
About,1;
Technical,1;
Tolnay,1;
prolific,,1;
respected,1;
maintains,1;
most,1;
syn,,1;
serde,,1;
anyhow.,1;
library,1;
xv
Preface,1;
1:,1;
37
Chapter,1;
5:,1;
Project,1;
Structure,1;
6:,1;
7:,1;
Macros,1;
13:,1;
223
Index,1;
TA,1;
About,1;
9
Mutable,1;
10
Interior,1;
Dispatch,1;
Orphan,1;
Rule,1;
Practices,1;
38
Common,1;
for,1;
Implementations,1;
40
Wrapper,1;
vs.,1;
46
Obvious,1;
47
Type,1;
Guidance,1;
Implementations,1;
HANDLING
57
Representing,1;
Errors,1;
Errors,1;
59
Special,1;
Errors,1;
62
Summary,1;
65
5
PROJECT,1;
STRUCTURE
67
Features,1;
70
Workspaces,1;
70
Project,1;
Compilation,1;
80
Minimum,1;
81
Minimal,1;
83
Summary,1;
Test,1;
93
Test,1;
97
Summary,1;
Macros,1;
Use,1;
Them,1;
Macros,1;
Macros,1;
109
Types,1;
Macros,1;
Macros,1;
111
How,1;
PROGRAMMING
117
What’s,1;
118
Multithreading,1;
121
Ergonomic,1;
Sleep,1;
Up,1;
Is,1;
Misnomer,1;
It,1;
138
Summary,1;
Keyword,1;
144
Juggling,1;
151
Great,1;
Wrong?,1;
155
Panics,1;
Drop,1;
163
Manage,1;
164
Check,1;
(AND,1;
Models,1;
200
Type,1;
204
bindgen,1;
STANDARD,1;
Allocation,1;
Handler,1;
Out-of-Memory,1;
Handler,1;
ECOSYSTEM
223
What’s,1;
Up,1;
by,1;
by,1;
by,1;
Reading,1;
by,1;
noticed,1;
prepared,1;
for,1;
folks,1;
very,1;
well,1;
powered,1;
by,1;
on,1;
thing,1;
been,1;
emerges,1;
com-
fort,1;
pieces.,1;
here,1;
don’t,1;
pretty,1;
“household
name”,1;
open,1;
library,1;
understand,1;
case,1;
every,1;
thing,1;
every,1;
opin-
ions,1;
material.,1;
Structs,1;
no,1;
an,1;
opinion,1;
infinitely,1;
flex-
ible,1;
judicious,1;
speeds,1;
6)—someone,1;
beyond,1;
hard,1;
or,1;
projects,,1;
read,1;
here,1;
wrong,1;
seize,1;
wrong,1;
here,1;
can
accomplish,1;
over,1;
That’s,1;
E
One,1;
on,1;
roadmap,1;
intermediate,1;
aren’t,1;
aren’t,1;
looking,1;
new,1;
borrow,1;
That,1;
inspired,1;
or,1;
actually,1;
for,1;
an,1;
the
whole,1;
understand,1;
beginner,1;
themselves,,1;
good,1;
to
use,1;
very,1;
over,1;
clear,1;
weren’t,1;
for,1;
or,1;
for,1;
every,1;
more,1;
over,1;
understand,1;
topic,1;
better,,1;
or,1;
or,1;
for,1;
sure,1;
for,1;
ultimately,1;
aim,1;
distillall,1;
intermediate,1;
by,1;
textual
explanations,1;
most,1;
intermediate,1;
on,1;
them.,1;
format,1;
well,1;
by-
topic,1;
reference,1;
where
coding,1;
taste.,1;
language.,1;
developer,1;
above,1;
another,1;
intermediate,1;
Rust
teaching,1;
useful,1;
one
step,1;
roadmap,1;
assumed,1;
like,1;
or,1;
like,1;
been,1;
different,1;
ballgame.,1;
for,1;
patience,1;
on,1;
been,1;
Rust
developers,1;
developed,1;
ecosystem
I,1;
interact,1;
inspired,1;
spread,1;
ability.,1;
for,1;
streams,1;
over,1;
years;,1;
don’t,1;
first,1;
your
ongoing,1;
been,1;
good,1;
been,1;
great,1;
book’s,1;
obviously,1;
errors,1;
vast,1;
been,1;
for,1;
It,1;
Liz’s,1;
she,1;
while,1;
her,1;
she,1;
followed,1;
material.,1;
discussions,1;
follow,1;
more,1;
Nichols,,1;
the
authors,1;
first,1;
least,1;
very,1;
extraordinary,1;
they’ve,1;
well,1;
want,1;
very,1;
partially,1;
read,1;
like,1;
or,1;
physically,,1;
the
introductory,1;
hands-on,1;
time,,1;
for,1;
useful,1;
surrounding,1;
Taken,1;
I’m,1;
writing
Rust,1;
resource.,1;
for,1;
Rustaceans,1;
(“the,1;
leaves,1;
well,1;
beyond,1;
trait,1;
system,,1;
It,1;
new,1;
like,1;
asynchronous,1;
development,,1;
andergonomic,1;
design.,1;
aim,1;
more,1;
enable,1;
more,1;
more,1;
robust,1;
Book
This,1;
are
more,1;
or,1;
or,1;
read,1;
for,1;
more,1;
holistic,1;
That,1;
by,1;
reading,1;
later,1;
for,1;
day-to-
day,1;
Here’s,1;
each
chapter:
Chapter,1;
gives,1;
more,1;
like,1;
memory,,1;
bor-
rowing,,1;
follow,1;
Types,,1;
more,1;
exhaustive,1;
of
types,1;
traits,1;
number,1;
3,,1;
flexible,,1;
on,1;
name
things,,1;
trait,1;
objects.
Chapter,1;
Handling,,1;
each,1;
each,1;
Project,1;
on,1;
non-code,1;
such,1;
6,,1;
presents,1;
techniques,1;
such,1;
7,,1;
useful,1;
their
pitfalls.
Chapter,1;
8,,1;
gives,1;
an,1;
dif-
ference,1;
synchronous,1;
asynchronous,1;
low,1;
an,1;
asynchronous,1;
great,1;
great,1;
You’ll,1;
well,1;
tools
and,1;
techniques,1;
incorrect,1;
code.
Chapter,1;
looks,1;
concurrency,1;
is
represented,1;
why,1;
correctness,1;
It,1;
concurrency,1;
concurrency,1;
sane,1;
while,1;
concurrent,1;
languages,1;
like,1;
the
extern,1;
actually,1;
library,1;
such,1;
or,1;
platforms,,1;
Ecosystem,,1;
cover,1;
instead,1;
It,1;
advice
on,1;
on,1;
practices,
tips,1;
on,1;
useful,1;
useful,1;
over,1;
You’ll,1;
that
information,1;
book’s,1;
on,1;
https://­
nostarch.com/rust-rustaceans/.
And,1;
now,,1;
there’s,1;
thing,1;
more,1;
cor-
ners,1;
precise,1;
to
use,1;
more,1;
try,1;
more,1;
work,,1;
memory,,1;
memory,1;
regions,1;
program,1;
has.,1;
borrowing,,1;
on,1;
read,1;
bottom,1;
or,1;
reference,1;
on,1;
sure
about.,1;
on,1;
completelycomfortable,1;
or,1;
About,1;
Memory
Not,1;
memory,1;
most,1;
environments,
your,1;
programs,1;
files,,1;
situation,1;
for,1;
what
mechanisms,1;
memory,1;
platforms,1;
beyond,1;
here.
Memory,1;
regions,1;
memory,,1;
first,1;
dif-
ference,1;
values,,1;
an,1;
turned,1;
on,1;
more,1;
like,1;
meant.
For,1;
example,,1;
number,1;
an,1;
instance,1;
6,,1;
Similarly,,1;
world",1;
strings,1;
representation
is,1;
location
where,1;
for,1;
location
that,1;
on,1;
on,1;
or,1;
number,1;
most,1;
on,1;
holds,1;
region,1;
memory,,1;
points,1;
dereferenced,1;
memory,1;
points,1;
We,1;
more,1;
variables,1;
memory,1;
three,1;
x,1;
var1,1;
mut,1;
1Here,,1;
42,1;
pointer),,1;
variables,1;
var1,1;
ini-
tially,,1;
separate,,1;
var1,1;
operator,1;
by,1;
left-hand,1;
such,1;
as:
let,1;
string,1;
string,1;
first,1;
string,1;
string,1;
At,1;
string,1;
If,1;
so,,1;
eye—we’ll,1;
string,1;
includes,1;
broad,1;
useful,1;
more,1;
complex,1;
more,1;
what
the,1;
programs,1;
such,1;
can
make,1;
Describing,1;
detail,1;
chap-
ters,1;
beyond,1;
useful,1;
of
lifetimes,1;
while,1;
good,1;
for,1;
for,1;
variables
described,1;
sections,1;
for,1;
most,1;
mate-
rial,1;
model,,1;
don’t,1;
variables,1;
When,1;
on,1;
by,1;
When,1;
later,1;
drawing,1;
new,1;
access,,1;
If,1;
no,1;
lines
can,1;
model,,1;
holds,1;
lines,1;
or,1;
effectively,1;
there.,1;
Using,1;
model,,1;
each,1;
one
tracing,1;
instance,1;
and
merge,1;
branches,,1;
each,1;
each,1;
flow,1;
while,1;
no,1;
flow,1;
cases.
let,1;
mut,1;
nowhere,1;
flow,1;
x,1;
42;
//,1;
flow,1;
assigned,1;
flow,1;
x,1;
continues,1;
flow,1;
flow,1;
Illegal,1;
borrow,1;
checker,1;
x,1;
because,1;
nowhere
to,1;
flow,1;
from.,1;
x,1;
flows
from,1;
flows:,1;
exclusive,1;
flow,1;
3,,1;
and
one,1;
flow,1;
borrow,1;
checker,1;
every,1;
flow,1;
no,1;
borrow,1;
checker,1;
3,,1;
sees,1;
flow,1;
Since,1;
cannot
have,1;
an,1;
exclusive,1;
time,,1;
code.,1;
compile,1;
flow,1;
exclusive,1;
flow,1;
3,,1;
no,1;
conflicting,1;
new,1;
by,1;
variables,1;
no,1;
borrow,1;
checker,1;
par-
ticular,,1;
program,,1;
actually,1;
produce,1;
Model
Variables,1;
memory,1;
locations,1;
may,1;
or,1;
may,1;
When,1;
dropped,1;
When,1;
or,1;
been,1;
backing,1;
memory,1;
dereferenced,1;
example,,1;
usize,,1;
x,1;
for,1;
region,1;
memory,1;
on,1;
for,1;
usize,,1;
such,1;
x,1;
6,,1;
region,1;
&x,1;
If,1;
declare,1;
variables,1;
different,1;
memory,1;
backing,1;
them.,1;
memory,1;
by,1;
useful,1;
for,1;
explicitly,1;
example,,1;
an,1;
optimization.,1;
real-
ity,,1;
may,1;
instead,1;
region,1;
memory,1;
if
no,1;
memory,1;
for,1;
may,1;
urge,1;
try,1;
head,1;
them.,1;
like
any,1;
useful,1;
be.,1;
If,1;
understand,1;
why,1;
or,1;
on,1;
memory,,1;
memory,1;
actually,1;
different,1;
regions,1;
memory,,1;
surprisingly,,1;
part,1;
memory,1;
on,1;
code.,1;
three,1;
most,1;
regions,1;
for,1;
memory.
The,1;
memory,1;
program,1;
Each,1;
contiguous,1;
Near,1;
for,1;
functions,1;
onto,1;
frame
contains,1;
variables,1;
When,1;
variables,1;
wiped,,1;
safe,1;
may,1;
by,1;
even,1;
been,1;
may,1;
illegal,1;
such,1;
moved,1;
crucially,1;
fact,1;
are
very,1;
Any,1;
a
frame,1;
on,1;
away,,1;
most,1;
Heap
The,1;
pool,1;
memory,1;
memory,1;
live,1;
until,1;
explicitly,1;
useful,1;
want,1;
live,1;
beyond,1;
If,1;
return,1;
on,1;
for,1;
want,1;
say,,1;
may,1;
no,1;
on,1;
heap.
The,1;
explicitly,1;
contiguous,1;
When,1;
so,,1;
That,1;
memory,1;
for,1;
until,1;
later,1;
deal-
locate,1;
the
corresponding,1;
Since,1;
from
the,1;
another,1;
safely,1;
operate,1;
on,1;
Or,,1;
memory,,1;
an,1;
program,1;
for,1;
When,1;
placed,1;
on,1;
(the,1;
on,1;
dropped,,1;
memory,1;
forget,1;
memory,,1;
forever,,1;
memory,1;
on,1;
memory,1;
want,1;
explicitly,1;
want,1;
leak,1;
configuration,1;
program,1;
on,1;
explicitly,1;
leak,1;
reference,1;
memory,1;
for,1;
program,1;
into.,1;
regions,1;
memory,1;
program,1;
memory,1;
live,1;
for,1;
pro-
gram.,1;
memory,1;
read-only.,1;
program,1;
by,1;
called.,1;
memory,1;
holds,1;
for,1;
variables,1;
declare,1;
keyword,,1;
well,1;
certain
constant,1;
like,1;
strings.
The,1;
reference,1;
valid,1;
for,1;
“as,1;
memory,1;
1around,”,1;
until,1;
program,1;
Since,1;
program,1;
starts,,1;
reference,1;
memory,1;
by,1;
until,1;
true—there,1;
reference,1;
points,1;
memory,1;
program,1;
concerned,,1;
for,1;
program,1;
more,1;
memory,1;
(through,1;
keyword,,1;
for,1;
because,1;
on,1;
parameters.,1;
like,1;
indicates,1;
live,1;
for,1;
Essentially,,1;
or,1;
borrow,1;
until,1;
good,1;
example
of,1;
new
thread,,1;
Since,1;
may,1;
new,1;
on,1;
new,1;
live,1;
for,1;
may,1;
for,1;
program.
NOTE
You,1;
may,1;
Constant,1;
computed,1;
compile,1;
computed,1;
constant,1;
no,1;
memory,1;
or,1;
storage,1;
(it,1;
is
not,1;
constant,1;
convenient,1;
for,1;
memory,1;
on,1;
each,1;
borrow
checker.,1;
If,1;
such,1;
by,1;
assigning,1;
new,1;
or,1;
on,1;
new,1;
At,1;
no,1;
variables,1;
flow,1;
moved,1;
variables,1;
new,1;
types,1;
follow,1;
If,1;
moved,1;
new,1;
memory,1;
copied,
and,1;
new,1;
locations,1;
Essentially,,1;
instance,1;
types,1;
such,1;
integer,1;
To,1;
duplicate,1;
by,1;
types,1;
well,1;
like,1;
memory,1;
for,1;
memory,1;
no,1;
for,1;
responsi-
bility,1;
necessary,1;
cleanup,1;
for,1;
by,1;
automatically,1;
holds,1;
complex,1;
may,1;
result,1;
requirement,,1;
holds,1;
reference,1;
gives,1;
semantics,,1;
Box::new(84);
{,1;
starts,1;
new,1;
scope,,1;
moved,1;
z
3,1;
x1;
//,1;
moved,1;
y1;
Listing,1;
semantics
We,1;
values,,1;
number,1;
42,1;
number,1;
When,1;
whereas
y1,1;
moved,1;
At,1;
continues,1;
3.,1;
once,1;
been,1;
moved,1;
When,1;
dropped,
and,1;
moved,1;
dropped,,1;
deallocates,1;
memory,1;
1DROP,1;
automatically,1;
scope,,1;
such,1;
1-3.,1;
for,1;
order,1;
variables,1;
(including,1;
dropped,1;
dropped,1;
source-code,1;
order.
This,1;
sound,1;
discrepancy?,1;
If,1;
it
closely,,1;
string,1;
reference,1;
string,1;
new,1;
dropped,1;
string,1;
an,1;
invalid,1;
variables,1;
may,1;
values,,1;
due,1;
for,1;
for,1;
values,,1;
like,1;
or,1;
surprise,1;
If,1;
constructed
an,1;
array,1;
values,,1;
seem,1;
dropped,1;
most,1;
for,1;
first,1;
or,1;
dropped,1;
the
second,,1;
for,1;
no,1;
allow,1;
self-references,1;
others,,1;
an,1;
for,1;
such,1;
whether,1;
exclusive,1;
or,1;
whether,1;
the
referenced,1;
may,1;
reference,,1;
may,1;
Any,1;
number,1;
may,1;
reference,1;
more,1;
behind,1;
reference,1;
points,1;
points,1;
while,1;
reference,1;
example,,1;
the
Rust,1;
sees,1;
behind,1;
reference,1;
read,1;
read,1;
once,1;
assertion,1;
sum:,1;
or,1;
optimization,1;
or,1;
over,1;
time,,1;
want,1;
actually,1;
case,1;
References
The,1;
reference,1;
reference,1;
no,1;
threads,1;
whether,1;
or,1;
for,1;
example,,1;
1-5.
fn,1;
output:,1;
exclusive.
In,1;
output,1;
Therefore,,1;
output,1;
If,1;
on,1;
exclusive,1;
optimization,1;
an,1;
result,1;
output,1;
case,1;
like,1;
reference,1;
mutate,1;
memory,1;
reference,1;
points,1;
mutate,1;
beyond,1;
reference,1;
on,1;
by,1;
may,1;
understand,1;
an,1;
example,,1;
x,1;
mut,1;
&i32
Listing,1;
example,,1;
different,1;
by,1;
reference,1;
differ-
ent,1;
Similarly,,1;
but
you,1;
different,1;
for,1;
when
it,1;
no,1;
a
mutable,1;
reference,1;
behind,1;
reference,,1;
If,1;
no,1;
for,1;
1-7,1;
gives,1;
an,1;
behind,1;
*s,1;
*s;
//,1;
this:
3,1;
*s,1;
behind,1;
mut,1;
r,1;
Box::new(84);
4,1;
mut,1;
Box::new(42);
replace_with_84(&mut,1;
reference,1;
lines,1;
illegal,1;
they
owned,1;
want,1;
valid,1;
std::mem::take,1;
good,1;
It,1;
std::mem::replace(&mut,1;
it
moves,1;
behind,1;
reference,1;
leaves,1;
new,,1;
for,1;
separate,,1;
is
safe,1;
for,1;
don’t,1;
behind,1;
reference,,1;
you
can,1;
3,,1;
caller
to,1;
When,1;
this,,1;
reference,1;
dropped,1;
values
without,1;
for,1;
Mutability
Some,1;
types,1;
allow,1;
mutate,1;
types,1;
on,1;
or,1;
on,1;
exclusive,1;
reference,,1;
given
only,1;
first,1;
types,1;
like,1;
for,1;
reference,1;
no,1;
references),1;
hood,,1;
types,1;
like,1;
them),1;
UnsafeCell,,1;
you
hesitate,1;
We,1;
cover,1;
more,1;
detail,1;
mutate,1;
types,1;
reference,1;
instead,1;
give
you,1;
for,1;
integer,1;
reference,1;
usize,1;
or,1;
behind,1;
such,1;
but
you,1;
read,1;
Cell,1;
library,1;
an,1;
safe,1;
muta-
bility,1;
It,1;
threads,1;
gives,1;
Cell.,1;
or,1;
return,1;
Since,1;
no,1;
Cell,1;
concurrently,1;
even,1;
mutation
happens,1;
reading,1;
con-
cept,1;
repeated,1;
about
lifetime,1;
That,1;
the
more,1;
complex,1;
more,1;
with.
Newer,1;
reference,1;
moved,1;
or,1;
more,1;
for,1;
region,1;
reference,1;
scope,,1;
later,1;
borrow,1;
Whenever,1;
reference
with,1;
borrow,1;
checker,1;
by,1;
no,1;
path.,1;
reference,1;
points,1;
safe,1;
flow,1;
reference,1;
reference,1;
mut,1;
x,1;
r,1;
starts,1;
reference,1;
first
branch,1;
try,1;
x,1;
by,1;
borrow,1;
checker,1;
x,1;
It,1;
no,1;
conflicting,1;
reference,1;
may,1;
surprise,1;
lifetimes
as,1;
scopes,,1;
r,1;
(it,1;
checker,1;
r,1;
later,1;
for,1;
x,1;
no,1;
flow,1;
r,1;
beyond,1;
no,1;
flows.,1;
borrow,1;
checker,1;
r,1;
3.,1;
It,1;
no,1;
conflicting,1;
is
not,1;
on,1;
well.
If,1;
another,1;
r,1;
compile.,1;
(the,1;
r),,1;
borrow,1;
checker,1;
conflicting,1;
convoluted.,1;
1-9,1;
an,1;
example
of,1;
invalid,1;
ultimately,1;
mut,1;
x,1;
mut,1;
'a
3,1;
x,1;
'a
Listing,1;
starts,1;
reference,1;
We,1;
x,1;
3,,1;
because,1;
no,1;
The
borrow,1;
checker,1;
by,1;
which
leaves,1;
no,1;
conflicting,1;
x,1;
3.,1;
reference,1;
whether,1;
or,1;
continues,1;
valid,1;
flow,1;
no,1;
conflicting,1;
borrow,1;
checker,1;
aligns,1;
data-flow,1;
memory,1;
earlier.,1;
When,1;
x,1;
When,1;
reassign,1;
creating,1;
an,1;
new,1;
It,1;
new,1;
borrow,1;
checker,1;
If,1;
whether,1;
borrow,1;
an,1;
invalid,1;
borrow,1;
borrow,1;
checker,1;
getting,1;
times,1;
understand,1;
why,1;
borrow,1;
part,1;
why,1;
ref-
erences,1;
borrow,1;
checker,1;
on,1;
is
especially,1;
want,1;
on,1;
return,1;
reference,1;
reference,1;
over,1;
or,1;
more,1;
over,1;
by,1;
2018),1;
topic,1;
reiterate,1;
complex,1;
types,1;
nature,,1;
such,1;
types,1;
implements,1;
or,1;
Essentially,,1;
instance,1;
dropped,,1;
borrow,1;
checker,1;
necessary,1;
case,1;
If,1;
count,1;
use,
14
Chapter,1;
1and,1;
as
they,1;
like,1;
1-7.,1;
more,1;
about
these,1;
while,1;
over,1;
over,1;
for,1;
life-
time,1;
its
methods,1;
return,1;
of
those,1;
gives,1;
an,1;
iterator,1;
over,1;
string,1;
by,1;
string.
struct,1;
StrSplit<'s,,1;
'p>,1;
&'s,1;
'p>,1;
for,1;
StrSplit<'s,,1;
'p>,1;
&'s,1;
str;
fn,1;
&str,,1;
c:,1;
char),1;
Option<&str>,1;
{
StrSplit,1;
delimiter:,1;
over,1;
lifetimes
When,1;
docu-
ment,1;
string,1;
When,1;
ask
for,1;
reference,1;
document.,1;
iterator,1;
str_before,1;
write:,1;
return,1;
function—the,1;
pro-
duced,1;
by,1;
borrow,1;
checker,1;
exposed,1;
rarely
know,1;
because,1;
mostly,1;
invisible.,1;
At,1;
types,1;
types,1;
subtype,1;
supertype,1;
subtype,1;
another,1;
least,1;
useful,1;
an,1;
subtype,1;
or,1;
subtype,1;
more,1;
an,1;
Similarly,,1;
because,1;
least,1;
Or,,1;
more,1;
subtype,1;
obviously,1;
practical,1;
types,1;
types,1;
three,1;
covariant,1;
example,,1;
because,1;
covariant,1;
covariant,1;
&Vec<&'a,1;
types,1;
an,1;
Vec<&'static,1;
That,1;
If,1;
could,,1;
string,1;
string,1;
Any,1;
for,1;
Cell<T>,1;
for,1;
arguments.
Function,1;
types,1;
more,1;
useful,1;
being
less,1;
arguments:
let,1;
str;,1;
more,1;
longer
let,1;
&'a
str;,1;
shorter
fn,1;
take_func2(&'a,1;
more,1;
indicates,1;
why,1;
param-
eters,1;
interact,1;
borrow,1;
like,1;
field.
struct,1;
{
s:,1;
mut,1;
mut,1;
"hello";
1,1;
*MutStr,1;
s:,1;
s);
Listing,1;
over,1;
first,1;
here,1;
unnecessary—we,1;
borrow,1;
different,1;
1-10.,1;
the
16
Chapter,1;
here,1;
'a,,1;
no,1;
all
because,1;
syntax,1;
may,1;
seem,1;
alien.,1;
x,1;
there’s,1;
no,1;
dropped,1;
If,1;
borrow,1;
string,1;
If,1;
'a,,1;
later,1;
string,1;
reference,1;
tries,1;
borrow,1;
by,1;
allow,1;
borrow,1;
println,,1;
on,1;
borrow,1;
so,,1;
borrow,1;
shortened,1;
(&'a,1;
covariant,1;
here,1;
behind,1;
Invariance,1;
never
replaced,1;
or,1;
compiler’s,1;
fails,,1;
reduced,1;
by,1;
want,1;
types,1;
covariant,1;
over,1;
If,1;
weigh,1;
another,1;
aim,1;
been,1;
on,1;
now,,1;
firm,1;
on,1;
memory,1;
model,,1;
errors,1;
may,1;
borrow,1;
checker,1;
seem,1;
covered,1;
hopefully,1;
more,1;
holistic,1;
over,1;
types,1;
memory,,1;
gener-
ics,1;
traits,1;
produce,1;
trait,1;
for,1;
more,1;
past,1;
covered,1;
instead,1;
different,1;
types,1;
traits,1;
trait,1;
for,1;
types,1;
most,1;
example,,1;
itself
until,1;
When,1;
number,1;
When,1;
i8,,1;
When
you,1;
compiler’s,1;
each
part,1;
for,1;
each,1;
struct,1;
for,1;
stored?,1;
understand,1;
more,1;
because,1;
affect,1;
correctness,1;
first,1;
dictates,1;
for,1;
been,1;
arbitrary,1;
memory,1;
hardware,1;
placed.,1;
most,1;
obvious,1;
If,1;
placed,1;
no,1;
location;,1;
or,1;
boundary.,1;
We,1;
least,1;
placed,1;
an,1;
a
multiple,1;
bits.
Some,1;
more,1;
memory,1;
system,,1;
memory,1;
byte.,1;
example,,1;
on,1;
most,1;
each,1;
address.,1;
reading,1;
or,1;
want,1;
hardware,1;
operate,1;
To,1;
try,1;
read,1;
starts,1;
an,1;
8-byte,1;
hardware,1;
sec-
ond,1;
first,1;
second,1;
read,1;
i64—and,1;
splice,1;
very,1;
Since,1;
spread,1;
underlying,1;
memory,,1;
may,1;
memory,1;
reading,1;
concurrently,1;
by,1;
read,1;
first,1;
second,1;
corrupted,1;
on,1;
concurrency,1;
operations,1;
or,1;
for,1;
example,,1;
for,1;
an,1;
8-byte,1;
load,,1;
the
provided,1;
faster,1;
con-
sistency,1;
semantics,,1;
tries,1;
It,1;
by,1;
every,1;
an,1;
on,1;
types,1;
size,,1;
2-byte-aligned,,1;
contain
other,1;
assigned,1;
example,,1;
be
4-byte-aligned,1;
because,1;
on,1;
default,,1;
shortly,,1;
gives,1;
very,1;
for,1;
for,1;
underlying,1;
principles.,1;
request,1;
for,1;
most,1;
or,1;
languages,1;
foreign-function,1;
interface,,1;
Since,1;
subject,1;
useful,1;
or,1;
different,1;
types,1;
And,,1;
for,1;
first,1;
useful,1;
repr(transparent),,1;
on,1;
outer,1;
the
same,1;
handy,1;
“newtype”
­pattern,,1;
may,1;
want,1;
operate,1;
on,1;
some
struct,1;
struct,1;
repr(transparent),,1;
the
Rust,1;
layout.
So,,1;
lay
this,1;
memory?
#[repr(C)]
struct,1;
Alignment,1;
sees,1;
or
false).,1;
memory,1;
operate,1;
Next,,1;
want,1;
even,1;
aligned,,1;
To,1;
an,1;
code—into,1;
1-byte,1;
offset,1;
struct,1;
small,1;
though.,1;
We,1;
If,1;
want,1;
another,1;
padding,1;
for,1;
26,1;
fields,
we,1;
rule,1;
here,1;
to
use,1;
fields,,1;
long.,1;
placed,1;
say,,1;
an,1;
adds,1;
padding,1;
legacy,1;
fields
in,1;
order,1;
struct,1;
repr(Rust),1;
removes,1;
lesser,1;
such,1;
That,1;
even,1;
different,1;
fields,,1;
order,,1;
fields,,1;
order,1;
no,1;
fields;,1;
achieve,1;
necessary
alignment!,1;
why,1;
by,1;
by,1;
more,1;
rearrange
things,,1;
produce,1;
more,1;
there’s,1;
want,1;
padding,1;
most,1;
case,1;
for,1;
every,1;
memory,1;
such,1;
very,1;
limited,1;
memory,,1;
or,1;
over,1;
like,1;
To,1;
may,1;
and
in,1;
extreme,1;
cause,1;
program,1;
try,1;
supports,1;
on,1;
want,1;
or,1;
case,1;
for,1;
contiguously,1;
memory,1;
an,1;
differ-
ent,1;
lines,1;
on,1;
That,1;
concurrent,1;
programs.,1;
False,1;
occurs,1;
different,1;
CPUs,1;
different,1;
while,1;
theoretically,1;
operate,1;
they
both,1;
concurrency,1;
detail,1;
10.
Complex,1;
represents,1;
types,1;
Here’s,1;
like,1;
struct,1;
the
tuple,1;
contiguous,1;
no,1;
padding,1;
for,1;
each,1;
Alignment,1;
on,1;
may,1;
trait,1;
documentation,1;
Usually,,1;
types,1;
compile,1;
time—but,1;
not:,1;
trait,1;
If,1;
for,1;
example,,1;
Their,1;
on,1;
program,1;
time,,1;
why,1;
dynamically,1;
types,1;
whether,1;
received,1;
this
200-byte,1;
struct,1;
or,1;
8-byte,1;
struct.,1;
presents,1;
order,1;
produce,1;
valid,1;
Iterator,
[u8],,1;
or,1;
offset,1;
tries,1;
available.
The,1;
types,1;
return,1;
values,,1;
array,1;
types,1;
every,1;
includes,1;
explicitly,1;
?Sized,1;
pretty,1;
unhelpful,1;
like,1;
want,1;
trait,1;
or,1;
an,1;
argument.
The,1;
bridge,1;
unsized,1;
types,1;
place
unsized,1;
types,1;
behind,1;
(also,1;
like,1;
pointer,,1;
includes,1;
an,1;
field
that,1;
gives,1;
compiler
needs,1;
for,1;
When,1;
reference,1;
automatically,1;
for,1;
trait,1;
object—well,,1;
twice,1;
usize,1;
(the,1;
platform):,1;
usize,1;
for,1;
holding,1;
pointer,,1;
usize,1;
for
holding,1;
why,1;
key,1;
system—they,1;
interoperate,1;
even,1;
don’t,1;
each,1;
the
time,1;
great,1;
traits,,1;
over,1;
more,1;
aspects,1;
traits:
how,1;
now,,1;
Rust.
You’ve,1;
on,1;
types,1;
trait,1;
here,1;
there.,1;
compile,1;
or,1;
trait,1;
on,1;
or,1;
over,1;
really
telling,1;
or,1;
for,1;
each,1;
type
T.,1;
When,1;
Vec<i32>,1;
or,1;
bool>,,1;
blocks
and,1;
each,1;
It,1;
every,1;
every,1;
actually,1;
It,1;
on,1;
for,1;
thing,1;
p:,1;
Pattern),1;
bool,1;
for,1;
every,1;
for,1;
We,1;
different,1;
for,1;
each,1;
because,1;
knows,1;
implements,1;
trait,1;
method.,1;
no,1;
for,1;
for,1;
each,1;
each,1;
dispatch,,1;
for,1;
to”,1;
known
statically.
NOTE
You,1;
may,1;
noticed,1;
“static”,1;
compile,1;
time,,1;
or,1;
memory,,1;
1.
This,1;
monomorphization,,1;
part,1;
performs,1;
well,1;
code.,1;
starts,1;
no,1;
instance,1;
types,1;
As
a,1;
traits,1;
present.,1;
types,1;
involved,1;
even,1;
wishes.
Monomorphization,1;
separately,,1;
compile,1;
Each,1;
because,1;
aren’t,1;
different,1;
effectively,1;
example,,1;
key,1;
on,1;
key,1;
map,,1;
may,1;
like
this,,1;
more,1;
for,1;
actually,1;
for,1;
like,1;
declare,1;
inside,1;
performs,1;
operations.
This,1;
leaves,1;
for,1;
for,1;
shared.
Making,1;
an,1;
benefit,1;
such,1;
don’t,1;
be
monomorphized.
The,1;
dispatch,,1;
trait,1;
on,1;
program,1;
order,1;
trait,1;
on,1;
dispatch,,1;
If,1;
for,1;
method.,1;
gives,1;
memory,1;
or,1;
for,1;
the
type,1;
is_contained_in.,1;
When,1;
inside,1;
trait,1;
on,1;
looks,1;
address.,1;
If,1;
want,1;
an,1;
an,1;
looks,1;
an,1;
no,1;
longer
know,1;
compile,1;
don’t,1;
for,1;
Trait
is,1;
To,1;
behind,1;
(which,1;
Since,1;
we
also,1;
addresses,,1;
pointer,,1;
holds,1;
for,1;
dispatch,,1;
such
as,1;
of
Listing,1;
2-2.
impl,1;
p:,1;
Pattern),1;
bool,1;
dispatch
The,1;
implements,1;
trait,1;
trait,1;
traits,1;
turned,1;
trait,1;
example,,1;
turned,1;
trait,1;
If,1;
trait,1;
on,1;
Or,,1;
trait,1;
over,1;
iterator,1;
may,1;
it).,1;
If,1;
no,1;
for,1;
trait,1;
for,1;
every,1;
traits,1;
may
not,1;
turned,1;
trait,1;
To,1;
none,1;
or,1;
trait,1;
first,1;
instance,1;
It,1;
clear,,1;
for,1;
example,,1;
reading,1;
trait,1;
may,1;
Such,1;
trait,1;
on,1;
require,1;
trait,1;
dispatch,,1;
or,1;
on,1;
unavailable,1;
trait,1;
is
accessed,1;
trait,1;
trait,1;
cuts,1;
compile,1;
no,1;
compile,1;
types,1;
prevents,1;
for,1;
types,1;
for,1;
insert,1;
no,1;
perform,1;
sit,1;
on,1;
every,1;
on,1;
trait,1;
a
lookup,1;
adds,1;
small,1;
over,1;
choice,1;
rarely,1;
you’ll
want,1;
want,1;
allow,1;
kind,1;
for,1;
don’t,1;
If,1;
dispatch,,1;
dispatch,,1;
whether,1;
or,1;
In
a,1;
on,1;
leaves,1;
param-
eters,1;
compile,1;
more,1;
choice,1;
for,1;
Traits
Rust,1;
traits,1;
ways:,1;
like
trait,1;
or,1;
types,1;
like,1;
trait,1;
luckily,1;
rule,1;
an,1;
trait,1;
for,1;
otherwise.
The,1;
for,1;
types,1;
allow,1;
types,1;
can.
With,1;
specify,1;
on,1;
parameters.,1;
hard,1;
If,1;
of
that,1;
trait,1;
multiple
implementations,1;
trait,1;
may,1;
for,1;
may,1;
hard,1;
instance,1;
trait,1;
like,1;
trait,1;
times,1;
example,,1;
mul-
tiple,1;
types,1;
for,1;
or,1;
both
FromIterator<T>,1;
because,1;
traits,1;
on,1;
implements,1;
types,1;
trait,1;
repeated,1;
on,1;
trait,1;
further,1;
types,1;
And
because,1;
dictates,1;
types,1;
have
to,1;
disambiguate,1;
syntax,1;
paragraph.,1;
Target
types,,1;
different,1;
Orphan,1;
traits,1;
types,1;
property:,1;
for,1;
choice,1;
for,1;
for,1;
that
type.,1;
To,1;
why,1;
trait,1;
for,1;
bool,1;
from
the,1;
for,1;
tries,1;
bool,1;
crate,,1;
whether,1;
or,1;
choice,1;
cor-
rect,1;
or,1;
obviously,1;
occurs,1;
library,1;
involved,1;
instead,1;
on,1;
each,1;
they
both,1;
trait,1;
for,1;
coherence,1;
has
to,1;
choices:,1;
obvious,1;
coherence,1;
trait,1;
for,1;
no,1;
no,1;
conflicting,1;
traits,1;
no,1;
like,1;
serde::Serialize,1;
for,1;
opposite
extreme,,1;
traits,1;
for,1;
types,
solves,1;
trait,1;
for,1;
types,1;
library,1;
or,1;
like,1;
for,1;
traits,1;
for,1;
types,1;
for,1;
crates
to,1;
traits,1;
breaking
downstream,1;
on,1;
code.,1;
Often,,1;
a
codebase—if,1;
rule,1;
balance,1;
orphan,1;
orphan,1;
rule,1;
trait,1;
for,1;
trait,1;
or,1;
for,1;
cannot
implement,1;
for,1;
bool.,1;
If,1;
conflicting,1;
pretty,1;
traits,1;
types,1;
traits,1;
for,1;
types.
However,,1;
orphan,1;
rule,1;
exceptions,1;
Implementations
The,1;
orphan,1;
rule,1;
traits,1;
over,1;
types,1;
code
like,1;
for,1;
limited,1;
instead,1;
trait,1;
imple-
mentation,,1;
an,1;
trait,1;
If,1;
for,1;
because,1;
the
crate,1;
an,1;
conflicting,1;
implementation.
Fundamental,1;
Types
Some,1;
types,1;
necessary,1;
allow,1;
on,1;
even,1;
seemingly,1;
violates,1;
orphan,1;
types
are,1;
&mut,
and,1;
orphan,1;
types,1;
may,1;
effectively,1;
orphan,1;
rule,1;
order,1;
allow,1;
for,1;
example,,1;
IntoIterator,1;
for,1;
&MyType.
With,1;
orphan,1;
implements,1;
trait,1;
for,1;
Adding,1;
change.
Covered,1;
Implementations
There,1;
limited,1;
want,1;
allow,1;
implementing,1;
trait,1;
for,1;
orphan,1;
rule,1;
want,1;
like,1;
for,1;
Here,,1;
From,1;
trait,1;
foreign,,1;
no,1;
violating,1;
because,1;
library,1;
(the,1;
library,1;
allow,1;
orphan,1;
rule,1;
includes
a,1;
implementing,1;
traits,1;
for,1;
types,1;
very,1;
ForeignTrait<T1..=Tn>,1;
for,1;
least,1;
no,1;
first,1;
such,1;
covered,1;
by,1;
intermediate,1;
covered,1;
on,1;
T),1;
or,1;
behind,1;
like,1;
From<T>,1;
for,1;
From<T>,1;
for,1;
for,1;
for,1;
traits,1;
for,1;
2However,,1;
for,1;
From<T>,1;
for,1;
for,1;
for,1;
From<T>,1;
for,1;
for,1;
traits,1;
for,1;
relaxation,1;
orphan,1;
rule,1;
for,1;
new,1;
for,1;
an,1;
exist-
ing,1;
trait.,1;
new,1;
an,1;
least,1;
new,1;
new
local,1;
satisfies,1;
for,1;
earlier.,1;
new,1;
ForeignTrait<LocalType,,1;
for,1;
for,1;
may,1;
seem,1;
arbi-
trary,,1;
LocalType>
for,1;
ForeignType,,1;
another,1;
ForeignTrait<TheirType,,1;
T>
for,1;
ForeignType,,1;
orphan,1;
rule,1;
that
your,1;
parameter,,1;
coherence,1;
library,1;
flush,1;
trait,1;
whether,1;
or,1;
When,1;
yourself,,1;
it
will,1;
trait,1;
more,1;
more,1;
fidelity,1;
achieve,1;
trait,1;
form,1;
or,1;
arbitrary,1;
even,1;
types,1;
or,1;
like,1;
even,1;
no,1;
on,1;
more,1;
intricate,1;
example,,1;
and
whose,1;
usize,,1;
instead,1;
like,1;
BuildHasher,1;
usize,,1;
looking,1;
requirements
Types
31for,1;
more,1;
the
“true”,1;
code.,1;
on,1;
underlying,1;
want,1;
trait,1;
for,1;
example,,1;
consider
what,1;
try,1;
derive,1;
for,1;
an
Arc<T>.,1;
implements,1;
whether,1;
implements,1;
an,1;
needed.
If,1;
may,1;
become,1;
it!,1;
At,1;
how
#[derive(Clone)],1;
by,1;
library,1;
works,,1;
future.
Sometimes,,1;
want,1;
on,1;
types,1;
types,1;
an,1;
example,,1;
iterator,1;
which
takes,1;
an,1;
iterator,1;
an,1;
iterator,1;
over,1;
I,,1;
outer,1;
implements,1;
implements,1;
To,1;
enable,1;
this,,1;
types,1;
example,,1;
types,1;
by,1;
such,1;
disambiguate,1;
syntax,1;
Using,1;
this,,1;
for,1;
for,1;
outer,1;
may,1;
the
lifetime,1;
for,1;
want,1;
bound
to,1;
reference,1;
implements,1;
trait,1;
for,1;
lifetime.”,1;
higher-ranked,1;
trait,1;
particularly,1;
useful,1;
example,,1;
want,1;
reference,1;
reference,1;
inside,1;
If,1;
for,1;
refer-
ences,,1;
want,1;
output,1;
Using,1;
higher-ranked,1;
T),1;
for,1;
'a,,1;
automatically,1;
adds,1;
for,1;
like,1;
this,,1;
for,1;
form,1;
exceedingly,1;
rarely,1;
library,1;
three,1;
for,1;
iterated,1;
over,1;
for,1;
{
fn,1;
Result<(),,1;
for,1;
collection
You,1;
for,1;
pretty,1;
may,1;
want,1;
smarter,1;
power,1;
trait,1;
traits,1;
types,1;
by,1;
formatted,1;
for,1;
by,1;
traits,1;
traits,,1;
instead,1;
implementing,1;
no,1;
or,1;
types,1;
or,1;
example,,1;
safe,1;
If,1;
safe,1;
fact,1;
library,1;
number,1;
Copy),1;
automatically,1;
implements,1;
for,1;
types,1;
traits,1;
an,1;
allow,1;
code.,1;
no,1;
is
Send.,1;
traits,1;
no,1;
of
checking,1;
It,1;
read,1;
very,1;
not
something,1;
like,1;
That,1;
traits,1;
types,1;
(like
struct,1;
no,1;
no,1;
methods.,1;
types
are,1;
useful,1;
handy,1;
want,1;
for,1;
API.,1;
example,,1;
like,1;
may,1;
or,1;
may
not,1;
been,1;
and
Authenticated.,1;
When,1;
first,1;
method:,1;
for,1;
commands
and,1;
We,1;
further,1;
Types
In,1;
very,1;
rarely,1;
specify,1;
types,1;
variables,1;
declare,1;
or,1;
types,1;
because,1;
inference,,1;
on,1;
evaluates,1;
types,1;
for,1;
variables,1;
for,1;
return,1;
like,1;
traits,,1;
trait,1;
require,1;
for,1;
this,,1;
least,1;
from.,1;
or,1;
even,1;
pos-
sible,,1;
type!,1;
example,,1;
return,1;
func-
tion,,1;
or,1;
an,1;
trait,1;
like,1;
this,,1;
supports,1;
existential,1;
existential,1;
types,1;
action.,1;
functions,1;
or,1;
return,1;
an,1;
existential,1;
return,1;
implements,1;
on,1;
implementing,1;
traits,,1;
on,1;
return,1;
propagate,1;
auto-traits,1;
like,1;
impl
Trait,1;
return,1;
position.,1;
more,1;
gives,1;
existential,1;
types,1;
usu-
ally,1;
by,1;
on,1;
the
function.
34
Chapter,1;
existential,1;
If,1;
impl
Trait,1;
for,1;
for,1;
an
unnamed,1;
example,,1;
mostly,1;
syntax,1;
for,1;
types,1;
handy,1;
particularly,1;
example,,1;
implementing,1;
the
IntoIterator,1;
trait.,1;
It,1;
an,1;
holds,1;
iterator,1;
question,1;
turned,1;
into.,1;
iterator,1;
for,1;
Iterator<Item,1;
an,1;
inside,1;
evaluates,1;
an
Iterator,,1;
such,1;
by,1;
over,1;
iterator,1;
types,1;
beyond,1;
perform,1;
exporting,1;
because,1;
public,1;
existential,1;
types,1;
underlying,1;
traits,1;
while,1;
an,1;
simplify,1;
interface,,1;
wish,1;
types,1;
memory,1;
types,1;
themselves.,1;
complex,1;
asynchronous,1;
later,1;
You’ll,1;
cover,1;
chapter.
Types
353
DE,1;
G,1;
G,1;
S
Every,1;
no,1;
or,1;
an,1;
API.,1;
fact,,1;
like,1;
an,1;
or,1;
command,1;
interface,,1;
like,1;
public,1;
inter-
face.,1;
every,1;
module
boundary,1;
grows,1;
even,1;
over
time,1;
most,1;
whether,1;
or,1;
each,1;
turn,
to,1;
for,1;
interfaces.I,1;
Guidelines,1;
(https://
rust-lang.github.io/api-guidelines/),1;
read,1;
chapter.,1;
There’s
an,1;
checklist,1;
each
recommendation.,1;
also
checked,1;
by,1;
on,1;
aren’t,1;
already.,1;
read,1;
on,1;
(https://doc.rust-lang.org/cargo/­
reference/semver.html),,1;
cover,1;
engineering,,1;
holds,1;
be.,1;
they
don’t,1;
different,1;
power,1;
for,1;
traits,,1;
first,1;
fields,,1;
If,1;
things—say,,1;
common),1;
inter-
faces,,1;
assumptions,1;
gives,1;
an,1;
into_inner,1;
kind,1;
implements,1;
for,1;
purpose,,1;
for,1;
allow,1;
more,1;
different,1;
corollary,1;
fact,1;
work
the,1;
example,,1;
or,1;
write
incorrect,1;
on,1;
your
interface,1;
When,1;
for,1;
another,1;
most,1;
traits,1;
even,1;
not
need,1;
coherence,1;
allow,1;
traits,1;
them.,1;
trait,1;
for,1;
like,1;
instead,1;
even,1;
may,1;
traits,1;
trait.,1;
Nearly,1;
every,1;
even,1;
trait,1;
traits,1;
automatically,1;
for,1;
parameters.,1;
by,1;
helpers,1;
on,1;
second,1;
auto-traits,1;
(and,,1;
a
lesser,1;
Unpin).,1;
If,1;
traits,,1;
for,1;
very,1;
good,1;
placed,1;
even,1;
transitively,1;
an,1;
pool.,1;
an,1;
or,1;
types,1;
these
contexts,,1;
especially,1;
asynchronous,1;
on,1;
become,1;
don’t,1;
that
your,1;
types,1;
If,1;
types,1;
sure,1;
fact,,1;
well,1;
traits,1;
traits,1;
or,1;
for,1;
most,1;
If,1;
sure,1;
more,1;
types,1;
fit.
If,1;
cannot,,1;
further,1;
traits,1;
PartialOrd,,1;
trait,1;
because,1;
two
instances,1;
wish,1;
or,1;
for,1;
instance,1;
implementing,1;
enable,1;
more,1;
may,1;
want,1;
too.,1;
is
especially,1;
for,1;
types,1;
key,1;
map,,1;
or,1;
require,1;
require-
ments,1;
on,1;
implementing,1;
operations,1;
beyond,1;
well,1;
traits,,1;
sure,1;
actually,1;
for,1;
most,1;
even,1;
for,1;
overwriting,1;
or,1;
Since,1;
crate,,1;
wish,1;
on,1;
adds,1;
for,1;
wondering,1;
why,1;
derivable,1;
trait,1;
Copy
in,1;
apart,1;
first,1;
types,1;
contrary,,1;
want,1;
of
something,,1;
clone.,1;
changes,1;
surprise,1;
very,1;
for,1;
because,1;
starts,1;
or,1;
rarely,1;
commitment.
Ergonomic,1;
automatically,1;
traits,1;
for,1;
types,1;
To,1;
different,1;
T),1;
even,1;
because,1;
or,1;
obviously,1;
be
called,1;
on,1;
very,1;
sees,1;
new,1;
want,1;
appropriate,1;
for,1;
trait,1;
for,1;
Trait,,1;
Box<T>,1;
may,1;
on,1;
receivers,1;
traits,1;
library,1;
implemen-
tations,,1;
because,1;
for,1;
another,1;
case,1;
want,1;
on,1;
be
iterated,1;
implementing,1;
IntoIterator,1;
for,1;
for,1;
well,1;
like,1;
expect.
Wrapper,1;
AsRef,1;
like,1;
traits,1;
allow,1;
on,1;
by,1;
on,1;
T-typed,1;
Deref<Target,1;
U>.
This,1;
like,1;
transparent,1;
there’s,1;
chance,1;
want,1;
by,1;
If,1;
require,1;
complex,1;
or,1;
logic,,1;
implementing,1;
an,1;
most,1;
want,1;
Into<InnerType>,1;
or,1;
may,1;
very,1;
AsRef,1;
different,1;
Borrow
is,1;
for,1;
case:,1;
any
one,1;
It,1;
could,,1;
been,1;
Equivalent,1;
example,,1;
for,1;
or,1;
been,1;
achieved,1;
safe,1;
implements,1;
implementing,1;
for,1;
convenient,1;
trait,1;
or,1;
type.
In,1;
general,,1;
for,1;
equiva-
lent,1;
another,1;
AsRef,1;
more,1;
for,1;
ME,1;
dot,1;
operator,1;
on,1;
example,,1;
T,
it,1;
clear,1;
whether,1;
t.frobnicate(),1;
or,1;
underlying,1;
types,1;
allow,1;
for,1;
even,1;
may,1;
on,1;
cause,1;
issues.,1;
form,1;
frobnicate(t:,1;
That,1;
way,
t.frobnicate(),1;
U::frobnicate,,1;
T::frobnicate(t),1;
includes,,1;
or,1;
on,1;
while,1;
When,1;
new,1;
interface,,1;
want,1;
contract.,1;
good,1;
Adding,1;
or,1;
promises,1;
usually
requires,1;
or,1;
on,1;
compatible.
In,1;
form,1;
trait,1;
promises,1;
form,1;
trait,1;
return,1;
example,,1;
three,1;
str>
fn,1;
different,1;
three,1;
string,1;
return,1;
very,1;
different,1;
first,1;
string,1;
form,1;
promises,1;
return,1;
an,1;
return,1;
later,1;
way.
The,1;
second,1;
contract:,1;
any
reference,1;
no,1;
or,1;
It,1;
promises,1;
std::borrow::Cow,,1;
return,1;
string,1;
reference,1;
or,1;
an,1;
here,1;
return,1;
Cow,,1;
cannot,,1;
say,,1;
string,1;
&str,,1;
say,,1;
pre-existing,1;
It,1;
produce,1;
reference,1;
promises,1;
return,1;
produce,1;
reference,1;
others.,1;
If,1;
need
ownership,1;
string,1;
first,1;
an,1;
string,1;
If,1;
want,1;
allow,1;
advan-
tage,1;
case,1;
an,1;
string,1;
sec-
ond,1;
return,1;
may,1;
good,1;
want,1;
because,1;
fact
can,1;
for,1;
obvious,1;
on,1;
types
they,1;
code.,1;
If,1;
explicitly,1;
Foo,,1;
no,1;
most,1;
pays,1;
allow,1;
conforms,1;
actually,1;
needs,,1;
3-1,1;
an,1;
kind,1;
follow,1;
errors,1;
every,1;
argu-
ment,1;
every,1;
hard,1;
hard,1;
no,1;
for,1;
or,1;
good,1;
rule,1;
an,1;
you
can,1;
types,1;
want,1;
may,1;
remember,1;
for
every,1;
types,1;
here,1;
too.
For,1;
by,1;
reference,1;
anyway,1;
(recall,1;
them),,1;
instance,
instead,1;
AsRef<str>.
Before,1;
choice,1;
on,1;
If,1;
you’re
applying,1;
performance-sensitive,,1;
fine.,1;
library,1;
high-performance,1;
loop,1;
may,1;
Second,,1;
trait,1;
or,1;
AsRef<str>.,1;
more,1;
complex,1;
finally,,1;
remember,1;
can
always,1;
by,1;
trait,1;
true:,1;
trait,1;
must
provide.
It,1;
may,1;
types,1;
over,1;
work,,1;
that
such,1;
changes,1;
To,1;
imagine
that,1;
impl
AsRef<[usize]>).,1;
every,1;
implements,1;
type
Designing,1;
cause,1;
for,1;
the
caller,1;
version,,1;
implements,1;
such,1;
no,1;
Safety
When,1;
new,1;
whether,1;
or,1;
trait,1;
(see,1;
the
end,1;
2),1;
an,1;
part,1;
contract.,1;
If,1;
trait,1;
different,1;
trait,1;
If,1;
for,1;
trait.,1;
even,1;
over,1;
new,1;
If,1;
trait,1;
whether,1;
on,1;
trait,1;
the
object,1;
trait.,1;
instance,1;
trait,1;
see
examples,1;
Read,1;
traits,,1;
convenience,1;
on,1;
no,1;
answer,1;
question,1;
trait,1;
whether,1;
want,1;
trait,1;
If,1;
want,1;
different,1;
trait,1;
don’t,1;
example,,1;
trait,1;
because,1;
so
you,1;
trait,1;
first,1;
Similarly,
std::io::Seek,1;
trait,1;
on,1;
because,1;
only
thing,1;
such,1;
trait,1;
being
able,1;
read,1;
or,1;
OBJEC,1;
Drop,1;
trait,1;
trait,1;
Drop,1;
trait,1;
want,1;
arbitrary,1;
library,1;
values,,1;
such,1;
for,1;
or,1;
cleanup,,1;
cares,1;
3be,1;
dropped,,1;
there;,1;
trait,1;
objects
too,,1;
every,1;
method.,1;
every,1;
part,1;
public,1;
trait,1;
an,1;
such
as,1;
by,1;
trait,1;
bump,1;
vs.,1;
every,1;
whether,1;
or,1;
reference,1;
for,1;
interface.
Luckily,,1;
very,1;
such,1;
to
call,1;
or,1;
another,1;
When,1;
by,1;
reference,1;
them.,1;
leaves,1;
the
caller,1;
operate,1;
on,1;
rule,1;
small,1;
types,1;
like,1;
or,1;
just
as,1;
wary,1;
assuming,1;
holds,1;
for,1;
though;
[u8;,1;
8192],1;
expensive,1;
over,1;
don’t,1;
whether,1;
or,1;
example,,1;
needs
to,1;
invalid,1;
operate,1;
on,1;
produce,1;
an,1;
reference,1;
pain,1;
If,1;
struggling,1;
compile,1;
on,1;
interface,,1;
sign,1;
want,1;
If,1;
this,,1;
or,1;
performance-sensitive,1;
Destructors
Types,1;
on,1;
I/O,1;
perform,1;
cleanup,1;
may,1;
files,,1;
or,1;
connections,1;
perform,1;
Drop,1;
once,1;
no,1;
errors,1;
by,1;
asynchronous,1;
wish,1;
finish
up,1;
no,1;
more,1;
We,1;
try,1;
another,1;
host,1;
such,1;
as
blocking,1;
asynchronous,1;
no,1;
no,1;
Drop,1;
best-effort,1;
cleanup,1;
If
cleanup,1;
least,1;
tried—we,1;
If,1;
cleanup,,1;
it
never,1;
for,1;
wish
to,1;
no,1;
We,1;
by,1;
an,1;
form,1;
exposes,1;
errors,1;
or,1;
resources.
NOTE
Make,1;
sure,1;
destructor,1;
there’s,1;
an,1;
issues.,1;
implements,1;
you
can,1;
no,1;
destructor.,1;
because,1;
destructor,1;
runs,
and,1;
no,1;
part,1;
been,1;
Drop,1;
destructor,1;
result,1;
self).,1;
none,1;
first,1;
Option,,1;
holds,1;
holds,1;
destructor,1;
been,1;
there.,1;
on,1;
through
the,1;
Option,1;
(which,1;
been,1;
on,1;
3The,1;
second,1;
workaround,1;
each,1;
takeable.,1;
an,1;
Option,1;
by,1;
(which,1;
types,1;
example,,1;
or,1;
by,1;
cheap-to-construct
default,1;
works
great,1;
types,1;
sane,1;
“empty”,1;
every,1;
an,1;
Option,1;
every,1;
matching,1;
inside,1;
there’s,1;
no,1;
for,1;
unwraps.,1;
destruction,1;
no,1;
don’t,1;
try,1;
inside,1;
or,1;
don’t,1;
If,1;
program,1;
silently,1;
on,1;
second,1;
sea,1;
Options.,1;
The
ManuallyDrop,1;
confident,1;
may,1;
aspects,1;
interface,,1;
understand,1;
rules
and,1;
or,1;
safe,1;
angle,1;
no,1;
past,1;
seconds.,1;
clear,1;
on,1;
documentation,1;
or,1;
read,1;
for,1;
for,1;
understand,1;
hard,1;
for,1;
for,1;
documentation,1;
each,1;
there’s,1;
more,1;
to
an,1;
eye.,1;
If,1;
sees,1;
chances,1;
read,1;
first,1;
transparent,1;
good,1;
an,1;
documen-
tation,,1;
on,1;
may,1;
or,1;
on,1;
beyond,1;
by,1;
good,1;
Interfaces
47these,1;
fact,,1;
along
with,1;
Similarly,,1;
an,1;
functions,
document,1;
order,1;
for,1;
safe.
Second,,1;
for,1;
on,1;
more,1;
for,1;
or,1;
for,1;
struc-
ture,,1;
developer,1;
may,1;
End-to-end,1;
for,1;
needs.,1;
by,1;
try,1;
method-specific,1;
new,1;
traits,,1;
for,1;
Take,1;
If,1;
documentation,1;
on,1;
trait,1;
B,,1;
trait,1;
there.,1;
If,1;
for,1;
connections,1;
or,1;
public,1;
for,1;
legacy,1;
finally,,1;
documentation,1;
structures,,1;
aspects,1;
may,1;
good,1;
great,1;
for,1;
this,,1;
why,1;
the
documentation,1;
Use,1;
types,1;
may,1;
for,1;
by.
In,1;
modules,
features,,1;
traits,,1;
Guidance
The,1;
an,1;
tool,1;
techniques,1;
very,1;
hard,1;
misuse,,1;
more,1;
first,1;
types,1;
for,1;
Booleans:,1;
three,1;
bool,1;
3are,1;
order,1;
wrong.,1;
If,,1;
on,1;
wrong,1;
work,,1;
Overwrite::No,1;
argument.,1;
beyond,1;
Booleans,1;
example,,1;
may,1;
for,1;
or,1;
been,1;
returned,1;
by,1;
another
method.
A,1;
types,1;
fact,1;
an,1;
instance,1;
for,1;
represents,1;
state,1;
on,1;
no,1;
state,1;
It,1;
for,1;
launch,1;
been,1;
Similarly,,1;
fuel,1;
We,1;
every,1;
3-2,,1;
parameter
on,1;
Rocket,,1;
restrict,1;
struct,1;
Rocket<Stage,1;
std::marker::PhantomData<Stage>,
}
3,1;
for,1;
Rocket<Grounded>,1;
Rocket<Grounded>,1;
accelerate(&mut,1;
decelerate(&mut,1;
}
}
5,1;
Using,1;
types,1;
restrict,1;
types,1;
each,1;
We,1;
behind,1;
eliminated,1;
at
compile,1;
for,1;
when
it,1;
holds,1;
on,1;
now),,1;
launch,1;
been,1;
no,1;
wrong,1;
time—we,1;
encoded,1;
types,1;
themselves,,1;
illegal,1;
domains,1;
it’s
better,1;
an,1;
for,1;
no,1;
for,1;
holds,1;
encourage
you,1;
of.
Another,1;
small,1;
useful,1;
tool,1;
obvious,1;
#[must
_use],1;
Add,1;
or,1;
an,1;
or,1;
explicitly,1;
may,1;
Result,1;
return,1;
mistake,1;
return,1;
value.
Constrained
Over,1;
time,,1;
on,1;
every,1;
or,1;
especially,1;
for,1;
no,1;
over,1;
or,1;
trait,1;
or,1;
an,1;
want,1;
sure,1;
users’
code,,1;
planning,1;
for,1;
while.
Frequent,1;
changes,1;
increases,1;
sure,1;
users.
Many,1;
changes,1;
like,1;
renaming,1;
or,1;
public,1;
subtler,1;
deeply,1;
works.,1;
Here,,1;
cover,1;
changes,1;
for,1;
them.,1;
You’ll,1;
bal-
ance,1;
want,1;
something’s,1;
Modifications
Removing,1;
or,1;
renaming,1;
public,1;
To,1;
counter,1;
this,,1;
want,1;
visibility,1;
like,1;
more,1;
later,1;
without
breaking,1;
code.
50
Chapter,1;
3User,1;
on,1;
types,1;
more,1;
by,1;
public,1;
3-3,1;
of
that,1;
code.
//,1;
struct,1;
code
let,1;
3-3:,1;
public,1;
user’s
code,,1;
because,1;
constructor,1;
on,1;
struct,1;
bool,1;
code
fn,1;
bool,1;
{
matches!(u,,1;
})
}
Listing,1;
public,1;
too,,1;
because,1;
exhaustive,1;
logic,1;
It,1;
are
more,1;
fields,,1;
even,1;
struct,1;
even,1;
no,1;
valid,1;
for,1;
new,1;
these
issues.,1;
on
that,1;
great,1;
It,1;
by,1;
on,1;
exhaustive,1;
coherence,1;
multiple
implementations,1;
trait,1;
for,1;
Since,1;
may,1;
added,,1;
an,1;
trait,1;
holds,1;
for,1;
implementing,1;
trait,1;
for,1;
an,1;
trait,1;
for,1;
Interfaces
51trait,1;
or,1;
may,1;
simultaneously,1;
conflicting,1;
this
must,1;
trait,1;
traits,1;
for,1;
new,1;
no,1;
want,1;
trait,1;
for,1;
an,1;
To,1;
3-5.
//,1;
struct,1;
trait,1;
foo(&self),1;
note,1;
for,1;
crate2;,1;
on,1;
Foo2,1;
foo(&self),1;
Foo2,1;
for,1;
}
fn,1;
trait,1;
for,1;
an,1;
may,1;
cause,1;
for,1;
even,1;
new,1;
public
traits,,1;
wildcard,1;
imports,1;
(use,1;
particularly,1;
want,1;
instruct,1;
wildcard,1;
imports,1;
changes,1;
traits,1;
such,1;
or,1;
new,1;
method.,1;
new,1;
new,1;
“generally”,1;
here,,1;
because,1;
rules:,1;
sealed
trait,1;
by,1;
number,1;
changes,1;
new,1;
no,1;
trait,1;
for,1;
new,1;
know
the,1;
traits,1;
most,1;
for,1;
for,1;
types,1;
seal,1;
trait,1;
for,1;
restricts,1;
no,1;
traits,1;
restrict,1;
types,1;
such,1;
Stage,1;
seal,1;
trait,1;
for,1;
trait,1;
trait,1;
{}
2,1;
for,1;
for,1;
seal,1;
trait,1;
for,1;
trait,1;
trait,1;
seal,1;
Since,1;
trait,1;
the
underlying,1;
types,1;
ultimately,1;
seal,1;
trait,1;
sure,1;
fact,1;
not
get,1;
trait,1;
themselves!
Hidden,1;
changes,1;
part,1;
affect,1;
part,1;
exposes,1;
types,1;
new,1;
dependency
and,1;
say,,1;
an,1;
iterator,1;
on,1;
may,1;
the
same,1;
by,1;
no,1;
even,1;
an,1;
crate:,1;
part,1;
1.0,1;
no,1;
compile.,1;
different,1;
Therefore,,1;
interface.
To,1;
like,1;
this,,1;
types,1;
by,1;
very,1;
minimal,1;
promising,1;
changes,1;
breaking.
THE,1;
may,1;
wrong,1;
If,1;
why,1;
allow,1;
whether,1;
1.0,1;
or,1;
it?
The,1;
answer,1;
It,1;
boils,1;
fact,1;
compiler
does,1;
because,1;
types,1;
fields,,1;
To,1;
this,,1;
for,1;
Empty.,1;
different,1;
on,1;
whether,1;
1.0,1;
or,1;
other.
This,1;
crop,1;
changes,1;
crate.
Unfortunately,,1;
everywhere.
But,1;
Tolnay,1;
(the,1;
vast,1;
number,1;
neat,1;
kind,1;
new,1;
1.0,1;
on,1;
this,,1;
fact,1;
This,,1;
versa.,1;
because,1;
for,1;
types,1;
explicitly,1;
changes,1;
traits,1;
automatically,1;
for,1;
on,1;
most,1;
Unpin,,1;
issues.,1;
very,1;
nature,,1;
by,1;
every,1;
traits,1;
even,1;
propagate
through,1;
type-erased,1;
types,1;
like,1;
for,1;
traits,1;
automatically,1;
by
the,1;
automatically,1;
no,1;
public,1;
B,,1;
no,1;
That,1;
changes,1;
hard,1;
until,1;
no,1;
longer
works.,1;
To,1;
happen,,1;
good,1;
tests,1;
types,1;
implement
these,1;
traits,1;
3-8,1;
gives,1;
an,1;
such,1;
like.
fn,1;
implements,1;
tests,1;
If,1;
no,1;
implements,1;
auto-
trait,1;
DOCUMENTATION
The,1;
#[doc(hidden)],1;
public,1;
there.,1;
types,1;
by,1;
code.,1;
such,1;
interact,1;
general,,1;
#[doc(hidden)],1;
part,1;
insofar,1;
public,1;
for,1;
example,,1;
may,1;
whether,1;
Send
or,1;
part,1;
methods
and,1;
trait,1;
on,1;
traits,1;
part,1;
sure,1;
state,1;
for,1;
methods.,1;
whether,1;
for,1;
external,1;
or,1;
an,1;
different,1;
We,1;
covered,1;
errors,1;
34
ERROR,1;
chap-
ter,,1;
different,1;
represent,
handle,,1;
propagate,1;
failures,1;
each.,1;
different,1;
some
special,1;
require,1;
different,1;
Next,,1;
han-
dling,1;
errors,1;
noting,1;
for,1;
topic,1;
on,1;
on,1;
underlying,1;
techniques,1;
or,1;
fail,,1;
most,1;
question,1;
interact,1;
errors,1;
or,1;
an,1;
occurred,1;
on,1;
best
they,1;
To,1;
understand,1;
this,,1;
whether,1;
affect,1;
dictate,1;
different,1;
for,1;
That,1;
enumerate,1;
or,1;
the
caller,1;
error.,1;
example,,1;
library,1;
output,1;
like,1;
read,1;
other.,1;
for,1;
fail,,1;
and
return,1;
an,1;
Here,,1;
want,1;
or,1;
output,1;
example,,1;
an,1;
occurs,1;
on,1;
while,1;
streaming,1;
a
client,,1;
because,1;
output,1;
stream
errors,,1;
may,1;
an,1;
new,1;
connections,1;
complete,
whereas,1;
may,1;
require,1;
server,1;
case,1;
want,1;
enumerate,1;
needs
to,1;
different,1;
an,1;
each,1;
underlying,1;
cause,1;
for,1;
like,1;
includes,1;
encountered,1;
wrong,1;
possible.
When,1;
number,1;
play,1;
for,1;
of
interest,1;
an,1;
error.,1;
most,1;
dis-
plays,1;
error’s,1;
on,1;
return,1;
std::io::Error.
Second,,1;
error.,1;
trait.,1;
general,,1;
one-line
description,1;
wrong,1;
format,1;
provide
a,1;
more,1;
may,1;
cause,1;
such,1;
request,1;
older,1;
may,1;
been,1;
so
that,1;
If,1;
context.,1;
types,1;
very,1;
std::io::Error,1;
errors,1;
types,1;
such,1;
types,1;
most
immediate,1;
benefit,1;
more,1;
issues.,1;
It,1;
more,1;
type-erased,1;
Errors
Now,1;
different,1;
an,1;
decoding,1;
You
give,1;
library,1;
decode,,1;
gives,1;
manipulation,1;
methods.,1;
If,1;
decoding,1;
fails,,1;
understand,1;
whether,1;
cause,1;
or,1;
situation,,1;
even,1;
knows,1;
like,1;
this,,1;
library,1;
may,1;
instead,1;
want,1;
library,1;
because,1;
(including,1;
appropriate),,1;
might
internally,1;
more,1;
no,1;
Handling
59Exactly,1;
mostly,1;
exposes,1;
limited,1;
for,1;
displaying,1;
or,1;
like,1;
more,1;
fact,1;
an,1;
gener-
ally,1;
types,1;
mostly,1;
whether,1;
beyond,1;
error.,1;
That,1;
no,1;
present,1;
example,,1;
or,1;
number,1;
unrelated
errors,1;
inside,1;
such,1;
number,1;
or,1;
may,1;
want,1;
instead.
NOTE
In,1;
general,,1;
errors,1;
errors,1;
placed,1;
such,1;
or,1;
overall,1;
Result,1;
benefit,1;
type-erased,1;
errors,1;
errors,1;
different,1;
sources,1;
That,1;
type-erased,1;
errors,1;
an,1;
If,1;
...>,,1;
different,1;
inside,1;
on,1;
different,1;
turned,1;
type.
The,1;
on,1;
worth
spending,1;
more,1;
on,1;
useful,1;
for,1;
letting,1;
propagate,1;
an,1;
even,1;
an,1;
more,1;
gives,1;
at
runtime;,1;
limited,1;
case,1;
more,1;
to
turn,1;
underlying,1;
was
originally,1;
example,,1;
may,1;
want,1;
received,1;
std::io::Error,1;
kind,1;
If,1;
try,1;
downcast_ref,1;
an,1;
Option,,1;
whether,1;
or,1;
here,1;
downcast_ref,1;
If,1;
return,1;
kind,1;
whether,1;
library’s
type-erased,1;
errors,1;
more,1;
type-erased,1;
part,1;
public,1;
API.,1;
That,1;
library,1;
return,1;
different
error,1;
but
users,1;
may,1;
to
turn,1;
opinion,1;
on,1;
return,1;
for,1;
explicitly,1;
documented,,1;
an,1;
type-erased,1;
counter­
intuitively,1;
Therefore,,1;
for,1;
Error.
You,1;
may,1;
That,1;
whether,1;
library,1;
even,1;
trait,1;
Any,1;
implements,1;
downcast_ref,1;
for,1;
Any—how,1;
that
be,1;
okay?,1;
answer,1;
for,1;
trait,1;
type_id,,1;
return,1;
Similarly,,1;
Any,1;
Any,1;
for,1;
same.
In,1;
known,,1;
That,1;
downcast_ref,1;
needs.,1;
downcast_ref,1;
forwards
through,1;
for,1;
dynamically,1;
types,1;
(see,1;
2),1;
for,1;
underlying,1;
If,1;
behind,1;
dyn
Error,1;
or,1;
Any,1;
safe,1;
reference,1;
functions,1;
return,1;
meaningful,1;
functions,1;
return,1;
codebases,,1;
may,1;
Option<T>,1;
choices,1;
for,1;
return,1;
for,1;
such,1;
different,1;
()>,1;
indicates,1;
an,1;
retried,,1;
or,1;
an,1;
case,1;
or,1;
#[must_use],1;
on,1;
an,1;
Option,,1;
case,1;
actually,1;
trait.,1;
type-erased,1;
pain,1;
use
with,1;
?.,1;
struct,1;
for,1;
instead,1;
like,1;
server
loop,,1;
return,1;
an,1;
forever.,1;
return,1;
Result,1;
nonetheless,,1;
for,1;
trait,1;
functions,1;
like,1;
represents,1;
an,1;
instance,1;
by,1;
an,1;
loop,1;
or,1;
operations,1;
knows,1;
never
return.,1;
an,1;
or,1;
If,1;
return,1;
enter,1;
knows,1;
such,1;
by,1;
generating,1;
for,1;
an,1;
!>.,1;
knows,1;
vari-
ant,1;
even,1;
neat!
One,1;
case,1;
Here’s
its,1;
Any,1;
'static>>;
The,1;
as
we’ve,1;
more,1;
guarantee
at,1;
for,1;
vari-
ant,1;
std::thread::Result,1;
try,1;
there’s,1;
joining,1;
or,1;
formatted,1;
operator,1;
for,1;
or,1;
return,1;
for,1;
about.,1;
performs,1;
conversion,1;
From,1;
trait.,1;
In
a,1;
on,1;
where
E:,1;
appealing;,1;
4FROM,1;
INTO
The,1;
library,1;
conversion,1;
traits,,1;
are
From,1;
It,1;
From,,1;
been,1;
the
early,1;
due,1;
coherence,1;
Or,,1;
coherence,1;
want,1;
conversion,1;
for,1;
for,1;
From,1;
or,1;
for,1;
or,1;
for,1;
those
implementations!,1;
for,1;
covered,1;
coherence,1;
before
Rust,1;
trait,1;
fact,,1;
good,1;
traits,,1;
even,1;
It,1;
significantly,1;
or,1;
different,1;
exam-
ple,,1;
turned,1;
or,1;
Foo:,1;
string,1;
syntax,1;
or,1;
<_,1;
both.
Given,1;
may,1;
pretty,1;
From,,1;
and
use,1;
implements,1;
From,,1;
whether,1;
explicitly,1;
From,1;
or,1;
implements,1;
there.
Since,1;
when
Into,1;
for,1;
whether,1;
implements,1;
Into
is,1;
more,1;
whether,1;
implements,1;
operator,1;
From,,1;
because,1;
most,1;
types,1;
From,,1;
does
mean,1;
types,1;
instead,1;
may,1;
?.,1;
use
Into,,1;
away,,1;
for,1;
now.
Error,1;
second,1;
aspect,1;
operator,1;
for,1;
trait,1;
At,1;
been,1;
by,1;
read,1;
this,,1;
or,1;
very,1;
been,1;
Since,1;
details
haven’t,1;
been,1;
yet,,1;
an,1;
At,1;
Try,1;
state,1;
further,1;
or,1;
example,,1;
case,1;
an,1;
Ok(t),,1;
on,1;
by,1;
If,1;
an,1;
on,1;
executing,1;
produce,1;
don’t,1;
Try,1;
more,1;
types,1;
for,1;
example,,1;
follows,1;
a
Some(t),,1;
on,1;
instead,1;
more,1;
like,1;
Poll<T>,,1;
more,1;
When,1;
Try,1;
may,1;
types,1;
operator,1;
To,1;
example,,1;
Result<(),,1;
thing,1;
thing,1;
4-2:,1;
multi-step,1;
operator
This,1;
Any,1;
setup,1;
cause,1;
an,1;
return,1;
try,1;
try,1;
pretty,1;
like,1;
instead,1;
an,1;
We,1;
cleanup,,1;
Result<(),,1;
thing,1;
r,1;
try,1;
thing,1;
..
};
thing.cleanup();
r
}
Listing,1;
4-3:,1;
multi-step,1;
itself
64
Chapter,1;
on,1;
form,1;
covered,1;
types,1;
We,1;
may,1;
want,1;
each,1;
one
and,1;
each.,1;
We,1;
aspects,1;
operator,1;
even,1;
more,1;
useful,1;
forward.,1;
a
step,1;
management,,1;
well,1;
more,1;
complex,1;
workspaces,1;
on,1;
for,1;
by,1;
new,1;
about.,1;
for,1;
grows,1;
for,1;
getting,1;
or
you,1;
or,1;
strategy,1;
for,1;
the
Rust,1;
man-
age,1;
such,1;
things.
Features
Features,1;
tool,1;
for,1;
At,1;
functionality.,1;
no,1;
for,1;
three,1;
ways:,1;
enable,1;
crate,,1;
the
behavior,1;
code.,1;
crate,,1;
shouldn’t,1;
like
remove,1;
or,1;
types,1;
or,1;
developer,1;
such
as,1;
new,1;
or,1;
feature,,1;
shouldn’t,1;
their
crate,1;
If,1;
exclusive,1;
principle
quickly,1;
by,1;
on,1;
C,
and,1;
on,1;
another,1;
exclusive,1;
follow,1;
compiles,1;
compile,1;
on,1;
example,,1;
on,1;
each,1;
enable,1;
different,1;
compile,1;
or,1;
That,1;
for,1;
this,,1;
hard,1;
chances,1;
different,1;
compiles,1;
for,1;
tool,1;
helps,1;
an,1;
crate
named,1;
an,1;
compiles,1;
crate,,1;
compile,1;
by,1;
compile,1;
significantly).,1;
by,1;
explicitly,1;
such,1;
enable,1;
derive,1;
feature,,1;
5-2:,1;
dependency
Some,1;
more,1;
them.,1;
To,1;
this,,1;
for,1;
derive,1;
by,1;
default,,1;
while,1;
opting,1;
syn’s,1;
instead,1;
derive,1;
"1"
default-features,1;
"printing"]
optional,1;
Adding,1;
opting,1;
on,1;
explicitly,1;
the
default,1;
compile,1;
foo’s,1;
three,1;
no,1;
others.,1;
opting,1;
great,1;
on,1;
compile,1;
times!
OP,1;
feature,,1;
follows,1;
sign,1;
sound,1;
depen-
dency,,1;
It,1;
every,1;
You’ll,1;
try,1;
an,1;
for,1;
different,1;
namespace,1;
for,1;
been,1;
want,1;
example,,1;
derive,1;
derive,1;
enable,1;
derive,1;
sure,1;
sure,1;
component,1;
is
not,1;
achieve,1;
compilation,,1;
expressed
using,1;
#[cfg],1;
attribute.,1;
on,1;
neat,1;
compilation,,1;
later,1;
most,1;
form,1;
"some-feature")],,1;
Similarly,,1;
derive,1;
#[cfg],1;
more,1;
on,1;
feature,,1;
can
make,1;
additive.,1;
functions,1;
statements—as,1;
well,1;
on,1;
struct,1;
fields,,1;
#[cfg],1;
attribute
can’t,1;
by
the,1;
cause,1;
hard,1;
public,1;
may,1;
may,1;
for,1;
compile,1;
changes,1;
rule,1;
example,,1;
an,1;
or,1;
public,1;
struct,1;
may,1;
no,1;
due,1;
second,1;
by,1;
That,1;
play,1;
vertices,1;
for,1;
trait,1;
for,1;
compilation
features.,1;
this,,1;
each,1;
managed,1;
treats,1;
more,1;
or,1;
file
compiled,1;
ultimately,1;
turned,1;
output
(either,1;
or,1;
library).
While,1;
aspects,1;
with.,1;
If,1;
part,1;
Internally,,1;
number,1;
like,1;
ultimately,1;
factor,1;
may,1;
want,1;
on,1;
by,1;
like,1;
members,1;
array,1;
each,1;
workspace.,1;
Cargo.lock,1;
don’t,1;
It,1;
is
common,,1;
“main”,1;
example,,1;
members,1;
tokio,,1;
on.
Perhaps,1;
most,1;
workspaces,1;
members,1;
by,1;
crate,,1;
don’t,1;
pretty,1;
good,1;
workspace.,1;
If,1;
disambiguate,,1;
such,1;
by,1;
If,1;
for,1;
particular
workspace,1;
crate,,1;
perform,1;
command,1;
for,1;
array,1;
on,1;
another,1;
bar/two/Cargo.toml
[dependencies]
one,1;
crates
Now,1;
re-compiled,,1;
bar/one,1;
It,1;
may,1;
even,1;
compile,1;
for,1;
optimization,1;
ING,1;
INTR,1;
most,1;
obvious,1;
specify,1;
specifier,,1;
your
individual,1;
for,1;
public,1;
may,1;
want,1;
use
version,1;
specifiers,1;
on,1;
Git,1;
from
the,1;
5-5,1;
(also,1;
fetch
the,1;
Git,1;
holds,1;
on,1;
foo,,1;
inside,1;
workspace.,1;
It,1;
may,1;
If,1;
try,1;
(1.0.0),1;
an,1;
foo,,1;
code.,1;
types,1;
underlying,1;
like,1;
on,1;
once,1;
new,1;
again.
This,1;
tests,1;
for,1;
foo,,1;
You’ll,1;
want,1;
each,1;
configured,1;
Configuration
Running,1;
new,1;
minimal,1;
an,1;
That,1;
pretty,1;
number,1;
useful,1;
may,1;
want,1;
Cargo.toml.
Crate,1;
first,1;
most,1;
obvious,1;
thing,1;
obvious,1;
like
description,1;
useful,1;
such,1;
for,1;
more,1;
useful,1;
dictate,1;
package.,1;
default,,1;
includes,1;
may,1;
want,1;
fixtures,,1;
scripts,,1;
want,1;
version
control.,1;
suggest,,1;
allow,1;
or,1;
matching,1;
or,1;
or,1;
continues,1;
on,1;
over,1;
most,1;
obvious,1;
tool,1;
for,1;
parameter,,1;
program,1;
for,1;
very,1;
specify,1;
different,1;
no,1;
compile,1;
fix,,1;
or,1;
new,1;
an,1;
might
temporarily,1;
Structure
73[patch.crates-io]
#,1;
source
regex,1;
on,1;
Overriding,1;
sources,1;
don’t,1;
wrong,1;
If,1;
for,1;
transitively,1;
on,1;
major
versions,1;
crate,,1;
each,1;
by,1;
}
nom5,1;
Overriding,1;
inside,1;
each,1;
patch
the,1;
appropriately.,1;
for,1;
by,1;
instead,1;
(the,1;
part,1;
on,1;
by,1;
well,1;
dependency!
Keep,1;
on,1;
(which,1;
may,1;
AGES
You,1;
may,1;
vary,1;
on,1;
whether,1;
talking
about,1;
crates.io,,1;
or,1;
you
can,1;
crate-level,1;
like,1;
like,1;
by,1;
That,1;
may,1;
library,1;
even,1;
members,1;
files.
74
Chapter,1;
order,1;
compiles,1;
three,1;
dif-
ferent,1;
on,1;
whether,1;
or
in,1;
(other,1;
three,1;
opt-level,,1;
by,1;
program,1;
“as
much,1;
more,1;
may,1;
optimization,1;
compile,1;
why,1;
for,1;
"s",1;
for,1;
size,,1;
may,1;
codegen-units,1;
It,1;
units),1;
into.,1;
more,1;
faster,1;
compile,1;
achieve,1;
threads,1;
more,1;
or,1;
independently,,1;
optimization,1;
suffers.,1;
for,1;
example,,1;
benefit,1;
differ-
ent,1;
default,,1;
an,1;
effectively,1;
unbounded
number,1;
units,1;
fast,1;
you
can”),1;
number,1;
optimization,1;
want,1;
it),1;
program,,1;
beyond,1;
output,1;
each,1;
includes,1;
units,1;
been,1;
another,1;
over,1;
code.,1;
adds,1;
compile,1;
most,1;
may,1;
been,1;
due,1;
com-
pilation,1;
parts.,1;
programs,1;
benefit,1;
optimization.,1;
compile,1;
performs,1;
units,1;
each,1;
an,1;
for,1;
by,1;
using
many,1;
Since,1;
each,1;
onerous,,1;
lower,1;
by,1;
mostly,1;
“full”,1;
found.
NOTE
LTO,1;
too.,1;
See,1;
for,1;
more,1;
supports,1;
aid,1;
such,1;
debug-assertions,,1;
binary.,1;
increases,1;
such,,1;
addresses,,1;
profiles.,1;
debug_assert!,1;
(through,1;
Such,1;
may,1;
program,1;
runtime.,1;
on,1;
integer,1;
default,,1;
another,1;
dictates,1;
program,1;
or,1;
like,1;
unwind,1;
(the,1;
on,1;
most,1;
platforms),1;
or,1;
more,1;
unwinding,1;
program,1;
unwinding,1;
unwinding,1;
bottom,1;
That,1;
foo,,1;
a
panic,1;
return,1;
foo,,1;
main,,1;
program,1;
unwinds,1;
on,1;
gives,1;
chance,1;
gives,1;
chance,1;
even,1;
case,1;
threads,1;
That,1;
occurred.
This,1;
unwinding,1;
sword;,1;
program,1;
may,1;
cause,1;
example,,1;
state,1;
Mutex.,1;
Any,1;
prepared,1;
fact,1;
state,1;
may,1;
partially
updated,,1;
primitives
(like,1;
remember,1;
occurred,1;
tries,1;
If,1;
such,1;
corrupted,1;
unwinding,1;
free,,1;
by,1;
platform.,1;
platforms,1;
unwind,1;
at
all.,1;
supports,1;
different,1;
abort,1;
mode,,1;
may,1;
seem,1;
program,1;
state,1;
errors,1;
may,1;
noticed,1;
trail,1;
form,1;
unwinding,1;
panic
behavior,1;
even,1;
-Cforce-unwind-tables,1;
necessary,1;
while,1;
terminating,1;
on,1;
for,1;
or,1;
example,,1;
enable,1;
for,1;
for,1;
mode,,1;
[profile.<profile-name>.package.<crate-name>],1;
5-8:,1;
Overriding,1;
for,1;
or,1;
for,1;
mode
This,1;
kind,1;
optimization,1;
handy,1;
or,1;
encod-
ing),,1;
specify,1;
(or
similar),1;
configuration,1;
optimization,1;
for,1;
part,1;
or,1;
crate,
(continued)
Project,1;
or,1;
for,1;
serde.
Conditional,1;
or,1;
on,1;
on,1;
platform,1;
interface
(ABI).,1;
want,1;
an,1;
or,1;
disable,1;
but
uninteresting,1;
setup,1;
To,1;
like,1;
for,1;
compilation,,1;
environment.
We,1;
saw
earlier,1;
It,1;
form,1;
#[cfg(condition)],1;
compile,1;
item
only,1;
condition,1;
#[attribute],1;
condition,1;
holds,1;
condition,1;
condition,1;
"some-feature",,1;
like,1;
key/value,1;
like,1;
by,1;
number,1;
compilation
dependent,1;
most,1;
least,1;
these.,1;
for,1;
example,,1;
=
"f2"),1;
f1,1;
or,1;
f2,1;
key/value,1;
syntax,1;
key,1;
target_os,1;
like,1;
win-
dows,,1;
specify,1;
or,1;
received,1;
cfg(windows),1;
cfg(unix),1;
example,,1;
on,1;
write:,1;
target_os,1;
"macos"))].
78
Chapter,1;
tailor,1;
context.,1;
option,,1;
for,1;
for,1;
inte-
gration,1;
tests;,1;
tests,1;
documentation,1;
or,1;
respectively.
There’s,1;
debug_assertions,1;
option,,1;
options
Some,1;
tools,,1;
like,1;
on,1;
tool,1;
exam-
ple,,1;
want,1;
#[cfg_attr(miri,,1;
compile,1;
on,1;
specify,1;
like,1;
or,1;
specify,1;
platform,1;
target_feature,,1;
like,1;
avx
or,1;
very,1;
may,1;
adapt,1;
platform,1;
like,1;
musl.
For,1;
especially,1;
on,1;
such,1;
#[link].
While,1;
example,,1;
on,1;
on,1;
gives,1;
an,1;
for,1;
5-9:,1;
Structure
79Here,,1;
specify,1;
cfg(windows),1;
(so,,1;
on,1;
cfg(unix),1;
(so,,1;
on,1;
Linux,,1;
platforms).
One,1;
thing,1;
point,
so,1;
syntax,1;
on,1;
on,1;
or,1;
well,1;
explicitly,1;
by,1;
on,1;
topic,1;
perform,1;
tools
like,1;
detect,1;
on,1;
on
crates,1;
or,1;
security,1;
or,1;
may,1;
want,1;
Using,1;
such,1;
tool,1;
great,1;
an,1;
way!
It’s,1;
sure,1;
rustc
when,1;
compiles,1;
handy,1;
CI,
where,1;
may,1;
want,1;
on,1;
whether,1;
on,1;
or,1;
on,1;
CI
setup,,1;
code.,1;
dependencies.
Versioning
All,1;
versioned,1;
follow,1;
dictates,1;
for,1;
changes,1;
require,1;
increases,1;
for,1;
RFC,1;
1105,1;
standard
itself,1;
well,1;
reading,1;
three,1;
additions,,1;
require,1;
fixes,,1;
require,1;
RFC,1;
on,1;
aspects,1;
elsewhere,1;
detail,1;
here,1;
want,1;
first,1;
policy,1;
there’s,1;
no,1;
limited,1;
older,1;
an,1;
If,1;
constantly,1;
newly,1;
those
users,1;
compile,1;
behind.
There,1;
techniques,1;
position.,1;
first,1;
an,1;
policy,1;
promising
that,1;
new,1;
compile,1;
from
the,1;
number,1;
or,1;
corresponds,1;
or,1;
Any,1;
new,1;
by,1;
or,1;
until,1;
policy,1;
merged,1;
it
means,1;
lan-
guage,1;
for,1;
second,1;
sure,1;
increases,1;
1.45,,1;
on,1;
1.44,1;
on,1;
until,1;
on,1;
version,,1;
version,,1;
critical,1;
security,1;
for,1;
by,1;
necessary.
Some,1;
num-
ber.,1;
explicitly,1;
an
MSRV,1;
opting,1;
such,1;
may,1;
require,1;
none,1;
an,1;
Only
a,1;
small,1;
even,1;
constantly,1;
monitor,1;
MSRV.,1;
When,1;
new,1;
release
of,1;
sure,1;
may,1;
security,1;
older,1;
until,1;
policy,1;
over,1;
been,1;
been,1;
writing.
Project,1;
first,1;
clear,1;
or,1;
version,,1;
chances,1;
wrong.,1;
don’t,1;
choice,1;
may,1;
cause,1;
for,1;
why,1;
each,1;
problematic.
First,,1;
case,1;
on,1;
developer,1;
on,1;
crate,,1;
on,1;
crate,,1;
foo,,1;
on,1;
Further,1;
policy,,1;
on,1;
"1,,1;
Here,,1;
When,1;
sees,1;
>=1.7.
But,1;
sees,1;
foo’s,1;
on,1;
gives,1;
no,1;
number,1;
why,1;
may,1;
explicitly,1;
want,1;
most,1;
(the,1;
reproducible,1;
well,1;
compiles,1;
say,,1;
even,1;
compiles,1;
1.X,1;
or,1;
beyond,1;
Is,1;
It,1;
on,1;
1.5.6,1;
be.,1;
specifies,1;
"1,
<1.5",,1;
strategy,1;
on,1;
sure,1;
case,1;
new,1;
or,1;
bet,1;
acceptable,1;
for,1;
maxi-
mum.,1;
try,1;
until,1;
compiles,1;
your
minimum,1;
requirements!
It’s,1;
noting,1;
like,1;
minimal,1;
adoption,1;
may,1;
version
specifiers,1;
on,1;
may,1;
minimal,1;
hard,1;
why,1;
If,1;
on,1;
foo,,1;
on,1;
actually,1;
it
failed,1;
compile,1;
no,1;
because,1;
minimal,1;
by,1;
bar
directly,1;
appropriate,1;
may,1;
number,1;
present,1;
minimal,1;
for,1;
for,1;
most,1;
trivial,1;
more,1;
received
a,1;
bump,1;
Git,1;
figure
out,1;
code.,1;
Git,1;
instead,1;
It,1;
more,1;
good,1;
format,1;
for,1;
https://keepachangelog.com/.
Unreleased,1;
even,1;
a
directory,1;
or,1;
Git,1;
repository.,1;
even,1;
releases.,1;
dictate,1;
decently,1;
well,1;
release,,1;
like,1;
new,1;
2.0.4-alpha.1.,1;
If,1;
an,1;
number,1;
changes,1;
an,1;
or,1;
If,1;
number,1;
release,,1;
exam-
ple,,1;
an,1;
additive,1;
2.1.0-
alpha.1.,1;
If,1;
been,1;
release,,1;
want,1;
because,1;
developer,1;
on,1;
2
of,1;
crate,,1;
commit,1;
If,1;
don’t,1;
time,,1;
unexpected,1;
by,1;
compile,1;
or,1;
result,1;
issues.,1;
If,1;
fol-
low,1;
here,,1;
instead,1;
by,1;
or,1;
commit.
Next,,1;
developer,1;
crate,,1;
part,1;
behind,1;
Git,1;
for,1;
on,1;
older,1;
If,1;
number,1;
no,1;
on,1;
If,1;
fellow,1;
no,1;
compiles,,1;
If,,1;
on,1;
developer,1;
number,1;
for,1;
Git,1;
by,1;
no,1;
It,1;
good,1;
or,1;
changes,1;
you
still,1;
most,1;
Git,1;
even,1;
such,1;
small,1;
or,1;
suggested,1;
by,1;
appropriate,1;
part,1;
aware,,1;
on,1;
such,1;
may,1;
your
version,1;
number,1;
for,1;
configuring,
organizing,,1;
for,1;
benefit,1;
over,1;
hopefully,1;
beyond,1;
#[test],1;
functions,1;
56
TESTING
In,1;
testing
capabilities,1;
may,1;
want,1;
number,1;
well,1;
covered,1;
by,1;
#[test],1;
well,1;
wide
range,1;
grow,1;
more,1;
may,1;
beyond,1;
#[test],1;
onto,1;
first,1;
part,1;
like,1;
conditional
testing,1;
code.,1;
second,1;
looks,1;
correctness,1;
such,1;
benchmarking,,1;
understand,1;
first
understand,1;
tests.,1;
When,1;
thing,1;
--test,1;
produce,1;
than
just,1;
library,1;
or,1;
binary.,1;
--test,1;
has
two,1;
on,1;
bit).,1;
Second,,1;
harness:,1;
program,1;
Test,1;
depth,1;
7,,1;
and
a,1;
sprinkling,1;
Essentially,,1;
every,1;
func-
tion,1;
by,1;
#[test],1;
It,1;
exposes,1;
each,1;
part.,1;
includes,1;
information
like,1;
#[should_panic]),
and,1;
At,1;
over,1;
tests,1;
command,1;
like,1;
output,,1;
tests,1;
results.
As,1;
on,1;
magic
part,1;
aligns,1;
#[test]
functions,1;
even,1;
tests,1;
(the,1;
tests,1;
tests/),1;
follow,1;
each,1;
crate,,1;
public,1;
for,1;
each,1;
tests/.,1;
Test,1;
harnesses,1;
gen-
erated,1;
for,1;
allow,1;
for,1;
explicitly,1;
want,1;
for,1;
subdirectory,,1;
require,1;
by,1;
for,1;
6[[test]]
name,1;
none,1;
#[test],1;
testing
code,1;
want,1;
Essentially,,1;
by,1;
That,1;
want
to,1;
them),,1;
such,1;
command,1;
flags.,1;
set
separately,1;
for,1;
each,1;
supports,1;
number,1;
command,1;
tests,1;
aren’t,1;
compiles,1;
for,1;
To,1;
followed,1;
by
the,1;
binary.,1;
example,,1;
for,1;
number,1;
handy,1;
configuration,1;
arguments.,1;
output,1;
tests.,1;
useful,1;
want,1;
output,1;
once,1;
tests,1;
or,1;
segfaults,1;
want,1;
figure
out,1;
by,1;
tests,1;
skipping,1;
tests,1;
tests,1;
require,1;
an,1;
external,1;
program,1;
by,1;
disable,1;
false),,1;
tests,1;
useful,1;
for,1;
handy,1;
want,1;
run
tests,1;
don’t,1;
model.,1;
exam-
ple,,1;
tests,1;
tests,1;
require,1;
setup,1;
WebAssembly
or,1;
for,1;
configuration,1;
may,1;
seem,1;
don’t,1;
want,1;
testing
allows,1;
better,,1;
more,1;
want,1;
over,1;
types,1;
may,1;
interact,1;
with.,1;
example,,1;
want,1;
instead,1;
want,1;
Or,,1;
want,1;
types,1;
allow,1;
each,1;
on,1;
each
invocation.,1;
may,1;
want,1;
gather,1;
such,1;
or,1;
whether,1;
types,1;
mocks,,1;
key,1;
suite.,1;
kind,1;
library,1;
most,1;
for,1;
library,1;
for,1;
generating,1;
or,1;
well,1;
mecha-
nisms,1;
during,1;
your
program,,1;
or,1;
tool,1;
over,1;
mock,1;
trait,1;
library,1;
gener-
ate,1;
types,1;
parameters.,1;
then
write,1;
tests,1;
by,1;
or,1;
such,1;
want,1;
aspect,1;
instead,1;
encapsulate,1;
state,1;
want,1;
mock,1;
struct.,1;
struct,1;
or,1;
on,1;
or,1;
like,1;
or,1;
even,1;
most,1;
library,1;
development,,1;
types,1;
tests,1;
tests,1;
behaves,1;
state,1;
implements,1;
library,1;
around
a,1;
implements,1;
most,1;
on,1;
an,1;
map,,1;
want,1;
insert_just_one(),1;
mut,1;
state,1;
compile,1;
because,1;
while,1;
can
access,1;
different,1;
module.,1;
We,1;
by,1;
visibility,1;
don’t,1;
general,,1;
state,1;
new,1;
may,1;
state,1;
more,1;
We,1;
while,1;
for,1;
code.,1;
instead,1;
Using,1;
state,1;
for,1;
Test,1;
second,1;
benefit,1;
during,1;
program,1;
perform,1;
by,1;
tests.,1;
example,,1;
When
testing,1;
want,1;
sure,1;
most,1;
obvious,1;
times,1;
on,1;
underlying,1;
memory,1;
{
#[cfg(test)]
write_through:,1;
Write>,1;
for,1;
{
fn,1;
buf:,1;
self.full(),1;
self.inner.write(&self.buffer[..])?;
//,1;
Using,1;
context
Keep,1;
for,1;
library,1;
documentation,1;
automatically,1;
public,1;
documentation,1;
crate,,1;
tests.,1;
don’t,1;
on,1;
code.,1;
Each,1;
copy-pasted,1;
performs,1;
preprocessing,1;
more,1;
an,1;
code.,1;
on,1;
like,1;
types,1;
boilerplate.
You,1;
by,1;
may,1;
want,1;
this,,1;
for,1;
example,,1;
want,1;
6asynchronous,1;
like,1;
or,1;
want,1;
doctest.
To,1;
operator,1;
don’t,1;
includes,1;
Result<(),,1;
looks,1;
like,1;
(for
example,,1;
Ok(())).,1;
If,1;
gives,1;
hard,1;
time
about,1;
for,1;
disambiguate,1;
by,1;
explicitly,1;
like,1;
number,1;
handy,1;
as
you,1;
documentation,1;
for,1;
more,1;
complex,1;
first,1;
abil-
ity,1;
lines.,1;
If,1;
example,,1;
such,1;
traits,1;
for,1;
dummy,1;
types,1;
or,1;
generating,1;
It,1;
useful,1;
wish
to,1;
present,1;
showing,1;
gives,1;
an,1;
lines
might,1;
Completely,1;
number,1;
first,1;
Here's,1;
an,1;
on,1;
declare,1;
want,1;
distract,1;
We,1;
scope.
///,1;
mylib::frobnify;
///,1;
frobnify("0".parse()?)?;
///,1;
even,1;
an,1;
*/
///,1;
```
fn,1;
usize),1;
6-5:,1;
lines,1;
an,1;
example
and,1;
because,1;
hidden.
Much,1;
like,1;
#[test],1;
by,1;
specify,1;
to
indicate,1;
compile,1;
compile.,1;
indicates,1;
useful,1;
update
the,1;
documentation,1;
aspect,1;
library,1;
an,1;
may,1;
necessary,1;
struct,1;
Send>(),1;
fails,1;
compile,1;
tool,1;
gives,1;
no,1;
why,1;
compile.,1;
example,,1;
compile,1;
because,1;
been,1;
want,1;
sure,1;
fails,1;
compile,1;
more,1;
tests,1;
for,1;
such,1;
crate.
Additional,1;
Tools
There’s,1;
more,1;
functions,1;
produce,1;
techniques,
methodologies,,1;
key,1;
may,1;
be.,1;
categorizes,1;
number,1;
lints,1;
lints,1;
compile,1;
fails,1;
b;
std::mem::forget(t),,1;
for,1;
x,1;
over,1;
first,1;
If,1;
number,1;
lints,1;
while,1;
more,1;
example,,1;
type_complexity
lint,,1;
on,1;
by,1;
default,,1;
particularly,1;
program,,1;
like,1;
may,1;
If,1;
part,1;
erroneously,1;
or,1;
want,1;
allow,1;
instance,1;
for,1;
lints,1;
form,1;
more,1;
for,1;
correctness.,1;
correctness,1;
lints,1;
errors,1;
(take,1;
for,1;
by,1;
by,1;
usu-
ally,1;
refined,,1;
or,1;
more,1;
good,1;
enable,1;
When,1;
changes,1;
brought,1;
by,1;
edition.,1;
lints,1;
new,1;
document
any,1;
public,1;
or,1;
for,1;
public,1;
good,1;
even,1;
work,
the,1;
tests,1;
con-
sidering,1;
them.,1;
number,1;
techniques,1;
more,1;
tests.,1;
for,1;
such,1;
each,1;
here,1;
cover,1;
by,1;
tools:
fuzzing,1;
books,1;
been,1;
fuzzing,,1;
program,1;
If,1;
example,,1;
parsing
library,,1;
program,1;
by,1;
generating,1;
random
strings,1;
until,1;
while,1;
starts,1;
c,,1;
different,1;
faster,1;
random.
Fuzzers,1;
great,1;
corner,1;
require,1;
setup,1;
on,1;
exam-
ple,,1;
an,1;
parser.
libfuzzer_sys::fuzz_target!(|data:,1;
parser,1;
form,1;
valid,1;
strings,1;
here,1;
whether,1;
or,1;
for,1;
parser,1;
or,1;
due,1;
until,1;
most,1;
number,1;
cases
have,1;
been,1;
explored.,1;
If,1;
type—something
like,1;
like,1;
arbitrary,1;
more,1;
complex,1;
It,1;
hood,1;
actually,1;
very,1;
straightfor-
ward,1;
an,1;
trait,1;
implementing,1;
types,1;
like,1;
or,1;
bool,1;
read,1;
necessary,1;
number,1;
valid,1;
instance,1;
themselves,,1;
types,1;
like,1;
or,1;
produce,1;
number,1;
dictate,1;
number,1;
times,1;
on,1;
even,1;
an,1;
implements
Arbitrary,1;
by,1;
arbitrary,1;
on,1;
each,1;
type!,1;
To,1;
fuzz-
ing,1;
further,,1;
cargo-fuzz.
Property-Based,1;
want,1;
program,1;
great,1;
result,1;
add(1,,1;
wrong.,1;
number,1;
properties
indeed,1;
first,1;
want,1;
confident,1;
cor-
rect.,1;
for,1;
want
to,1;
If,1;
result,1;
or,1;
output,1;
looking,1;
for,1;
directly
related,1;
such,1;
whether,1;
operations,1;
outcome,1;
every,1;
library,1;
or,1;
or,1;
an,1;
matrix,1;
multiplication).
If,1;
generating,1;
until,1;
condition,1;
met
sounds,1;
like,1;
fuzzing,,1;
because,1;
is—smarter,1;
property
you’re,1;
for,1;
more,1;
guided,1;
by,1;
developer,1;
like,1;
number,1;
or,1;
string,1;
more,1;
fuzz-
ers,1;
may,1;
require,1;
may,1;
grow,1;
kind,1;
searching,1;
well.
If,1;
SEQUENCES,1;
allow,1;
arbitrary,1;
aren’t,1;
limited,1;
example,,1;
want,1;
behaves,1;
perform,1;
operations,1;
on,1;
an,1;
perform,1;
each,1;
on,1;
Foo,,1;
for,1;
even,1;
operations,1;
violates,1;
property-
violating,1;
found!
Testing
95Test,1;
Augmentation
Let’s,1;
passes
all,1;
tests.,1;
day,,1;
fails,1;
or,1;
for,1;
con-
ditions,,1;
operations,1;
on,1;
order,,1;
such
as,1;
memory.
Catching,1;
tests,1;
don’t,1;
over,1;
or,1;
each,1;
times,1;
even,1;
may,1;
case,1;
sufficiently,1;
or,1;
tests,1;
first,1;
tool,1;
an,1;
for,1;
intermediate,1;
an,1;
internal,,1;
simplified
representation,1;
helps,1;
syntax,1;
tests,1;
Miri,1;
Miri,1;
like,1;
a
normal,1;
tests,1;
in
return,,1;
Miri,1;
program,1;
state,1;
each,1;
Miri,1;
detect,1;
program,1;
types,1;
such,1;
they’ve,1;
been,1;
dropped,,1;
or,1;
operations,1;
program,1;
may,1;
result,1;
failures,1;
example,,1;
very,1;
unsound,1;
exclusive,1;
mut,1;
x,1;
*mut,1;
x;
let,1;
*x,,1;
*x),1;
6-8:,1;
Miri,1;
points,1;
wrong:
error:,1;
for,1;
Unique,1;
an,1;
appropriate,1;
borrow,1;
|,1;
*x,,1;
*x),1;
for,1;
Unique,1;
an,1;
appropriate,1;
borrow,1;
development,,1;
aren’t,1;
by,1;
output,1;
may,1;
better!
Another,1;
tool,1;
looking,1;
Loom,,1;
library,1;
tries,1;
tests,1;
every,1;
concurrent
operations.,1;
At,1;
cross-thread,1;
points,1;
tests,1;
over,1;
order,1;
threads,1;
points,1;
each,1;
once,1;
first,1;
once,1;
memory,1;
(which,1;
threads,1;
inappropriately.,1;
If,1;
fails,,1;
an,1;
threads,1;
order,1;
how
the,1;
tests,1;
because,1;
hard,1;
tests,1;
times,1;
may
not,1;
If,1;
times,1;
good,1;
tests,1;
part,1;
changes,1;
tests,1;
or,1;
fail,
whereas,1;
may,1;
latency
profile,,1;
number,1;
or,1;
metric,1;
loop,1;
or,1;
distributed,1;
multicore,1;
section,,1;
may,1;
tests,1;
them.,1;
particularly,1;
I/O,1;
each,1;
turn.
Performance,1;
vary,1;
for,1;
fast,1;
memory,1;
or,1;
more,1;
subtle.,1;
example,,1;
memory,,1;
cause,1;
to
clock,1;
fact,,1;
may,1;
even,1;
Or,,1;
another,1;
perspective,,1;
may,1;
or,1;
may,1;
due,1;
no,1;
eliminate,1;
benchmarks,1;
repeat-
edly,1;
on,1;
so,,1;
try,1;
from
the,1;
benchmarks,1;
us.,1;
each,1;
times,1;
has
tools,1;
example,,1;
on,1;
like,1;
hdrhistogram,1;
enable,1;
statistics,1;
like,1;
samples
we,1;
To,1;
even,1;
more,1;
techniques,1;
like,1;
statistics,1;
corresponds,1;
on,1;
beyond,1;
luckily,1;
been,1;
by,1;
others.,1;
crate,,1;
for,1;
more,1;
for,1;
appropriate,1;
number,1;
times,1;
result,1;
It,1;
which
includes,1;
analysis,1;
even,1;
trends,1;
over,1;
eliminate,1;
on,1;
configuration,1;
least,1;
eliminate,1;
compile,1;
time,,1;
unroll,1;
perform,1;
every,1;
code.,1;
Normally,1;
fast,1;
compiler’s,1;
invalid,1;
mut,1;
fast,1;
output,1;
like,1;
or,1;
cargo-asm,
you’d,1;
for,1;
nowhere,1;
been,1;
completely.,1;
actually,1;
vector,1;
operations,1;
eliminated,1;
code.,1;
so,,1;
for,1;
for,1;
benchmarking,,1;
standard
library,1;
been,1;
topic,1;
pending,1;
useful,1;
discussing,1;
here,1;
At,1;
core,
it’s,1;
an,1;
x,1;
It,1;
return,1;
used),1;
result,1;
such,1;
computed,1;
compile,1;
time,,1;
inject
the,1;
result,1;
for,1;
many,,1;
needs.,1;
example,,1;
6-9,1;
no,1;
mut,1;
6-10:,1;
arbitrary,1;
each,1;
perform,1;
each,1;
order,,1;
or,1;
oth-
erwise,1;
(that’s,1;
may,1;
each,1;
say,,1;
&vs.,1;
That’s,1;
because,1;
the
caveat,1;
perform,1;
on,1;
argument.,1;
It,1;
mutate,1;
black_box(&vs),,1;
loop,1;
on
that,1;
Overhead,1;
wrong
thing.,1;
example,,1;
want,1;
To,1;
like,1;
fast,1;
here?
This,1;
may,1;
like,1;
achieves,1;
goal,,1;
fast,1;
loop,1;
most,1;
loop,1;
behind,1;
integer,1;
for,1;
output,,1;
sequence
of,1;
points,1;
least,1;
releases,1;
output,1;
receives.,1;
That’s,1;
thing,1;
may,1;
well,1;
mostly,1;
for,1;
getting,1;
time,,1;
reading,1;
configuration,1;
or,1;
new,1;
time,,1;
actually,1;
once,1;
sure,1;
loop,1;
want,1;
or,1;
benchmark.,1;
If,1;
different
timing,1;
cases
that,1;
require,1;
different,1;
strategies!
Summary
In,1;
great,1;
We,1;
number,1;
and
techniques,1;
useful,1;
code.,1;
on,1;
aspects,1;
intermediate,1;
on,1;
we
will,1;
more,1;
on,1;
code.,1;
See,1;
on,1;
67
MACROS
Macros,1;
are,,1;
tool,1;
for,1;
for,1;
for,1;
generating,1;
every,1;
substitution,1;
for,1;
macros,1;
different,1;
different,1;
forms,1;
macros,1;
chapter.,1;
macros,1;
come
in,1;
handy,1;
with
more,1;
use.
Programmers,1;
languages,1;
may,1;
each,1;
to
false,,1;
or,1;
If,1;
case,1;
foryou,,1;
macros,1;
something
“bad.”,1;
Macros,1;
macros,1;
macro_rules!,1;
macros,1;
resort,1;
for,1;
followed,1;
by,1;
an,1;
like,1;
regular,,1;
for,1;
until,1;
macros,1;
recognized,1;
macros,1;
been,1;
declara-
tive,1;
macros,1;
macro_rules!,1;
this,,1;
merely,1;
indicates,1;
different,1;
compile,1;
parser,1;
annotated
with,1;
!,,1;
parser,1;
them.,1;
like,1;
or,1;
an,1;
example,,1;
(at,1;
macro
where,1;
an,1;
or,1;
expected.
It,1;
may,1;
obvious,1;
why,1;
macros,1;
called
declarative.,1;
don’t,1;
fact,1;
don’t,1;
output,,1;
want,1;
output,1;
like,1;
declare,1;
so,,1;
macros,1;
a
limited,1;
Use,1;
macros,1;
useful,1;
the
same,1;
over,1;
like,1;
for,1;
or,1;
macros,1;
most,1;
macros,1;
such,1;
tests,1;
want,1;
different,1;
like,1;
7-1.
fn,1;
test_inner<T>(init:,1;
...,1;
}
#[test]
fn,1;
test_1u8_frobnified(),1;
{
test_inner(1i128,,1;
works,,1;
error.,1;
macros,1;
better,,1;
{
$(
mod,1;
test_inner::<$t>(1,,1;
}
#[test]
fn,1;
test_inner::<$t>(1,,1;
u8_tests,
//,1;
for,1;
expands,1;
each,1;
trivial,,1;
Each,1;
test_battery!,1;
generating,1;
tests,1;
for,1;
argu-
ments.,1;
We,1;
tests,1;
for,1;
different,1;
for,1;
significantly,1;
reduced,1;
forget,1;
a
­particular,1;
configuration!
The,1;
for,1;
trait,1;
If,1;
want,1;
trait,1;
for,1;
number,1;
types,1;
even,1;
trait,1;
want,1;
for,1;
an,1;
like,1;
7-3.
macro_rules!,1;
for,1;
{
fn,1;
i8,,1;
...,1;
*/];
Listing,1;
Using,1;
trait,1;
for,1;
types,1;
swoop
Here,,1;
an,1;
for,1;
each,1;
type
whose,1;
may,1;
why,1;
for,1;
We,1;
do
that,,1;
types,1;
for,1;
types,1;
experimental,1;
for,1;
enumerating
the,1;
types,1;
beyond,1;
for,1;
example,,1;
an,1;
trait,1;
integer,1;
wondering,1;
or,1;
more,1;
macros,1;
and
integrate,1;
language.,1;
rule,1;
changes,1;
on,1;
otherwise,,1;
dictates,1;
characters,1;
turned,1;
lowest-level,1;
such,1;
characters,,1;
string,1;
at
this,1;
there’s,1;
no,1;
example,,1;
(value,1;
by,1;
turning
text,1;
example,,1;
no,1;
whitespace,,1;
(the,1;
no,1;
string,1;
been,1;
turned,1;
assigns,1;
invo-
cations,,1;
ultimately,1;
syntax,1;
tree,1;
by,1;
code.,1;
an,1;
example,,1;
x,1;
x,1;
|,1;
When,1;
syntax,1;
represents,1;
an,1;
integer,1;
syntax,1;
tree,1;
assigns,1;
grammar.
Rust,1;
macros,1;
dictate,1;
syntax,1;
tree,1;
gets
turned,1;
during
parsing,,1;
tokens,
which,1;
ultimately,1;
become,1;
syntax,1;
tree,1;
for,1;
yet,,1;
sequence.,1;
When,1;
the
indicated,1;
evaluates,1;
over,1;
the
tokens,1;
syntax,1;
tree,1;
tree,1;
where
the,1;
was.
Technically,,1;
for,1;
like,1;
string,1;
example,,1;
x,1;
first,1;
tree,1;
third
is,1;
trees:,1;
valid,1;
parse.,1;
example,,1;
for,1;
x,1;
inside,1;
valid,1;
for,1;
because,1;
macros,1;
valid,1;
cannot
have,1;
say,,1;
first,1;
or,1;
an,1;
follows,1;
x,1;
an,1;
like,1;
trait,1;
or,1;
or,1;
macros,1;
invalid,1;
because,1;
compile!
That’s,1;
macros,1;
contained
within,1;
exhaustive,1;
syntax,1;
macros,1;
cover,1;
macros,1;
each,1;
an,1;
When,1;
first,1;
last,,1;
that
matches,1;
by,1;
rule,1;
};
}
Listing,1;
components
Matchers
You,1;
tree,1;
tries,1;
tree,1;
an,1;
example,,1;
That,1;
sign,1;
followed,1;
by,1;
If,1;
x,1;
matcher,,1;
5,1;
valid,1;
$b:expr,,1;
an,1;
(the,1;
pretty,1;
like,1;
example,,1;
matcher
accepts,1;
or,1;
more,1;
(),),1;
key/value
pairs,1;
key,1;
$value:expr),+
And,,1;
complex,1;
for,1;
key,1;
or,1;
sure,1;
key,1;
for,1;
for,1;
for,1;
even,1;
for,1;
types,1;
reference,1;
These,,1;
for,1;
enable,1;
most,1;
straightforward
code,1;
If,,1;
want,1;
matcher,,1;
may,1;
want,1;
try,1;
don’t,1;
follow,1;
syntax,1;
macro_rules!,1;
more,1;
detail,1;
later,1;
matcher,,1;
variables,1;
each,1;
$key,1;
example
in,1;
part,1;
you
can,1;
syntax,1;
repeated,1;
once,1;
each,1;
expansion,1;
holding,1;
appropriate,1;
for,1;
each,1;
for,1;
example,,1;
for,1;
matcher,,1;
for,1;
each,1;
matched:
$(map.insert($key,,1;
here,1;
want,1;
for,1;
each,1;
repetition,,1;
repetition,,1;
inside,1;
each,1;
(in,1;
case,1;
more,1;
may,1;
macros,1;
being
hygienic,1;
or,1;
When,1;
macros,1;
mean
that,1;
affect,1;
variables,1;
aren’t,1;
trivial,1;
declare,1;
foo,,1;
macro’s,1;
by,1;
(the,1;
Similarly,,1;
macros,1;
variables,1;
explicitly,1;
most,1;
time,,1;
namespace,1;
into.,1;
example,,1;
that
tries,1;
site.
macro_rules!,1;
let_foo,1;
{
($x:expr),1;
expands,1;
2;
let_foo!(2);
assert_eq!(foo,,1;
Macros,1;
expands,1;
assert,1;
looks,1;
like,1;
by,1;
different,1;
no,1;
fact,,1;
complain,1;
an,1;
unused,1;
very,1;
macros,1;
shadowing,1;
or,1;
overwriting,1;
because,1;
hygienic,1;
beyond,1;
macros,1;
namespace,1;
for,1;
new,1;
func-
tions,1;
scope,,1;
new,1;
elsewhere,1;
new,1;
macros,1;
affect,1;
like,1;
this,,1;
more,1;
trait,1;
most,1;
lack,1;
for,1;
types,1;
macros,1;
particularly,1;
want,1;
types,1;
mod,1;
Result,1;
To,1;
on,1;
safe,1;
side,,1;
sure,1;
specified,1;
types,1;
like,1;
or,1;
::std,1;
in
no_std,1;
affect,1;
key,1;
remember,1;
because,1;
If,1;
If,,1;
on,1;
an,1;
explicitly,1;
any
identifier,1;
an,1;
variable
in,1;
please_set,1;
{
($i:ident,,1;
{
$i,1;
mut,1;
x,1;
x,1;
Giving,1;
macros,1;
site
We,1;
x,1;
x,1;
macro’s,1;
note,1;
on,1;
macros,1;
pretty,1;
much
everything,1;
macros,1;
If,1;
try,1;
further,1;
declare
a,1;
want,1;
crate,,1;
If,1;
crate,,1;
mod,1;
macros,1;
That,1;
or,1;
by,1;
parser,1;
code
generation,,1;
At,1;
gathers,1;
program,1;
with.
Procedural,1;
macros,1;
because,1;
very,1;
involved,1;
on,1;
compiler’s,1;
more,1;
or,1;
holds,,1;
macros,1;
three,1;
different,1;
each,1;
like,1;
macro_rules!,1;
generates
Attribute,1;
like,1;
#[test]
Derive,1;
like,1;
three,1;
types,1;
underlying,1;
mechanism:,1;
pro-
vides,1;
return,1;
differ,1;
output,1;
han-
dled.,1;
cover,1;
each,1;
form,1;
Like,1;
macros,1;
hygienic,1;
interact-
ing,1;
surrounding,1;
your
macros,1;
explicitly,1;
surrounding,1;
discuss
later).
Attribute,1;
assigned,1;
to
wholesale,,1;
inputs:,1;
tree,1;
the
attribute,1;
tree,1;
may,1;
allow,1;
such,1;
by,1;
or,1;
epilogue,1;
or,1;
by,1;
derive,1;
different,1;
may,1;
seem,1;
derive,1;
macros,1;
behind,1;
derive,1;
macros,1;
now-well-known
#[derive(Serialize,,1;
magic.
Derive,1;
macros,1;
macros,
since,1;
such,1;
arguments.,1;
macros,1;
allow,1;
placed,1;
inside,1;
give
clues,1;
derive,1;
markers,1;
macros.
The,1;
Macros
Before,1;
each,1;
different,1;
types,1;
discussing,1;
why,1;
may,1;
want,1;
twice,1;
for,1;
increased,1;
compile,1;
time.
Procedural,1;
macros,1;
significantly,1;
compile,1;
times,1;
for,1;
first,1;
example,,1;
crate,,1;
streams,1;
compile,1;
by,1;
macros,1;
compiles,1;
times,1;
faster,1;
debug
mode,,1;
for,1;
most,1;
even,1;
differ-
ence,1;
second,1;
why,1;
macros,1;
compile,1;
for,1;
realizing,1;
actually,1;
more,1;
adds,1;
compile,1;
macros,1;
rarely,1;
overall,1;
compile,1;
wait,1;
for,1;
thing,1;
most,1;
macros,1;
don’t,1;
That,1;
particularly,1;
involved,,1;
may,1;
compiles,1;
spend-
ing,1;
on,1;
an,1;
good,1;
for,1;
each,1;
We’ll
start,1;
derive,1;
Use,1;
macros,1;
for,1;
thing,1;
trait,1;
traits,1;
derive,1;
for,1;
trait,1;
trait,1;
for,1;
may,1;
seem,1;
like,1;
trait,1;
once,1;
or,1;
twice,,1;
derive,1;
for,1;
second,1;
condition,1;
may,1;
seem,1;
stranger,,1;
mean
for,1;
trait,1;
like,1;
If,1;
you
were,1;
an,1;
output,1;
each,1;
You’d,1;
every,1;
field—
and,1;
derive(Clone),1;
every,1;
gen-
eral,,1;
want,1;
trait,1;
developer’s,1;
If,1;
no,1;
obvious,1;
for,1;
or,1;
obvious,1;
derive,1;
Use,1;
macros,1;
rule,1;
You
might,1;
macros,1;
want,1;
macro_rules!,,1;
macros,1;
all!
There,1;
particularly,1;
good,1;
for,1;
becoming
so,1;
hard,1;
execute,1;
phf
crate,,1;
or,1;
compile,1;
string,1;
characters,1;
the
corresponding,1;
general,,1;
merely,1;
trans-
form,1;
compile,1;
actually,1;
over,1;
good,1;
for,1;
you
can,1;
for,1;
macros,1;
intentionally,1;
Use,1;
Attribute,1;
leaves,1;
macros,1;
value.
Test,1;
very,1;
want,1;
or,1;
tests,1;
may,1;
this,,1;
read,1;
an,1;
like,1;
setup,1;
each,1;
or,1;
like,1;
a
given,1;
repeated,1;
once,1;
each,1;
like,1;
macros,1;
functions,1;
hello(name:,1;
configuration,1;
struct,1;
Essentially,,1;
Similarly,,1;
asynchronous,1;
I/O,1;
automatically,1;
asynchronous,1;
saving,1;
setup,1;
every,1;
asynchronous,1;
want,1;
inject,1;
example,,1;
like,1;
like,1;
allow,1;
by,1;
an,1;
every,1;
by,1;
want,1;
beyond,1;
merely,1;
traits,1;
for,1;
these
cases,,1;
macros,1;
great
example,1;
by,1;
trait,1;
more,1;
types,1;
by,1;
generating,1;
introducing,1;
don’t,1;
shoot,1;
been,1;
derive,1;
trait,1;
been,1;
for,1;
macros,1;
TokenStream,1;
be
iterated,1;
over,1;
an,1;
punctuation,
or,1;
another,1;
TokenStream,1;
enclosed,1;
like,1;
or,1;
syntax,1;
wish,1;
valid,1;
If,1;
want,1;
input
specifically,1;
want,1;
crate,,1;
parser,1;
TokenStream,1;
an,1;
most,1;
want,1;
produce,1;
program,1;
first,1;
TokenStream,1;
second,1;
to
use,1;
FromStr,,1;
string,1;
TokenStream,1;
these;,1;
want,1;
prepend,1;
macro’s
input,,1;
TokenStream,1;
for,1;
implements,1;
pretty-prints,1;
handy,1;
for,1;
very,1;
more,1;
every,1;
example,,1;
con-
sider,1;
like,1;
for,1;
{
impl,1;
::core::fmt::Debug,1;
for,1;
{
fn,1;
::core::fmt::Formatter<'_>),1;
::core::write!(f,,1;
7-7:,1;
very,1;
for,1;
implementing,1;
Technically,,1;
occurs,1;
inside,1;
for,1;
(the,1;
an,1;
invalid,1;
like,1;
That,1;
carried,1;
error.,1;
When,1;
inside,1;
argu-
ment,1;
error’s,1;
flexible,,1;
enable,1;
produce,1;
compile_error!,1;
causes,1;
an,1;
placed,1;
string,1;
may,1;
seem,1;
very,1;
until,1;
for,1;
compile_error!,1;
invoca-
tion,1;
effectively
telling,1;
source.,1;
seem,1;
part,1;
even,1;
even,1;
been,1;
syn’s,1;
works,,1;
an,1;
Error::to_compile_error,1;
TokenStream,1;
compile_error!,1;
particularly,1;
neat,1;
syn’s,1;
holds,1;
each,1;
distinct
­compile_error!,1;
produce,1;
errors,1;
power,1;
there;,1;
When,1;
an,1;
for,1;
dictates,1;
If,1;
Span::call_site(),,1;
resolved,1;
isolated
from,1;
surrounding,1;
If,,1;
on,1;
resolved,1;
hygienic,1;
because,1;
for,1;
macro_rules!,,1;
which,,1;
for,1;
covered,1;
each,1;
useful,1;
code.,1;
underpin,1;
each,1;
trait.,1;
page.
Macros
1158
ASYNCHRONOUS,1;
not
­s,1;
At,1;
an,1;
asynchro-
nous,1;
program,1;
wait,1;
for,1;
asynchronous,1;
may,1;
insufficient,1;
actually,1;
To,1;
understand,1;
asynchronous,1;
programming
model,1;
first,1;
That,1;
understand,1;
synchronous,1;
programming
model,1;
understand,1;
asynchronous,1;
an,1;
asynchronous,1;
by,1;
asynchronous,1;
first,1;
place;,1;
actually,1;
synchronous,1;
asynchronous,1;
models,,1;
first,1;
programs.
Computers,1;
Really,1;
fact,,1;
most,1;
for,1;
Unless,1;
decompressing,1;
or,1;
chances,1;
for,1;
operations,1;
for,1;
packet
to,1;
for,1;
for,1;
even,1;
for,1;
read,1;
memory,1;
From,1;
by,1;
most,1;
such,1;
When,1;
more,1;
Take,1;
utilization—it’s,1;
low,1;
Interfaces
Synchronous,1;
allow,1;
program,1;
rather,,1;
program),1;
execute,1;
each,1;
wait,1;
for,1;
synchronous,1;
gets
to,1;
wild,1;
stuff,,1;
return,1;
program,1;
there.,1;
for,1;
later,1;
an,1;
fair,1;
Unless,1;
synchronous,1;
completes,1;
puts,1;
until,1;
reports
that,1;
func-
tion,1;
executing,1;
performs,1;
operations,1;
also
often,1;
blocking,,1;
has
to,1;
wait,1;
for,1;
external,1;
order,1;
for,1;
further,1;
until,1;
synchronous,1;
or,1;
blocking,,1;
on,1;
until,1;
waiting,,1;
time.
118
Chapter,1;
allow,1;
thing,1;
want,1;
program,1;
wait,1;
for,1;
or,1;
network
packet,,1;
an,1;
for,1;
Similarly,,1;
even,1;
useful,1;
while,1;
option
as,1;
most,1;
concurrent,1;
program,,1;
each,1;
for
executing,1;
threads,1;
can
make,1;
If,1;
thread
may,1;
runnable,,1;
work.
Usually,,1;
threads,1;
each,1;
like,1;
or,1;
channel,1;
example,,1;
for,1;
another,1;
for,1;
threads,1;
on,1;
channel,1;
three,1;
gives,1;
operations,1;
(in,1;
threads,1;
aren’t,1;
execute,1;
another,1;
make
progress,1;
for,1;
task,,1;
like,1;
for,1;
threads,1;
threads,1;
more,1;
another,1;
starts,1;
platforms,,1;
new,1;
threads,1;
by,1;
threads,1;
on,1;
ultimately,1;
the
same,1;
require,1;
threads,1;
number,1;
want,1;
threads,1;
concurrency,1;
executing,1;
If,1;
like,1;
_-_-_
Asynchronous,1;
threads,,1;
executing,1;
time—but,1;
threads,1;
by,1;
or,1;
want,1;
while,1;
good,1;
thing—who,1;
want,1;
faster,1;
on,1;
more,1;
program,1;
more,1;
Mutex.,1;
may,1;
want,1;
types,1;
concurrent
program,1;
enable,1;
them.,1;
detail,1;
10.
Asynchronous,1;
synchronous,1;
alter-
native:,1;
asynchronous,1;
or,1;
nonblocking,1;
asynchronous,1;
may,1;
result,1;
straightaway,,1;
may,1;
instead,1;
result,1;
later,1;
gives,1;
until,1;
an,1;
Poll,,1;
8-1:,1;
or,1;
return,1;
functions,1;
an,1;
later,1;
chap-
ter,,1;
perform,1;
remember,1;
nonblocking,1;
functions,1;
allow,1;
perform,1;
example,,1;
want,1;
read,1;
an,1;
to
do,1;
loop,1;
until,1;
Poll::Ready.,1;
threads,1;
or,1;
loop,1;
here,1;
don’t,1;
want,1;
loop,1;
three,1;
times,1;
second,1;
minutes,1;
until,1;
while,1;
new,1;
That’s,1;
every,1;
library,1;
nonblocking,1;
every,1;
library,1;
different,1;
return,1;
unwieldy.,1;
polling,1;
Future
trait.,1;
later,1;
chapter).
trait,1;
Poll<Self::Output>;
}
Listing,1;
trait,1;
may,1;
produce,1;
languages,1;
promises—they,1;
When,1;
trait,1;
like,1;
like,1;
return,1;
fact,1;
least,1;
a
standardized,1;
pending,1;
values,,1;
don’t,1;
general,,1;
returned,1;
Poll::Ready.,1;
well,1;
safe,1;
returned,1;
implements,1;
To,1;
first,1;
tries,1;
forward,1;
channel,1;
rx,1;
output,1;
channel,1;
Receiver<T>,,1;
rx.next().await,1;
8-3:,1;
await
Asynchronous,1;
looks,1;
very,1;
synchronous,1;
We,1;
each,1;
loop,1;
until,1;
no,1;
more,1;
each,1;
corresponds,1;
synchronous,1;
block.,1;
instead,1;
by,1;
trait.,1;
Since,1;
each,1;
starts,1;
necessary,1;
state,1;
place
the,1;
result,1;
demonstrates.
enum,1;
Option<Sender<T>>),
WaitingForSend(SendFuture<T>,,1;
Option<Receiver<T>>),
}
impl<T>,1;
for,1;
Poll<Self::Output>,1;
{
match,1;
3
Forward::WaitingForReceive(recv,,1;
Poll::Ready((rx,,1;
v,1;
Try,1;
on,1;
more,1;
Poll::Ready(tx),1;
rx,1;
Try,1;
on,1;
{
Poll::Pending
}
}
}
}
}
Listing,1;
implementing,1;
future
You’ll,1;
rarely,1;
like,1;
gives
important,1;
insight,1;
hood,,1;
an,1;
fact,1;
return,1;
We,1;
so
that,1;
different,1;
on,1;
for,1;
ReceiveFuture,1;
(the,1;
polled,1;
for,1;
here,1;
for,1;
declare,1;
output,1;
because,1;
actually,1;
return,1;
no,1;
everything
from,1;
channel,1;
output,1;
more,1;
exam-
ple,,1;
Result,1;
errors,1;
receive(),1;
polling,1;
for,1;
completion,1;
for,1;
another,1;
by,1;
matching,1;
on,1;
3.,1;
first,1;
for,1;
ReceiveFuture,,1;
no,1;
return,1;
we
have,1;
by,1;
order,1;
so,,1;
because,1;
state,1;
an,1;
Option,,1;
with
Option::take,1;
anyway,1;
needed
to,1;
borrow,1;
checker,1;
on,1;
pending,1;
or,1;
actually,1;
necessary,1;
for,1;
correctness,1;
implementing,1;
for,1;
an
optimization.
We,1;
hand-wrote,1;
state,1;
number,1;
state,1;
like,1;
intermediate,1;
state,1;
types
of,1;
Sender::send,1;
return,1;
If,1;
instead,1;
returned,1;
we’d
have,1;
no,1;
types,1;
for,1;
receiver;,1;
returned,1;
return,1;
work,,1;
may,1;
noticed,1;
looks,1;
like,1;
an,1;
asynchronous,1;
of
Iterator.,1;
noticed,1;
library,1;
on,1;
trait,1;
for,1;
types,1;
asynchronous,1;
may,1;
such,1;
loop,1;
over,1;
directly!
Ultimately,,1;
hard,1;
hard,1;
hard,1;
handling,,1;
for,1;
example,,1;
there’s,1;
postfix
operator,,1;
more,1;
convenient,1;
for,1;
like,1;
such,1;
even,1;
like,1;
state,1;
Receiver<T>,,1;
rx.next().await,1;
don’t,1;
an,1;
why,1;
Rust
community,1;
an,1;
understand,1;
To,1;
first,1;
generators—the,1;
by,1;
compiler-
generated,1;
or,1;
yield,,1;
later,1;
Take,1;
forward,1;
func-
tion,1;
for,1;
example.,1;
channel,1;
more,1;
nonblocking,1;
channel,1;
clears,1;
want,1;
If,1;
forward,1;
no,1;
forward,1;
generator.
124
Chapter,1;
forward,1;
state,1;
It,1;
an,1;
by,1;
state,1;
A
method,1;
on,1;
(also,1;
allow,1;
yielding,
which,1;
effectively,1;
while,1;
state,1;
on,1;
When,1;
later,1;
want,1;
(the,1;
for,1;
state,1;
self
to,1;
thing,1;
8-6.
generator,1;
Receiver<T>,,1;
mut,1;
r,1;
r,1;
r,1;
mut,1;
r,1;
};
},1;
Poll::Ready(());,1;
async/await,1;
actually,1;
by,1;
handy,1;
number,1;
struct,1;
or,1;
an,1;
may,1;
seem,1;
magical
once,1;
every,1;
or,1;
return,1;
variables,1;
restored,1;
later,1;
compiler-
generated,1;
part,1;
variables,1;
read,1;
or,1;
read,1;
on,1;
Problem,1;
marvelous.
One,1;
forward,1;
async/await,1;
functions,1;
like,1;
8-4.
If,1;
for,1;
borrow,1;
checker,1;
no,1;
inside,1;
would
reject,1;
code.,1;
by,1;
convince
the,1;
borrow,1;
checker,1;
inspect,1;
compiler
turns,1;
state,1;
verify,1;
rx,1;
dropped,,1;
on,1;
returns.
THE,1;
state,1;
state,1;
point.,1;
If,1;
say,,1;
8KiB,1;
contains
only,1;
such,1;
nesting,1;
on,1;
code.,1;
may,1;
func-
tion,1;
structures,,1;
fair,1;
fact,,1;
gener-
ator-based,1;
by,1;
looking,1;
for,1;
or,1;
complex,1;
on,1;
When,1;
particularly,1;
you
can,1;
try,1;
state,1;
functions,1;
or,1;
you
can,1;
Box::pin),1;
by,1;
an,1;
bet,1;
on,1;
benchmarks,1;
challenge,1;
from
the,1;
clear,1;
what
happens,1;
reference,1;
reference,1;
rx,1;
message
is,1;
knows,1;
try,1;
the
generator,1;
When,1;
inside,1;
Receiver<T>,,1;
Future>
{
let,1;
mut,1;
polling,1;
forward,1;
forward,1;
If,1;
may,1;
produce,1;
returned,1;
instead,1;
Poll::Ready(None)),
those,1;
forwarded,1;
later,1;
by,1;
may,1;
sees,1;
here,1;
When,1;
forward,1;
generator,,1;
the
while,1;
loop,1;
number,1;
times,1;
or,1;
If,1;
returned,1;
reference,1;
forward,1;
Thus,,1;
rx,1;
no,1;
reside
at,1;
locations,1;
memory,,1;
no,1;
here,1;
case,1;
holds,1;
very,1;
construct,,1;
because,1;
you
wouldn’t,1;
point.,1;
for,1;
supporting,1;
trait.,1;
briefly,,1;
marker
trait,1;
implementing,1;
safely,1;
cover,1;
here,,1;
part,1;
simplification.,1;
trait,1;
Pin<&mut,1;
Poll<Self::Output>;
}
Listing,1;
trait,1;
on,1;
Pin<&mut,1;
behind,1;
want,1;
for,1;
structure.
But,1;
move?,1;
To,1;
works,,1;
key,1;
pointer:,1;
P,1;
mut,1;
mut,1;
for,1;
Target,1;
key,1;
here,,1;
over,1;
times,1;
holds,1;
That,1;
holds,1;
P,1;
or
Pin<Rc<MyType>>,1;
or,1;
Pin<&mut,1;
for,1;
sure,1;
once,1;
behind,1;
self-references,1;
section,,1;
P,1;
no,1;
actually,1;
type
indeed,1;
promises,1;
for,1;
example,,1;
on,1;
If,1;
constructor,1;
Pin<&mut,1;
Pin.,1;
no,1;
it!,1;
We,1;
the
same,1;
none,1;
may,1;
first,1;
constructor,1;
for,1;
traits,1;
example,,1;
implements,1;
get_unchecked_mut,1;
for,1;
get_unchecked_mut,1;
DerefMut,1;
for,1;
P,1;
Yet,1;
thing,1;
for,1;
moved,1;
Pin<&mut,1;
Deref,,1;
DerefMut,,1;
Drop,1;
behind,1;
get_unchecked_mut,1;
gives,1;
behind,1;
once,1;
or,1;
memory,,1;
If,1;
weren’t,1;
Pin<&mut,1;
Self>,1;
safe,1;
of
get_unchecked_mut,1;
on,1;
Pin<&mut,1;
Pin.,1;
If,1;
Pin<&mut,1;
on,1;
moved,1;
surprisingly,,1;
implements,1;
Deref<Target,1;
for,1;
for,1;
example,,1;
discuss
in,1;
good,1;
why,1;
an,1;
beyond,1;
If,1;
behind,1;
an,1;
Pin<&mut,1;
behind,1;
may,1;
unsafely,1;
even,1;
documentation,1;
while,1;
reading,1;
noticed,1;
and
safely,1;
changes,1;
behind,1;
Pin.,1;
because,1;
Therefore,,1;
invariants:,1;
placed,1;
getting,1;
reference,1;
unsafe
anyway,,1;
why,1;
That,1;
require,1;
instead,1;
get_unchecked_mut,1;
safe,1;
moved,1;
answer,1;
question,1;
neat,1;
safe,1;
want,1;
first,1;
types,1;
may,1;
(like
a,1;
self-references,1;
the
type,1;
guarantee,,1;
unfortunately,
with,1;
very,1;
with.,1;
because,1;
even,1;
whether,1;
been
moved,1;
or,1;
trait,1;
for,1;
safe,1;
That,1;
promises,1;
use
any,1;
may,1;
an,1;
by,1;
for,1;
types,1;
explicitly,1;
types,1;
types,1;
!Unpin.
For,1;
types,1;
Unpin,,1;
Deref,,1;
new(pointer:,1;
Self;
}
impl<P>,1;
DerefMut,1;
for,1;
DerefMut,,1;
{
fn,1;
safe,1;
for,1;
safe,1;
because,1;
moved,1;
Deref,,1;
DerefMut,,1;
Drop,1;
for,1;
reference,1;
once,1;
Unpin,,1;
moved,1;
even,1;
it
was,1;
pinned,,1;
satisfy,1;
those
requirements!
Similarly,,1;
get_unchecked_mut,1;
because,1;
Unpin,,1;
declared
that,1;
moved,1;
even,1;
pinned,,1;
require-
ment,1;
no,1;
for,1;
safe,1;
safe,1;
fact,,1;
even,1;
gives,1;
P,1;
8Ways,1;
new,1;
Unpin,,1;
new,1;
first,1;
If,1;
Unpin,,1;
easy—we,1;
If,1;
ways:,1;
by,1;
or,1;
been,1;
pinned,,1;
for,1;
traits,1;
on,1;
too.,1;
on,1;
Pin.,1;
behind,1;
Pin<Box<T>>.,1;
no,1;
follows,1;
Deref,,1;
Drop,1;
on,1;
topic,1;
implements,1;
for,1;
even,1;
is
not,1;
assertion,1;
an,1;
for,1;
an,1;
for,1;
safe,1;
even,1;
moved,1;
Pin.,1;
enable,1;
option,,1;
more,1;
involved,,1;
smidgen,1;
code.,1;
We,1;
We,1;
by,1;
shadowing,1;
or,1;
by,1;
may,1;
even,1;
{
($var:ident),1;
mut,1;
mut,1;
$var),1;
for,1;
macro
ensures,1;
on,1;
already.,1;
shadowing,1;
(which,1;
the
Pin,1;
­contract,1;
for,1;
scope):
let,1;
pin_mut!(foo);,1;
foo.poll(),1;
instance,1;
later,1;
violates,1;
contract.,1;
on,1;
rendering,1;
ends.
Pinning,1;
on,1;
noticed,1;
none,1;
asynchronous,1;
you.
Think,1;
r,1;
an,1;
simplification,1;
Pin<&mut,1;
Self>,1;
for,1;
desug-
aring,1;
actually,1;
more,1;
8-12.
1,1;
{
mut,1;
loop,1;
r,
Poll::Pending,1;
more,1;
neat,1;
valid,1;
result,1;
on,1;
Beyond,1;
That,1;
safe,1;
because,1;
for,1;
the
containing,1;
due,1;
polled,1;
for,1;
state,1;
Since,1;
corresponds,1;
(it,1;
so
that,1;
once,1;
no,1;
Thus,,1;
safe.
Going,1;
pretty,1;
side,,1;
another,1;
may,1;
been,1;
If,1;
later,1;
whether,1;
make
progress,1;
That,1;
loop,1;
on,1;
until
they’ve,1;
returned,1;
for,1;
more,1;
useful,1;
like,1;
your
web,1;
want,1;
useful,1;
It,1;
until,1;
another,1;
pass,,1;
condition,1;
It,1;
on,1;
on,1;
channel,”,1;
interrupt,”,1;
or,1;
even,1;
may,1;
may,1;
even,1;
events.
To,1;
Waker,1;
to
go,1;
sleep,,1;
Waker,1;
polls.,1;
gives,1;
for,1;
more,1;
lies!
trait,1;
Pin<&mut,1;
cx:,1;
Poll<Self::Output>;
}
Listing,1;
trait,1;
Context,1;
Waker.,1;
Context,,1;
a
Waker,1;
asynchronous,1;
for,1;
on,1;
Waker,1;
no,1;
defined
by,1;
Waker.,1;
Waker,1;
generic
over,1;
Or,,1;
more,1;
precisely,,1;
Waker,1;
Waker,1;
Waker,1;
functions,1;
involved,1;
aren’t,1;
for,1;
building
blocks,1;
It,1;
for,1;
well,1;
an,1;
Waker,1;
instance,1;
turned,1;
produce,1;
safe,1;
Waker,1;
Contract
So,1;
actually,1;
Waker.,1;
The
idea,1;
on,1;
by,1;
follow,1;
contract.,1;
At,1;
instead,1;
like,1;
or,1;
on,1;
no,1;
children.,1;
no,1;
instead,1;
may,1;
return,1;
why,1;
for,1;
wait,1;
channel,1;
wait,1;
for,1;
external,1;
TCP,1;
read).
Those,1;
wait,1;
for,1;
follow,1;
Waker,1;
on,1;
Waker,1;
wait,1;
for,1;
on,1;
an,1;
chan-
nel.,1;
It,1;
Waker,1;
inside,1;
part,1;
channel,1;
When,1;
injects,1;
by,1;
on,1;
Waker,1;
external,1;
more,1;
involved,,1;
for,1;
knows,1;
generating,1;
knows,1;
or,1;
library,1;
an,1;
completes
or,1;
such,1;
external,1;
entity.,1;
an,1;
like,1;
system
call,1;
for,1;
mecha-
nism,,1;
every,1;
time
an,1;
wait,1;
threads,1;
for,1;
behind,1;
scenes,1;
appropriate,1;
interaction,1;
on,1;
system,,1;
sources,1;
for,1;
When,1;
wait,1;
for,1;
an,1;
external,1;
executor’s,1;
state,1;
(which,1;
by,1;
alongside,1;
Waker.,1;
When,1;
no,1;
make
progress,,1;
gathers,1;
sources,1;
pending,1;
futures
are,1;
for,1;
system,,1;
return,1;
on,1;
new,1;
Linux,,1;
achieved,1;
pretty,1;
every,1;
system
provide,1;
When,1;
wake
on,1;
sources,1;
system
reported,1;
part,1;
an,1;
sources,1;
on,1;
no,1;
more,1;
useful,1;
It,1;
bundling,1;
more,1;
different,1;
When,1;
Waker,1;
state,1;
so
that,1;
actually,1;
this,,1;
such,1;
an,1;
running,,1;
an,1;
time,,1;
state,1;
wish,1;
generic
over,1;
example,,1;
instead,1;
or,1;
File,1;
library,1;
AsyncRead,1;
on,1;
like,1;
traits,1;
for,1;
diffi-
cult,1;
over,1;
example,,1;
while,1;
easily
adapted,1;
necessary),,1;
no,1;
traits,1;
for,1;
or,1;
for,1;
Is,1;
may,1;
seem,1;
example,,1;
for,1;
external,1;
seem,1;
for,1;
on,1;
Waker,1;
anyway!,1;
particular
future,1;
runnable.,1;
That,1;
sure,1;
sleeping,1;
more,1;
for,1;
polling,1;
each,1;
until,1;
polling,1;
later,1;
case,1;
messages
back,1;
on,1;
When,1;
other
becomes,1;
versa.,1;
to
sleep,,1;
more,1;
If,1;
an,1;
thousands,1;
shouldn’t,1;
because,1;
an,1;
If,1;
executing,1;
asynchronous,1;
very,1;
an,1;
asynchronous,1;
program,1;
form,1;
may,1;
number,1;
may,1;
interact,1;
each,1;
tree,1;
executor’s,1;
“run”,1;
on,1;
task,,1;
forward,1;
each,1;
future(s),1;
Waker,1;
for,1;
each,1;
so
that,1;
later,1;
That,1;
while,1;
for,1;
Waker,1;
methods.
When,1;
task,,1;
starts,1;
from
the,1;
how
136
Chapter,1;
Since,1;
knows,1;
fields,,1;
each,1;
edge,1;
choice,1;
case,1;
for,1;
first,1;
or,1;
for,1;
such,1;
choice,1;
It,1;
wasteful.,1;
Waker,1;
Context,1;
Waker,1;
on,1;
polled,1;
state,1;
on,1;
Waker.,1;
state,1;
synchronous,1;
asynchronous,1;
an,1;
executing,1;
If,1;
occupies,1;
for,1;
a
prolonged,1;
executing,1;
or,1;
loop,1;
for,1;
during,1;
Usually,,1;
actually,1;
threads,1;
steal,1;
busy,1;
threads,,1;
more,1;
solution.,1;
situation,1;
threads,1;
no,1;
until,1;
operations,1;
general,,1;
very,1;
executing,1;
or,1;
functions,1;
an,1;
asynchronous,1;
operations,1;
asynchronous,1;
operations,1;
or,1;
on,1;
threads,1;
like,1;
also
provide,1;
for,1;
asynchronous
code,1;
or,1;
for,1;
voluntarily,1;
yield,,1;
part,1;
solution.,1;
good,1;
rule,1;
no,1;
for,1;
more,1;
It,1;
asynchronous,1;
may,1;
by,1;
example.,1;
server
implementation,1;
TcpStream),1;
over,1;
server(socket:,1;
{
handle_client(stream).await?;
}
}
Listing,1;
connections,1;
sequentially
The,1;
server,1;
new,1;
connections,1;
new,1;
“run,1;
program,1;
on,1;
That,1;
return,1;
until,1;
server,1;
may,1;
never
(another,1;
every,1;
new,1;
8-14,1;
new,1;
Since,1;
no,1;
concurrency.,1;
server,1;
handle_client,1;
don’t,1;
loop,1;
until,1;
return,1;
on,1;
by,1;
loop,1;
server,1;
new,1;
connections,1;
server(socket:,1;
mut,1;
connections,1;
8This,1;
least,1;
connections,1;
very,1;
because,1;
busy-loops,
switching,1;
connections,1;
new,1;
each,1;
each,1;
time,,1;
It,1;
ultimately,1;
for,1;
server,1;
for,1;
connections,1;
an,1;
exclusive,1;
reference,1;
(poll,1;
each,1;
by,1;
on,1;
on,1;
on,1;
scenes.,1;
hold
&muts,1;
gives,1;
an,1;
server(socket:,1;
new,1;
represents,1;
for,1;
more,1;
connections
//,1;
concurrently,1;
more,1;
polled,1;
task,,1;
like,1;
continues,1;
concurrently,1;
on,1;
polled,1;
by
the,1;
If,1;
running,,1;
because,1;
no,1;
executor’s,1;
server,1;
example,,1;
server,1;
for,1;
Since,1;
executor
has,1;
returned,1;
Multi-threaded,1;
threads,1;
that
continue,1;
even,1;
user’s
code,,1;
this,,1;
behind,1;
scenes,1;
implements,1;
why,1;
necessary,1;
allow,1;
moment.,1;
most,1;
code.,1;
Take,1;
the
Rust,1;
promises,1;
isn’t,
and,1;
At,1;
and
likely,1;
read,1;
this,,1;
precise,1;
for,1;
code
are,1;
even,1;
beyond,1;
most,1;
code.
Your,1;
gives,1;
for,1;
may,1;
do
with,1;
for,1;
program,1;
cor-
rect.”,1;
example,,1;
valid,1;
or,1;
like,1;
head,1;
or,1;
power,1;
assumptions,1;
for,1;
may,1;
creep,1;
in.
Crucially,,1;
checking,,1;
beyond,1;
When,1;
allow,1;
operations,1;
per-
form,1;
operations,1;
because,1;
unsafe
allows,1;
Next,,1;
follow,1;
order,1;
safe,1;
code.,1;
safely.
The,1;
about
its,1;
different,1;
meanings.,1;
block.,1;
example,,1;
9-1,1;
even,1;
code.,1;
Here,,1;
that
there,1;
SomeType<T>,1;
safe,1;
second,1;
Here,,1;
even,1;
SomeType<T>,1;
as_ref(&self),1;
{
unsafe,1;
safe,1;
listings,1;
differ,1;
because,1;
contracts.,1;
decr,1;
To,1;
like,1;
Rc.,1;
decr,1;
decrements,1;
decrement,1;
may,1;
trigger,1;
If,1;
decr,1;
second-to-last,1;
Rc,1;
a
given,1;
reference,1;
count,1;
dropped—but
the,1;
program,1;
on,1;
dan-
gling,1;
program,1;
violates,1;
runtime.,1;
general,,1;
program,1;
triggers,1;
outcome,1;
unpredictable.,1;
cover,1;
later,1;
chapter.
Conversely,,1;
no,1;
Rc,1;
reference,1;
count
using,1;
safe,1;
safe,1;
inside,1;
for,1;
fact,1;
We,1;
safe,1;
to
an,1;
operation,,1;
unsafe
responsibly.
For,1;
every,1;
an,1;
That,1;
declare,1;
an,1;
any
unsafe,1;
or,1;
operations,1;
inside,1;
mistake,,1;
through
the,1;
RFC,1;
2585.,1;
RFC,1;
an,1;
performs,1;
operations,1;
an,1;
inside,1;
become,1;
hard,1;
every,1;
perform,1;
realizing,1;
it!,1;
example,,1;
decr,1;
*std::ptr::null(),1;
any
unsafe,1;
enable,1;
operations,1;
because,1;
indicates,1;
question,1;
hold.
Unsafe,1;
an,1;
for,1;
operations,1;
If,1;
want,1;
an,1;
X,
Y,,1;
on,1;
block.,1;
once,1;
sign,1;
allowed
to,1;
rather,,1;
enable,1;
an,1;
Technically,,1;
external,1;
variables,1;
don’t,1;
allow,1;
types,1;
another,1;
knows,1;
or,1;
even,1;
section,,1;
wrong,1;
for,1;
grown-up,1;
neat,1;
new,1;
most,1;
raw
pointer,1;
*mut,1;
more,1;
or,1;
don’t,1;
chapter.,1;
types,1;
mostly,1;
because,1;
reference,1;
an,1;
block.,1;
want,1;
You’ll,1;
useful,1;
such,1;
reading,1;
or,1;
on,1;
&*ptr,1;
may,1;
reference,,1;
pointer,,1;
*mut,1;
want,1;
*mut,1;
reference,1;
ptr,1;
may,1;
wondering,1;
*mut,1;
std::ptr::NonNull<T>.,1;
specification,1;
practical,1;
*mut,1;
*mut,1;
(see,1;
“Lifetime,1;
1),
whereas,1;
covariant.,1;
and
NonNull<T>,1;
differ,1;
types,1;
whether,1;
or,1;
If,1;
It,1;
optimization,1;
niche
optimization:,1;
knows,1;
types,1;
like,1;
Option<NonNull<T>>,1;
case,1;
by,1;
If,1;
*mut,1;
T.
Unrepresentable,1;
liveness,1;
system,,1;
such,1;
self-referential
struct,1;
like,1;
valid,1;
for,1;
may,1;
even,1;
forever,,1;
even,1;
Take,1;
an,1;
here,1;
make
up,1;
alongside,1;
{
name:,1;
str,
age:,1;
failing,,1;
reference,1;
inside,1;
Person,1;
no,1;
reference,1;
or,1;
like,1;
(which,1;
exist),,1;
because,1;
reference,1;
no,1;
problem
because,1;
don’t,1;
have
to,1;
sure,1;
pointer,,1;
on,1;
&*ptr,1;
instead,1;
unsafely,1;
appropriate,1;
times,1;
valid.
A,1;
like,1;
for,1;
runtime
when,1;
no,1;
valid,1;
reference,1;
away,,1;
more,1;
like,1;
a
Weak,1;
an,1;
even,1;
arbitrary,1;
like,1;
you
can,1;
by,1;
most,1;
structures,,1;
like,1;
an,1;
for,1;
each,1;
read,1;
want,1;
to
learn,1;
even,1;
reference,1;
for,1;
this,,1;
illegal,1;
pointer
point,1;
beyond,1;
triggers,1;
arbitrary,1;
compiler
could,1;
If,1;
read,1;
because,1;
like,1;
reference,,1;
or,1;
for,1;
key,1;
library,1;
types,1;
to
turn,1;
such,1;
example,,1;
[]::len.,1;
reconstruct,1;
by,1;
return,1;
underlying,1;
thing.
Playing,1;
Fast,1;
want,1;
because,1;
because,1;
(very,1;
so.
The,1;
first,1;
by,1;
most,1;
for,1;
play,1;
reference,,1;
assert,1;
raw
pointer,1;
fact,1;
reference,1;
kind,1;
particularly,1;
handy,1;
or,1;
*mut,1;
std::ffi::c_void,,1;
func-
tion,1;
void,1;
Similarly,,1;
void,1;
type.
Pointer,1;
useful,1;
want,1;
sequence
of,1;
like,1;
characters,,1;
and
arrays,,1;
or,1;
#[repr(C)],1;
such,1;
types,1;
serialization.,1;
want,1;
try,1;
for,1;
Functions
Arguably,1;
most,1;
to
call,1;
Deeper,1;
most,1;
functions,1;
because,1;
operate,1;
on,1;
interact,1;
no,1;
an,1;
enable,
as,1;
interact,1;
with.,1;
general,,1;
three,1;
interact,1;
declare,1;
functions,1;
variables,1;
(which,1;
When,1;
declare,1;
such,1;
by,1;
external,1;
program,1;
such,1;
library,1;
Since,1;
inherently,1;
If,1;
bets,1;
memory,1;
contents,1;
clobber,1;
Code
147references,1;
Similarly,,1;
by,1;
external,1;
time,,1;
filled,1;
don’t,1;
an,1;
for,1;
Pass,1;
on,1;
operations,1;
safe,1;
by,1;
introducing,1;
example,,1;
an,1;
try,1;
an,1;
beyond,1;
slice.,1;
But,
given,1;
safe,1;
includes,1;
on,1;
or,1;
return,1;
an,1;
Option,1;
That,1;
no,1;
cause
undefined,1;
even,1;
an,1;
beyond,1;
key,1;
letting,1;
key,1;
wrong,1;
hash.
However,,1;
may,1;
their
tightest,1;
To,1;
knows,1;
struc-
tures,1;
Such,1;
to
indicate,1;
safe,1;
for,1;
rarely,1;
optimize.
Custom,1;
on,1;
That,1;
on,1;
beyond,1;
by,1;
or,1;
Since,1;
functions,1;
hard,1;
good,1;
unsafe
functions.,1;
functions,1;
may,1;
want,1;
valid,1;
for,1;
may,1;
example,,1;
pointer,,1;
for,1;
number,1;
3
(normally,1;
or,1;
handy,1;
construct-
ing,1;
by,1;
or,1;
dealing,1;
or,1;
valid,1;
by,1;
filled,1;
holds,1;
valid,1;
for,1;
Or,,1;
outer,1;
It,1;
implements,1;
safe,1;
(separately,1;
from
the,1;
Drop,1;
ManuallyDrop.,1;
That,1;
leaves,1;
explicitly,1;
such
as,1;
Drop,1;
trait.,1;
dropped,,1;
no,1;
safe,1;
try,1;
why,1;
destructor,1;
because,1;
tries,1;
pointer,,1;
for,1;
time!,1;
particularly,1;
useful,1;
memory,,1;
such,1;
an,1;
arena,1;
surrounding,1;
Waker,1;
a
data,1;
holds,1;
Waker,1;
been,1;
such,1;
safe,1;
(through
Waker::wake,1;
fact,1;
valid,1;
follow,1;
the
documentation,1;
holds,1;
functions,1;
surrounding,1;
actually,1;
produce,1;
code.
The,1;
for,1;
program,1;
on,1;
such,1;
branches,1;
the
line,1;
an,1;
may,1;
cause,1;
program,1;
believed,1;
ptr,1;
holds,1;
number,1;
functions,1;
odd
pointers—those,1;
assumptions,1;
first,1;
functions,1;
even,1;
if
that,1;
T’s,1;
(see,1;
on,1;
array,1;
or,1;
packed,1;
second,1;
functions,1;
operate,1;
on,1;
don’t,1;
functions,1;
(they,1;
register,,1;
for,1;
example,,1;
even,1;
twice,1;
handy,1;
aren’t,1;
further,1;
because,1;
an,1;
on,1;
love,1;
the
provided,1;
That,1;
fact,1;
for,1;
an,1;
reference,1;
say,,1;
return,1;
well,1;
rendering,1;
or,1;
dropped,1;
That’s,1;
in—it,1;
sign,1;
no,1;
cause,1;
undefined
behavior,1;
documentation,1;
for,1;
case,1;
for,1;
method.
150
Chapter,1;
9Implementing,1;
traits,1;
aren’t,1;
on,1;
correctness,1;
by,1;
example,,1;
trait,1;
for,1;
traits,1;
least,1;
specified,1;
documentation,1;
for,1;
trait.,1;
Thus,,1;
cover,1;
traits,1;
here,1;
common
examples,1;
library,1;
traits,1;
safe,1;
or,1;
more,1;
traits,1;
for,1;
for,1;
most,1;
types,1;
for,1;
by,1;
case,1;
auto-traits,,1;
members,1;
question,1;
Send
or,1;
occurs,1;
due,1;
At,1;
first,1;
no,1;
may,1;
raw
pointer,1;
or,1;
may,1;
safe,1;
weak—after,1;
why,1;
types,1;
themselves,,1;
even,1;
not
realize,1;
developer,1;
unsafely,1;
those
types,1;
or,1;
inadvertently
introduce,1;
types,1;
an,1;
explicitly,1;
sign,1;
followed,1;
mistake,1;
forget,1;
add
bounds,1;
impl<T:,1;
for,1;
trait,1;
memory,1;
allocator
in,1;
We,1;
topic,1;
gives,1;
for,1;
the
GlobalAlloc,1;
trait,1;
Layout),1;
*mut,1;
*mut,1;
9-4:,1;
trait,1;
trait,1;
for,1;
new,1;
for,1;
memory,,1;
Each,1;
number,1;
because,1;
on,1;
the
implementer,1;
methods.,1;
trait,1;
memory,1;
such,1;
If,1;
trait,1;
an,1;
unaligned,1;
trigger,1;
safe
code,1;
rule,1;
trigger,1;
memory,1;
safe,1;
cause,1;
Unpin
The,1;
trait,1;
surprise,1;
It,1;
may,1;
even,1;
surprise,1;
reading,1;
trait,1;
types,1;
aren’t,1;
moved,1;
they’ve,1;
been,1;
placed,1;
It,1;
safely,1;
why,1;
an,1;
trait.,1;
for,1;
safely,1;
or,1;
type;,1;
form,1;
or,1;
Pin::get_unchecked_mut.,1;
safe,1;
for,1;
Drop,1;
trait!
When,1;
Drop,1;
for,1;
even,1;
for,1;
covered,1;
by,1;
which
must,1;
such,1;
an,1;
first,1;
place.
When,1;
traits,1;
wild,1;
follow,1;
trait,1;
safe,1;
trait,1;
memory,1;
trait,1;
trait,1;
good,1;
Rc,1;
9Send,,1;
operations,1;
memory,1;
an,1;
threads,1;
try,1;
reference,1;
trait,1;
good,1;
counterexample.,1;
triggers,1;
memory,1;
no,1;
safe,1;
trigger,1;
memory,1;
due,1;
an,1;
trait,1;
trait,1;
most,1;
RFC,1;
on,1;
trait,1;
safe,1;
later,1;
on,1;
because,1;
like,1;
an,1;
incorrect,1;
trait,1;
cause,1;
good,1;
memory,1;
trigger,1;
errors,1;
example,,1;
traits,1;
even,1;
faced,1;
say,,1;
returned,1;
different,1;
each,1;
too—there,1;
unsafe
code,1;
such,1;
for,1;
an,1;
dereferenced,1;
dif-
ferent,1;
each,1;
Such,1;
on,1;
a
contract,1;
or,1;
actually,1;
claimed,1;
rather,,1;
claim!
NOTE
An,1;
implication,1;
traits,1;
like,1;
safe,1;
unsafe
code,1;
on,1;
safe,1;
correctness.,1;
only
to,1;
traits,,1;
Responsibility
So,1;
do
with,1;
code.,1;
say,,1;
knows,1;
valid,1;
reference,1;
time,,1;
subject,1;
safe,1;
raises,1;
question,1;
safe,1;
even,1;
first
place.,1;
When,1;
safe,1;
When,1;
safe,1;
different,1;
section,,1;
wielding,1;
power,1;
code.
The,1;
for,1;
safe,1;
At,1;
hard,1;
dos,1;
but
many,1;
or,1;
settled,,1;
sure,1;
If,1;
double-check
the,1;
reference,1;
declare,1;
by,1;
talk-
ing,1;
threads,1;
an,1;
or,1;
ultimately,1;
safe,1;
three,1;
ways:,1;
or,1;
first,1;
sane,1;
on,1;
sane,1;
here,1;
very,1;
new,1;
smarter,1;
along,,1;
or,1;
cause,1;
another,1;
code
may,1;
no,1;
sane,1;
over,1;
by,1;
on,1;
dif-
ferent,1;
platform,1;
or,1;
program,1;
differently!,1;
why,1;
even,1;
fine.,1;
like,1;
second,1;
roulette
just,1;
because,1;
errors,1;
If,1;
pointer,,1;
for,1;
example,,1;
program,1;
(in,1;
an,1;
may,1;
least,1;
wrong.,1;
errors,1;
manifest,1;
output,,1;
or,1;
don’t,1;
program,1;
program,1;
state,1;
silently,1;
or,1;
memory,1;
could
be,1;
exposed,1;
external,1;
cause,1;
ongo-
ing,1;
or,1;
challenge,1;
defined—the,1;
eliminate,1;
or,1;
even,1;
miscompile,1;
code.,1;
program,1;
on
what,1;
question,1;
undefined
behavior,1;
why,1;
no,1;
manifests.
W,1;
an,1;
unpredictable.,1;
That,1;
because,1;
or,1;
follows,1;
rarely,1;
clear,1;
until
runtime—it’s,1;
be.,1;
different,1;
version.
If,1;
aren’t,1;
underlying,1;
perform,1;
Nearly,1;
question,1;
want,1;
good,1;
illustration,1;
interact,1;
hard,1;
most,1;
understand,1;
unsafe
code,1;
dictates,1;
for,1;
for,1;
sounds,,1;
examples.
Reference,1;
very,1;
reference,1;
types,1;
Specifically,
references,1;
aligned,,1;
valid,1;
for,1;
addition,,1;
an
exclusive,1;
reference,1;
memory,1;
exclusive,1;
whether,1;
or,1;
reference,1;
even,1;
it!
Shared,1;
is
not,1;
during,1;
That,1;
over,1;
This
applies,1;
transitively,,1;
an,1;
*mut,1;
mutate,1;
*mut,1;
even,1;
rule,1;
by,1;
types,1;
like,1;
an,1;
result,1;
for,1;
for,1;
safely,1;
reference,1;
packed,1;
struct,1;
Since,1;
repr(Rust),1;
may,1;
aligned,,1;
creating,1;
an,1;
exist!,1;
for,1;
obtaining,1;
reference,1;
first,1;
creating,1;
reference,,1;
confused
with,1;
operands,1;
via,1;
RFC,1;
been,1;
writing.
Primitive,1;
Types
Some,1;
types,1;
on,1;
example,,1;
bool,1;
allowed
to,1;
or,1;
hold
a,1;
or,1;
above,1;
most,1;
types,1;
may,1;
seem,1;
stem
from,1;
enable,1;
good,1;
illustration,1;
types,1;
chapter.,1;
To,1;
recap,
the,1;
optimization,1;
example,,1;
reference,1;
an,1;
an,1;
byte.,1;
Booleans,1;
further.,1;
Since,1;
bool,1;
or,1;
an,1;
Option<Option<bool>>,1;
bears,1;
whether,1;
implements,1;
optimization,1;
or,1;
hitting,1;
later,1;
on,1;
memory,1;
like,1;
an,1;
exclusive,1;
reference,1;
memory,1;
explicitly,1;
or,1;
on
that,1;
example,,1;
Boxes,1;
undefined
behavior,1;
That’s,1;
case,1;
even,1;
because,1;
reference,1;
yet,,1;
valid,1;
for,1;
type.
The,1;
most,1;
want,1;
for,1;
read,1;
say,,1;
network.
Until,1;
been,1;
read,1;
memory,1;
valid,1;
read,1;
because,1;
memory,1;
for,1;
values
that,1;
aren’t,1;
(it,1;
knows,1;
no,1;
assumptions,1;
Box<T>,1;
bool,1;
or,1;
safe,1;
by,1;
memory,1;
inside,1;
very,1;
useful,1;
tool,1;
may,1;
an,1;
for,1;
three,1;
contents,1;
or,1;
once,1;
valid,1;
new,1;
holds,1;
reading,1;
reading,1;
finally,,1;
contents,1;
assertion,1;
backing,1;
memory,1;
valid,1;
9-5,1;
an,1;
safely
initialize,1;
array,1;
explicitly,1;
Option<u8>),1;
mut,1;
buf,1;
mut,1;
g),1;
std::iter::from_fn(gen).take(4096).enumerate(),1;
init:,1;
{
MaybeUninit::slice_assume_init_ref(&buf[..last])
};
//,1;
...,1;
init,1;
Using,1;
safely,1;
an,1;
buf,1;
[0;,1;
4096],1;
first,1;
before
executing,,1;
even,1;
noticeable,1;
on,1;
sufficiently,1;
Here,,1;
instead,1;
allow,1;
array
to,1;
on,1;
partially,1;
If,1;
causes,1;
an,1;
been,1;
any.,1;
backing,1;
memory,1;
holds,,1;
say,,1;
memory,1;
aspect,1;
operations,1;
safe,1;
prepared,1;
handle
panics.,1;
handler,1;
on,1;
most,1;
platforms,1;
program,1;
on,1;
instead,1;
unwind,1;
unwinding,1;
scope,,1;
func-
tion,,1;
enclosed,1;
until,1;
first,1;
for,1;
If,1;
don’t,1;
unwinding,1;
for,1;
example,,1;
i),1;
T::default();
}
}
}
}
Listing,1;
seemingly,1;
safe,1;
for,1;
vector,1;
T::default,1;
First,
fill_default,1;
(which,1;
At,1;
When,1;
vector,1;
indicates,1;
more,1;
Ts,1;
actually,1;
due,1;
example,,1;
T::default,1;
panicked,1;
on,1;
Ts,1;
actually,1;
uninitialized
memory!
The,1;
case,1;
We,1;
unwinding,1;
on,1;
correctness
of,1;
for,1;
problems,
you’ll,1;
want,1;
for,1;
may,1;
safe,1;
whether,1;
question,1;
over,1;
situation,1;
operator,1;
return,1;
If,1;
this,,1;
sure,1;
safe,1;
execute,1;
rarer,1;
for,1;
an,1;
different,1;
types,1;
memory,1;
even,1;
the
same,1;
whether,1;
safe,1;
different,1;
fact,,1;
even,1;
the
same,1;
example,,1;
Baz;
Unsafe,1;
Foo<Bar>;
type,1;
Type,1;
lack,1;
for,1;
repr(Rust),1;
code—just,1;
because,1;
types,1;
interchangeable,,1;
types,1;
different,1;
At,1;
for,1;
types,1;
for,1;
now,,1;
given,,1;
with.
Even,1;
types,1;
types,1;
example,,1;
while,1;
UnsafeCell<T>,,1;
window,1;
once,1;
for,1;
example,,1;
an,1;
Option<T>,1;
may,1;
invalid,1;
for,1;
Option),,1;
MaybeUninit<T>
can,1;
optimization,1;
an,1;
for,1;
Option,1;
discriminator.
It’s,1;
cause,1;
once,1;
types,1;
an,1;
example,,1;
Wrapper<PhantomData<u8>>,1;
Wrapper<PhantomData<i8>>,1;
different,1;
even,1;
types,1;
{
item:,1;
for,1;
PhantomData<u8>,1;
Sneaky,1;
for,1;
Sneaky,1;
9-8:,1;
Wrapper,1;
types,1;
hard,1;
right.
All,1;
types,1;
for,1;
example,,1;
types,1;
involved,1;
their
trait,1;
or,1;
types,1;
gives,1;
very,1;
Drop,1;
borrow,1;
checker,1;
tool,1;
for,1;
ensuring
the,1;
compile,1;
time,,1;
gives,1;
borrow,1;
checker,1;
beyond,1;
detail,1;
code.,1;
To,1;
understand,1;
checking,,1;
Rust
compiler’s,1;
for,1;
second,1;
reference,1;
mut,1;
x,1;
x);
x,1;
dictates,1;
whether,1;
Foo,,1;
whether,1;
compile,1;
or,1;
When,1;
x,1;
dropped,1;
We,1;
borrow,1;
necessary,1;
x,1;
x,1;
reference,1;
x,1;
Since,1;
exclusive,1;
reference,1;
for,1;
allow,1;
allow,1;
Drop,1;
may,1;
reference,1;
warmed,1;
reference,1;
even,1;
mut,1;
mut,1;
x,1;
x);
x,1;
dictate,1;
whether,1;
say
whether,1;
compile,1;
or,1;
implements,1;
Drop,1;
most,1;
scope,,1;
or,1;
dropped,,1;
Foo,,1;
reference,1;
may,1;
instead,1;
PhantomData<Foo<'a>>
or,1;
case,1;
actually,1;
dropped,,1;
reference,1;
x,1;
kind,1;
want,1;
because,1;
even,1;
detect,1;
logic,1;
Normally,1;
affect,1;
exception:,1;
implementing,1;
Box<T>,1;
x,1;
Drop,1;
memory,,1;
beyond,1;
for,1;
x,1;
dropped!
To,1;
types,1;
like,1;
this,,1;
an,1;
partially,1;
temporary
escape,1;
hatch,1;
until,1;
adds,1;
for,1;
types,1;
Drop,1;
or,1;
beyond,1;
by,1;
Drop,1;
for,1;
..
This,1;
hatch,1;
declare,1;
param-
eter,1;
like,1;
new,1;
Box<T>,1;
holds,1;
*mut,1;
Box<T>,1;
thus
that,1;
don’t,1;
Box<T>,1;
dropped,,1;
Box<T>,1;
live,1;
until,1;
dropped,1;
shortened,1;
x,1;
true,
since,1;
T::drop,,1;
may,1;
access,,1;
say,,1;
reference,1;
even,1;
Box<T>,1;
on,1;
like.
struct,1;
Box<T>,1;
{
t:,1;
NonNull<T>,,1;
*mut,1;
for,1;
for,1;
Box<T>,1;
...,1;
for,1;
maximally,1;
check
This,1;
interaction,1;
miss,,1;
attribute.,1;
serve
as,1;
Drop,1;
wild,1;
future,
you’ll,1;
for,1;
consideration,1;
for,1;
Drop,1;
sure,1;
live,1;
example,,1;
delayed,1;
later,1;
or,1;
trigger,1;
mostly,1;
behind,1;
may,1;
more,1;
unsafe
code,1;
safe,1;
even,1;
key,1;
sure,1;
safe,1;
instead,1;
techniques,1;
more,1;
confident,1;
correctness,1;
unsafe
code,1;
there’s,1;
no,1;
whether
the,1;
safe,1;
interaction,1;
kind,1;
good,1;
example
of,1;
may,1;
for,1;
produce,1;
reference,1;
may,1;
safe,1;
time,,1;
safe,1;
of
Unpin,1;
for,1;
no,1;
nowhere,1;
near,1;
new,1;
boundary,1;
of
all,1;
relates,1;
block.,1;
boundary,1;
here,1;
an,1;
part,1;
bits.”,1;
example,,1;
declare,1;
public,1;
or,1;
the
same,1;
on,1;
traits,1;
for,1;
on,1;
implementing,1;
traits,1;
remember,1;
an,1;
for,1;
If,,1;
on,1;
crate,,1;
acciden-
tally,1;
an,1;
If,1;
such,1;
rule,1;
an,1;
on,1;
over,1;
fields,,1;
(including,1;
safe,1;
block.,1;
Here,,1;
too,,1;
boundary,1;
reasoning,
it’s,1;
encapsulate,1;
form,1;
an,1;
That,1;
for,1;
yet,,1;
open,1;
by,1;
encapsulate,1;
complex,1;
safe,1;
interface,,1;
When,1;
try,1;
public,1;
very,1;
small,1;
number,1;
on,1;
don’t,1;
code.,1;
Removing,1;
year,1;
now,,1;
want,1;
chances
are,1;
don’t,1;
even,1;
good,1;
an,1;
docu-
ment,1;
safe,1;
Here,,1;
completeness,1;
If,1;
or,1;
type—then,1;
every,1;
documentation,1;
too.,1;
read,1;
documentation,1;
an,1;
on-demand,1;
read,1;
may,1;
obvious,1;
blocks—think,1;
question,1;
slice::get_unchecked,1;
fact,1;
may,1;
long.,1;
That’s,1;
good,1;
times,1;
by,1;
for,1;
realizing,1;
actually,1;
don’t,1;
uphold
a,1;
key,1;
You’ll,1;
year,1;
on.
164
Chapter,1;
9Before,1;
read,1;
miss,,1;
them.,1;
covered,1;
more,1;
should
also,1;
reference,1;
chances,1;
even,1;
about
whether,1;
reference,1;
an,1;
pro-
duction,,1;
first,1;
intermediate,1;
Miri,1;
compile,1;
instead
interprets,1;
Miri,1;
more,1;
program,1;
obviously,1;
bad,,1;
like,1;
read,1;
Miri,1;
very,1;
for,1;
because,1;
Miri,1;
execute,1;
Miri,1;
Miri,1;
execute,1;
suite.,1;
It,1;
actually,1;
runs,,1;
won’t
catch,1;
Miri,1;
an,1;
for,1;
detect,1;
runtime.,1;
fidelity,1;
vary,1;
loved,1;
tool,1;
Google’s,1;
number,1;
memory,1;
such,1;
memory,1;
code.,1;
operate,1;
on,1;
order,1;
actually,1;
runs,,1;
key,1;
effectively,1;
for,1;
every,1;
regression,1;
tests,1;
over,1;
suite
improves,,1;
by,1;
new,1;
tests,1;
points,1;
don’t,1;
forget,1;
generously,1;
unsafe
code.,1;
triggering,1;
assumptions,1;
like,1;
size
Unsafe,1;
usize,1;
on,1;
for,1;
If,1;
concerned,1;
macros,1;
execute,1;
touted
as,1;
why,1;
charade.,1;
concern,1;
incorrect,1;
for,1;
argue,1;
very,1;
least,1;
on,1;
may,1;
program,1;
successful,1;
safe,1;
languages,1;
for,1;
form,1;
or,1;
assembly.,1;
on,1;
correctness,1;
code,
the,1;
languages,1;
on,1;
correctness,1;
different,1;
safe,1;
unsafe
code,,1;
errors,1;
due,1;
two,,1;
or,1;
due,1;
other.,1;
correctness,1;
interaction,1;
exemplified,1;
by,1;
like,1;
continues,1;
borrow,1;
checker,1;
for,1;
explicitly,1;
aren’t,1;
present,1;
like,1;
by,1;
concurrency,1;
on,1;
new,1;
direction!
166
Chapter,1;
910
CONCURRENCY,1;
L,1;
L,1;
L,1;
implement
support,1;
for,1;
concurrent,1;
to
use,1;
concurrency,1;
or,1;
high-performance,1;
suf-
ficient,1;
underlying,1;
for,1;
may,1;
three,1;
flavors:,1;
concurrency,1;
multicore,1;
concurrent,1;
program,1;
different,1;
even,1;
more,1;
preemption,1;
represents,1;
aspect,1;
multi-
threading.,1;
safe,1;
for,1;
by,1;
more,1;
or,1;
program,1;
threads,1;
only
one,1;
parallel),,1;
may,1;
types,1;
techniques,1;
whether,1;
threads,1;
actually,1;
execute,1;
more,1;
or,1;
chapter.,1;
When,1;
particularly,1;
neat,1;
type-based,1;
library
feature,1;
Since,1;
propagate,1;
program,1;
most,1;
traits,,1;
and
channels.,1;
reiterate,1;
here,,1;
concurrency,1;
also
explore,1;
concurrency,1;
interact,1;
diving,1;
operations,1;
concurrent,1;
code.
The,1;
good,1;
for,1;
concurrent,1;
concurrency,1;
why,1;
concurrency,1;
challenging,1;
first,1;
That,1;
for,1;
concurrent,1;
code?
Correctness
The,1;
concurrency,1;
access—to,1;
If,1;
want,1;
for,1;
reading,1;
an,1;
or,1;
once,1;
arise,,1;
form,1;
data
race,1;
occurs,1;
state,1;
while,1;
second,1;
read,1;
or,1;
additional
168
Chapter,1;
second,1;
may,1;
read,1;
partially,1;
state,
clobber,1;
first,1;
or,1;
first,1;
general,,1;
behavior.
Data,1;
part,1;
concurrent,1;
race
condition,1;
occurs,1;
outcomes,1;
sequence
of,1;
on,1;
the
system.,1;
threads,1;
executing,1;
or,1;
Race,1;
conditions,,1;
inherently,1;
for,1;
particularly,1;
chapter.
Performance
Often,,1;
concurrency,1;
programs,1;
Or,,1;
more,1;
enable,1;
perform,1;
more,1;
operations,1;
second,1;
by,1;
more,1;
hardware,1;
on,1;
by,1;
while,1;
another,1;
waiting,
or,1;
by,1;
threads,1;
serially,1;
on,1;
core.,1;
devel-
opers,1;
kind,1;
program,1;
program,1;
more,1;
such,1;
program,1;
completes,1;
unit
of,1;
concurrent,1;
programs,1;
achieve,1;
such,1;
scaling
is,1;
more,1;
increases,1;
two,,1;
more,1;
programs,1;
even,1;
more,1;
because,1;
threads
are,1;
for,1;
resource.
It,1;
more,1;
helps,1;
harder.,1;
If,1;
involved,1;
particularly,1;
standing,1;
discussing,1;
kind,1;
number,1;
are
mutual,1;
exhaustion,,1;
concurrent,1;
execute,1;
time,,1;
no,1;
or,1;
explicitly,1;
enforces,1;
critical,1;
program,1;
example,,1;
over,1;
an,1;
effectively,1;
implements,1;
execute,1;
exclusion,1;
critical,1;
example,,1;
for,1;
memory,1;
exclusion,1;
for,1;
memory,1;
Similarly,,1;
operations,1;
may,1;
seem,1;
such,1;
creating,1;
different,1;
names
in,1;
directory,,1;
may,1;
inside,1;
concurrent,1;
for,1;
memory,1;
allocator!
Mutual,1;
exclusion,1;
most,1;
obvious,1;
portion,1;
program,1;
number,1;
achieve,1;
limited,1;
by,1;
exclusive,,1;
restrict,1;
theoretically,1;
minded,,1;
on,1;
result,1;
exclusive,1;
sections,1;
computed,1;
even,1;
achieve,1;
concurrency,1;
interact,1;
may,1;
on,1;
TCP,1;
memory,1;
limited,1;
for,1;
concurrency.,1;
no,1;
for,1;
apart,1;
for,1;
such,1;
require,1;
even,1;
more,1;
topic,1;
chapter.,1;
rarely,1;
more
something,1;
10False,1;
Sharing
False,1;
occurs,1;
operations,1;
shouldn’t,1;
one
another,1;
This
usually,1;
because,1;
operations,1;
on,1;
even,1;
resource.
The,1;
operations,1;
operations,1;
execute,1;
serially,1;
instead,1;
two,,1;
for,1;
each
of,1;
operations,1;
like,1;
because,1;
over
all,1;
order,1;
different,1;
threads,1;
to
avoid,1;
operations,1;
different,1;
“dining,1;
philosophers,1;
problem,”,1;
for,1;
may,1;
by,1;
underlying,1;
algo-
rithm,,1;
right.,1;
solve,,1;
good,1;
more,1;
occurs,1;
on,1;
we
discussed,1;
on,1;
memory,1;
amortize,1;
memory,1;
on,1;
most,1;
every,1;
memory,1;
reading,1;
or,1;
play,1;
different,1;
on,1;
the
same,1;
execute,1;
even,1;
disjoint.
This,1;
seem,1;
matter,,1;
kind,1;
an,1;
an,1;
array,1;
integer,1;
threads,1;
on,1;
for,1;
every,1;
If,1;
operations,1;
most,1;
may,1;
counters!
The,1;
avoiding,1;
so
that,1;
That,1;
on,1;
different,1;
lines.,1;
inflates,1;
your
data,1;
structures,,1;
benchmarks,1;
a
problem.
Concurrency,1;
aspect,1;
concurrency,1;
introducing,1;
concurrency,1;
first,1;
good
at,1;
been,1;
for,1;
time,,1;
expensive,1;
locks,,1;
channels,,1;
or,1;
concurrent,1;
concurrency,1;
number,1;
is
why,1;
may,1;
surprise,1;
you.
If,1;
read,1;
Frank
McSherry’s,1;
(https://www
.frankmcsherry.org/assets/COST.pdf),,1;
particularly
egregious,1;
“costly,1;
three,1;
for,1;
concurrency,1;
programs,1;
memory,1;
every,1;
concurrency,1;
here,1;
on,1;
three,1;
Memory
Shared,1;
memory,1;
concurrency,1;
conceptually,,1;
very,1;
cooperate,1;
by,1;
on,1;
regions,1;
memory,1;
form,1;
state,1;
by,1;
or,1;
for,1;
concurrent,1;
threads,1;
may,1;
on,1;
such
as,1;
threads,1;
perform,1;
over,1;
may,1;
performing,1;
different,1;
require,1;
state,
such,1;
another,1;
memory,1;
choice,1;
struc-
tures,1;
significant,,1;
especially,1;
threads,1;
involved,1;
closely.,1;
beyond,1;
very,1;
reader/writer,1;
allow,1;
more,1;
concurrent
reads,1;
reader/writer,1;
concurrent,1;
aim,1;
for,1;
good,1;
say,,1;
concurrent,1;
general,,1;
memory,1;
want,1;
for,1;
aspects,1;
for,1;
memory,1;
concurrency,1;
good,1;
for,1;
state,1;
state,1;
and
another,1;
state,1;
g,,1;
memory,1;
concurrency,1;
If,1;
case,
the,1;
more,1;
designs.
NOTE
Some,1;
concurrent,1;
number,1;
may,1;
due,1;
mat-
ters,,1;
for,1;
pool,1;
model,,1;
threads,1;
execute,1;
for,1;
example,,1;
pool,1;
incoming,1;
for,1;
asynchronous,1;
pool,1;
execute,1;
an,1;
more
accurately,,1;
tasks).
The,1;
lines,1;
memory,1;
concurrency,1;
memory,1;
concurrency,1;
queue,1;
return,1;
example,,1;
paral-
lelism,1;
library,1;
perform,1;
over,1;
every,1;
scenes,1;
subranges,,1;
hands,1;
threads,1;
pool,1;
for,1;
on,1;
vector,1;
threads,,1;
threads,1;
supports,1;
stealing.
Work,1;
key,1;
most,1;
premise
is,1;
there’s,1;
no,1;
more,1;
steal,1;
been,1;
assigned,1;
different,1;
been,1;
the
same,1;
even,1;
every,1;
may,1;
more,1;
others.,1;
sit,1;
wait,1;
for,1;
threads,1;
threads,1;
overall,1;
supports,1;
threads,1;
steal,1;
a
Concurrency,1;
pool.,1;
If,1;
bet,1;
or,1;
least,1;
an,1;
scratch.
Worker,1;
good,1;
each,1;
performs,1;
performs,1;
on,1;
varies.,1;
every,1;
performs,1;
computation;,1;
perform
it,1;
on,1;
different,1;
underlying,1;
asynchro-
nous,1;
runtime,,1;
each,1;
Future::poll;,1;
on,1;
dif-
ferent,1;
futures.,1;
If,1;
threads,1;
your
thread,1;
different,1;
more,1;
pool,1;
memory,1;
hands,1;
threads,1;
connection.,1;
connections,1;
external,1;
new,1;
connection
is,1;
or,1;
block.,1;
When,1;
threads,1;
may,1;
for,1;
pool,1;
managing,1;
cycles.,1;
returned,1;
pool,1;
state,1;
by,1;
pool,1;
state,1;
whether,1;
on,1;
or,1;
on,1;
the
server,,1;
been,1;
concurrency,1;
model.,1;
pool,1;
threads,1;
that
share,1;
one
for,1;
each,1;
Each,1;
queue,1;
That,1;
state
might,1;
threads,1;
may,1;
interact,1;
wishes,1;
When,1;
performs,1;
and
responds,1;
result,1;
operation,,1;
exclusive,1;
no,1;
or,1;
beyond,1;
for,1;
key,1;
say,,1;
an,1;
for,1;
a
database,1;
for,1;
each
of,1;
perform,1;
proceed
to,1;
more,1;
on,1;
request,1;
server,1;
request,1;
for,1;
or,1;
even,1;
thousands,1;
request,1;
each,1;
contrary,,1;
most,1;
each,1;
require,1;
exclusive,1;
whether,1;
on,1;
own
or,1;
fact,,1;
very,1;
pool,1;
example,,1;
an,1;
multi-
threaded,1;
asynchronous,1;
an,1;
asynchronous,1;
each,1;
pool.,1;
Thus,,1;
may,1;
to
thread,1;
pool,1;
every,1;
maintains,1;
exclusive,1;
resource.
The,1;
concurrency,1;
well,1;
for,1;
operate,1;
independently,,1;
or,1;
no,1;
for,1;
concurrency,1;
each,1;
resource.,1;
example,
an,1;
an,1;
for,1;
each,1;
server,1;
an,1;
for,1;
each,1;
well,1;
significantly,1;
or,1;
may,1;
on,1;
each,1;
exclusive,1;
8,,1;
concurrency
without,1;
like,1;
joins,1;
some,,1;
or,1;
all
of,1;
no,1;
involved,,1;
require,1;
Even
spawning,1;
an,1;
require,1;
polling,1;
most,1;
want,1;
concurrency,1;
example,,1;
for,1;
each,1;
connections,1;
more,1;
host,1;
computer.,1;
That,1;
executor
to,1;
spread,1;
first,1;
question,1;
Send—if,1;
threads,1;
for,1;
no,1;
possible;,1;
second,1;
operate,1;
number,1;
on,1;
Thus,,1;
achieve,1;
parallelism
with,1;
explicitly,1;
want,1;
to
run,1;
because,1;
first,1;
requirement,,1;
func-
tion,1;
require,1;
Send.
A,1;
NCHRONIZ,1;
ATION,1;
for,1;
asynchronous,1;
asynchronous,1;
channels,,1;
reader/writer,1;
locks,,1;
We,1;
8,,1;
may,1;
is
inadvisable.
However,,1;
asynchronous,1;
slower
than,1;
synchronous,1;
because,1;
perform,1;
necessary,1;
may,1;
want,1;
to
use,1;
synchronous,1;
even,1;
asynchronous,1;
example,,1;
while,1;
for,1;
time,,1;
for,1;
for,1;
until,1;
actually,1;
cause,1;
problems.,1;
want,1;
or,1;
perform,1;
long-running,1;
operations,1;
while,1;
shouldn’t,1;
such,1;
sure,1;
synchronous,1;
performance
improvements.,1;
If,1;
by,1;
an,1;
asynchronous,1;
10Lower-Level,1;
library,1;
pro-
vides,1;
underlying,1;
with.,1;
types,1;
each,1;
over,1;
types,1;
communi-
cate,1;
Mutexes,,1;
channels,,1;
concurrent,1;
ultimately,1;
handy,1;
on,1;
cooperation,1;
threads,1;
like,1;
example,,1;
or,1;
types,1;
threads,1;
try,1;
load,,1;
compare_
exchange.,1;
section,,1;
useful,1;
memory,1;
operations,1;
memory,1;
variables,1;
or,1;
to”,1;
memory,1;
It’s
important,1;
understand,1;
machinery,,1;
least,1;
order,1;
concurrent,1;
memory,1;
program
reads,1;
or,1;
assigns,1;
new,1;
It,1;
on,1;
program,1;
or,1;
memory,1;
to
store,1;
intermediate,1;
computations.,1;
subject,1;
number,1;
on,1;
transformations,,1;
ultimately,1;
actually,1;
memory,1;
memory,1;
memory,1;
regis-
ter,,1;
operate,1;
on,1;
small,1;
memory,1;
or,1;
on,1;
If,1;
more,1;
or,1;
automatically,1;
or,1;
hardware,1;
program,1;
example,,1;
execute,1;
or,1;
even,1;
order,,1;
they
don’t,1;
on,1;
each,1;
other.,1;
each,1;
DRAM,,1;
memory,1;
may,1;
that
memory,1;
by,1;
most,1;
transform,1;
don’t,1;
affect,1;
program,
so,1;
execution,,1;
on,1;
Therefore,,1;
CPUs,1;
each,1;
may,1;
may,1;
operations,1;
on,1;
Similarly,,1;
different,1;
for,1;
memory,1;
form,1;
types,1;
types,1;
because,1;
an,1;
once,1;
stores,,1;
while,1;
by,1;
of
contrast,1;
example,,1;
new,1;
one
for,1;
each,1;
8-byte,1;
If,1;
perform,1;
borrow,1;
checker,1;
for,1;
read
the,1;
first,1;
an,1;
It,1;
reading,1;
the
new,1;
for,1;
first,1;
for,1;
second,1;
element,,1;
actually,1;
by,1;
thread.
The,1;
live,1;
module.,1;
Each,1;
supports,1;
multiple
variations,1;
for,1;
like,1;
whether,1;
differentiate
between,1;
an,1;
usize,1;
(which,1;
types,1;
for,1;
loading,1;
hold,,1;
more,1;
complex,1;
mapping,1;
example,,1;
on,1;
value.
Memory,1;
on,1;
types,1;
an,1;
Ordering,
which,1;
dictates,1;
memory,1;
different,1;
threads,,1;
an,1;
value
178
Chapter,1;
by,1;
memory,1;
each,1;
on,1;
why,1;
over,1;
necessary,1;
counterintuitive,,1;
because,1;
like,1;
read,1;
programs,1;
bottom,1;
by,1;
actually,1;
when
it,1;
or,1;
even,1;
on,1;
may,1;
other
threads,,1;
even,1;
later,1;
program,1;
order,1;
been,1;
like,1;
each,1;
memory,1;
sees,1;
different,1;
threads,,1;
memory,1;
locations,1;
If,1;
threads,1;
memory,1;
even,1;
first,1;
may,1;
for,1;
absent,1;
memory,1;
puts,1;
on,1;
valid,1;
example,,1;
T2,,1;
because,1;
on,1;
hard,1;
don’t,1;
mind-
bending,,1;
very,1;
precise,1;
very
intuitive,1;
We,1;
simplified,,1;
by,1;
instead,1;
on,1;
architecture.,1;
memory,1;
treelike,1;
storage,1;
leaves,1;
roots,1;
storage,1;
on,1;
memory,1;
caches,,1;
different,1;
on,1;
different,1;
When,1;
performs,1;
memory,1;
starts,1;
request,1;
for,1;
memory,1;
memory.
When,1;
performs,1;
load,,1;
request,1;
until,1;
there.,1;
lies
the,1;
aren’t,1;
until,1;
written
memory,1;
been,1;
CPUs,1;
execute,1;
instruc-
tions,1;
memory,1;
time,,1;
ordering,,1;
request,1;
precise,1;
CPUs,1;
memory,1;
by,1;
we,,1;
dictate,1;
on,1;
concurrent,1;
executions,1;
an,1;
different,1;
on,1;
mapping,1;
semantics,,1;
each,1;
section.
Relaxed,1;
Ordering
Relaxed,1;
beyond,1;
fact,1;
atomic.,1;
gives,1;
no,1;
different,1;
form,1;
10-2,1;
program,1;
threads,1;
variables,1;
r1,1;
r2,1;
threads,1;
t2,,1;
r2,1;
until,1;
assigns,1;
on,1;
reading,1;
X.,1;
relaxed,1;
memory,1;
ordering,,1;
involved.,1;
here,1;
r2,1;
3,,1;
output,1;
or,1;
3.,1;
That,1;
no,1;
on,1;
3.,1;
for,1;
program,1;
even,1;
sleep
by,1;
or,1;
on,1;
another,1;
core.,1;
first,1;
on,1;
read,1;
Therefore,,1;
10Y,1;
by,1;
r1,1;
X.,1;
by,1;
2.
The,1;
relaxed,1;
memory,1;
because,1;
on,1;
concurrent,1;
That,1;
relaxed
memory,1;
ordering,,1;
on,1;
respected,1;
atomics,1;
weren’t,1;
promises,1;
concurrent,1;
for,1;
execution,,1;
relaxed,1;
kind,1;
fine.,1;
example,,1;
fine.,1;
say,,1;
program,1;
r2,1;
figure
out,1;
security,1;
been,1;
believing,1;
don’t,1;
each,1;
like,1;
order,1;
program,1;
order,1;
or,1;
memory,1;
Ordering::Release,,1;
(acquire,1;
plus
release).,1;
At,1;
an,1;
another,1;
restrict,1;
on,1;
threads,1;
involved.,1;
because,1;
every,1;
on,1;
(the,1;
execute,1;
read,1;
or,1;
memory,1;
operations,1;
memory,1;
on
execution:
1.,1;
moved,1;
forward,1;
past,1;
moved,1;
Ordering::Acquire,1;
an,1;
memory,1;
10-2,1;
memory,1;
for,1;
r1,1;
r2,1;
10-2,1;
memory,1;
no,1;
for,1;
to
see,1;
r2,1;
To,1;
cause,1;
very,1;
first,1;
Ordering::Release,,1;
dictates,1;
so
we’re,1;
useful,1;
beyond,1;
example.,1;
exclusion,1;
want,1;
while,1;
holds,1;
exe-
cuted,1;
while,1;
actually,1;
holding,1;
enable,1;
performing,1;
an,1;
moved,1;
actually,1;
or,1;
released!
NOTE
On,1;
like,1;
no,1;
and
Ordering::Acquire,1;
over,1;
Ordering::Relaxed.,1;
the
case,,1;
program,1;
may,1;
speedups,1;
for,1;
memory,1;
hard,1;
very,1;
each,1;
sees,1;
results
consistent,1;
threads,1;
by,1;
Release.,1;
threads,1;
by,1;
other
threads,1;
That’s,1;
10which,1;
case,1;
produce,1;
unexpected,1;
outcome.
static,1;
Z:,1;
{
X.store(true,,1;
{
Y.store(true,,1;
(!X.load(Ordering::Acquire)),1;
{}
1,1;
(!Y.load(Ordering::Acquire)),1;
{}
2,1;
}
});
Listing,1;
threads,1;
for,1;
once,1;
so,,1;
adds,1;
to
Z.,1;
instead,1;
for,1;
become,1;
so,,1;
adds,1;
At,1;
question,1;
for,1;
Z,1;
threads,1;
terminate?,1;
Z,1;
Z,1;
sees,1;
evaluates,1;
Z,1;
sees,1;
if
t1,1;
evaluates,1;
To,1;
simplify,1;
for,1;
each,1;
completion,1;
once,1;
Z,1;
twice,1;
threads,1;
3,,1;
for,1;
Z,1;
Similarly,,1;
Z,1;
once,1;
threads,1;
order,1;
3,,1;
condition,1;
for,1;
Z,1;
want,1;
has
to,1;
Since,1;
until,1;
by,1;
runs,,1;
inability,1;
Z,1;
mostly,1;
for,1;
this
Concurrency,1;
aren’t,1;
limited,1;
no,1;
concerned,,1;
while,1;
as
having,1;
an,1;
even,1;
if
that,1;
outrageous,1;
loaded.,1;
property:,1;
sees,1;
sees,1;
by,1;
true—there,1;
none.
It,1;
sees,1;
by,1;
aren’t,1;
concerned,1;
with.,1;
sees,1;
sees,1;
by,1;
It,1;
sees,1;
by,1;
thread
and,1;
no,1;
expectation,1;
threads,1;
order,1;
every,1;
case,1;
for,1;
example.,1;
To,1;
achieve,1;
consistency.
Sequential,1;
threads,1;
part,1;
an,1;
each,1;
corre-
sponds,1;
least,1;
instruct,1;
for,1;
formalism,1;
threads,,1;
executions,1;
up.
If,1;
memory,1;
Z,1;
threads,1;
we
originally,1;
consistency,,1;
or,1;
different,1;
types,1;
10observed,1;
for,1;
an,1;
new,1;
want,1;
To,1;
why,1;
exclusion,1;
whether,1;
We,1;
To,1;
acquire,1;
for,1;
then
sets,1;
critical,1;
FnOnce()),1;
Wait,1;
for,1;
become,1;
fact,1;
lock.
LOCK.store(true,,1;
while,1;
holding,1;
lock.
LOCK.store(false,,1;
10-5:,1;
incorrect,1;
exclusion,1;
mostly,1;
works,,1;
threads,1;
while,1;
they
both,1;
enter,1;
critical,1;
section,,1;
during,1;
another,1;
read,1;
or,1;
It,1;
swaps,1;
behind,1;
notifies,1;
compare_exchange.
static,1;
FnOnce()),1;
Wait,1;
for,1;
become,1;
{
Ok(false),1;
|,1;
Err(false),1;
while,1;
holding,1;
lock.
LOCK.store(false,,1;
exclusion,1;
care
of,1;
first,1;
second,1;
respectively:,1;
read,1;
Result,1;
indicates,1;
successfully,1;
(Ok),1;
or,1;
useful,1;
with
an,1;
for,1;
like,1;
an,1;
try,1;
load.
NOTE
Note,1;
whether,1;
If,1;
on,1;
stores,,1;
argu-
ments.,1;
first,1;
dictates,1;
for,1;
case,1;
successfully,1;
dictates,1;
memory,1;
for,1;
load
if,1;
developer,1;
by,1;
on,1;
on,1;
inside,1;
such,1;
very,1;
been,1;
theoretically,1;
distributed,1;
many,,1;
aware,,1;
underlying,1;
form,1;
hardware,1;
10can,1;
become,1;
bottleneck:,1;
time,,1;
there’s,1;
portion,1;
fact,,1;
CPUs,1;
for,1;
(take,1;
grows,1;
more,1;
the
more,1;
CPUs,1;
documentation,1;
weak,1;
even,1;
atomic
variable’s,1;
case.
This,1;
seem,1;
an,1;
answer,1;
example,,1;
instead,1;
read,1;
by,1;
an,1;
been,1;
library,1;
implements,1;
on,1;
loop,1;
once,1;
conditional
store,1;
more,1;
Since,1;
loop,1;
instead,1;
on,1;
better
machine,1;
on,1;
on,1;
fetch_and,,1;
more,1;
operations,1;
operations,1;
meaningful,1;
order,1;
for,1;
powerful,,1;
threads,1;
want,1;
while,1;
threads,1;
involved,,1;
underlying,1;
while,1;
on,1;
operations,1;
commute,,1;
retry,1;
just
because,1;
another,1;
perform,1;
on,1;
perform,1;
on,1;
exclusive,1;
an,1;
number,1;
pool,1;
threads,1;
If,1;
threads,1;
time,,1;
counter,1;
perform,1;
read,1;
and
guarantee,1;
on,1;
returned,1;
by,1;
method.,1;
an,1;
Ordering::Relaxed),1;
adds,1;
no,1;
more,1;
compare_exchange
because,1;
don’t,1;
require,1;
threads,1;
retry,1;
for,1;
hardware,1;
even,1;
involved,1;
CPUs,1;
threads,1;
try,1;
on,1;
operations,1;
due,1;
significantly,1;
contended,1;
variables,1;
more,1;
each,1;
contended,,1;
fetch_update,1;
deceptively,1;
compare_exchange_weak,1;
more,1;
concurrent,1;
subsystem.,1;
such,1;
array,1;
want,1;
hands,1;
on,1;
techniques,1;
can
help,1;
concurrent,1;
Simple
It,1;
fact,1;
more
likely,1;
concurrent,1;
concurrent,1;
follow,1;
concurrency,1;
require,1;
intricate,1;
atomics,1;
or,1;
Begin
with,1;
threads,1;
or,1;
cooperate,1;
locks,,1;
about.,1;
by,1;
implementing,1;
by,1;
fast,1;
perform,1;
fast,1;
for,1;
why,1;
complex,1;
error-prone,1;
benchmarks,1;
out
exactly,1;
part,1;
Focus,1;
on,1;
try,1;
small,1;
concurrent,1;
or,1;
another,1;
If,1;
so,,1;
atomics,1;
until,1;
there’s,1;
Ordering::SeqCst
and,1;
iterate,1;
Tests
As,1;
insight,1;
code
may,1;
hide,,1;
tests,1;
good,1;
bugs.
Stress,1;
tests,1;
don’t,1;
perform,1;
complex,1;
threads,1;
operations,1;
example,,1;
concurrent,1;
map,,1;
test
might,1;
threads,1;
insert,1;
or,1;
threads,1;
read,1;
such,1;
threads,1;
Such,1;
for,1;
outcome,1;
or,1;
trigger,1;
operations,1;
that
buggy,1;
tests,1;
resemble,1;
fuzz,1;
tests,1;
instead,1;
gen­
erates,1;
memory,1;
like,1;
tests,1;
good,1;
manifest,1;
an,1;
assertion,1;
or,1;
kind,1;
concurrency,1;
or,1;
particularly,1;
challenge,1;
concurrent,1;
different,1;
threads,1;
interleave.,1;
memory,1;
for,1;
thread
to,1;
tests,1;
execute,1;
every,1;
over,1;
threads,1;
execute,1;
their
reads,1;
Parallelism)
189Model,1;
Checking,1;
Loom
Luckily,,1;
tool,1;
simplify,1;
form,1;
crate,,1;
Loom
here,,1;
by,1;
read,1;
an,1;
does.
Loom,1;
form,1;
model.,1;
tries,1;
intelligently,1;
by,1;
executing,1;
case,1;
To,1;
detect
and,1;
types,1;
for,1;
types,1;
library,1;
allow,1;
threads,1;
one
another;,1;
includes,1;
most,1;
types,1;
std::sync,1;
std::thread,1;
others.,1;
types,1;
tests.,1;
perform,1;
points,1;
each,1;
interaction,1;
Essentially,,1;
tree,1;
executions,1;
for,1;
each,1;
tries,1;
execute,1;
executions,1;
in
extremely,1;
executions,1;
hundred
years.,1;
great,1;
for,1;
kind,1;
operations,1;
or,1;
require,1;
threads,1;
code.,1;
may,1;
want,1;
documentation,1;
more,1;
manifest,1;
another,1;
strategic,1;
concurrent,1;
may,1;
even,1;
state,1;
concurrent
code,1;
Checking,1;
bet,1;
Google’s,1;
TSan.,1;
TSan
automatically,1;
by,1;
every,1;
memory,1;
runs,,1;
state,1;
memory,1;
operations,1;
synchronized
(lots,1;
indicates,1;
over,1;
over,1;
like,1;
Loom,,1;
adds,1;
constant-factor
overhead,1;
factor,1;
times,1;
small,1;
can
execute,1;
even,1;
most,1;
complex,1;
argu-
ment,1;
RUSTFLAGS),,1;
hopefully,1;
option.,1;
like
out-of-bounds,1;
memory,1;
memory,1;
memory,,1;
may,1;
want,1;
concurrent,1;
seem,1;
try,1;
them.,1;
concurrent,1;
the
additional,1;
changes,1;
cause,1;
no,1;
particularly,1;
cause,1;
disappearing,1;
concurrency,1;
by,1;
most,1;
techniques.
There,1;
why,1;
such,1;
an,1;
most,1;
speak-
ing,,1;
output
points),1;
time,,1;
especially,1;
program,1;
very,1;
perform,1;
may,1;
for,1;
read,1;
output,1;
raced,1;
with
an,1;
condition,1;
second,1;
why,1;
concurrent,1;
output,1;
by,1;
If,1;
holds,1;
output,1;
It,1;
output,1;
threads,1;
try,1;
given
line,1;
characters,1;
threads,1;
output
lock,,1;
another,1;
every,1;
is
involved,1;
broken,1;
due,1;
threads,,1;
or,1;
because,1;
two
threads,1;
general,,1;
like,1;
try,1;
That,1;
or,1;
or,1;
or,1;
per-thread,1;
hard,1;
critical,1;
an,1;
good,1;
handy,1;
I’m,1;
crate,,1;
good,1;
first,1;
covered,1;
correctness,1;
concurrent,1;
concurrency,1;
successful,1;
concurrent,1;
asynchronous,1;
concurrency,1;
explicitly,1;
asynchronous,1;
We,1;
different,1;
work,,1;
techniques,1;
for,1;
concurrent,1;
like,1;
code.,1;
lower,1;
levels,1;
allow,1;
G,1;
shocking,
I,1;
often,,1;
by,1;
such,1;
code.,1;
can
achieve,1;
first,1;
Rust
functions,1;
languages,1;
func-
tions,1;
variables,1;
types,1;
types,1;
flow,1;
want,1;
crossing,1;
boundary,1;
language
and,1;
inside,1;
If,1;
program,1;
shares
memory,1;
another,1;
program,1;
aren’t,1;
dynamically,1;
linked,1;
library,1;
program,1;
arise.
Crossing,1;
extern
FFI,1;
code.,1;
assigned,1;
addresses,1;
a
given,1;
allow,1;
memory,1;
for,1;
external,1;
conven-
tions,1;
functions,1;
such,1;
each,1;
filled,1;
or,1;
binary.,1;
functions,1;
may,1;
even
have,1;
for,1;
each,1;
don’t,1;
inter-
nally,1;
by,1;
or
static,1;
binary.,1;
knows,1;
memory,1;
each,1;
final
machine,1;
or,1;
read,1;
variable.
Since,1;
don’t,1;
for,1;
them—you,1;
may,1;
func-
tions,1;
different,1;
gener-
ate,1;
there’s,1;
no,1;
for,1;
want
to,1;
or,1;
such,1;
different,1;
different,1;
for,1;
produce,1;
for,1;
an,1;
external,1;
or,1;
such,1;
manner,1;
for,1;
elsewhere,1;
Otherwise,,1;
for,1;
or,1;
and
no,1;
fact,,1;
for,1;
it!
194
Chapter,1;
note,1;
times,1;
once.,1;
declaration,1;
for,1;
If,1;
no,1;
for,1;
declaration,1;
or,1;
on,1;
Compilation,1;
time!,1;
understand,1;
monolithic,1;
program,1;
programs,1;
each,1;
perform,1;
other.,1;
At,1;
three,1;
linking—handled,1;
different,1;
components.
The,1;
first,1;
by,1;
most,1;
checking,,1;
borrow,1;
checking,,1;
no,1;
That,1;
actually,1;
on,1;
a
given,1;
over,1;
once.,1;
example,,1;
compiles,1;
different,1;
them.,1;
It,1;
also
invoke,1;
tool,1;
for,1;
even,1;
compile,1;
separately!
Once,1;
for,1;
every,1;
wired,1;
files,,1;
by,1;
every,1;
reference,1;
memory,1;
another,1;
compile,1;
It,1;
each,1;
the
object,1;
may,1;
been,1;
may,1;
sure,1;
addresses,1;
for,1;
symbols.
A,1;
linked,1;
or,1;
each,1;
reference,1;
on,1;
each,1;
reference,1;
tries,1;
program,1;
more,1;
for,1;
for,1;
declare,1;
RS_DEBUG,1;
via,1;
We,1;
resolved,1;
time.
#[no_mangle]
pub,1;
RS_DEBUG:,1;
bool,1;
#[no_mangle],1;
RS_DEBUG,1;
another,1;
for,1;
example,,1;
another,1;
(non-FFI),1;
RS_DEBUG,1;
elsewhere,1;
part,1;
public,1;
on,1;
#[no_mangle].,1;
don’t,1;
for
RS_DEBUG,,1;
It,1;
surrounding,1;
declaration,1;
on,1;
Since
it’s,1;
don’t,1;
an,1;
for,1;
inside,1;
an,1;
variables,1;
aren’t,1;
by,1;
default,,1;
whether,1;
block.,1;
variables,1;
declare,1;
declare,1;
functions,1;
very,1;
non-Rust,1;
external
hello_foreign,1;
...,1;
}
extern,1;
{
fn,1;
hello_foreign(i:,1;
i32);
}
Listing,1;
section.
If,1;
like,1;
or,1;
explicitly,1;
specify,1;
library,1;
attribute.,1;
If,1;
an,1;
for,1;
example,,1;
an,1;
linked,1;
library,1;
external,1;
or,1;
by,1;
annotating,1;
declara-
tion,1;
Similarly,,1;
for,1;
"<export_symbol_name>"].
Link,1;
dictates,1;
kind,1;
which
indicates,1;
linked,1;
compile,1;
external,1;
by,1;
runtime.,1;
size,,1;
more,1;
secure,1;
because,1;
upgrade,1;
deploys,1;
upgrade,1;
code.,1;
If,,1;
say,,1;
security,1;
update,,1;
library,1;
on,1;
host,1;
compilation,,1;
an,1;
library,1;
update.
Dynamic,1;
produce,1;
Since,1;
includes,1;
linked,1;
output,,1;
each,1;
external,1;
includes,1;
small,1;
library,1;
forwards,1;
access.
Foreign,1;
may,1;
seem,1;
very,1;
advan-
tage,1;
over,1;
ease,1;
anyone
who,1;
includes,1;
sure,1;
such,1;
library,1;
for,1;
like,1;
or,1;
on,1;
most,1;
for,1;
more,1;
libraries.,1;
needs
to,1;
library,1;
for,1;
order,1;
to
run,1;
output,,1;
choice,1;
linking.
Dynamic,1;
good,1;
default,,1;
may,1;
for,1;
particularly,1;
or,1;
for
very,1;
small,1;
or,1;
library,1;
Use,1;
dictate,1;
or,1;
allow,1;
To,1;
dictates,1;
each,1;
overview,,1;
dictates:
•
•
•
•
How,1;
for,1;
on,1;
or,1;
or,1;
like,1;
restored,1;
by,1;
over,1;
by,1;
com-
piler,,1;
want,1;
external,1;
code
because,1;
external,1;
convention.
Every,1;
Using,1;
on,1;
for,1;
because,1;
every,1;
case,1;
If,1;
"Rust",,1;
program,1;
boundary,1;
external,1;
gained,1;
new,1;
declaration,,1;
"C-unwind";,1;
wish,1;
it
you,1;
read,1;
RFC,1;
supports,1;
number,1;
string,1;
(in,1;
library,1;
interface,,1;
on,1;
conven-
tion.,1;
general,,1;
rarely,1;
particularly,1;
or,1;
(which,1;
part,1;
That,1;
fn()),,1;
different,1;
extern
"system",1;
BINARY,1;
compile,1;
tests,1;
or,1;
or,1;
languages,,1;
compile,1;
library,1;
like,1;
wraps,1;
mostly,1;
because,1;
as
anything,1;
code.,1;
Since,1;
each,1;
types,1;
may,1;
crate,,1;
no,1;
compile,1;
library,1;
rlibs,
of,1;
each,1;
rlibs,1;
informa-
tion,1;
necessary,1;
distributed,1;
meaningful,1;
way.
So,1;
want,1;
library,1;
another,1;
language?,1;
library,1;
form,1;
dynamically,1;
linked,1;
on,1;
.dylib,1;
on,1;
on,1;
Windows),1;
linked,1;
on,1;
.lib,1;
on,1;
Those
files,1;
like,1;
by,1;
by,1;
interact,1;
produce,1;
crate-type
field,1;
an,1;
array,1;
library,1;
automatically,1;
library,1;
example,,1;
best
practice,1;
explicitly,1;
good,1;
ol’
Rust,1;
library.
There,1;
number,1;
different,1;
here,1;
produce,1;
library,1;
avail-
able—that,1;
public,1;
#[no_mangle],1;
variables,1;
constants,1;
even,1;
no,1;
meaningful,1;
library,1;
memory,1;
on,1;
section,,1;
over,1;
aspects,1;
types,1;
cross
the,1;
aren’t,1;
boundary.,1;
When,1;
declare,1;
com-
municated,1;
declare,1;
for,1;
on,1;
When,1;
declare,1;
first,1;
sure,1;
up.,1;
on,1;
an,1;
int,
the,1;
an,1;
To,1;
guesswork,1;
for,1;
library,1;
types,1;
on,1;
whether,1;
width,,1;
note,1;
integer,1;
types,1;
like,1;
types,1;
may,1;
like,1;
encoded,1;
more,1;
complex,1;
types,1;
like,1;
mapping,1;
manually.,1;
example,,1;
string,1;
byte,,1;
string,1;
separately,,1;
gen-
erally,1;
string,1;
types,1;
over,1;
assuming,1;
side
uses,1;
string,1;
types,1;
for,1;
want,1;
first,1;
may,1;
for,1;
types,1;
such,1;
types,1;
an,1;
by,1;
default,,1;
very,1;
least,1;
#[repr(C)],1;
and
alignment,1;
If,1;
specifies,1;
for,1;
or,1;
whether,1;
or,1;
an,1;
this:
enum,1;
Baz,1;
#[repr(C)],,1;
encoded,1;
integer,1;
for,1;
an,1;
first,1;
second,1;
each,1;
variant,,1;
11-3:,1;
for,1;
enum
NOTE
Technically,,1;
specification,1;
first,1;
every,1;
subse-
quent,1;
dif-
ference,1;
for,1;
others—those,1;
set.
You,1;
mapping,1;
types,1;
for,1;
valid,1;
for,1;
trouble,1;
more,1;
like,1;
produce,1;
once.,1;
11-3,,1;
for,1;
pro-
duced,1;
by,1;
|,1;
Baz,1;
valid,1;
for,1;
If,1;
an,1;
for,1;
individually,,1;
an,1;
constants,1;
for,1;
each,1;
Bit*,1;
traits,1;
for,1;
isize,1;
for,1;
example,,1;
byte.,1;
data-carrying,1;
an,1;
#[repr(C)],1;
causes,1;
tagged,1;
That,1;
#[repr(C)],1;
struct,1;
fields,,1;
first,1;
encoded,1;
none,1;
fields,,1;
second,1;
for,1;
each,1;
example,,1;
con-
sider,1;
f64,1;
FooTag,1;
Baz,1;
f64,1;
#[repr(C)],1;
tagged,1;
TIMIZ,1;
ATION,1;
invalid,1;
no,1;
optimization,1;
an,1;
interaction,1;
an,1;
example,,1;
thing,1;
an
all-zero,1;
memory,,1;
freed,1;
by,1;
case,1;
memory,1;
on,1;
boundary.,1;
boundary,1;
memory,1;
memory,1;
needs
to,1;
returned,1;
appropriate,1;
for,1;
memory
or,1;
exposes,1;
freeing,1;
returned,1;
no,1;
11-5
shows,1;
an,1;
library,1;
memory,1;
for,1;
new,1;
object.
extern,1;
*mut,1;
another,1;
by,1;
new
//,1;
deallocates,1;
*mut,1;
memory,1;
functions,1;
form,1;
pair,,1;
the
caller,1;
new,1;
returned,1;
for,1;
by,1;
functions,1;
turn),,1;
once,1;
resource.,1;
memory,1;
new,1;
deallocates,1;
If,1;
new,1;
an,1;
c_int),1;
*mut,1;
BIO
Listing,1;
memory,1;
BIO_new_mem_buf,1;
instead,1;
the
backing,1;
memory,1;
on,1;
for,1;
obtaining,1;
on,1;
memory,1;
later,1;
deallocated,,1;
once,1;
no,1;
by,1;
or,1;
even,1;
rule,1;
thumb,,1;
allow,1;
memory,1;
gives,1;
more,1;
memory,1;
example,,1;
on,1;
operating
Foreign,1;
Interfaces
203system,,1;
may,1;
want,1;
If,1;
memory,,1;
instead,1;
memory,1;
or,1;
more,1;
memory,1;
may,1;
even,1;
for,1;
memory,1;
example,,1;
or,1;
Similarly,
if,1;
more,1;
memory,1;
while,1;
running,,1;
such,1;
on,1;
memory,1;
may,1;
runtime.,1;
such,1;
memory.
When,1;
for,1;
or,1;
is
likely,1;
most,1;
for,1;
for,1;
each,1;
boundary,1;
an,1;
conven-
tion.,1;
That,1;
an,1;
reference,1;
C
code,1;
a
panic,1;
unwind,1;
past,1;
automatically,1;
such,1;
may,1;
may,1;
want,1;
detect,1;
translate,1;
an,1;
most,1;
actually,1;
interfaces
with,1;
ultimately,1;
present,1;
safe,1;
reading,1;
through
the,1;
safe,1;
most,1;
safely,1;
encapsulating,1;
implementing,1;
confused.,1;
each,1;
next.
204
Chapter,1;
Lifetimes
If,1;
there’s,1;
chance,1;
external,1;
behind,1;
sure,1;
safe,1;
an,1;
exclusive,1;
reference,1;
by,1;
safe,1;
read,1;
memory,1;
external,1;
simultaneously
modifying,,1;
want,1;
good,1;
live,1;
for,1;
example,,1;
an,1;
Context,1;
Context,1;
Context,1;
valid,1;
for,1;
safe,1;
for,1;
by,1;
borrow,1;
Context,1;
Sync
Do,1;
for,1;
types,1;
an,1;
external,1;
library,1;
library,1;
explicitly,1;
types,1;
It,1;
safe,1;
external,1;
trigger,1;
behavior.
Sometimes,,1;
may,1;
even,1;
want,1;
dummy,1;
types,1;
example,,1;
an,1;
loop,1;
library,1;
*mut,1;
library,1;
documentation,1;
for,1;
external,1;
library,1;
may,1;
by,1;
here,1;
no,1;
implementing,1;
state,1;
struct,1;
()>);
pub,1;
EventLoop,1;
{
unsafe,1;
};
EventLoop(std::marker::PhantomData)
}
impl,1;
EventLoop,1;
an,1;
by,1;
introducing,1;
EventLoop,1;
actually,1;
the
underlying,1;
external,1;
enforces,1;
call
Foreign,1;
on,1;
part,1;
by,1;
EventLoop,1;
by,1;
(which,1;
Sync).
Using,1;
()>,1;
“undo”,1;
auto-traits,1;
here,1;
an,1;
trait,1;
like,1;
for,1;
may,1;
noticed,1;
prevents,1;
or,1;
on,1;
the
library,1;
an,1;
don’t,1;
want,1;
for,1;
each,1;
every,1;
memory,1;
state,1;
shouldn’t,1;
state,1;
void,1;
void*,,1;
*mut,1;
type-erased,1;
like,1;
pointer,,1;
thing,1;
points,1;
effectively,1;
visibility,1;
modifiers,1;
no,1;
visibility,1;
*mut,1;
there’s,1;
an,1;
returned,1;
supplying,1;
different,1;
To,1;
kind,1;
*mut,1;
for,1;
even,1;
for,1;
void*,,1;
instead,1;
different,1;
types,1;
for,1;
each,1;
example,
in,1;
11-9,1;
types,1;
struct,1;
struct,1;
*mut,1;
*mut,1;
*mut,1;
types,1;
better,,1;
distinct
types,,1;
now
impossible,1;
Adding,1;
types,1;
types,1;
for,1;
external,1;
library,1;
number,1;
is
time-consuming.,1;
corner,1;
require,1;
more,1;
developed,1;
tool,1;
avail-
able,1;
for,1;
library,1;
want,1;
with.,1;
others,,1;
wraps,1;
appropriate,1;
for,1;
convenient,1;
want,1;
that
be,1;
If,,1;
on,1;
want,1;
on,1;
every,1;
source
code,,1;
library,1;
for,1;
package.
NOTE
If,1;
platform,1;
script,1;
for,1;
cause
platform-related,1;
declare,1;
script,1;
by,1;
"<some-file.rs>",1;
compiling
your,1;
crate,,1;
compile,1;
compile,1;
The
build,1;
script,1;
declare,1;
script,1;
build.rs,,1;
don’t,1;
declare,1;
very,1;
handy,1;
compile,1;
library,1;
dynamically,1;
declare,1;
declare,1;
for,1;
changes,1;
for,1;
on,1;
very,1;
beware,1;
detect,1;
or,1;
rain,1;
on,1;
such,1;
for,1;
script,1;
through
the,1;
compile,1;
by,1;
To,1;
first,1;
script,1;
library,1;
read,1;
say,,1;
OUT_DIR.,1;
autogenerated,,1;
prac-
tice,1;
library,1;
example,
openssl-sys).,1;
If,1;
don’t,1;
follow,1;
new,1;
more,1;
illegal,1;
for,1;
external,1;
library,1;
key,1;
upgrade,1;
entire
ecosystem,1;
new,1;
library,1;
once.,1;
new,1;
versions
of,1;
upgrade,1;
causes,1;
slightly—
without,1;
safely,1;
wraps
the,1;
types,1;
public,1;
library,1;
crate,,1;
on,1;
for,1;
library!
If,1;
instead,1;
library,1;
intend,1;
to
use,1;
for,1;
native,1;
library,1;
other
languages.,1;
become,1;
library,1;
grows,1;
developed,1;
tool,1;
automate
this,1;
Like,1;
cbindgen,1;
library,1;
for,1;
Since,1;
represents,1;
looking,1;
over,1;
sure,1;
unwieldy,,1;
produce,1;
code.,1;
If,1;
on,1;
most,1;
commonly
used,1;
for,1;
every,1;
interact,1;
C,
and,1;
very,1;
different,1;
types,1;
case,1;
for,1;
C++.,1;
At,1;
for,1;
generating,1;
example,,1;
C++
features,1;
like,1;
aren’t,1;
If,1;
have
to,1;
cxx,1;
covered,1;
external,1;
well,1;
external,1;
code.,1;
types,1;
types,1;
different,1;
languages,1;
we
talked,1;
cbindgen,1;
tools,,1;
more,1;
chapter,
we’ll,1;
more,1;
like,1;
library,1;
may,1;
like,1;
memory,1;
may,1;
TA,1;
L,1;
for,1;
clear
what,1;
At,1;
very,1;
allow,1;
on,1;
on,1;
whether,1;
or,1;
an,1;
of
72MHz,1;
such,1;
an,1;
system,,1;
or,1;
even,1;
dynamically,1;
Much,1;
on,1;
#![no_std],1;
investigateRust’s,1;
play,1;
such,1;
an,1;
environment.
Opting,1;
pieces.,1;
dictates,1;
checking,,1;
borrow,1;
checking,,1;
conversion,1;
code.,1;
there’s,1;
useful,1;
most,1;
like,1;
access,,1;
time,,1;
for
printing,1;
reading,1;
compos-
ite,,1;
on,1;
more,1;
alloc.,1;
fact,,1;
types,1;
functions,1;
library,1;
bottom,1;
library,1;
on,1;
hardware,1;
program,1;
types,1;
such,1;
Option,1;
and
Result,,1;
operations,1;
such,1;
memory,1;
library,1;
no,1;
no,1;
no,1;
no,1;
memory,1;
types,1;
like,1;
nowhere,1;
holds,1;
memory,1;
such,1;
and
dynamically,1;
strings,1;
time,,1;
because,1;
the
three,1;
libraries.,1;
even,1;
Option,1;
std::option::Option.
However,,1;
an,1;
environment,,1;
such,1;
on,1;
an,1;
embedded
device,1;
no,1;
system,,1;
an,1;
or,1;
an,1;
no,1;
meaningful,1;
or,1;
there’s
no,1;
File,1;
or,1;
may,1;
memory,1;
memory,1;
memory,1;
on,1;
fly,1;
such,1;
#![no_std],1;
attribute.,1;
(#!),1;
(see,1;
on,1;
don’t,1;
on,1;
12However,,1;
#![no_std],1;
does—it,1;
library,1;
explicitly,1;
#![no_std],1;
may,1;
fact,1;
be
compatible,1;
intentional:,1;
library,1;
example,,1;
gives,1;
more,1;
types,1;
live,1;
for,1;
on,1;
more,1;
platforms.
NOTE
Since,1;
an,1;
an,1;
Otherwise,,1;
may,1;
on,1;
aren’t,1;
no,1;
why,1;
types,1;
traits—like,1;
every,1;
to
use,1;
them?,1;
why,1;
don’t,1;
macros,1;
every,1;
automatically,1;
imports,1;
an,1;
std::prelude::rust_2021::*,1;
edition’s
prelude,1;
aren’t,1;
beyond,1;
this
­auto-inclusion—they,1;
merely,1;
for,1;
key,1;
macros,1;
different,1;
regions,1;
each,1;
memory,1;
program,1;
there’s,1;
for,1;
there’s,1;
supports,1;
regions,1;
memory
at,1;
runtime,,1;
for,1;
memory,1;
types,1;
are
all,1;
memory,,1;
grow,1;
returned,1;
functions,1;
borrow,1;
contiguous
memory,1;
managed,1;
by,1;
an,1;
regions,1;
memory,1;
no,1;
dictated
by,1;
well,1;
for,1;
most,1;
an,1;
an,1;
for,1;
new,1;
memory,1;
for,1;
past,1;
reuse.
In,1;
an,1;
system,,1;
#![no_std],1;
types,1;
on,1;
memory
allocator,1;
system,,1;
part,1;
library,1;
opting,1;
like,1;
std),1;
most,1;
like,1;
BTreeMap.,1;
on,1;
for,1;
key,1;
hashing,,1;
an,1;
types,1;
types,1;
std::,1;
on,1;
no,1;
by,1;
program,1;
because,1;
an,1;
or,1;
because,1;
has
too,1;
memory,1;
memory,1;
first,1;
place.
NOTE
Some,1;
like,1;
Linux,1;
may,1;
allow,1;
errors,1;
such,1;
want,1;
inner
types,1;
or,1;
Vec::try_reserve),1;
or,1;
propagate,1;
errors,1;
core.,1;
or,1;
don’t,1;
even,1;
time!,1;
utilize,1;
memory,1;
front—either,1;
or,1;
frame—for,1;
number,1;
vector,1;
hold,,1;
usize
that,1;
tracks,1;
To,1;
array,1;
tracks,1;
number,1;
If,1;
reaches
the,1;
size,,1;
gives,1;
an,1;
such,1;
vector,1;
generics.
214
Chapter,1;
12struct,1;
{
values:,1;
N],
len:,1;
N>,1;
{
fn,1;
T),1;
Result<(),,1;
self.len,1;
vector,1;
over,1;
number,1;
vector,1;
an,1;
known
at,1;
compile,1;
on,1;
like,1;
by,1;
array.
NOTE
We,1;
Option,,1;
require,1;
may,1;
runtime.,1;
an,1;
or,1;
user-level,1;
form,1;
first,1;
such,1;
When,1;
code
panics,1;
by,1;
or,1;
handler,1;
dictates,1;
what
happens,1;
When,1;
case,1;
on,1;
most
targets,1;
std—the,1;
handler,1;
first,1;
hook,1;
optionally,1;
by,1;
It,1;
unwinds,1;
or,1;
on,1;
for,1;
configuration,1;
or,1;
targets,1;
example,,1;
targets,1;
for,1;
such,1;
targets,1;
Library
215supply,1;
To,1;
end,,1;
#[panic_handler],1;
program,1;
That
function,1;
program,1;
form,1;
return,1;
by,1;
return,1;
the
Rust,1;
no,1;
follows,1;
valid,1;
for,1;
handler,1;
handler,1;
unwinds,1;
handler,1;
loop,1;
abort,1;
or,1;
for,1;
first,1;
thing,1;
actually,1;
library,1;
That,1;
setup,1;
for,1;
runtime,,1;
output,1;
on,1;
program,1;
crate,,1;
for,1;
Linux,1;
differ,1;
well,1;
on,1;
platforms,1;
setup,1;
supported,,1;
presents,1;
on,1;
platforms,1;
memory,1;
may,1;
even,1;
program,1;
starts.,1;
want,1;
#![no_main],1;
crate-level,1;
attribute.,1;
developer,1;
started,,1;
such,1;
by,1;
launch,1;
for,1;
platforms,1;
no,1;
symbol,
like,1;
most,1;
initial,1;
variables,1;
may,1;
even,1;
specified,1;
code.,1;
such,1;
explicitly,1;
memory,1;
initial,1;
data
values,1;
specified,1;
program,1;
Out-of-Memory,1;
program,1;
wishes,1;
for,1;
an,1;
dictate,1;
specify,1;
an,1;
an,1;
like,1;
to
allocate,1;
more,1;
memory,,1;
handler,1;
on,1;
std-enabled
platforms,1;
an,1;
abort,1;
on,1;
platform,1;
for,1;
example,,1;
obviously,1;
At,1;
on,1;
such,1;
program,1;
explicitly,1;
an,1;
handler,1;
handler,1;
execution,,1;
tried
to,1;
executing,1;
memory,1;
asked,1;
for!
NOTE
By,1;
read,1;
this,,1;
handler,1;
may,1;
been,1;
most,1;
likely).,1;
under-
way,1;
handler,1;
kind,1;
“hook”,1;
fly,1;
like,1;
Accesses
In,1;
fact,1;
fair,1;
program,1;
execute,1;
instruc-
tions,1;
say,,1;
each,1;
or,1;
whether,1;
actually,1;
result,1;
by,1;
hardware,1;
designers,1;
specified,1;
beyond,1;
communicate
with,1;
hardware,1;
memory,1;
state
of,1;
regions,1;
while,1;
starts,1;
memory,1;
rendering,1;
pipeline;,1;
individual
bytes,1;
mode),1;
on,1;
memory,,1;
for,1;
each,1;
memory,1;
region,1;
assumptions,1;
may,1;
no,1;
hardware,1;
such,1;
safely,1;
elide,1;
memory,1;
read,1;
twice,1;
row!
A,1;
program,1;
diverted,1;
aren’t,1;
Execution,1;
diverted,1;
no,1;
underlying,1;
exceptions,1;
or,1;
or,1;
execution
of,1;
starts,1;
handler,1;
for,1;
executions,1;
been,1;
order,1;
or,1;
jumps,,1;
different,1;
order,1;
program,1;
or,1;
operations,1;
form,1;
operations,1;
hardware,1;
operations,1;
no,1;
operations,1;
aren’t,1;
another,1;
hardware,1;
operations,1;
don’t,1;
even,1;
different,1;
helps,1;
situation,,1;
memory,1;
an,1;
prevents,1;
non-volatile,1;
memory,1;
You’ll,1;
very,1;
rarely,1;
documentation,1;
an,1;
read.
INCLUDING,1;
rarely,1;
for,1;
hardware,1;
CPUs,1;
boot,1;
or,1;
At,1;
an,1;
RFC,1;
mostly,1;
been,1;
yet,,1;
book.
218
Chapter,1;
on,1;
creative.,1;
remember,1;
output,1;
library,1;
for,1;
compiles,1;
an,1;
(.a),1;
appropriate,1;
archiving
tool,1;
at
where,1;
placed,1;
archive—probably,1;
If,1;
platform,1;
even,1;
don’t,1;
encapsulating,1;
behind,1;
infamously,1;
complex,1;
pulled
from,1;
more,1;
illegal,1;
3.,1;
time,,1;
state,1;
on,1;
like,1;
3-2.
NOTE
Make,1;
sure,1;
on,1;
that
applies,1;
programs,1;
example,,1;
most,1;
program,1;
violates,1;
struct,1;
On;
pub,1;
struct,1;
struct,1;
R2>(PhantomData<(R1,,1;
mut,1;
bool,1;
{
None
},1;
initial,1;
state,1;
correct.
registers::off("r1");
registers::off("r2");
unsafe,1;
first_on(self),1;
Pair<On,,1;
for,1;
Pair<On,,1;
for,1;
operation
There,1;
code.,1;
first,1;
we
ensure,1;
instance,1;
by,1;
static
Boolean,1;
constructor,1;
initial,1;
state,1;
valid,1;
valid,1;
state,1;
second,1;
PhantomData
to,1;
types,1;
That,1;
types,1;
the
runtime,1;
state,1;
don’t,1;
or,1;
any
state,1;
runtime.,1;
no,1;
on,1;
asked,1;
enable,1;
types,1;
program,1;
case.
Cross-Compilation
Usually,,1;
programs,1;
on,1;
on,1;
dinky,1;
hardware,1;
sock
for,1;
That,1;
for,1;
cross-compilation—you,1;
compile,1;
environment,,1;
compile,1;
for,1;
That’s,1;
the
only,1;
though.,1;
exam-
ple,,1;
produce,1;
12artifacts,1;
for,1;
platforms,1;
for,1;
every,1;
platform,1;
may,1;
actually,1;
for,1;
limited,1;
memory,,1;
or,1;
even
something,1;
may,1;
want,1;
"s",1;
for,1;
sizes.
Cross-compiling,1;
host,1;
platform,1;
host,1;
platform,1;
output,1;
specify,1;
platforms,1;
triples,,1;
form,1;
part,1;
dictates,1;
armv7,,1;
or,1;
wasm32,,1;
to
use,1;
for,1;
emitted,1;
code.,1;
part,1;
on,1;
on,1;
affect,1;
meaningful,1;
mostly,1;
even,1;
part,1;
format,1;
dictates,1;
Linux,1;
files,,1;
dictates,1;
Windows,1;
files,,1;
default,,1;
platform,1;
host,1;
platform,
which,1;
why,1;
say,,1;
compile,1;
for,1;
Linux,1;
on,1;
may,1;
want,1;
even,1;
such,1;
of
forwarding,1;
binary
artifacts,1;
on,1;
platform.,1;
appropriate,1;
library,1;
for,1;
library,1;
standard
library,1;
for,1;
host,1;
platform,1;
on,1;
platform,1;
dictates,1;
standard
library,1;
example,,1;
while,1;
like,1;
an,1;
error.,1;
handy,1;
for,1;
require,1;
(recall,1;
even,1;
#![no_std],1;
have
use,1;
If,1;
trigger,1;
accidentally
bring,1;
Library
221PL,1;
library,1;
for,1;
supports,1;
by,1;
That,1;
command,1;
install
the,1;
appropriate,1;
library,1;
for,1;
If,1;
no,1;
library,1;
for,1;
compile,1;
by,1;
rust-src,1;
component,1;
alloc)
when,1;
by,1;
further,1;
teach
rustc,1;
beyond,1;
for,1;
specification,1;
good,1;
covered,1;
precisely,,1;
over,1;
adds,1;
programs,1;
interact,1;
memory,1;
very,1;
hardware,1;
safely,1;
encapsulate,1;
least,1;
hardware,1;
Next,,1;
small,1;
very,1;
by,1;
discussing,1;
navigate,,1;
even,1;
contribute,1;
ecosystem.
222
Chapter,1;
rarely,1;
every,1;
on,1;
by,1;
bad,,1;
or,1;
subject,1;
today’s
developer,1;
experience.
In,1;
new,1;
more,1;
on,1;
and
contribute,1;
Since,1;
There?
Despite,1;
youth,,1;
an,1;
hard,1;
If,1;
may,1;
appropriate,1;
statistics,1;
superficial,1;
on,1;
each,1;
may,1;
for,1;
there’s,1;
plethora,1;
tools,,1;
fea-
tures,1;
for,1;
decisions.
In,1;
section,,1;
tools,,1;
fea-
tures,1;
over,1;
may,1;
come
in,1;
useful,1;
for,1;
here,1;
graph.,1;
At,1;
allow,1;
licenses,,1;
deny-list,1;
versions,,1;
detect,1;
Git,1;
detect,1;
different,1;
graph.,1;
this,,1;
may,1;
even,1;
more,1;
handy,1;
lints,1;
macros,1;
inspect,1;
output,,1;
or,1;
cargo-expand,1;
an,1;
tool,1;
tool,1;
presents,1;
an,1;
gives,1;
(the,1;
mapping,1;
intermediate,1;
part,1;
useful,1;
because,1;
for,1;
example,,1;
monomorphization),1;
opportunities,1;
compile,1;
whether,1;
or,1;
update,,1;
new,1;
versions,,1;
an,1;
tool,1;
for,1;
on,1;
due,1;
an,1;
may,1;
for,1;
dependency’s,1;
types,1;
past,1;
they’ve,1;
become
redundant,,1;
or,1;
moved,1;
tool,1;
helps,1;
trim,1;
for,1;
over,1;
themselves.,1;
every,1;
useful,1;
lesser-known,1;
for,1;
regularly,
and,1;
on,1;
for,1;
an,1;
for,1;
single
piece,1;
contiguous,1;
memory,1;
or,1;
great,1;
may,1;
need
multiple,1;
library,1;
detect,1;
changes,1;
in
performance,1;
over,1;
crate.
cxx
Provides,1;
safe,1;
for,1;
from
Rust,1;
C++.,1;
If,1;
more,1;
for
much,1;
compatibility,,1;
library,1;
well,1;
multi-consumer,1;
channel,1;
flexible,,1;
It,1;
supports,1;
asynchronous,1;
synchronous,1;
great,1;
bridge,1;
High,1;
struc-
ture,,1;
or,1;
values,,1;
most,1;
an,1;
HDR,1;
insight,1;
heapless’s
data,1;
by,1;
memory,,1;
for,1;
or,1;
trait,1;
library,1;
for,1;
deduplication,,1;
significantly,1;
such,1;
values,,1;
like,1;
min,1;
or,1;
like,1;
an,1;
iterator,1;
on,1;
for,1;
types,1;
with
something,1;
like,1;
macros,1;
for,1;
anno-
tated,1;
safe,1;
most,1;
hassle,1;
getting,1;
for,1;
on,1;
good,1;
library,1;
and
226
Chapter,1;
13hard-to-misuse,1;
great,1;
most,1;
secure-by-
default,1;
an,1;
an,1;
entries,1;
kind,1;
managing,1;
managed,1;
somehow.
static_assertions
Provides,1;
may,1;
compile,1;
assert,1;
like,1;
implements,1;
trait,1;
or,1;
for,1;
well-known,1;
library,1;
command,1;
the
Rust,1;
When,1;
like,1;
exhaustive,1;
matching,1;
like,1;
It,1;
implementing,1;
leaves,1;
critical,1;
application.
tower
Effectively,1;
an,1;
on,1;
At,1;
represents,1;
request,1;
may,1;
library,1;
great,1;
looks,1;
like,1;
ser-
vice,1;
on,1;
types,1;
you’re
tracing,1;
want,1;
library,1;
for,1;
tracing,,1;
Tooling
The,1;
may,1;
know
to,1;
for,1;
very,1;
about.,1;
You’ll,1;
or,1;
supports,1;
very,1;
handy,1;
first,1;
an,1;
for,1;
command,,1;
miri,1;
Miri,1;
compiles,1;
particularly,1;
handy,1;
for,1;
broken,1;
your
minimum,1;
neat,1;
the
Rust,1;
library,1;
documentation,1;
for,1;
Rust
compiler,1;
on,1;
an,1;
handy,1;
aren’t,1;
first,1;
for,1;
graph.,1;
useful,1;
tree,1;
an,1;
tree,1;
showing,1;
dependency.
So,,1;
for,1;
example,,1;
tree,1;
on,1;
want,1;
eliminate,1;
why,1;
being
pulled,1;
information
about,1;
why,1;
each,1;
question,1;
enabled.
Speaking,1;
for,1;
or,1;
for,1;
When,1;
whether,1;
program,1;
by,1;
If,1;
does,
Cargo,1;
program,1;
passed
228
Chapter,1;
command,1;
argu-
ment,1;
bar.,1;
even,1;
command,1;
by,1;
on,1;
more,1;
projects,,1;
may,1;
more,1;
for,1;
accumulating,1;
for,1;
for,1;
each,1;
aren’t,1;
different,1;
fair,1;
proj-
ects.,1;
want,1;
more,1;
sure,1;
clean,1;
too,,1;
clean,1;
clean,1;
cause,1;
for,1;
subdirectory,,1;
for,1;
note,1;
different,1;
every,1;
or,1;
such,1;
configuration,1;
like,1;
crate,,1;
for,1;
each,1;
crate,,1;
crates
had,1;
wait,1;
for,1;
tons,1;
particularly,1;
or,1;
script,1;
native,1;
If,1;
want,1;
even,1;
there’s,1;
inside,1;
compiler
for,1;
each,1;
useful,1;
contribute,1;
lesser-known,1;
prove,1;
enterprising,1;
developers.,1;
first,1;
-Zprint-
type-sizes,1;
types,1;
for,1;
or,1;
memory,1;
-Zprint-type-sizes,1;
computed,1;
for,1;
each,1;
turning,,1;
say,,1;
usize,1;
on,1;
size,,1;
sure,1;
don’t,1;
over,1;
may,1;
types,1;
significantly,1;
differ,1;
or,1;
every,1;
or,1;
for,1;
try,1;
-Cforce-frame-pointers,1;
yes.,1;
more,1;
unwind,1;
lot
during,1;
an,1;
for,1;
unwinding,1;
(remember,1;
pro-
file),,1;
may,1;
encounter.
The,1;
library,1;
small,1;
languages,,1;
for,1;
server,1;
or,1;
an
X.509,1;
certificate,1;
parser,1;
40,1;
different,1;
on,1;
Option,1;
alongside,1;
over,1;
trait,1;
types,1;
avail-
able,1;
so
you,1;
section,,1;
present,1;
from
the,1;
library,1;
may,1;
simplify,1;
or,1;
code.
Macros,1;
free-standing,1;
write!,1;
format,1;
strings,1;
or,1;
implements,1;
may,1;
it—but
one,1;
write!,1;
formatted,1;
That,1;
write!(&mut,1;
"{}+1={}",,1;
formatted,1;
an,1;
iterator,1;
once.,1;
handy,1;
functions,1;
13iterators,1;
don’t,1;
want,1;
or,1;
an,1;
case,1;
an,1;
exclusive,1;
an,1;
swaps,1;
the
owned,1;
referent.,1;
situation,1;
an,1;
exclusive,1;
reference,,1;
such,1;
See,1;
also
mem::take,1;
for,1;
handy,1;
library,1;
types,1;
for,1;
I/O,1;
operations,1;
small,1;
read,1;
or
write,1;
underlying,1;
I/O,1;
resource.,1;
types,1;
underlying,1;
Read,1;
or,1;
Read,1;
themselves,,1;
operations,1;
I/O,1;
such,1;
small,1;
significantly,1;
don’t,1;
cross
the,1;
3,,1;
useful,1;
want,1;
types,1;
or,1;
You’ll
rarely,1;
(recall,1;
necessary),,1;
return,1;
return,1;
types,1;
functions,1;
may,1;
or,1;
may,1;
for,1;
types,1;
or,1;
types,1;
13-1,1;
an,1;
interface.
struct,1;
methods:,1;
an,1;
an
argument,,1;
an,1;
on,1;
reference,1;
for,1;
server,1;
an,1;
If,1;
get_entity
take,1;
Strings
to,1;
even,1;
by,1;
interface,,1;
an,1;
first,1;
We,1;
could
instead,1;
for,1;
types,1;
thing.
Cow,1;
13-2,1;
an,1;
instead,1;
Ecosystem
231struct,1;
require
allocation
With,1;
construction,,1;
method.,1;
return,1;
no,1;
an,1;
an,1;
<'a>,1;
instance,1;
instance,1;
by,1;
on,1;
Otherwise,,1;
no,1;
longer-lasting
clones,1;
an,1;
great,1;
part,1;
an,1;
library,1;
on,1;
the
FFI,1;
boundary,1;
an,1;
oft-neglected,1;
std::collections,1;
for,1;
need
a,1;
or,1;
like,1;
constant-time,1;
or,1;
even,1;
no,1;
memory,1;
(they,1;
may,1;
that
VecDeque<T>,1;
AsRef<[T]>.
Methods
Let’s,1;
neat,1;
methods.,1;
Arc<T>,1;
gives,1;
If,1;
gives,1;
behind,1;
Arc;,1;
new,1;
Arc<T>,1;
holds,1;
swaps,1;
gives,1;
new,1;
Arc.
The,1;
an,1;
form,1;
an,1;
instance,1;
new
one.,1;
an,1;
x,1;
by,1;
for,1;
such,1;
want
to,1;
or,1;
exposed,1;
by,1;
When,1;
implementing,1;
appropriate,1;
on,1;
Formatter
that’s,1;
or,1;
for,1;
included
methods,1;
on,1;
or,1;
entries,1;
key/value,1;
an,1;
more,1;
creating,1;
new,1;
an,1;
an,1;
operate,1;
on,1;
by,1;
avoiding,1;
implements,1;
That,1;
lower,1;
an,1;
upper,1;
x.clamp(min,,1;
min,1;
x,1;
x,1;
x,1;
types,1;
Result,1;
That,1;
gives,1;
versa.,1;
When,1;
for,1;
faster,1;
preserves,1;
an,1;
later,1;
vector,1;
by,1;
for,1;
on,1;
swaps,1;
by,1;
constant-time,1;
aware,,1;
it
will,1;
vector,1;
Wild
As,1;
aren’t,1;
Knowing,1;
understand,1;
purpose,,1;
them.,1;
may,1;
for,1;
day!
Index,1;
Pointers
Index,1;
allow,1;
data
structure,1;
borrow,1;
example,,1;
such,1;
by,1;
by,1;
and
one,1;
by,1;
different,1;
don’t,1;
want,1;
underlying,1;
times,1;
too.,1;
or,1;
reference
counting,1;
entry.,1;
references,
but,1;
become,1;
because,1;
live,1;
well,1;
like,1;
indeferences—
instead.,1;
each,1;
data
structure,1;
like,1;
To,1;
perform,1;
an,1;
operation,,1;
first,1;
structure
to,1;
index,,1;
the
referenced,1;
even,1;
wish!
The,1;
crate,,1;
order,1;
order,,1;
good,1;
example
of,1;
places,
both,1;
keys,,1;
want,1;
case,1;
key,1;
key/value,1;
mapping,1;
key,1;
To,1;
iterate
over,1;
map,,1;
To,1;
looks,1;
(the,1;
pointer),,1;
key’s
value,1;
Vec.
The,1;
crate,,1;
implements,1;
another,1;
edge,1;
or,1;
for,1;
example,,1;
nodes,1;
an,1;
edge,1;
edge,1;
or,1;
To,1;
for,1;
entries,,1;
data
from,1;
If,1;
the
new,1;
for,1;
moved.
Drop,1;
Guards
Drop,1;
even,1;
exclusion,1;
then
sets,1;
consider
what,1;
panics—the,1;
cleanup,,1;
and
no,1;
enter,1;
exclusion,1;
guards
provide,1;
an,1;
more,1;
example,,1;
FnOnce()),1;
while,1;
true).is_err(),1;
DropGuard<'a>(&'a,1;
Drop,1;
for,1;
{
fn,1;
drop(&mut,1;
Using,1;
an,1;
unwinding,1;
implements,1;
Drop,1;
place
the,1;
cleanup,1;
Any,1;
necessary,1;
DropGuard.,1;
When,1;
whether,1;
due,1;
or,1;
dropped,,1;
destructor,1;
runs,,1;
assigned,1;
dropped
at,1;
scope,,1;
been,1;
executed.
This,1;
even,1;
even,1;
If,1;
no,1;
locals,
when,1;
library,1;
may,1;
wish,1;
state,1;
valid
only,1;
for,1;
example,,1;
like,1;
propagate,1;
information
through,1;
no,1;
good,1;
the
thread,1;
state,1;
thread
was,1;
even,1;
returned,1;
due,1;
a
drop,1;
state,1;
Cell,1;
or,1;
because,1;
thread
locals,1;
types,1;
for,1;
for,1;
Traits
Extension,1;
traits,1;
allow,1;
trait,1;
different,1;
example,,1;
an,1;
trait,1;
for,1;
adds,1;
number,1;
for,1;
common),1;
iterator,1;
example,,1;
adds,1;
more,1;
operations,1;
trait,1;
from
tower-service.
Extension,1;
traits,1;
useful,1;
the
base,1;
or,1;
trait,1;
own
so,1;
rarely,1;
sees,1;
releases,1;
cause,1;
trait,1;
trait,1;
an,1;
Service),1;
methods.,1;
It,1;
for,1;
implements,1;
for,1;
on,1;
library,1;
types,1;
traits,1;
automatically,1;
Along,1;
traits,,1;
or,1;
functions,1;
form,1;
re-exports
some,1;
particularly,1;
traits,,1;
want,1;
want,1;
module.,1;
lower,1;
explicitly,1;
by
name.,1;
library,1;
specify,1;
great,1;
for,1;
trait,1;
trait,1;
example,,1;
crate,,1;
traits,1;
traits,1;
scope,,1;
general,,1;
imports,1;
example,,1;
adds,1;
new,1;
new,1;
trait,1;
on,1;
on,1;
no,1;
compile,1;
ambiguous.
Interestingly,1;
while,1;
imports,1;
RFC,1;
on,1;
not
require,1;
library,1;
new,1;
for,1;
such,1;
RFC
goes,1;
great,1;
detail,1;
read,1;
gist
is,1;
releases,1;
require,1;
invasive,1;
changes,1;
to
dependents,,1;
like,1;
edge,1;
because,1;
oth-
erwise,1;
fraction,1;
changes,1;
require,1;
new,1;
very,1;
actually,1;
case,1;
imports,1;
by,1;
crate,,1;
maintainers,1;
imports,1;
for,1;
whether,1;
version
bump.
Staying,1;
Up,1;
such,1;
evolving,1;
new,1;
every,1;
changes,1;
infeasible,,1;
new,1;
library,1;
additions,,1;
It
mainly,1;
for,1;
each,1;
new,1;
recommend
you,1;
reading,1;
language.,1;
reading,1;
changelogs
for,1;
well,1;
near,1;
bottom,1;
changes,1;
weren’t
large,1;
warrant,1;
may,1;
on,1;
https://doc.rust-lang.org/edition-guide/,
which,1;
new,1;
each,1;
edition.,1;
every,1;
three,1;
new,1;
library,1;
enable,1;
may,1;
want
to,1;
teams,,1;
well,1;
reports,
larger,1;
edition,1;
planning,1;
To,1;
great,1;
each
focus,1;
on,1;
aspect,1;
may,1;
over
at,1;
another,1;
great,1;
insight,1;
every,1;
part,1;
case,1;
for,1;
most,1;
languages,,1;
members,1;
constantly,1;
new,1;
new,1;
techniques,1;
another,1;
language.,1;
covered,1;
been,1;
by,1;
thousands,1;
threads,,1;
discussions,1;
even,1;
once,1;
while,1;
new,1;
feature,,1;
good,1;
(https://users.rust-lang.org/),,1;
(https://twitter.com/
rustlang).,1;
don’t,1;
or,1;
time—
pick,1;
like,1;
great,1;
for,1;
Week,1;
It,1;
well,1;
discussions,1;
new,1;
opportunities,1;
for,1;
and
Rust,1;
It,1;
even,1;
Discerning,1;
may,1;
even,1;
good,1;
new,1;
on,1;
read,1;
for,1;
number,1;
for,1;
very,1;
sur-
vey,1;
learning.,1;
on,1;
different,1;
you
can,1;
for,1;
challenge,1;
on,1;
especially,1;
hard,1;
even,1;
an,1;
constantly,1;
documentation,1;
for,1;
or,1;
aspect,1;
works.,1;
seem,1;
like,1;
improv-
ing.,1;
by,1;
learning.,1;
It,1;
while,1;
experience.
Listening,1;
or,1;
techniques,1;
an,1;
struggling,1;
on,1;
You’ll,1;
like,1;
practices.,1;
sit,1;
actually,1;
understand,1;
on,1;
more,1;
even,1;
here,1;
well,1;
https://github.com/jamesmunns/­
awesome-rust-streaming/.,1;
developers
who,1;
or,1;
channel,1;
Action:,1;
like,1;
time
between,1;
for,1;
projects,,1;
for,1;
on,1;
Nushell,
their,1;
on,1;
“new,1;
great,1;
on,1;
walks
The,1;
Ecosystem
239through,1;
for,1;
Simulator!)
and,1;
well-known,1;
hood.
Given,1;
no,1;
surprise,1;
kind,1;
or,1;
form,1;
great,1;
avenue
for,1;
If,1;
or,1;
aspect,1;
by,1;
there’s,1;
no,1;
or,1;
here,1;
want,1;
whether,1;
love,1;
library,1;
first,1;
lose,1;
very,1;
targets,1;
with—go,1;
more,1;
satisfying,1;
long-standing,1;
while,1;
suggestions.,1;
tools.,1;
high-quality
codebase,1;
good,1;
documentation,1;
an,1;
yourself),,1;
great,1;
for,1;
issues.,1;
If,1;
through
the,1;
for,1;
or,1;
more,1;
level-
ing,1;
contribute,1;
trickier,1;
another,1;
library,1;
or,1;
because,1;
allow,1;
on,1;
If,1;
fact,1;
suggests,1;
someone
else,1;
may,1;
for,1;
Data
structures,1;
for,1;
great,1;
subjects,
but,1;
more,1;
scratch”,1;
kind,1;
looking,1;
or,1;
Such,1;
good,1;
turned,1;
If,1;
Tolnay,1;
maintains,1;
may,1;
inspiration.,1;
If,1;
looking,1;
more,1;
there’s,1;
Yet,1;
don’t,1;
by,1;
state,1;
affairs,1;
constantly,1;
good,1;
beyond,1;
beginner,1;
Here’s,1;
new,1;
or,1;
good,1;
particularly,1;
or
nuanced,1;
looking,1;
like,1;
are
more,1;
while,1;
others,,1;
like,1;
more,1;
guide-
like,,1;
sources,1;
(https://doc.rust-lang.org/nomicon/),,1;
par-
ticular,,1;
more,1;
books,1;
library,1;
or,1;
want,1;
try,1;
trove,1;
Guidelines,1;
a
Rust,1;
Guidelines,1;
(https://rust-lang.github
.io/unsafe-code-guidelines/),,1;
by,1;
read,1;
more.
NOTE
One,1;
specification,1;
for,1;
language.,1;
like,1;
for,1;
or,1;
on,1;
number,1;
books,1;
are
enormously,1;
Macros,1;
for,1;
example,,1;
indis-
pensable,1;
want,1;
filled,1;
for,1;
great,1;
Fuzz,1;
fuzz,1;
more,1;
(https://rust-lang-nursery.github.io/rust-cookbook/),,1;
even,1;
a
resource,1;
for,1;
more,1;
(https://lborb.
github.io/book/unofficial.html)!
If,1;
more,1;
hands-on,1;
an,1;
server,1;
well,1;
If,1;
more,1;
Entirely,1;
an,1;
read,1;
If,1;
looking,1;
for,1;
an,1;
through
the,1;
great,1;
detail,1;
while,1;
(https://fasterthanli.me/tags/rust/),1;
want,1;
conversational,1;
style.
When,1;
more,1;
confident,1;
abilities,1;
more,1;
reference,1;
great,1;
for,1;
looking,1;
It,1;
for,1;
most,1;
even,1;
looking,1;
intimately,1;
are
pretty,1;
finally,,1;
want,1;
try.
There,1;
each,1;
question,1;
even,1;
wrong,
you’ll,1;
by,1;
been,1;
well,1;
by,1;
try,1;
others.,1;
an,1;
new,1;
every,1;
new,1;
or,1;
try,1;
reading,1;
or,1;
here,1;
on,1;
form,1;
post,,1;
tweet-
ing,,1;
or,1;
or,1;
thing,1;
try,1;
newfound,1;
to
someone,1;
understand,1;
so,,1;
getting,1;
looking,1;
or,1;
sure,1;
(https://rustbeginners.github.io/awesome-rust-mentors/).Summary
In,1;
covered,1;
beyond,1;
work-
space.,1;
We,1;
useful,1;
tools,,1;
continues,1;
discussed
how,1;
hands,1;
contribute,1;
there’s,1;
(asterisk),,1;
236–237
?,1;
62–65
A
abstract,1;
syntax,1;
tree,1;
memory,1;
ordering,,1;
79
Arc::make_mut,1;
236–237
async/await,,1;
121–133
multithreading,,1;
138–139
standardized,1;
polling,,1;
121
synchronous,1;
175–176
atomic,1;
216
macros,,1;
110,,1;
49
no_main,,1;
216
repr,,1;
library,1;
207–209
bitflags,1;
30,,1;
48–49
Borrow,1;
checker,,1;
8,,1;
231
byte-aligned,1;
values,,1;
memory,,1;
198–199
The,1;
38,,1;
clippy,,1;
224
cargo-hack,,1;
159–160
cbindgen,1;
208
Cell,1;
12
cfg,1;
conditions,,1;
39
Clone::clone_from,1;
195
codegen-units,,1;
75
coherence,,1;
compilation,,1;
174
const,,1;
lints,,1;
236–237
crates.,1;
See,1;
225
cross-compilation,,1;
59
debugging,1;
75
declarative,1;
153
derive,1;
110,,1;
111
#[derive(Trait)],,1;
guards,,1;
234–235
drop_in_place,1;
dispatch,,1;
memory,1;
types,1;
handling,,1;
46
extension,1;
traits,,1;
ordering,,1;
on,1;
226
187–188
flume,1;
147,
193–209
Formatter::debug_*,1;
232–233
fragment,1;
106
frame,1;
trait,1;
110,,1;
93–94heap,,1;
6,,1;
226
Heisenbugs,,1;
trait,1;
14–15
generic,1;
traits,,1;
236–237
#[global_allocator],1;
memory,,1;
12
Into,1;
226
J
Jung,,1;
38
layout,,1;
21–23
leaf,1;
memory,,1;
Entirely,1;
Ryan,,1;
239
libraries
alloc,,1;
225
cxx,,1;
226
Index
247libraries,1;
234
itertools,,1;
97,,1;
190
metered,,1;
234
pin-project,,1;
212–213,,1;
227
structopt,,1;
227
tracing,,1;
optimization,1;
171
lock-free,1;
173
Loom,1;
97,,1;
110,,1;
112
cfg!,,1;
70
compile_fail!,,1;
110,,1;
110,,1;
109–115
write!,,1;
traits,,1;
34
matchers,,1;
Frank,,1;
memory,,1;
memory,,1;
6–7
terminology,,1;
2–3
types,1;
ordering,,1;
113
methods,,1;
232
Clone::clone_from,,1;
on,1;
types,1;
232–233
inherent,,1;
41
Instant::elapsed,,1;
233
Result::transpose,,1;
233
Vec::swap_remove,,1;
intermediate,1;
119–120
#[must_use],1;
170,,1;
values,,1;
205
#![no_std],1;
Yet,1;
files,,1;
traits,,1;
44–45
Once,1;
59–61
opaque,1;
206
Oppermann,,1;
vs.,1;
22
panic,1;
75
testing,,1;
226
place,,1;
134
polling,1;
polling,,1;
121
preludes,,1;
213,,1;
operator,1;
conditions,,1;
169
raw,1;
memory,1;
ordering,,1;
memory,1;
ordering,,1;
239
Rust,1;
38,,1;
237
Rust,1;
Cookbook,,1;
242
Rust,1;
Fuzz,1;
242
Rust,1;
242
Rust,1;
RFC,1;
documents
RFC,1;
1105,,1;
38,,1;
2582,,1;
Guidelines,1;
241
rustc,,1;
228
S
safety,,1;
129,,1;
169,,1;
172
“Scalability!,1;
traits,,1;
structures,,1;
205–206
sequentially,1;
memory
ordering,,1;
memory,1;
114–115
spawn,1;
138–139
specialization,,1;
212–213,,1;
Developers,1;
dispatch,,1;
memory,,1;
memory,,1;
ordering,,1;
trees,,1;
triples,,1;
Week,1;
trees,,1;
242
tower,1;
227–228
trait,1;
31–33
trait,1;
54–55
Borrow,,1;
28–31
common,,1;
39–40
compilation,,1;
40
Debug,,1;
24–28
Display,,1;
trait,1;
32
implementations,,1;
39
PartialOrd,,1;
39
sealed,,1;
40
Sized,,1;
31–33
trait,1;
131,,1;
152–153
transcribers,,1;
inference,,1;
8,,1;
traits,1;
types,1;
34–35
fragment,,1;
34
ManuallyDrop,,1;
memory,,1;
19–24
Once,,1;
156
reference,,1;
155–156
Result,,1;
system,,1;
48–50
Index
251U
undefined,1;
131,,1;
152–153
unreachable_unchecked,1;
versions,,1;
142–153
unsafe,1;
129,,1;
155–158
values
dropping,,1;
8–9
overview,,1;
models,,1;
3–4
low-level,1;
models,,1;
size,,1;
stealing,,1;
an,1;
for,1;
Rustaceans,1;
Dogma,,1;
by,1;
on,1;
Internet
to,1;
connected,1;
informed.,1;
That,1;
for,1;
urgent,1;
over,1;
for,1;
through
activism,,1;
by,1;
With
your,1;
digital,1;
future.
LEARN,1;
for,1;
more,1;
information.
More,1;
books,1;
from
NO,1;
STARCH,1;
for,1;
for,1;
Software,1;
riccomini,1;
klabnik,1;
ryaboy
288,1;
Portable,,1;
Computers—
Craft,1;
jonathan,1;
LINUX,1;
SUPERUSER,1;
and
technical,1;
L,1;
who’ve,1;
on,1;
It,1;
codebases,,1;
asynchronous,1;
like,1;
Waker,1;
types,1;
well,1;
async/await,1;
like,1;
code.,1;
You’ll,1;
like,1;
trait,1;
delve,1;
expert,1;
on,1;
handling,,1;
interoperate,1;
non-Rust
libraries,1;
or,1;
and
embedded,1;
environments
You’ll,1;
idiomatic,,1;
on,1;
principles
•,1;
effectively,1;
interact,1;
functions,1;
Organize,1;
complex,1;
so
that,1;
for,1;
Rustaceans,1;
will
help,1;
more,1;
while,1;
mechanisms.
ABOUT,1;
been,1;
Rust”
YouTube,1;
like,1;
he
built,1;
high-performance,1;
over,1;
MIT.,1;
first,1;
book.
CURRENT,1;
2021
T,1;
G,1;
™
www.nostarch.com
$39.99,1;
($59.99,1;
CDN)
,1;
FOR
RUS,1;
P,1;
G,1;
G,1;
R
E,1;
P,1;
L,1;
P,1;
TA,1;
G,1;
g,1;
t
San,1;
Copyright,1;
by,1;
part,1;
may,1;
or,1;
form,1;
or,1;
by,1;
means,
electronic,1;
or,1;
or,1;
by,1;
storage,1;
or,1;
22,1;
(print)
ISBN-13:,1;
(ebook)
Publisher:,1;
William,1;
Chadwick
Cover,1;
Design:,1;
Type-O-Rama
Proofreader:,1;
on,1;
distributors,1;
or,1;
directly:
No,1;
Inc.
245,1;
CA,1;
1.415.863.9900;,1;
info@nostarch.com
www.nostarch.com
Library,1;
Number:,1;
company,1;
herein,1;
may,1;
owners.,1;
every,1;
only
in,1;
an,1;
benefit,1;
no,1;
distributed,1;
on,1;
an,1;
“As,1;
Is”,1;
every,1;
been,1;
work,,1;
or,1;
or,1;
damage,1;
or,1;
by,1;
high-performance,1;
over,1;
MIT.,1;
been,1;
asynchronous,1;
maintains,1;
such,1;
hdrhistogram,1;
been,1;
Since,1;
cover,1;
like,1;
variance,
atomics,,1;
dispatch,,1;
been,1;
received,1;
enthusiasti-
cally,1;
by,1;
community.
About,1;
Technical,1;
Tolnay,1;
prolific,,1;
respected,1;
maintains,1;
most,1;
syn,,1;
serde,,1;
anyhow.,1;
library,1;
xv
Preface,1;
1:,1;
37
Chapter,1;
5:,1;
Project,1;
Structure,1;
6:,1;
7:,1;
Macros,1;
13:,1;
223
Index,1;
TA,1;
About,1;
9
Mutable,1;
10
Interior,1;
Dispatch,1;
Orphan,1;
Rule,1;
Practices,1;
38
Common,1;
for,1;
Implementations,1;
40
Wrapper,1;
vs.,1;
46
Obvious,1;
47
Type,1;
Guidance,1;
Implementations,1;
HANDLING
57
Representing,1;
Errors,1;
Errors,1;
59
Special,1;
Errors,1;
62
Summary,1;
65
5
PROJECT,1;
STRUCTURE
67
Features,1;
70
Workspaces,1;
70
Project,1;
Compilation,1;
80
Minimum,1;
81
Minimal,1;
83
Summary,1;
Test,1;
93
Test,1;
97
Summary,1;
Macros,1;
Use,1;
Them,1;
Macros,1;
Macros,1;
109
Types,1;
Macros,1;
Macros,1;
111
How,1;
PROGRAMMING
117
What’s,1;
118
Multithreading,1;
121
Ergonomic,1;
Sleep,1;
Up,1;
Is,1;
Misnomer,1;
It,1;
138
Summary,1;
Keyword,1;
144
Juggling,1;
151
Great,1;
Wrong?,1;
155
Panics,1;
Drop,1;
163
Manage,1;
164
Check,1;
(AND,1;
Models,1;
200
Type,1;
204
bindgen,1;
STANDARD,1;
Allocation,1;
Handler,1;
Out-of-Memory,1;
Handler,1;
ECOSYSTEM
223
What’s,1;
Up,1;
by,1;
by,1;
by,1;
Reading,1;
by,1;
noticed,1;
prepared,1;
for,1;
folks,1;
very,1;
well,1;
powered,1;
by,1;
on,1;
thing,1;
been,1;
emerges,1;
com-
fort,1;
pieces.,1;
here,1;
don’t,1;
pretty,1;
“household
name”,1;
open,1;
library,1;
understand,1;
case,1;
every,1;
thing,1;
every,1;
opin-
ions,1;
material.,1;
Structs,1;
no,1;
an,1;
opinion,1;
infinitely,1;
flex-
ible,1;
judicious,1;
speeds,1;
6)—someone,1;
beyond,1;
hard,1;
or,1;
projects,,1;
read,1;
here,1;
wrong,1;
seize,1;
wrong,1;
here,1;
can
accomplish,1;
over,1;
That’s,1;
E
One,1;
on,1;
roadmap,1;
intermediate,1;
aren’t,1;
aren’t,1;
looking,1;
new,1;
borrow,1;
That,1;
inspired,1;
or,1;
actually,1;
for,1;
an,1;
the
whole,1;
understand,1;
beginner,1;
themselves,,1;
good,1;
to
use,1;
very,1;
over,1;
clear,1;
weren’t,1;
for,1;
or,1;
for,1;
every,1;
more,1;
over,1;
understand,1;
topic,1;
better,,1;
or,1;
or,1;
for,1;
sure,1;
for,1;
ultimately,1;
aim,1;
distillall,1;
intermediate,1;
by,1;
textual
explanations,1;
most,1;
intermediate,1;
on,1;
them.,1;
format,1;
well,1;
by-
topic,1;
reference,1;
where
coding,1;
taste.,1;
language.,1;
developer,1;
above,1;
another,1;
intermediate,1;
Rust
teaching,1;
useful,1;
one
step,1;
roadmap,1;
assumed,1;
like,1;
or,1;
like,1;
been,1;
different,1;
ballgame.,1;
for,1;
patience,1;
on,1;
been,1;
Rust
developers,1;
developed,1;
ecosystem
I,1;
interact,1;
inspired,1;
spread,1;
ability.,1;
for,1;
streams,1;
over,1;
years;,1;
don’t,1;
first,1;
your
ongoing,1;
been,1;
good,1;
been,1;
great,1;
book’s,1;
obviously,1;
errors,1;
vast,1;
been,1;
for,1;
It,1;
Liz’s,1;
she,1;
while,1;
her,1;
she,1;
followed,1;
material.,1;
discussions,1;
follow,1;
more,1;
Nichols,,1;
the
authors,1;
first,1;
least,1;
very,1;
extraordinary,1;
they’ve,1;
well,1;
want,1;
very,1;
partially,1;
read,1;
like,1;
or,1;
physically,,1;
the
introductory,1;
hands-on,1;
time,,1;
for,1;
useful,1;
surrounding,1;
Taken,1;
I’m,1;
writing
Rust,1;
resource.,1;
for,1;
Rustaceans,1;
(“the,1;
leaves,1;
well,1;
beyond,1;
trait,1;
system,,1;
It,1;
new,1;
like,1;
asynchronous,1;
development,,1;
andergonomic,1;
design.,1;
aim,1;
more,1;
enable,1;
more,1;
more,1;
robust,1;
Book
This,1;
are
more,1;
or,1;
or,1;
read,1;
for,1;
more,1;
holistic,1;
That,1;
by,1;
reading,1;
later,1;
for,1;
day-to-
day,1;
Here’s,1;
each
chapter:
Chapter,1;
gives,1;
more,1;
like,1;
memory,,1;
bor-
rowing,,1;
follow,1;
Types,,1;
more,1;
exhaustive,1;
of
types,1;
traits,1;
number,1;
3,,1;
flexible,,1;
on,1;
name
things,,1;
trait,1;
objects.
Chapter,1;
Handling,,1;
each,1;
each,1;
Project,1;
on,1;
non-code,1;
such,1;
6,,1;
presents,1;
techniques,1;
such,1;
7,,1;
useful,1;
their
pitfalls.
Chapter,1;
8,,1;
gives,1;
an,1;
dif-
ference,1;
synchronous,1;
asynchronous,1;
low,1;
an,1;
asynchronous,1;
great,1;
great,1;
You’ll,1;
well,1;
tools
and,1;
techniques,1;
incorrect,1;
code.
Chapter,1;
looks,1;
concurrency,1;
is
represented,1;
why,1;
correctness,1;
It,1;
concurrency,1;
concurrency,1;
sane,1;
while,1;
concurrent,1;
languages,1;
like,1;
the
extern,1;
actually,1;
library,1;
such,1;
or,1;
platforms,,1;
Ecosystem,,1;
cover,1;
instead,1;
It,1;
advice
on,1;
on,1;
practices,
tips,1;
on,1;
useful,1;
useful,1;
over,1;
You’ll,1;
that
information,1;
book’s,1;
on,1;
https://­
nostarch.com/rust-rustaceans/.
And,1;
now,,1;
there’s,1;
thing,1;
more,1;
cor-
ners,1;
precise,1;
to
use,1;
more,1;
try,1;
more,1;
work,,1;
memory,,1;
memory,1;
regions,1;
program,1;
has.,1;
borrowing,,1;
on,1;
read,1;
bottom,1;
or,1;
reference,1;
on,1;
sure
about.,1;
on,1;
completelycomfortable,1;
or,1;
About,1;
Memory
Not,1;
memory,1;
most,1;
environments,
your,1;
programs,1;
files,,1;
situation,1;
for,1;
what
mechanisms,1;
memory,1;
platforms,1;
beyond,1;
here.
Memory,1;
regions,1;
memory,,1;
first,1;
dif-
ference,1;
values,,1;
an,1;
turned,1;
on,1;
more,1;
like,1;
meant.
For,1;
example,,1;
number,1;
an,1;
instance,1;
6,,1;
Similarly,,1;
world",1;
strings,1;
representation
is,1;
location
where,1;
for,1;
location
that,1;
on,1;
on,1;
or,1;
number,1;
most,1;
on,1;
holds,1;
region,1;
memory,,1;
points,1;
dereferenced,1;
memory,1;
points,1;
We,1;
more,1;
variables,1;
memory,1;
three,1;
x,1;
var1,1;
mut,1;
1Here,,1;
42,1;
pointer),,1;
variables,1;
var1,1;
ini-
tially,,1;
separate,,1;
var1,1;
operator,1;
by,1;
left-hand,1;
such,1;
as:
let,1;
string,1;
string,1;
first,1;
string,1;
string,1;
At,1;
string,1;
If,1;
so,,1;
eye—we’ll,1;
string,1;
includes,1;
broad,1;
useful,1;
more,1;
complex,1;
more,1;
what
the,1;
programs,1;
such,1;
can
make,1;
Describing,1;
detail,1;
chap-
ters,1;
beyond,1;
useful,1;
of
lifetimes,1;
while,1;
good,1;
for,1;
for,1;
variables
described,1;
sections,1;
for,1;
most,1;
mate-
rial,1;
model,,1;
don’t,1;
variables,1;
When,1;
on,1;
by,1;
When,1;
later,1;
drawing,1;
new,1;
access,,1;
If,1;
no,1;
lines
can,1;
model,,1;
holds,1;
lines,1;
or,1;
effectively,1;
there.,1;
Using,1;
model,,1;
each,1;
one
tracing,1;
instance,1;
and
merge,1;
branches,,1;
each,1;
each,1;
flow,1;
while,1;
no,1;
flow,1;
cases.
let,1;
mut,1;
nowhere,1;
flow,1;
x,1;
42;
//,1;
flow,1;
assigned,1;
flow,1;
x,1;
continues,1;
flow,1;
flow,1;
Illegal,1;
borrow,1;
checker,1;
x,1;
because,1;
nowhere
to,1;
flow,1;
from.,1;
x,1;
flows
from,1;
flows:,1;
exclusive,1;
flow,1;
3,,1;
and
one,1;
flow,1;
borrow,1;
checker,1;
every,1;
flow,1;
no,1;
borrow,1;
checker,1;
3,,1;
sees,1;
flow,1;
Since,1;
cannot
have,1;
an,1;
exclusive,1;
time,,1;
code.,1;
compile,1;
flow,1;
exclusive,1;
flow,1;
3,,1;
no,1;
conflicting,1;
new,1;
by,1;
variables,1;
no,1;
borrow,1;
checker,1;
par-
ticular,,1;
program,,1;
actually,1;
produce,1;
Model
Variables,1;
memory,1;
locations,1;
may,1;
or,1;
may,1;
When,1;
dropped,1;
When,1;
or,1;
been,1;
backing,1;
memory,1;
dereferenced,1;
example,,1;
usize,,1;
x,1;
for,1;
region,1;
memory,1;
on,1;
for,1;
usize,,1;
such,1;
x,1;
6,,1;
region,1;
&x,1;
If,1;
declare,1;
variables,1;
different,1;
memory,1;
backing,1;
them.,1;
memory,1;
by,1;
useful,1;
for,1;
explicitly,1;
example,,1;
an,1;
optimization.,1;
real-
ity,,1;
may,1;
instead,1;
region,1;
memory,1;
if
no,1;
memory,1;
for,1;
may,1;
urge,1;
try,1;
head,1;
them.,1;
like
any,1;
useful,1;
be.,1;
If,1;
understand,1;
why,1;
or,1;
on,1;
memory,,1;
memory,1;
actually,1;
different,1;
regions,1;
memory,,1;
surprisingly,,1;
part,1;
memory,1;
on,1;
code.,1;
three,1;
most,1;
regions,1;
for,1;
memory.
The,1;
memory,1;
program,1;
Each,1;
contiguous,1;
Near,1;
for,1;
functions,1;
onto,1;
frame
contains,1;
variables,1;
When,1;
variables,1;
wiped,,1;
safe,1;
may,1;
by,1;
even,1;
been,1;
may,1;
illegal,1;
such,1;
moved,1;
crucially,1;
fact,1;
are
very,1;
Any,1;
a
frame,1;
on,1;
away,,1;
most,1;
Heap
The,1;
pool,1;
memory,1;
memory,1;
live,1;
until,1;
explicitly,1;
useful,1;
want,1;
live,1;
beyond,1;
If,1;
return,1;
on,1;
for,1;
want,1;
say,,1;
may,1;
no,1;
on,1;
heap.
The,1;
explicitly,1;
contiguous,1;
When,1;
so,,1;
That,1;
memory,1;
for,1;
until,1;
later,1;
deal-
locate,1;
the
corresponding,1;
Since,1;
from
the,1;
another,1;
safely,1;
operate,1;
on,1;
Or,,1;
memory,,1;
an,1;
program,1;
for,1;
When,1;
placed,1;
on,1;
(the,1;
on,1;
dropped,,1;
memory,1;
forget,1;
memory,,1;
forever,,1;
memory,1;
on,1;
memory,1;
want,1;
explicitly,1;
want,1;
leak,1;
configuration,1;
program,1;
on,1;
explicitly,1;
leak,1;
reference,1;
memory,1;
for,1;
program,1;
into.,1;
regions,1;
memory,1;
program,1;
memory,1;
live,1;
for,1;
pro-
gram.,1;
memory,1;
read-only.,1;
program,1;
by,1;
called.,1;
memory,1;
holds,1;
for,1;
variables,1;
declare,1;
keyword,,1;
well,1;
certain
constant,1;
like,1;
strings.
The,1;
reference,1;
valid,1;
for,1;
“as,1;
memory,1;
1around,”,1;
until,1;
program,1;
Since,1;
program,1;
starts,,1;
reference,1;
memory,1;
by,1;
until,1;
true—there,1;
reference,1;
points,1;
memory,1;
program,1;
concerned,,1;
for,1;
program,1;
more,1;
memory,1;
(through,1;
keyword,,1;
for,1;
because,1;
on,1;
parameters.,1;
like,1;
indicates,1;
live,1;
for,1;
Essentially,,1;
or,1;
borrow,1;
until,1;
good,1;
example
of,1;
new
thread,,1;
Since,1;
may,1;
new,1;
on,1;
new,1;
live,1;
for,1;
may,1;
for,1;
program.
NOTE
You,1;
may,1;
Constant,1;
computed,1;
compile,1;
computed,1;
constant,1;
no,1;
memory,1;
or,1;
storage,1;
(it,1;
is
not,1;
constant,1;
convenient,1;
for,1;
memory,1;
on,1;
each,1;
borrow
checker.,1;
If,1;
such,1;
by,1;
assigning,1;
new,1;
or,1;
on,1;
new,1;
At,1;
no,1;
variables,1;
flow,1;
moved,1;
variables,1;
new,1;
types,1;
follow,1;
If,1;
moved,1;
new,1;
memory,1;
copied,
and,1;
new,1;
locations,1;
Essentially,,1;
instance,1;
types,1;
such,1;
integer,1;
To,1;
duplicate,1;
by,1;
types,1;
well,1;
like,1;
memory,1;
for,1;
memory,1;
no,1;
for,1;
responsi-
bility,1;
necessary,1;
cleanup,1;
for,1;
by,1;
automatically,1;
holds,1;
complex,1;
may,1;
result,1;
requirement,,1;
holds,1;
reference,1;
gives,1;
semantics,,1;
Box::new(84);
{,1;
starts,1;
new,1;
scope,,1;
moved,1;
z
3,1;
x1;
//,1;
moved,1;
y1;
Listing,1;
semantics
We,1;
values,,1;
number,1;
42,1;
number,1;
When,1;
whereas
y1,1;
moved,1;
At,1;
continues,1;
3.,1;
once,1;
been,1;
moved,1;
When,1;
dropped,
and,1;
moved,1;
dropped,,1;
deallocates,1;
memory,1;
1DROP,1;
automatically,1;
scope,,1;
such,1;
1-3.,1;
for,1;
order,1;
variables,1;
(including,1;
dropped,1;
dropped,1;
source-code,1;
order.
This,1;
sound,1;
discrepancy?,1;
If,1;
it
closely,,1;
string,1;
reference,1;
string,1;
new,1;
dropped,1;
string,1;
an,1;
invalid,1;
variables,1;
may,1;
values,,1;
due,1;
for,1;
for,1;
values,,1;
like,1;
or,1;
surprise,1;
If,1;
constructed
an,1;
array,1;
values,,1;
seem,1;
dropped,1;
most,1;
for,1;
first,1;
or,1;
dropped,1;
the
second,,1;
for,1;
no,1;
allow,1;
self-references,1;
others,,1;
an,1;
for,1;
such,1;
whether,1;
exclusive,1;
or,1;
whether,1;
the
referenced,1;
may,1;
reference,,1;
may,1;
Any,1;
number,1;
may,1;
reference,1;
more,1;
behind,1;
reference,1;
points,1;
points,1;
while,1;
reference,1;
example,,1;
the
Rust,1;
sees,1;
behind,1;
reference,1;
read,1;
read,1;
once,1;
assertion,1;
sum:,1;
or,1;
optimization,1;
or,1;
over,1;
time,,1;
want,1;
actually,1;
case,1;
References
The,1;
reference,1;
reference,1;
no,1;
threads,1;
whether,1;
or,1;
for,1;
example,,1;
1-5.
fn,1;
output:,1;
exclusive.
In,1;
output,1;
Therefore,,1;
output,1;
If,1;
on,1;
exclusive,1;
optimization,1;
an,1;
result,1;
output,1;
case,1;
like,1;
reference,1;
mutate,1;
memory,1;
reference,1;
points,1;
mutate,1;
beyond,1;
reference,1;
on,1;
by,1;
may,1;
understand,1;
an,1;
example,,1;
x,1;
mut,1;
&i32
Listing,1;
example,,1;
different,1;
by,1;
reference,1;
differ-
ent,1;
Similarly,,1;
but
you,1;
different,1;
for,1;
when
it,1;
no,1;
a
mutable,1;
reference,1;
behind,1;
reference,,1;
If,1;
no,1;
for,1;
1-7,1;
gives,1;
an,1;
behind,1;
*s,1;
*s;
//,1;
this:
3,1;
*s,1;
behind,1;
mut,1;
r,1;
Box::new(84);
4,1;
mut,1;
Box::new(42);
replace_with_84(&mut,1;
reference,1;
lines,1;
illegal,1;
they
owned,1;
want,1;
valid,1;
std::mem::take,1;
good,1;
It,1;
std::mem::replace(&mut,1;
it
moves,1;
behind,1;
reference,1;
leaves,1;
new,,1;
for,1;
separate,,1;
is
safe,1;
for,1;
don’t,1;
behind,1;
reference,,1;
you
can,1;
3,,1;
caller
to,1;
When,1;
this,,1;
reference,1;
dropped,1;
values
without,1;
for,1;
Mutability
Some,1;
types,1;
allow,1;
mutate,1;
types,1;
on,1;
or,1;
on,1;
exclusive,1;
reference,,1;
given
only,1;
first,1;
types,1;
like,1;
for,1;
reference,1;
no,1;
references),1;
hood,,1;
types,1;
like,1;
them),1;
UnsafeCell,,1;
you
hesitate,1;
We,1;
cover,1;
more,1;
detail,1;
mutate,1;
types,1;
reference,1;
instead,1;
give
you,1;
for,1;
integer,1;
reference,1;
usize,1;
or,1;
behind,1;
such,1;
but
you,1;
read,1;
Cell,1;
library,1;
an,1;
safe,1;
muta-
bility,1;
It,1;
threads,1;
gives,1;
Cell.,1;
or,1;
return,1;
Since,1;
no,1;
Cell,1;
concurrently,1;
even,1;
mutation
happens,1;
reading,1;
con-
cept,1;
repeated,1;
about
lifetime,1;
That,1;
the
more,1;
complex,1;
more,1;
with.
Newer,1;
reference,1;
moved,1;
or,1;
more,1;
for,1;
region,1;
reference,1;
scope,,1;
later,1;
borrow,1;
Whenever,1;
reference
with,1;
borrow,1;
checker,1;
by,1;
no,1;
path.,1;
reference,1;
points,1;
safe,1;
flow,1;
reference,1;
reference,1;
mut,1;
x,1;
r,1;
starts,1;
reference,1;
first
branch,1;
try,1;
x,1;
by,1;
borrow,1;
checker,1;
x,1;
It,1;
no,1;
conflicting,1;
reference,1;
may,1;
surprise,1;
lifetimes
as,1;
scopes,,1;
r,1;
(it,1;
checker,1;
r,1;
later,1;
for,1;
x,1;
no,1;
flow,1;
r,1;
beyond,1;
no,1;
flows.,1;
borrow,1;
checker,1;
r,1;
3.,1;
It,1;
no,1;
conflicting,1;
is
not,1;
on,1;
well.
If,1;
another,1;
r,1;
compile.,1;
(the,1;
r),,1;
borrow,1;
checker,1;
conflicting,1;
convoluted.,1;
1-9,1;
an,1;
example
of,1;
invalid,1;
ultimately,1;
mut,1;
x,1;
mut,1;
'a
3,1;
x,1;
'a
Listing,1;
starts,1;
reference,1;
We,1;
x,1;
3,,1;
because,1;
no,1;
The
borrow,1;
checker,1;
by,1;
which
leaves,1;
no,1;
conflicting,1;
x,1;
3.,1;
reference,1;
whether,1;
or,1;
continues,1;
valid,1;
flow,1;
no,1;
conflicting,1;
borrow,1;
checker,1;
aligns,1;
data-flow,1;
memory,1;
earlier.,1;
When,1;
x,1;
When,1;
reassign,1;
creating,1;
an,1;
new,1;
It,1;
new,1;
borrow,1;
checker,1;
If,1;
whether,1;
borrow,1;
an,1;
invalid,1;
borrow,1;
borrow,1;
checker,1;
getting,1;
times,1;
understand,1;
why,1;
borrow,1;
part,1;
why,1;
ref-
erences,1;
borrow,1;
checker,1;
on,1;
is
especially,1;
want,1;
on,1;
return,1;
reference,1;
reference,1;
over,1;
or,1;
more,1;
over,1;
by,1;
2018),1;
topic,1;
reiterate,1;
complex,1;
types,1;
nature,,1;
such,1;
types,1;
implements,1;
or,1;
Essentially,,1;
instance,1;
dropped,,1;
borrow,1;
checker,1;
necessary,1;
case,1;
If,1;
count,1;
use,
14
Chapter,1;
1and,1;
as
they,1;
like,1;
1-7.,1;
more,1;
about
these,1;
while,1;
over,1;
over,1;
for,1;
life-
time,1;
its
methods,1;
return,1;
of
those,1;
gives,1;
an,1;
iterator,1;
over,1;
string,1;
by,1;
string.
struct,1;
StrSplit<'s,,1;
'p>,1;
&'s,1;
'p>,1;
for,1;
StrSplit<'s,,1;
'p>,1;
&'s,1;
str;
fn,1;
&str,,1;
c:,1;
char),1;
Option<&str>,1;
{
StrSplit,1;
delimiter:,1;
over,1;
lifetimes
When,1;
docu-
ment,1;
string,1;
When,1;
ask
for,1;
reference,1;
document.,1;
iterator,1;
str_before,1;
write:,1;
return,1;
function—the,1;
pro-
duced,1;
by,1;
borrow,1;
checker,1;
exposed,1;
rarely
know,1;
because,1;
mostly,1;
invisible.,1;
At,1;
types,1;
types,1;
subtype,1;
supertype,1;
subtype,1;
another,1;
least,1;
useful,1;
an,1;
subtype,1;
or,1;
subtype,1;
more,1;
an,1;
Similarly,,1;
because,1;
least,1;
Or,,1;
more,1;
subtype,1;
obviously,1;
practical,1;
types,1;
types,1;
three,1;
covariant,1;
example,,1;
because,1;
covariant,1;
covariant,1;
&Vec<&'a,1;
types,1;
an,1;
Vec<&'static,1;
That,1;
If,1;
could,,1;
string,1;
string,1;
Any,1;
for,1;
Cell<T>,1;
for,1;
arguments.
Function,1;
types,1;
more,1;
useful,1;
being
less,1;
arguments:
let,1;
str;,1;
more,1;
longer
let,1;
&'a
str;,1;
shorter
fn,1;
take_func2(&'a,1;
more,1;
indicates,1;
why,1;
param-
eters,1;
interact,1;
borrow,1;
like,1;
field.
struct,1;
{
s:,1;
mut,1;
mut,1;
"hello";
1,1;
*MutStr,1;
s:,1;
s);
Listing,1;
over,1;
first,1;
here,1;
unnecessary—we,1;
borrow,1;
different,1;
1-10.,1;
the
16
Chapter,1;
here,1;
'a,,1;
no,1;
all
because,1;
syntax,1;
may,1;
seem,1;
alien.,1;
x,1;
there’s,1;
no,1;
dropped,1;
If,1;
borrow,1;
string,1;
If,1;
'a,,1;
later,1;
string,1;
reference,1;
tries,1;
borrow,1;
by,1;
allow,1;
borrow,1;
println,,1;
on,1;
borrow,1;
so,,1;
borrow,1;
shortened,1;
(&'a,1;
covariant,1;
here,1;
behind,1;
Invariance,1;
never
replaced,1;
or,1;
compiler’s,1;
fails,,1;
reduced,1;
by,1;
want,1;
types,1;
covariant,1;
over,1;
If,1;
weigh,1;
another,1;
aim,1;
been,1;
on,1;
now,,1;
firm,1;
on,1;
memory,1;
model,,1;
errors,1;
may,1;
borrow,1;
checker,1;
seem,1;
covered,1;
hopefully,1;
more,1;
holistic,1;
over,1;
types,1;
memory,,1;
gener-
ics,1;
traits,1;
produce,1;
trait,1;
for,1;
more,1;
past,1;
covered,1;
instead,1;
different,1;
types,1;
traits,1;
trait,1;
for,1;
types,1;
most,1;
example,,1;
itself
until,1;
When,1;
number,1;
When,1;
i8,,1;
When
you,1;
compiler’s,1;
each
part,1;
for,1;
each,1;
struct,1;
for,1;
stored?,1;
understand,1;
more,1;
because,1;
affect,1;
correctness,1;
first,1;
dictates,1;
for,1;
been,1;
arbitrary,1;
memory,1;
hardware,1;
placed.,1;
most,1;
obvious,1;
If,1;
placed,1;
no,1;
location;,1;
or,1;
boundary.,1;
We,1;
least,1;
placed,1;
an,1;
a
multiple,1;
bits.
Some,1;
more,1;
memory,1;
system,,1;
memory,1;
byte.,1;
example,,1;
on,1;
most,1;
each,1;
address.,1;
reading,1;
or,1;
want,1;
hardware,1;
operate,1;
To,1;
try,1;
read,1;
starts,1;
an,1;
8-byte,1;
hardware,1;
sec-
ond,1;
first,1;
second,1;
read,1;
i64—and,1;
splice,1;
very,1;
Since,1;
spread,1;
underlying,1;
memory,,1;
may,1;
memory,1;
reading,1;
concurrently,1;
by,1;
read,1;
first,1;
second,1;
corrupted,1;
on,1;
concurrency,1;
operations,1;
or,1;
for,1;
example,,1;
for,1;
an,1;
8-byte,1;
load,,1;
the
provided,1;
faster,1;
con-
sistency,1;
semantics,,1;
tries,1;
It,1;
by,1;
every,1;
an,1;
on,1;
types,1;
size,,1;
2-byte-aligned,,1;
contain
other,1;
assigned,1;
example,,1;
be
4-byte-aligned,1;
because,1;
on,1;
default,,1;
shortly,,1;
gives,1;
very,1;
for,1;
for,1;
underlying,1;
principles.,1;
request,1;
for,1;
most,1;
or,1;
languages,1;
foreign-function,1;
interface,,1;
Since,1;
subject,1;
useful,1;
or,1;
different,1;
types,1;
And,,1;
for,1;
first,1;
useful,1;
repr(transparent),,1;
on,1;
outer,1;
the
same,1;
handy,1;
“newtype”
­pattern,,1;
may,1;
want,1;
operate,1;
on,1;
some
struct,1;
struct,1;
repr(transparent),,1;
the
Rust,1;
layout.
So,,1;
lay
this,1;
memory?
#[repr(C)]
struct,1;
Alignment,1;
sees,1;
or
false).,1;
memory,1;
operate,1;
Next,,1;
want,1;
even,1;
aligned,,1;
To,1;
an,1;
code—into,1;
1-byte,1;
offset,1;
struct,1;
small,1;
though.,1;
We,1;
If,1;
want,1;
another,1;
padding,1;
for,1;
26,1;
fields,
we,1;
rule,1;
here,1;
to
use,1;
fields,,1;
long.,1;
placed,1;
say,,1;
an,1;
adds,1;
padding,1;
legacy,1;
fields
in,1;
order,1;
struct,1;
repr(Rust),1;
removes,1;
lesser,1;
such,1;
That,1;
even,1;
different,1;
fields,,1;
order,,1;
fields,,1;
order,1;
no,1;
fields;,1;
achieve,1;
necessary
alignment!,1;
why,1;
by,1;
by,1;
more,1;
rearrange
things,,1;
produce,1;
more,1;
there’s,1;
want,1;
padding,1;
most,1;
case,1;
for,1;
every,1;
memory,1;
such,1;
very,1;
limited,1;
memory,,1;
or,1;
over,1;
like,1;
To,1;
may,1;
and
in,1;
extreme,1;
cause,1;
program,1;
try,1;
supports,1;
on,1;
want,1;
or,1;
case,1;
for,1;
contiguously,1;
memory,1;
an,1;
differ-
ent,1;
lines,1;
on,1;
That,1;
concurrent,1;
programs.,1;
False,1;
occurs,1;
different,1;
CPUs,1;
different,1;
while,1;
theoretically,1;
operate,1;
they
both,1;
concurrency,1;
detail,1;
10.
Complex,1;
represents,1;
types,1;
Here’s,1;
like,1;
struct,1;
the
tuple,1;
contiguous,1;
no,1;
padding,1;
for,1;
each,1;
Alignment,1;
on,1;
may,1;
trait,1;
documentation,1;
Usually,,1;
types,1;
compile,1;
time—but,1;
not:,1;
trait,1;
If,1;
for,1;
example,,1;
Their,1;
on,1;
program,1;
time,,1;
why,1;
dynamically,1;
types,1;
whether,1;
received,1;
this
200-byte,1;
struct,1;
or,1;
8-byte,1;
struct.,1;
presents,1;
order,1;
produce,1;
valid,1;
Iterator,
[u8],,1;
or,1;
offset,1;
tries,1;
available.
The,1;
types,1;
return,1;
values,,1;
array,1;
types,1;
every,1;
includes,1;
explicitly,1;
?Sized,1;
pretty,1;
unhelpful,1;
like,1;
want,1;
trait,1;
or,1;
an,1;
argument.
The,1;
bridge,1;
unsized,1;
types,1;
place
unsized,1;
types,1;
behind,1;
(also,1;
like,1;
pointer,,1;
includes,1;
an,1;
field
that,1;
gives,1;
compiler
needs,1;
for,1;
When,1;
reference,1;
automatically,1;
for,1;
trait,1;
object—well,,1;
twice,1;
usize,1;
(the,1;
platform):,1;
usize,1;
for,1;
holding,1;
pointer,,1;
usize,1;
for
holding,1;
why,1;
key,1;
system—they,1;
interoperate,1;
even,1;
don’t,1;
each,1;
the
time,1;
great,1;
traits,,1;
over,1;
more,1;
aspects,1;
traits:
how,1;
now,,1;
Rust.
You’ve,1;
on,1;
types,1;
trait,1;
here,1;
there.,1;
compile,1;
or,1;
trait,1;
on,1;
or,1;
over,1;
really
telling,1;
or,1;
for,1;
each,1;
type
T.,1;
When,1;
Vec<i32>,1;
or,1;
bool>,,1;
blocks
and,1;
each,1;
It,1;
every,1;
every,1;
actually,1;
It,1;
on,1;
for,1;
thing,1;
p:,1;
Pattern),1;
bool,1;
for,1;
every,1;
for,1;
We,1;
different,1;
for,1;
each,1;
because,1;
knows,1;
implements,1;
trait,1;
method.,1;
no,1;
for,1;
for,1;
each,1;
each,1;
dispatch,,1;
for,1;
to”,1;
known
statically.
NOTE
You,1;
may,1;
noticed,1;
“static”,1;
compile,1;
time,,1;
or,1;
memory,,1;
1.
This,1;
monomorphization,,1;
part,1;
performs,1;
well,1;
code.,1;
starts,1;
no,1;
instance,1;
types,1;
As
a,1;
traits,1;
present.,1;
types,1;
involved,1;
even,1;
wishes.
Monomorphization,1;
separately,,1;
compile,1;
Each,1;
because,1;
aren’t,1;
different,1;
effectively,1;
example,,1;
key,1;
on,1;
key,1;
map,,1;
may,1;
like
this,,1;
more,1;
for,1;
actually,1;
for,1;
like,1;
declare,1;
inside,1;
performs,1;
operations.
This,1;
leaves,1;
for,1;
for,1;
shared.
Making,1;
an,1;
benefit,1;
such,1;
don’t,1;
be
monomorphized.
The,1;
dispatch,,1;
trait,1;
on,1;
program,1;
order,1;
trait,1;
on,1;
dispatch,,1;
If,1;
for,1;
method.,1;
gives,1;
memory,1;
or,1;
for,1;
the
type,1;
is_contained_in.,1;
When,1;
inside,1;
trait,1;
on,1;
looks,1;
address.,1;
If,1;
want,1;
an,1;
an,1;
looks,1;
an,1;
no,1;
longer
know,1;
compile,1;
don’t,1;
for,1;
Trait
is,1;
To,1;
behind,1;
(which,1;
Since,1;
we
also,1;
addresses,,1;
pointer,,1;
holds,1;
for,1;
dispatch,,1;
such
as,1;
of
Listing,1;
2-2.
impl,1;
p:,1;
Pattern),1;
bool,1;
dispatch
The,1;
implements,1;
trait,1;
trait,1;
traits,1;
turned,1;
trait,1;
example,,1;
turned,1;
trait,1;
If,1;
trait,1;
on,1;
Or,,1;
trait,1;
over,1;
iterator,1;
may,1;
it).,1;
If,1;
no,1;
for,1;
trait,1;
for,1;
every,1;
traits,1;
may
not,1;
turned,1;
trait,1;
To,1;
none,1;
or,1;
trait,1;
first,1;
instance,1;
It,1;
clear,,1;
for,1;
example,,1;
reading,1;
trait,1;
may,1;
Such,1;
trait,1;
on,1;
require,1;
trait,1;
dispatch,,1;
or,1;
on,1;
unavailable,1;
trait,1;
is
accessed,1;
trait,1;
trait,1;
cuts,1;
compile,1;
no,1;
compile,1;
types,1;
prevents,1;
for,1;
types,1;
for,1;
insert,1;
no,1;
perform,1;
sit,1;
on,1;
every,1;
on,1;
trait,1;
a
lookup,1;
adds,1;
small,1;
over,1;
choice,1;
rarely,1;
you’ll
want,1;
want,1;
allow,1;
kind,1;
for,1;
don’t,1;
If,1;
dispatch,,1;
dispatch,,1;
whether,1;
or,1;
In
a,1;
on,1;
leaves,1;
param-
eters,1;
compile,1;
more,1;
choice,1;
for,1;
Traits
Rust,1;
traits,1;
ways:,1;
like
trait,1;
or,1;
types,1;
like,1;
trait,1;
luckily,1;
rule,1;
an,1;
trait,1;
for,1;
otherwise.
The,1;
for,1;
types,1;
allow,1;
types,1;
can.
With,1;
specify,1;
on,1;
parameters.,1;
hard,1;
If,1;
of
that,1;
trait,1;
multiple
implementations,1;
trait,1;
may,1;
for,1;
may,1;
hard,1;
instance,1;
trait,1;
like,1;
trait,1;
times,1;
example,,1;
mul-
tiple,1;
types,1;
for,1;
or,1;
both
FromIterator<T>,1;
because,1;
traits,1;
on,1;
implements,1;
types,1;
trait,1;
repeated,1;
on,1;
trait,1;
further,1;
types,1;
And
because,1;
dictates,1;
types,1;
have
to,1;
disambiguate,1;
syntax,1;
paragraph.,1;
Target
types,,1;
different,1;
Orphan,1;
traits,1;
types,1;
property:,1;
for,1;
choice,1;
for,1;
for,1;
that
type.,1;
To,1;
why,1;
trait,1;
for,1;
bool,1;
from
the,1;
for,1;
tries,1;
bool,1;
crate,,1;
whether,1;
or,1;
choice,1;
cor-
rect,1;
or,1;
obviously,1;
occurs,1;
library,1;
involved,1;
instead,1;
on,1;
each,1;
they
both,1;
trait,1;
for,1;
coherence,1;
has
to,1;
choices:,1;
obvious,1;
coherence,1;
trait,1;
for,1;
no,1;
no,1;
conflicting,1;
traits,1;
no,1;
like,1;
serde::Serialize,1;
for,1;
opposite
extreme,,1;
traits,1;
for,1;
types,
solves,1;
trait,1;
for,1;
types,1;
library,1;
or,1;
like,1;
for,1;
traits,1;
for,1;
types,1;
for,1;
crates
to,1;
traits,1;
breaking
downstream,1;
on,1;
code.,1;
Often,,1;
a
codebase—if,1;
rule,1;
balance,1;
orphan,1;
orphan,1;
rule,1;
trait,1;
for,1;
trait,1;
or,1;
for,1;
cannot
implement,1;
for,1;
bool.,1;
If,1;
conflicting,1;
pretty,1;
traits,1;
types,1;
traits,1;
for,1;
types.
However,,1;
orphan,1;
rule,1;
exceptions,1;
Implementations
The,1;
orphan,1;
rule,1;
traits,1;
over,1;
types,1;
code
like,1;
for,1;
limited,1;
instead,1;
trait,1;
imple-
mentation,,1;
an,1;
trait,1;
If,1;
for,1;
because,1;
the
crate,1;
an,1;
conflicting,1;
implementation.
Fundamental,1;
Types
Some,1;
types,1;
necessary,1;
allow,1;
on,1;
even,1;
seemingly,1;
violates,1;
orphan,1;
types
are,1;
&mut,
and,1;
orphan,1;
types,1;
may,1;
effectively,1;
orphan,1;
rule,1;
order,1;
allow,1;
for,1;
example,,1;
IntoIterator,1;
for,1;
&MyType.
With,1;
orphan,1;
implements,1;
trait,1;
for,1;
Adding,1;
change.
Covered,1;
Implementations
There,1;
limited,1;
want,1;
allow,1;
implementing,1;
trait,1;
for,1;
orphan,1;
rule,1;
want,1;
like,1;
for,1;
Here,,1;
From,1;
trait,1;
foreign,,1;
no,1;
violating,1;
because,1;
library,1;
(the,1;
library,1;
allow,1;
orphan,1;
rule,1;
includes
a,1;
implementing,1;
traits,1;
for,1;
types,1;
very,1;
ForeignTrait<T1..=Tn>,1;
for,1;
least,1;
no,1;
first,1;
such,1;
covered,1;
by,1;
intermediate,1;
covered,1;
on,1;
T),1;
or,1;
behind,1;
like,1;
From<T>,1;
for,1;
From<T>,1;
for,1;
for,1;
for,1;
traits,1;
for,1;
2However,,1;
for,1;
From<T>,1;
for,1;
for,1;
for,1;
From<T>,1;
for,1;
for,1;
traits,1;
for,1;
relaxation,1;
orphan,1;
rule,1;
for,1;
new,1;
for,1;
an,1;
exist-
ing,1;
trait.,1;
new,1;
an,1;
least,1;
new,1;
new
local,1;
satisfies,1;
for,1;
earlier.,1;
new,1;
ForeignTrait<LocalType,,1;
for,1;
for,1;
may,1;
seem,1;
arbi-
trary,,1;
LocalType>
for,1;
ForeignType,,1;
another,1;
ForeignTrait<TheirType,,1;
T>
for,1;
ForeignType,,1;
orphan,1;
rule,1;
that
your,1;
parameter,,1;
coherence,1;
library,1;
flush,1;
trait,1;
whether,1;
or,1;
When,1;
yourself,,1;
it
will,1;
trait,1;
more,1;
more,1;
fidelity,1;
achieve,1;
trait,1;
form,1;
or,1;
arbitrary,1;
even,1;
types,1;
or,1;
like,1;
even,1;
no,1;
on,1;
more,1;
intricate,1;
example,,1;
and
whose,1;
usize,,1;
instead,1;
like,1;
BuildHasher,1;
usize,,1;
looking,1;
requirements
Types
31for,1;
more,1;
the
“true”,1;
code.,1;
on,1;
underlying,1;
want,1;
trait,1;
for,1;
example,,1;
consider
what,1;
try,1;
derive,1;
for,1;
an
Arc<T>.,1;
implements,1;
whether,1;
implements,1;
an,1;
needed.
If,1;
may,1;
become,1;
it!,1;
At,1;
how
#[derive(Clone)],1;
by,1;
library,1;
works,,1;
future.
Sometimes,,1;
want,1;
on,1;
types,1;
types,1;
an,1;
example,,1;
iterator,1;
which
takes,1;
an,1;
iterator,1;
an,1;
iterator,1;
over,1;
I,,1;
outer,1;
implements,1;
implements,1;
To,1;
enable,1;
this,,1;
types,1;
example,,1;
types,1;
by,1;
such,1;
disambiguate,1;
syntax,1;
Using,1;
this,,1;
for,1;
for,1;
outer,1;
may,1;
the
lifetime,1;
for,1;
want,1;
bound
to,1;
reference,1;
implements,1;
trait,1;
for,1;
lifetime.”,1;
higher-ranked,1;
trait,1;
particularly,1;
useful,1;
example,,1;
want,1;
reference,1;
reference,1;
inside,1;
If,1;
for,1;
refer-
ences,,1;
want,1;
output,1;
Using,1;
higher-ranked,1;
T),1;
for,1;
'a,,1;
automatically,1;
adds,1;
for,1;
like,1;
this,,1;
for,1;
form,1;
exceedingly,1;
rarely,1;
library,1;
three,1;
for,1;
iterated,1;
over,1;
for,1;
{
fn,1;
Result<(),,1;
for,1;
collection
You,1;
for,1;
pretty,1;
may,1;
want,1;
smarter,1;
power,1;
trait,1;
traits,1;
types,1;
by,1;
formatted,1;
for,1;
by,1;
traits,1;
traits,,1;
instead,1;
implementing,1;
no,1;
or,1;
types,1;
or,1;
example,,1;
safe,1;
If,1;
safe,1;
fact,1;
library,1;
number,1;
Copy),1;
automatically,1;
implements,1;
for,1;
types,1;
traits,1;
an,1;
allow,1;
code.,1;
no,1;
is
Send.,1;
traits,1;
no,1;
of
checking,1;
It,1;
read,1;
very,1;
not
something,1;
like,1;
That,1;
traits,1;
types,1;
(like
struct,1;
no,1;
no,1;
methods.,1;
types
are,1;
useful,1;
handy,1;
want,1;
for,1;
API.,1;
example,,1;
like,1;
may,1;
or,1;
may
not,1;
been,1;
and
Authenticated.,1;
When,1;
first,1;
method:,1;
for,1;
commands
and,1;
We,1;
further,1;
Types
In,1;
very,1;
rarely,1;
specify,1;
types,1;
variables,1;
declare,1;
or,1;
types,1;
because,1;
inference,,1;
on,1;
evaluates,1;
types,1;
for,1;
variables,1;
for,1;
return,1;
like,1;
traits,,1;
trait,1;
require,1;
for,1;
this,,1;
least,1;
from.,1;
or,1;
even,1;
pos-
sible,,1;
type!,1;
example,,1;
return,1;
func-
tion,,1;
or,1;
an,1;
trait,1;
like,1;
this,,1;
supports,1;
existential,1;
existential,1;
types,1;
action.,1;
functions,1;
or,1;
return,1;
an,1;
existential,1;
return,1;
implements,1;
on,1;
implementing,1;
traits,,1;
on,1;
return,1;
propagate,1;
auto-traits,1;
like,1;
impl
Trait,1;
return,1;
position.,1;
more,1;
gives,1;
existential,1;
types,1;
usu-
ally,1;
by,1;
on,1;
the
function.
34
Chapter,1;
existential,1;
If,1;
impl
Trait,1;
for,1;
for,1;
an
unnamed,1;
example,,1;
mostly,1;
syntax,1;
for,1;
types,1;
handy,1;
particularly,1;
example,,1;
implementing,1;
the
IntoIterator,1;
trait.,1;
It,1;
an,1;
holds,1;
iterator,1;
question,1;
turned,1;
into.,1;
iterator,1;
for,1;
Iterator<Item,1;
an,1;
inside,1;
evaluates,1;
an
Iterator,,1;
such,1;
by,1;
over,1;
iterator,1;
types,1;
beyond,1;
perform,1;
exporting,1;
because,1;
public,1;
existential,1;
types,1;
underlying,1;
traits,1;
while,1;
an,1;
simplify,1;
interface,,1;
wish,1;
types,1;
memory,1;
types,1;
themselves.,1;
complex,1;
asynchronous,1;
later,1;
You’ll,1;
cover,1;
chapter.
Types
353
DE,1;
G,1;
G,1;
S
Every,1;
no,1;
or,1;
an,1;
API.,1;
fact,,1;
like,1;
an,1;
or,1;
command,1;
interface,,1;
like,1;
public,1;
inter-
face.,1;
every,1;
module
boundary,1;
grows,1;
even,1;
over
time,1;
most,1;
whether,1;
or,1;
each,1;
turn,
to,1;
for,1;
interfaces.I,1;
Guidelines,1;
(https://
rust-lang.github.io/api-guidelines/),1;
read,1;
chapter.,1;
There’s
an,1;
checklist,1;
each
recommendation.,1;
also
checked,1;
by,1;
on,1;
aren’t,1;
already.,1;
read,1;
on,1;
(https://doc.rust-lang.org/cargo/­
reference/semver.html),,1;
cover,1;
engineering,,1;
holds,1;
be.,1;
they
don’t,1;
different,1;
power,1;
for,1;
traits,,1;
first,1;
fields,,1;
If,1;
things—say,,1;
common),1;
inter-
faces,,1;
assumptions,1;
gives,1;
an,1;
into_inner,1;
kind,1;
implements,1;
for,1;
purpose,,1;
for,1;
allow,1;
more,1;
different,1;
corollary,1;
fact,1;
work
the,1;
example,,1;
or,1;
write
incorrect,1;
on,1;
your
interface,1;
When,1;
for,1;
another,1;
most,1;
traits,1;
even,1;
not
need,1;
coherence,1;
allow,1;
traits,1;
them.,1;
trait,1;
for,1;
like,1;
instead,1;
even,1;
may,1;
traits,1;
trait.,1;
Nearly,1;
every,1;
even,1;
trait,1;
traits,1;
automatically,1;
for,1;
parameters.,1;
by,1;
helpers,1;
on,1;
second,1;
auto-traits,1;
(and,,1;
a
lesser,1;
Unpin).,1;
If,1;
traits,,1;
for,1;
very,1;
good,1;
placed,1;
even,1;
transitively,1;
an,1;
pool.,1;
an,1;
or,1;
types,1;
these
contexts,,1;
especially,1;
asynchronous,1;
on,1;
become,1;
don’t,1;
that
your,1;
types,1;
If,1;
types,1;
sure,1;
fact,,1;
well,1;
traits,1;
traits,1;
or,1;
for,1;
most,1;
If,1;
sure,1;
more,1;
types,1;
fit.
If,1;
cannot,,1;
further,1;
traits,1;
PartialOrd,,1;
trait,1;
because,1;
two
instances,1;
wish,1;
or,1;
for,1;
instance,1;
implementing,1;
enable,1;
more,1;
may,1;
want,1;
too.,1;
is
especially,1;
for,1;
types,1;
key,1;
map,,1;
or,1;
require,1;
require-
ments,1;
on,1;
implementing,1;
operations,1;
beyond,1;
well,1;
traits,,1;
sure,1;
actually,1;
for,1;
most,1;
even,1;
for,1;
overwriting,1;
or,1;
Since,1;
crate,,1;
wish,1;
on,1;
adds,1;
for,1;
wondering,1;
why,1;
derivable,1;
trait,1;
Copy
in,1;
apart,1;
first,1;
types,1;
contrary,,1;
want,1;
of
something,,1;
clone.,1;
changes,1;
surprise,1;
very,1;
for,1;
because,1;
starts,1;
or,1;
rarely,1;
commitment.
Ergonomic,1;
automatically,1;
traits,1;
for,1;
types,1;
To,1;
different,1;
T),1;
even,1;
because,1;
or,1;
obviously,1;
be
called,1;
on,1;
very,1;
sees,1;
new,1;
want,1;
appropriate,1;
for,1;
trait,1;
for,1;
Trait,,1;
Box<T>,1;
may,1;
on,1;
receivers,1;
traits,1;
library,1;
implemen-
tations,,1;
because,1;
for,1;
another,1;
case,1;
want,1;
on,1;
be
iterated,1;
implementing,1;
IntoIterator,1;
for,1;
for,1;
well,1;
like,1;
expect.
Wrapper,1;
AsRef,1;
like,1;
traits,1;
allow,1;
on,1;
by,1;
on,1;
T-typed,1;
Deref<Target,1;
U>.
This,1;
like,1;
transparent,1;
there’s,1;
chance,1;
want,1;
by,1;
If,1;
require,1;
complex,1;
or,1;
logic,,1;
implementing,1;
an,1;
most,1;
want,1;
Into<InnerType>,1;
or,1;
may,1;
very,1;
AsRef,1;
different,1;
Borrow
is,1;
for,1;
case:,1;
any
one,1;
It,1;
could,,1;
been,1;
Equivalent,1;
example,,1;
for,1;
or,1;
been,1;
achieved,1;
safe,1;
implements,1;
implementing,1;
for,1;
convenient,1;
trait,1;
or,1;
type.
In,1;
general,,1;
for,1;
equiva-
lent,1;
another,1;
AsRef,1;
more,1;
for,1;
ME,1;
dot,1;
operator,1;
on,1;
example,,1;
T,
it,1;
clear,1;
whether,1;
t.frobnicate(),1;
or,1;
underlying,1;
types,1;
allow,1;
for,1;
even,1;
may,1;
on,1;
cause,1;
issues.,1;
form,1;
frobnicate(t:,1;
That,1;
way,
t.frobnicate(),1;
U::frobnicate,,1;
T::frobnicate(t),1;
includes,,1;
or,1;
on,1;
while,1;
When,1;
new,1;
interface,,1;
want,1;
contract.,1;
good,1;
Adding,1;
or,1;
promises,1;
usually
requires,1;
or,1;
on,1;
compatible.
In,1;
form,1;
trait,1;
promises,1;
form,1;
trait,1;
return,1;
example,,1;
three,1;
str>
fn,1;
different,1;
three,1;
string,1;
return,1;
very,1;
different,1;
first,1;
string,1;
form,1;
promises,1;
return,1;
an,1;
return,1;
later,1;
way.
The,1;
second,1;
contract:,1;
any
reference,1;
no,1;
or,1;
It,1;
promises,1;
std::borrow::Cow,,1;
return,1;
string,1;
reference,1;
or,1;
an,1;
here,1;
return,1;
Cow,,1;
cannot,,1;
say,,1;
string,1;
&str,,1;
say,,1;
pre-existing,1;
It,1;
produce,1;
reference,1;
promises,1;
return,1;
produce,1;
reference,1;
others.,1;
If,1;
need
ownership,1;
string,1;
first,1;
an,1;
string,1;
If,1;
want,1;
allow,1;
advan-
tage,1;
case,1;
an,1;
string,1;
sec-
ond,1;
return,1;
may,1;
good,1;
want,1;
because,1;
fact
can,1;
for,1;
obvious,1;
on,1;
types
they,1;
code.,1;
If,1;
explicitly,1;
Foo,,1;
no,1;
most,1;
pays,1;
allow,1;
conforms,1;
actually,1;
needs,,1;
3-1,1;
an,1;
kind,1;
follow,1;
errors,1;
every,1;
argu-
ment,1;
every,1;
hard,1;
hard,1;
no,1;
for,1;
or,1;
good,1;
rule,1;
an,1;
you
can,1;
types,1;
want,1;
may,1;
remember,1;
for
every,1;
types,1;
here,1;
too.
For,1;
by,1;
reference,1;
anyway,1;
(recall,1;
them),,1;
instance,
instead,1;
AsRef<str>.
Before,1;
choice,1;
on,1;
If,1;
you’re
applying,1;
performance-sensitive,,1;
fine.,1;
library,1;
high-performance,1;
loop,1;
may,1;
Second,,1;
trait,1;
or,1;
AsRef<str>.,1;
more,1;
complex,1;
finally,,1;
remember,1;
can
always,1;
by,1;
trait,1;
true:,1;
trait,1;
must
provide.
It,1;
may,1;
types,1;
over,1;
work,,1;
that
such,1;
changes,1;
To,1;
imagine
that,1;
impl
AsRef<[usize]>).,1;
every,1;
implements,1;
type
Designing,1;
cause,1;
for,1;
the
caller,1;
version,,1;
implements,1;
such,1;
no,1;
Safety
When,1;
new,1;
whether,1;
or,1;
trait,1;
(see,1;
the
end,1;
2),1;
an,1;
part,1;
contract.,1;
If,1;
trait,1;
different,1;
trait,1;
If,1;
for,1;
trait.,1;
even,1;
over,1;
new,1;
If,1;
trait,1;
whether,1;
on,1;
trait,1;
the
object,1;
trait.,1;
instance,1;
trait,1;
see
examples,1;
Read,1;
traits,,1;
convenience,1;
on,1;
no,1;
answer,1;
question,1;
trait,1;
whether,1;
want,1;
trait,1;
If,1;
want,1;
different,1;
trait,1;
don’t,1;
example,,1;
trait,1;
because,1;
so
you,1;
trait,1;
first,1;
Similarly,
std::io::Seek,1;
trait,1;
on,1;
because,1;
only
thing,1;
such,1;
trait,1;
being
able,1;
read,1;
or,1;
OBJEC,1;
Drop,1;
trait,1;
trait,1;
Drop,1;
trait,1;
want,1;
arbitrary,1;
library,1;
values,,1;
such,1;
for,1;
or,1;
cleanup,,1;
cares,1;
3be,1;
dropped,,1;
there;,1;
trait,1;
objects
too,,1;
every,1;
method.,1;
every,1;
part,1;
public,1;
trait,1;
an,1;
such
as,1;
by,1;
trait,1;
bump,1;
vs.,1;
every,1;
whether,1;
or,1;
reference,1;
for,1;
interface.
Luckily,,1;
very,1;
such,1;
to
call,1;
or,1;
another,1;
When,1;
by,1;
reference,1;
them.,1;
leaves,1;
the
caller,1;
operate,1;
on,1;
rule,1;
small,1;
types,1;
like,1;
or,1;
just
as,1;
wary,1;
assuming,1;
holds,1;
for,1;
though;
[u8;,1;
8192],1;
expensive,1;
over,1;
don’t,1;
whether,1;
or,1;
example,,1;
needs
to,1;
invalid,1;
operate,1;
on,1;
produce,1;
an,1;
reference,1;
pain,1;
If,1;
struggling,1;
compile,1;
on,1;
interface,,1;
sign,1;
want,1;
If,1;
this,,1;
or,1;
performance-sensitive,1;
Destructors
Types,1;
on,1;
I/O,1;
perform,1;
cleanup,1;
may,1;
files,,1;
or,1;
connections,1;
perform,1;
Drop,1;
once,1;
no,1;
errors,1;
by,1;
asynchronous,1;
wish,1;
finish
up,1;
no,1;
more,1;
We,1;
try,1;
another,1;
host,1;
such,1;
as
blocking,1;
asynchronous,1;
no,1;
no,1;
Drop,1;
best-effort,1;
cleanup,1;
If
cleanup,1;
least,1;
tried—we,1;
If,1;
cleanup,,1;
it
never,1;
for,1;
wish
to,1;
no,1;
We,1;
by,1;
an,1;
form,1;
exposes,1;
errors,1;
or,1;
resources.
NOTE
Make,1;
sure,1;
destructor,1;
there’s,1;
an,1;
issues.,1;
implements,1;
you
can,1;
no,1;
destructor.,1;
because,1;
destructor,1;
runs,
and,1;
no,1;
part,1;
been,1;
Drop,1;
destructor,1;
result,1;
self).,1;
none,1;
first,1;
Option,,1;
holds,1;
holds,1;
destructor,1;
been,1;
there.,1;
on,1;
through
the,1;
Option,1;
(which,1;
been,1;
on,1;
3The,1;
second,1;
workaround,1;
each,1;
takeable.,1;
an,1;
Option,1;
by,1;
(which,1;
types,1;
example,,1;
or,1;
by,1;
cheap-to-construct
default,1;
works
great,1;
types,1;
sane,1;
“empty”,1;
every,1;
an,1;
Option,1;
every,1;
matching,1;
inside,1;
there’s,1;
no,1;
for,1;
unwraps.,1;
destruction,1;
no,1;
don’t,1;
try,1;
inside,1;
or,1;
don’t,1;
If,1;
program,1;
silently,1;
on,1;
second,1;
sea,1;
Options.,1;
The
ManuallyDrop,1;
confident,1;
may,1;
aspects,1;
interface,,1;
understand,1;
rules
and,1;
or,1;
safe,1;
angle,1;
no,1;
past,1;
seconds.,1;
clear,1;
on,1;
documentation,1;
or,1;
read,1;
for,1;
for,1;
understand,1;
hard,1;
for,1;
for,1;
documentation,1;
each,1;
there’s,1;
more,1;
to
an,1;
eye.,1;
If,1;
sees,1;
chances,1;
read,1;
first,1;
transparent,1;
good,1;
an,1;
documen-
tation,,1;
on,1;
may,1;
or,1;
on,1;
beyond,1;
by,1;
good,1;
Interfaces
47these,1;
fact,,1;
along
with,1;
Similarly,,1;
an,1;
functions,
document,1;
order,1;
for,1;
safe.
Second,,1;
for,1;
on,1;
more,1;
for,1;
or,1;
for,1;
struc-
ture,,1;
developer,1;
may,1;
End-to-end,1;
for,1;
needs.,1;
by,1;
try,1;
method-specific,1;
new,1;
traits,,1;
for,1;
Take,1;
If,1;
documentation,1;
on,1;
trait,1;
B,,1;
trait,1;
there.,1;
If,1;
for,1;
connections,1;
or,1;
public,1;
for,1;
legacy,1;
finally,,1;
documentation,1;
structures,,1;
aspects,1;
may,1;
good,1;
great,1;
for,1;
this,,1;
why,1;
the
documentation,1;
Use,1;
types,1;
may,1;
for,1;
by.
In,1;
modules,
features,,1;
traits,,1;
Guidance
The,1;
an,1;
tool,1;
techniques,1;
very,1;
hard,1;
misuse,,1;
more,1;
first,1;
types,1;
for,1;
Booleans:,1;
three,1;
bool,1;
3are,1;
order,1;
wrong.,1;
If,,1;
on,1;
wrong,1;
work,,1;
Overwrite::No,1;
argument.,1;
beyond,1;
Booleans,1;
example,,1;
may,1;
for,1;
or,1;
been,1;
returned,1;
by,1;
another
method.
A,1;
types,1;
fact,1;
an,1;
instance,1;
for,1;
represents,1;
state,1;
on,1;
no,1;
state,1;
It,1;
for,1;
launch,1;
been,1;
Similarly,,1;
fuel,1;
We,1;
every,1;
3-2,,1;
parameter
on,1;
Rocket,,1;
restrict,1;
struct,1;
Rocket<Stage,1;
std::marker::PhantomData<Stage>,
}
3,1;
for,1;
Rocket<Grounded>,1;
Rocket<Grounded>,1;
accelerate(&mut,1;
decelerate(&mut,1;
}
}
5,1;
Using,1;
types,1;
restrict,1;
types,1;
each,1;
We,1;
behind,1;
eliminated,1;
at
compile,1;
for,1;
when
it,1;
holds,1;
on,1;
now),,1;
launch,1;
been,1;
no,1;
wrong,1;
time—we,1;
encoded,1;
types,1;
themselves,,1;
illegal,1;
domains,1;
it’s
better,1;
an,1;
for,1;
no,1;
for,1;
holds,1;
encourage
you,1;
of.
Another,1;
small,1;
useful,1;
tool,1;
obvious,1;
#[must
_use],1;
Add,1;
or,1;
an,1;
or,1;
explicitly,1;
may,1;
Result,1;
return,1;
mistake,1;
return,1;
value.
Constrained
Over,1;
time,,1;
on,1;
every,1;
or,1;
especially,1;
for,1;
no,1;
over,1;
or,1;
trait,1;
or,1;
an,1;
want,1;
sure,1;
users’
code,,1;
planning,1;
for,1;
while.
Frequent,1;
changes,1;
increases,1;
sure,1;
users.
Many,1;
changes,1;
like,1;
renaming,1;
or,1;
public,1;
subtler,1;
deeply,1;
works.,1;
Here,,1;
cover,1;
changes,1;
for,1;
them.,1;
You’ll,1;
bal-
ance,1;
want,1;
something’s,1;
Modifications
Removing,1;
or,1;
renaming,1;
public,1;
To,1;
counter,1;
this,,1;
want,1;
visibility,1;
like,1;
more,1;
later,1;
without
breaking,1;
code.
50
Chapter,1;
3User,1;
on,1;
types,1;
more,1;
by,1;
public,1;
3-3,1;
of
that,1;
code.
//,1;
struct,1;
code
let,1;
3-3:,1;
public,1;
user’s
code,,1;
because,1;
constructor,1;
on,1;
struct,1;
bool,1;
code
fn,1;
bool,1;
{
matches!(u,,1;
})
}
Listing,1;
public,1;
too,,1;
because,1;
exhaustive,1;
logic,1;
It,1;
are
more,1;
fields,,1;
even,1;
struct,1;
even,1;
no,1;
valid,1;
for,1;
new,1;
these
issues.,1;
on
that,1;
great,1;
It,1;
by,1;
on,1;
exhaustive,1;
coherence,1;
multiple
implementations,1;
trait,1;
for,1;
Since,1;
may,1;
added,,1;
an,1;
trait,1;
holds,1;
for,1;
implementing,1;
trait,1;
for,1;
an,1;
trait,1;
for,1;
Interfaces
51trait,1;
or,1;
may,1;
simultaneously,1;
conflicting,1;
this
must,1;
trait,1;
traits,1;
for,1;
new,1;
no,1;
want,1;
trait,1;
for,1;
an,1;
To,1;
3-5.
//,1;
struct,1;
trait,1;
foo(&self),1;
note,1;
for,1;
crate2;,1;
on,1;
Foo2,1;
foo(&self),1;
Foo2,1;
for,1;
}
fn,1;
trait,1;
for,1;
an,1;
may,1;
cause,1;
for,1;
even,1;
new,1;
public
traits,,1;
wildcard,1;
imports,1;
(use,1;
particularly,1;
want,1;
instruct,1;
wildcard,1;
imports,1;
changes,1;
traits,1;
such,1;
or,1;
new,1;
method.,1;
new,1;
new,1;
“generally”,1;
here,,1;
because,1;
rules:,1;
sealed
trait,1;
by,1;
number,1;
changes,1;
new,1;
no,1;
trait,1;
for,1;
new,1;
know
the,1;
traits,1;
most,1;
for,1;
for,1;
types,1;
seal,1;
trait,1;
for,1;
restricts,1;
no,1;
traits,1;
restrict,1;
types,1;
such,1;
Stage,1;
seal,1;
trait,1;
for,1;
trait,1;
trait,1;
{}
2,1;
for,1;
for,1;
seal,1;
trait,1;
for,1;
trait,1;
trait,1;
seal,1;
Since,1;
trait,1;
the
underlying,1;
types,1;
ultimately,1;
seal,1;
trait,1;
sure,1;
fact,1;
not
get,1;
trait,1;
themselves!
Hidden,1;
changes,1;
part,1;
affect,1;
part,1;
exposes,1;
types,1;
new,1;
dependency
and,1;
say,,1;
an,1;
iterator,1;
on,1;
may,1;
the
same,1;
by,1;
no,1;
even,1;
an,1;
crate:,1;
part,1;
1.0,1;
no,1;
compile.,1;
different,1;
Therefore,,1;
interface.
To,1;
like,1;
this,,1;
types,1;
by,1;
very,1;
minimal,1;
promising,1;
changes,1;
breaking.
THE,1;
may,1;
wrong,1;
If,1;
why,1;
allow,1;
whether,1;
1.0,1;
or,1;
it?
The,1;
answer,1;
It,1;
boils,1;
fact,1;
compiler
does,1;
because,1;
types,1;
fields,,1;
To,1;
this,,1;
for,1;
Empty.,1;
different,1;
on,1;
whether,1;
1.0,1;
or,1;
other.
This,1;
crop,1;
changes,1;
crate.
Unfortunately,,1;
everywhere.
But,1;
Tolnay,1;
(the,1;
vast,1;
number,1;
neat,1;
kind,1;
new,1;
1.0,1;
on,1;
this,,1;
fact,1;
This,,1;
versa.,1;
because,1;
for,1;
types,1;
explicitly,1;
changes,1;
traits,1;
automatically,1;
for,1;
on,1;
most,1;
Unpin,,1;
issues.,1;
very,1;
nature,,1;
by,1;
every,1;
traits,1;
even,1;
propagate
through,1;
type-erased,1;
types,1;
like,1;
for,1;
traits,1;
automatically,1;
by
the,1;
automatically,1;
no,1;
public,1;
B,,1;
no,1;
That,1;
changes,1;
hard,1;
until,1;
no,1;
longer
works.,1;
To,1;
happen,,1;
good,1;
tests,1;
types,1;
implement
these,1;
traits,1;
3-8,1;
gives,1;
an,1;
such,1;
like.
fn,1;
implements,1;
tests,1;
If,1;
no,1;
implements,1;
auto-
trait,1;
DOCUMENTATION
The,1;
#[doc(hidden)],1;
public,1;
there.,1;
types,1;
by,1;
code.,1;
such,1;
interact,1;
general,,1;
#[doc(hidden)],1;
part,1;
insofar,1;
public,1;
for,1;
example,,1;
may,1;
whether,1;
Send
or,1;
part,1;
methods
and,1;
trait,1;
on,1;
traits,1;
part,1;
sure,1;
state,1;
for,1;
methods.,1;
whether,1;
for,1;
external,1;
or,1;
an,1;
different,1;
We,1;
covered,1;
errors,1;
34
ERROR,1;
chap-
ter,,1;
different,1;
represent,
handle,,1;
propagate,1;
failures,1;
each.,1;
different,1;
some
special,1;
require,1;
different,1;
Next,,1;
han-
dling,1;
errors,1;
noting,1;
for,1;
topic,1;
on,1;
on,1;
underlying,1;
techniques,1;
or,1;
fail,,1;
most,1;
question,1;
interact,1;
errors,1;
or,1;
an,1;
occurred,1;
on,1;
best
they,1;
To,1;
understand,1;
this,,1;
whether,1;
affect,1;
dictate,1;
different,1;
for,1;
That,1;
enumerate,1;
or,1;
the
caller,1;
error.,1;
example,,1;
library,1;
output,1;
like,1;
read,1;
other.,1;
for,1;
fail,,1;
and
return,1;
an,1;
Here,,1;
want,1;
or,1;
output,1;
example,,1;
an,1;
occurs,1;
on,1;
while,1;
streaming,1;
a
client,,1;
because,1;
output,1;
stream
errors,,1;
may,1;
an,1;
new,1;
connections,1;
complete,
whereas,1;
may,1;
require,1;
server,1;
case,1;
want,1;
enumerate,1;
needs
to,1;
different,1;
an,1;
each,1;
underlying,1;
cause,1;
for,1;
like,1;
includes,1;
encountered,1;
wrong,1;
possible.
When,1;
number,1;
play,1;
for,1;
of
interest,1;
an,1;
error.,1;
most,1;
dis-
plays,1;
error’s,1;
on,1;
return,1;
std::io::Error.
Second,,1;
error.,1;
trait.,1;
general,,1;
one-line
description,1;
wrong,1;
format,1;
provide
a,1;
more,1;
may,1;
cause,1;
such,1;
request,1;
older,1;
may,1;
been,1;
so
that,1;
If,1;
context.,1;
types,1;
very,1;
std::io::Error,1;
errors,1;
types,1;
such,1;
types,1;
most
immediate,1;
benefit,1;
more,1;
issues.,1;
It,1;
more,1;
type-erased,1;
Errors
Now,1;
different,1;
an,1;
decoding,1;
You
give,1;
library,1;
decode,,1;
gives,1;
manipulation,1;
methods.,1;
If,1;
decoding,1;
fails,,1;
understand,1;
whether,1;
cause,1;
or,1;
situation,,1;
even,1;
knows,1;
like,1;
this,,1;
library,1;
may,1;
instead,1;
want,1;
library,1;
because,1;
(including,1;
appropriate),,1;
might
internally,1;
more,1;
no,1;
Handling
59Exactly,1;
mostly,1;
exposes,1;
limited,1;
for,1;
displaying,1;
or,1;
like,1;
more,1;
fact,1;
an,1;
gener-
ally,1;
types,1;
mostly,1;
whether,1;
beyond,1;
error.,1;
That,1;
no,1;
present,1;
example,,1;
or,1;
number,1;
unrelated
errors,1;
inside,1;
such,1;
number,1;
or,1;
may,1;
want,1;
instead.
NOTE
In,1;
general,,1;
errors,1;
errors,1;
placed,1;
such,1;
or,1;
overall,1;
Result,1;
benefit,1;
type-erased,1;
errors,1;
errors,1;
different,1;
sources,1;
That,1;
type-erased,1;
errors,1;
an,1;
If,1;
...>,,1;
different,1;
inside,1;
on,1;
different,1;
turned,1;
type.
The,1;
on,1;
worth
spending,1;
more,1;
on,1;
useful,1;
for,1;
letting,1;
propagate,1;
an,1;
even,1;
an,1;
more,1;
gives,1;
at
runtime;,1;
limited,1;
case,1;
more,1;
to
turn,1;
underlying,1;
was
originally,1;
example,,1;
may,1;
want,1;
received,1;
std::io::Error,1;
kind,1;
If,1;
try,1;
downcast_ref,1;
an,1;
Option,,1;
whether,1;
or,1;
here,1;
downcast_ref,1;
If,1;
return,1;
kind,1;
whether,1;
library’s
type-erased,1;
errors,1;
more,1;
type-erased,1;
part,1;
public,1;
API.,1;
That,1;
library,1;
return,1;
different
error,1;
but
users,1;
may,1;
to
turn,1;
opinion,1;
on,1;
return,1;
for,1;
explicitly,1;
documented,,1;
an,1;
type-erased,1;
counter­
intuitively,1;
Therefore,,1;
for,1;
Error.
You,1;
may,1;
That,1;
whether,1;
library,1;
even,1;
trait,1;
Any,1;
implements,1;
downcast_ref,1;
for,1;
Any—how,1;
that
be,1;
okay?,1;
answer,1;
for,1;
trait,1;
type_id,,1;
return,1;
Similarly,,1;
Any,1;
Any,1;
for,1;
same.
In,1;
known,,1;
That,1;
downcast_ref,1;
needs.,1;
downcast_ref,1;
forwards
through,1;
for,1;
dynamically,1;
types,1;
(see,1;
2),1;
for,1;
underlying,1;
If,1;
behind,1;
dyn
Error,1;
or,1;
Any,1;
safe,1;
reference,1;
functions,1;
return,1;
meaningful,1;
functions,1;
return,1;
codebases,,1;
may,1;
Option<T>,1;
choices,1;
for,1;
return,1;
for,1;
such,1;
different,1;
()>,1;
indicates,1;
an,1;
retried,,1;
or,1;
an,1;
case,1;
or,1;
#[must_use],1;
on,1;
an,1;
Option,,1;
case,1;
actually,1;
trait.,1;
type-erased,1;
pain,1;
use
with,1;
?.,1;
struct,1;
for,1;
instead,1;
like,1;
server
loop,,1;
return,1;
an,1;
forever.,1;
return,1;
Result,1;
nonetheless,,1;
for,1;
trait,1;
functions,1;
like,1;
represents,1;
an,1;
instance,1;
by,1;
an,1;
loop,1;
or,1;
operations,1;
knows,1;
never
return.,1;
an,1;
or,1;
If,1;
return,1;
enter,1;
knows,1;
such,1;
by,1;
generating,1;
for,1;
an,1;
!>.,1;
knows,1;
vari-
ant,1;
even,1;
neat!
One,1;
case,1;
Here’s
its,1;
Any,1;
'static>>;
The,1;
as
we’ve,1;
more,1;
guarantee
at,1;
for,1;
vari-
ant,1;
std::thread::Result,1;
try,1;
there’s,1;
joining,1;
or,1;
formatted,1;
operator,1;
for,1;
or,1;
return,1;
for,1;
about.,1;
performs,1;
conversion,1;
From,1;
trait.,1;
In
a,1;
on,1;
where
E:,1;
appealing;,1;
4FROM,1;
INTO
The,1;
library,1;
conversion,1;
traits,,1;
are
From,1;
It,1;
From,,1;
been,1;
the
early,1;
due,1;
coherence,1;
Or,,1;
coherence,1;
want,1;
conversion,1;
for,1;
for,1;
From,1;
or,1;
for,1;
or,1;
for,1;
those
implementations!,1;
for,1;
covered,1;
coherence,1;
before
Rust,1;
trait,1;
fact,,1;
good,1;
traits,,1;
even,1;
It,1;
significantly,1;
or,1;
different,1;
exam-
ple,,1;
turned,1;
or,1;
Foo:,1;
string,1;
syntax,1;
or,1;
<_,1;
both.
Given,1;
may,1;
pretty,1;
From,,1;
and
use,1;
implements,1;
From,,1;
whether,1;
explicitly,1;
From,1;
or,1;
implements,1;
there.
Since,1;
when
Into,1;
for,1;
whether,1;
implements,1;
Into
is,1;
more,1;
whether,1;
implements,1;
operator,1;
From,,1;
because,1;
most,1;
types,1;
From,,1;
does
mean,1;
types,1;
instead,1;
may,1;
?.,1;
use
Into,,1;
away,,1;
for,1;
now.
Error,1;
second,1;
aspect,1;
operator,1;
for,1;
trait,1;
At,1;
been,1;
by,1;
read,1;
this,,1;
or,1;
very,1;
been,1;
Since,1;
details
haven’t,1;
been,1;
yet,,1;
an,1;
At,1;
Try,1;
state,1;
further,1;
or,1;
example,,1;
case,1;
an,1;
Ok(t),,1;
on,1;
by,1;
If,1;
an,1;
on,1;
executing,1;
produce,1;
don’t,1;
Try,1;
more,1;
types,1;
for,1;
example,,1;
follows,1;
a
Some(t),,1;
on,1;
instead,1;
more,1;
like,1;
Poll<T>,,1;
more,1;
When,1;
Try,1;
may,1;
types,1;
operator,1;
To,1;
example,,1;
Result<(),,1;
thing,1;
thing,1;
4-2:,1;
multi-step,1;
operator
This,1;
Any,1;
setup,1;
cause,1;
an,1;
return,1;
try,1;
try,1;
pretty,1;
like,1;
instead,1;
an,1;
We,1;
cleanup,,1;
Result<(),,1;
thing,1;
r,1;
try,1;
thing,1;
..
};
thing.cleanup();
r
}
Listing,1;
4-3:,1;
multi-step,1;
itself
64
Chapter,1;
on,1;
form,1;
covered,1;
types,1;
We,1;
may,1;
want,1;
each,1;
one
and,1;
each.,1;
We,1;
aspects,1;
operator,1;
even,1;
more,1;
useful,1;
forward.,1;
a
step,1;
management,,1;
well,1;
more,1;
complex,1;
workspaces,1;
on,1;
for,1;
by,1;
new,1;
about.,1;
for,1;
grows,1;
for,1;
getting,1;
or
you,1;
or,1;
strategy,1;
for,1;
the
Rust,1;
man-
age,1;
such,1;
things.
Features
Features,1;
tool,1;
for,1;
At,1;
functionality.,1;
no,1;
for,1;
three,1;
ways:,1;
enable,1;
crate,,1;
the
behavior,1;
code.,1;
crate,,1;
shouldn’t,1;
like
remove,1;
or,1;
types,1;
or,1;
developer,1;
such
as,1;
new,1;
or,1;
feature,,1;
shouldn’t,1;
their
crate,1;
If,1;
exclusive,1;
principle
quickly,1;
by,1;
on,1;
C,
and,1;
on,1;
another,1;
exclusive,1;
follow,1;
compiles,1;
compile,1;
on,1;
example,,1;
on,1;
each,1;
enable,1;
different,1;
compile,1;
or,1;
That,1;
for,1;
this,,1;
hard,1;
chances,1;
different,1;
compiles,1;
for,1;
tool,1;
helps,1;
an,1;
crate
named,1;
an,1;
compiles,1;
crate,,1;
compile,1;
by,1;
compile,1;
significantly).,1;
by,1;
explicitly,1;
such,1;
enable,1;
derive,1;
feature,,1;
5-2:,1;
dependency
Some,1;
more,1;
them.,1;
To,1;
this,,1;
for,1;
derive,1;
by,1;
default,,1;
while,1;
opting,1;
syn’s,1;
instead,1;
derive,1;
"1"
default-features,1;
"printing"]
optional,1;
Adding,1;
opting,1;
on,1;
explicitly,1;
the
default,1;
compile,1;
foo’s,1;
three,1;
no,1;
others.,1;
opting,1;
great,1;
on,1;
compile,1;
times!
OP,1;
feature,,1;
follows,1;
sign,1;
sound,1;
depen-
dency,,1;
It,1;
every,1;
You’ll,1;
try,1;
an,1;
for,1;
different,1;
namespace,1;
for,1;
been,1;
want,1;
example,,1;
derive,1;
derive,1;
enable,1;
derive,1;
sure,1;
sure,1;
component,1;
is
not,1;
achieve,1;
compilation,,1;
expressed
using,1;
#[cfg],1;
attribute.,1;
on,1;
neat,1;
compilation,,1;
later,1;
most,1;
form,1;
"some-feature")],,1;
Similarly,,1;
derive,1;
#[cfg],1;
more,1;
on,1;
feature,,1;
can
make,1;
additive.,1;
functions,1;
statements—as,1;
well,1;
on,1;
struct,1;
fields,,1;
#[cfg],1;
attribute
can’t,1;
by
the,1;
cause,1;
hard,1;
public,1;
may,1;
may,1;
for,1;
compile,1;
changes,1;
rule,1;
example,,1;
an,1;
or,1;
public,1;
struct,1;
may,1;
no,1;
due,1;
second,1;
by,1;
That,1;
play,1;
vertices,1;
for,1;
trait,1;
for,1;
compilation
features.,1;
this,,1;
each,1;
managed,1;
treats,1;
more,1;
or,1;
file
compiled,1;
ultimately,1;
turned,1;
output
(either,1;
or,1;
library).
While,1;
aspects,1;
with.,1;
If,1;
part,1;
Internally,,1;
number,1;
like,1;
ultimately,1;
factor,1;
may,1;
want,1;
on,1;
by,1;
like,1;
members,1;
array,1;
each,1;
workspace.,1;
Cargo.lock,1;
don’t,1;
It,1;
is
common,,1;
“main”,1;
example,,1;
members,1;
tokio,,1;
on.
Perhaps,1;
most,1;
workspaces,1;
members,1;
by,1;
crate,,1;
don’t,1;
pretty,1;
good,1;
workspace.,1;
If,1;
disambiguate,,1;
such,1;
by,1;
If,1;
for,1;
particular
workspace,1;
crate,,1;
perform,1;
command,1;
for,1;
array,1;
on,1;
another,1;
bar/two/Cargo.toml
[dependencies]
one,1;
crates
Now,1;
re-compiled,,1;
bar/one,1;
It,1;
may,1;
even,1;
compile,1;
for,1;
optimization,1;
ING,1;
INTR,1;
most,1;
obvious,1;
specify,1;
specifier,,1;
your
individual,1;
for,1;
public,1;
may,1;
want,1;
use
version,1;
specifiers,1;
on,1;
Git,1;
from
the,1;
5-5,1;
(also,1;
fetch
the,1;
Git,1;
holds,1;
on,1;
foo,,1;
inside,1;
workspace.,1;
It,1;
may,1;
If,1;
try,1;
(1.0.0),1;
an,1;
foo,,1;
code.,1;
types,1;
underlying,1;
like,1;
on,1;
once,1;
new,1;
again.
This,1;
tests,1;
for,1;
foo,,1;
You’ll,1;
want,1;
each,1;
configured,1;
Configuration
Running,1;
new,1;
minimal,1;
an,1;
That,1;
pretty,1;
number,1;
useful,1;
may,1;
want,1;
Cargo.toml.
Crate,1;
first,1;
most,1;
obvious,1;
thing,1;
obvious,1;
like
description,1;
useful,1;
such,1;
for,1;
more,1;
useful,1;
dictate,1;
package.,1;
default,,1;
includes,1;
may,1;
want,1;
fixtures,,1;
scripts,,1;
want,1;
version
control.,1;
suggest,,1;
allow,1;
or,1;
matching,1;
or,1;
or,1;
continues,1;
on,1;
over,1;
most,1;
obvious,1;
tool,1;
for,1;
parameter,,1;
program,1;
for,1;
very,1;
specify,1;
different,1;
no,1;
compile,1;
fix,,1;
or,1;
new,1;
an,1;
might
temporarily,1;
Structure
73[patch.crates-io]
#,1;
source
regex,1;
on,1;
Overriding,1;
sources,1;
don’t,1;
wrong,1;
If,1;
for,1;
transitively,1;
on,1;
major
versions,1;
crate,,1;
each,1;
by,1;
}
nom5,1;
Overriding,1;
inside,1;
each,1;
patch
the,1;
appropriately.,1;
for,1;
by,1;
instead,1;
(the,1;
part,1;
on,1;
by,1;
well,1;
dependency!
Keep,1;
on,1;
(which,1;
may,1;
AGES
You,1;
may,1;
vary,1;
on,1;
whether,1;
talking
about,1;
crates.io,,1;
or,1;
you
can,1;
crate-level,1;
like,1;
like,1;
by,1;
That,1;
may,1;
library,1;
even,1;
members,1;
files.
74
Chapter,1;
order,1;
compiles,1;
three,1;
dif-
ferent,1;
on,1;
whether,1;
or
in,1;
(other,1;
three,1;
opt-level,,1;
by,1;
program,1;
“as
much,1;
more,1;
may,1;
optimization,1;
compile,1;
why,1;
for,1;
"s",1;
for,1;
size,,1;
may,1;
codegen-units,1;
It,1;
units),1;
into.,1;
more,1;
faster,1;
compile,1;
achieve,1;
threads,1;
more,1;
or,1;
independently,,1;
optimization,1;
suffers.,1;
for,1;
example,,1;
benefit,1;
differ-
ent,1;
default,,1;
an,1;
effectively,1;
unbounded
number,1;
units,1;
fast,1;
you
can”),1;
number,1;
optimization,1;
want,1;
it),1;
program,,1;
beyond,1;
output,1;
each,1;
includes,1;
units,1;
been,1;
another,1;
over,1;
code.,1;
adds,1;
compile,1;
most,1;
may,1;
been,1;
due,1;
com-
pilation,1;
parts.,1;
programs,1;
benefit,1;
optimization.,1;
compile,1;
performs,1;
units,1;
each,1;
an,1;
for,1;
by,1;
using
many,1;
Since,1;
each,1;
onerous,,1;
lower,1;
by,1;
mostly,1;
“full”,1;
found.
NOTE
LTO,1;
too.,1;
See,1;
for,1;
more,1;
supports,1;
aid,1;
such,1;
debug-assertions,,1;
binary.,1;
increases,1;
such,,1;
addresses,,1;
profiles.,1;
debug_assert!,1;
(through,1;
Such,1;
may,1;
program,1;
runtime.,1;
on,1;
integer,1;
default,,1;
another,1;
dictates,1;
program,1;
or,1;
like,1;
unwind,1;
(the,1;
on,1;
most,1;
platforms),1;
or,1;
more,1;
unwinding,1;
program,1;
unwinding,1;
unwinding,1;
bottom,1;
That,1;
foo,,1;
a
panic,1;
return,1;
foo,,1;
main,,1;
program,1;
unwinds,1;
on,1;
gives,1;
chance,1;
gives,1;
chance,1;
even,1;
case,1;
threads,1;
That,1;
occurred.
This,1;
unwinding,1;
sword;,1;
program,1;
may,1;
cause,1;
example,,1;
state,1;
Mutex.,1;
Any,1;
prepared,1;
fact,1;
state,1;
may,1;
partially
updated,,1;
primitives
(like,1;
remember,1;
occurred,1;
tries,1;
If,1;
such,1;
corrupted,1;
unwinding,1;
free,,1;
by,1;
platform.,1;
platforms,1;
unwind,1;
at
all.,1;
supports,1;
different,1;
abort,1;
mode,,1;
may,1;
seem,1;
program,1;
state,1;
errors,1;
may,1;
noticed,1;
trail,1;
form,1;
unwinding,1;
panic
behavior,1;
even,1;
-Cforce-unwind-tables,1;
necessary,1;
while,1;
terminating,1;
on,1;
for,1;
or,1;
example,,1;
enable,1;
for,1;
for,1;
mode,,1;
[profile.<profile-name>.package.<crate-name>],1;
5-8:,1;
Overriding,1;
for,1;
or,1;
for,1;
mode
This,1;
kind,1;
optimization,1;
handy,1;
or,1;
encod-
ing),,1;
specify,1;
(or
similar),1;
configuration,1;
optimization,1;
for,1;
part,1;
or,1;
crate,
(continued)
Project,1;
or,1;
for,1;
serde.
Conditional,1;
or,1;
on,1;
on,1;
platform,1;
interface
(ABI).,1;
want,1;
an,1;
or,1;
disable,1;
but
uninteresting,1;
setup,1;
To,1;
like,1;
for,1;
compilation,,1;
environment.
We,1;
saw
earlier,1;
It,1;
form,1;
#[cfg(condition)],1;
compile,1;
item
only,1;
condition,1;
#[attribute],1;
condition,1;
holds,1;
condition,1;
condition,1;
"some-feature",,1;
like,1;
key/value,1;
like,1;
by,1;
number,1;
compilation
dependent,1;
most,1;
least,1;
these.,1;
for,1;
example,,1;
=
"f2"),1;
f1,1;
or,1;
f2,1;
key/value,1;
syntax,1;
key,1;
target_os,1;
like,1;
win-
dows,,1;
specify,1;
or,1;
received,1;
cfg(windows),1;
cfg(unix),1;
example,,1;
on,1;
write:,1;
target_os,1;
"macos"))].
78
Chapter,1;
tailor,1;
context.,1;
option,,1;
for,1;
for,1;
inte-
gration,1;
tests;,1;
tests,1;
documentation,1;
or,1;
respectively.
There’s,1;
debug_assertions,1;
option,,1;
options
Some,1;
tools,,1;
like,1;
on,1;
tool,1;
exam-
ple,,1;
want,1;
#[cfg_attr(miri,,1;
compile,1;
on,1;
specify,1;
like,1;
or,1;
specify,1;
platform,1;
target_feature,,1;
like,1;
avx
or,1;
very,1;
may,1;
adapt,1;
platform,1;
like,1;
musl.
For,1;
especially,1;
on,1;
such,1;
#[link].
While,1;
example,,1;
on,1;
on,1;
gives,1;
an,1;
for,1;
5-9:,1;
Structure
79Here,,1;
specify,1;
cfg(windows),1;
(so,,1;
on,1;
cfg(unix),1;
(so,,1;
on,1;
Linux,,1;
platforms).
One,1;
thing,1;
point,
so,1;
syntax,1;
on,1;
on,1;
or,1;
well,1;
explicitly,1;
by,1;
on,1;
topic,1;
perform,1;
tools
like,1;
detect,1;
on,1;
on
crates,1;
or,1;
security,1;
or,1;
may,1;
want,1;
Using,1;
such,1;
tool,1;
great,1;
an,1;
way!
It’s,1;
sure,1;
rustc
when,1;
compiles,1;
handy,1;
CI,
where,1;
may,1;
want,1;
on,1;
whether,1;
on,1;
or,1;
on,1;
CI
setup,,1;
code.,1;
dependencies.
Versioning
All,1;
versioned,1;
follow,1;
dictates,1;
for,1;
changes,1;
require,1;
increases,1;
for,1;
RFC,1;
1105,1;
standard
itself,1;
well,1;
reading,1;
three,1;
additions,,1;
require,1;
fixes,,1;
require,1;
RFC,1;
on,1;
aspects,1;
elsewhere,1;
detail,1;
here,1;
want,1;
first,1;
policy,1;
there’s,1;
no,1;
limited,1;
older,1;
an,1;
If,1;
constantly,1;
newly,1;
those
users,1;
compile,1;
behind.
There,1;
techniques,1;
position.,1;
first,1;
an,1;
policy,1;
promising
that,1;
new,1;
compile,1;
from
the,1;
number,1;
or,1;
corresponds,1;
or,1;
Any,1;
new,1;
by,1;
or,1;
until,1;
policy,1;
merged,1;
it
means,1;
lan-
guage,1;
for,1;
second,1;
sure,1;
increases,1;
1.45,,1;
on,1;
1.44,1;
on,1;
until,1;
on,1;
version,,1;
version,,1;
critical,1;
security,1;
for,1;
by,1;
necessary.
Some,1;
num-
ber.,1;
explicitly,1;
an
MSRV,1;
opting,1;
such,1;
may,1;
require,1;
none,1;
an,1;
Only
a,1;
small,1;
even,1;
constantly,1;
monitor,1;
MSRV.,1;
When,1;
new,1;
release
of,1;
sure,1;
may,1;
security,1;
older,1;
until,1;
policy,1;
over,1;
been,1;
been,1;
writing.
Project,1;
first,1;
clear,1;
or,1;
version,,1;
chances,1;
wrong.,1;
don’t,1;
choice,1;
may,1;
cause,1;
for,1;
why,1;
each,1;
problematic.
First,,1;
case,1;
on,1;
developer,1;
on,1;
crate,,1;
on,1;
crate,,1;
foo,,1;
on,1;
Further,1;
policy,,1;
on,1;
"1,,1;
Here,,1;
When,1;
sees,1;
>=1.7.
But,1;
sees,1;
foo’s,1;
on,1;
gives,1;
no,1;
number,1;
why,1;
may,1;
explicitly,1;
want,1;
most,1;
(the,1;
reproducible,1;
well,1;
compiles,1;
say,,1;
even,1;
compiles,1;
1.X,1;
or,1;
beyond,1;
Is,1;
It,1;
on,1;
1.5.6,1;
be.,1;
specifies,1;
"1,
<1.5",,1;
strategy,1;
on,1;
sure,1;
case,1;
new,1;
or,1;
bet,1;
acceptable,1;
for,1;
maxi-
mum.,1;
try,1;
until,1;
compiles,1;
your
minimum,1;
requirements!
It’s,1;
noting,1;
like,1;
minimal,1;
adoption,1;
may,1;
version
specifiers,1;
on,1;
may,1;
minimal,1;
hard,1;
why,1;
If,1;
on,1;
foo,,1;
on,1;
actually,1;
it
failed,1;
compile,1;
no,1;
because,1;
minimal,1;
by,1;
bar
directly,1;
appropriate,1;
may,1;
number,1;
present,1;
minimal,1;
for,1;
for,1;
most,1;
trivial,1;
more,1;
received
a,1;
bump,1;
Git,1;
figure
out,1;
code.,1;
Git,1;
instead,1;
It,1;
more,1;
good,1;
format,1;
for,1;
https://keepachangelog.com/.
Unreleased,1;
even,1;
a
directory,1;
or,1;
Git,1;
repository.,1;
even,1;
releases.,1;
dictate,1;
decently,1;
well,1;
release,,1;
like,1;
new,1;
2.0.4-alpha.1.,1;
If,1;
an,1;
number,1;
changes,1;
an,1;
or,1;
If,1;
number,1;
release,,1;
exam-
ple,,1;
an,1;
additive,1;
2.1.0-
alpha.1.,1;
If,1;
been,1;
release,,1;
want,1;
because,1;
developer,1;
on,1;
2
of,1;
crate,,1;
commit,1;
If,1;
don’t,1;
time,,1;
unexpected,1;
by,1;
compile,1;
or,1;
result,1;
issues.,1;
If,1;
fol-
low,1;
here,,1;
instead,1;
by,1;
or,1;
commit.
Next,,1;
developer,1;
crate,,1;
part,1;
behind,1;
Git,1;
for,1;
on,1;
older,1;
If,1;
number,1;
no,1;
on,1;
If,1;
fellow,1;
no,1;
compiles,,1;
If,,1;
on,1;
developer,1;
number,1;
for,1;
Git,1;
by,1;
no,1;
It,1;
good,1;
or,1;
changes,1;
you
still,1;
most,1;
Git,1;
even,1;
such,1;
small,1;
or,1;
suggested,1;
by,1;
appropriate,1;
part,1;
aware,,1;
on,1;
such,1;
may,1;
your
version,1;
number,1;
for,1;
configuring,
organizing,,1;
for,1;
benefit,1;
over,1;
hopefully,1;
beyond,1;
#[test],1;
functions,1;
56
TESTING
In,1;
testing
capabilities,1;
may,1;
want,1;
number,1;
well,1;
covered,1;
by,1;
#[test],1;
well,1;
wide
range,1;
grow,1;
more,1;
may,1;
beyond,1;
#[test],1;
onto,1;
first,1;
part,1;
like,1;
conditional
testing,1;
code.,1;
second,1;
looks,1;
correctness,1;
such,1;
benchmarking,,1;
understand,1;
first
understand,1;
tests.,1;
When,1;
thing,1;
--test,1;
produce,1;
than
just,1;
library,1;
or,1;
binary.,1;
--test,1;
has
two,1;
on,1;
bit).,1;
Second,,1;
harness:,1;
program,1;
Test,1;
depth,1;
7,,1;
and
a,1;
sprinkling,1;
Essentially,,1;
every,1;
func-
tion,1;
by,1;
#[test],1;
It,1;
exposes,1;
each,1;
part.,1;
includes,1;
information
like,1;
#[should_panic]),
and,1;
At,1;
over,1;
tests,1;
command,1;
like,1;
output,,1;
tests,1;
results.
As,1;
on,1;
magic
part,1;
aligns,1;
#[test]
functions,1;
even,1;
tests,1;
(the,1;
tests,1;
tests/),1;
follow,1;
each,1;
crate,,1;
public,1;
for,1;
each,1;
tests/.,1;
Test,1;
harnesses,1;
gen-
erated,1;
for,1;
allow,1;
for,1;
explicitly,1;
want,1;
for,1;
subdirectory,,1;
require,1;
by,1;
for,1;
6[[test]]
name,1;
none,1;
#[test],1;
testing
code,1;
want,1;
Essentially,,1;
by,1;
That,1;
want
to,1;
them),,1;
such,1;
command,1;
flags.,1;
set
separately,1;
for,1;
each,1;
supports,1;
number,1;
command,1;
tests,1;
aren’t,1;
compiles,1;
for,1;
To,1;
followed,1;
by
the,1;
binary.,1;
example,,1;
for,1;
number,1;
handy,1;
configuration,1;
arguments.,1;
output,1;
tests.,1;
useful,1;
want,1;
output,1;
once,1;
tests,1;
or,1;
segfaults,1;
want,1;
figure
out,1;
by,1;
tests,1;
skipping,1;
tests,1;
tests,1;
require,1;
an,1;
external,1;
program,1;
by,1;
disable,1;
false),,1;
tests,1;
useful,1;
for,1;
handy,1;
want,1;
run
tests,1;
don’t,1;
model.,1;
exam-
ple,,1;
tests,1;
tests,1;
require,1;
setup,1;
WebAssembly
or,1;
for,1;
configuration,1;
may,1;
seem,1;
don’t,1;
want,1;
testing
allows,1;
better,,1;
more,1;
want,1;
over,1;
types,1;
may,1;
interact,1;
with.,1;
example,,1;
want,1;
instead,1;
want,1;
Or,,1;
want,1;
types,1;
allow,1;
each,1;
on,1;
each
invocation.,1;
may,1;
want,1;
gather,1;
such,1;
or,1;
whether,1;
types,1;
mocks,,1;
key,1;
suite.,1;
kind,1;
library,1;
most,1;
for,1;
library,1;
for,1;
generating,1;
or,1;
well,1;
mecha-
nisms,1;
during,1;
your
program,,1;
or,1;
tool,1;
over,1;
mock,1;
trait,1;
library,1;
gener-
ate,1;
types,1;
parameters.,1;
then
write,1;
tests,1;
by,1;
or,1;
such,1;
want,1;
aspect,1;
instead,1;
encapsulate,1;
state,1;
want,1;
mock,1;
struct.,1;
struct,1;
or,1;
on,1;
or,1;
like,1;
or,1;
even,1;
most,1;
library,1;
development,,1;
types,1;
tests,1;
tests,1;
behaves,1;
state,1;
implements,1;
library,1;
around
a,1;
implements,1;
most,1;
on,1;
an,1;
map,,1;
want,1;
insert_just_one(),1;
mut,1;
state,1;
compile,1;
because,1;
while,1;
can
access,1;
different,1;
module.,1;
We,1;
by,1;
visibility,1;
don’t,1;
general,,1;
state,1;
new,1;
may,1;
state,1;
more,1;
We,1;
while,1;
for,1;
code.,1;
instead,1;
Using,1;
state,1;
for,1;
Test,1;
second,1;
benefit,1;
during,1;
program,1;
perform,1;
by,1;
tests.,1;
example,,1;
When
testing,1;
want,1;
sure,1;
most,1;
obvious,1;
times,1;
on,1;
underlying,1;
memory,1;
{
#[cfg(test)]
write_through:,1;
Write>,1;
for,1;
{
fn,1;
buf:,1;
self.full(),1;
self.inner.write(&self.buffer[..])?;
//,1;
Using,1;
context
Keep,1;
for,1;
library,1;
documentation,1;
automatically,1;
public,1;
documentation,1;
crate,,1;
tests.,1;
don’t,1;
on,1;
code.,1;
Each,1;
copy-pasted,1;
performs,1;
preprocessing,1;
more,1;
an,1;
code.,1;
on,1;
like,1;
types,1;
boilerplate.
You,1;
by,1;
may,1;
want,1;
this,,1;
for,1;
example,,1;
want,1;
6asynchronous,1;
like,1;
or,1;
want,1;
doctest.
To,1;
operator,1;
don’t,1;
includes,1;
Result<(),,1;
looks,1;
like,1;
(for
example,,1;
Ok(())).,1;
If,1;
gives,1;
hard,1;
time
about,1;
for,1;
disambiguate,1;
by,1;
explicitly,1;
like,1;
number,1;
handy,1;
as
you,1;
documentation,1;
for,1;
more,1;
complex,1;
first,1;
abil-
ity,1;
lines.,1;
If,1;
example,,1;
such,1;
traits,1;
for,1;
dummy,1;
types,1;
or,1;
generating,1;
It,1;
useful,1;
wish
to,1;
present,1;
showing,1;
gives,1;
an,1;
lines
might,1;
Completely,1;
number,1;
first,1;
Here's,1;
an,1;
on,1;
declare,1;
want,1;
distract,1;
We,1;
scope.
///,1;
mylib::frobnify;
///,1;
frobnify("0".parse()?)?;
///,1;
even,1;
an,1;
*/
///,1;
```
fn,1;
usize),1;
6-5:,1;
lines,1;
an,1;
example
and,1;
because,1;
hidden.
Much,1;
like,1;
#[test],1;
by,1;
specify,1;
to
indicate,1;
compile,1;
compile.,1;
indicates,1;
useful,1;
update
the,1;
documentation,1;
aspect,1;
library,1;
an,1;
may,1;
necessary,1;
struct,1;
Send>(),1;
fails,1;
compile,1;
tool,1;
gives,1;
no,1;
why,1;
compile.,1;
example,,1;
compile,1;
because,1;
been,1;
want,1;
sure,1;
fails,1;
compile,1;
more,1;
tests,1;
for,1;
such,1;
crate.
Additional,1;
Tools
There’s,1;
more,1;
functions,1;
produce,1;
techniques,
methodologies,,1;
key,1;
may,1;
be.,1;
categorizes,1;
number,1;
lints,1;
lints,1;
compile,1;
fails,1;
b;
std::mem::forget(t),,1;
for,1;
x,1;
over,1;
first,1;
If,1;
number,1;
lints,1;
while,1;
more,1;
example,,1;
type_complexity
lint,,1;
on,1;
by,1;
default,,1;
particularly,1;
program,,1;
like,1;
may,1;
If,1;
part,1;
erroneously,1;
or,1;
want,1;
allow,1;
instance,1;
for,1;
lints,1;
form,1;
more,1;
for,1;
correctness.,1;
correctness,1;
lints,1;
errors,1;
(take,1;
for,1;
by,1;
by,1;
usu-
ally,1;
refined,,1;
or,1;
more,1;
good,1;
enable,1;
When,1;
changes,1;
brought,1;
by,1;
edition.,1;
lints,1;
new,1;
document
any,1;
public,1;
or,1;
for,1;
public,1;
good,1;
even,1;
work,
the,1;
tests,1;
con-
sidering,1;
them.,1;
number,1;
techniques,1;
more,1;
tests.,1;
for,1;
such,1;
each,1;
here,1;
cover,1;
by,1;
tools:
fuzzing,1;
books,1;
been,1;
fuzzing,,1;
program,1;
If,1;
example,,1;
parsing
library,,1;
program,1;
by,1;
generating,1;
random
strings,1;
until,1;
while,1;
starts,1;
c,,1;
different,1;
faster,1;
random.
Fuzzers,1;
great,1;
corner,1;
require,1;
setup,1;
on,1;
exam-
ple,,1;
an,1;
parser.
libfuzzer_sys::fuzz_target!(|data:,1;
parser,1;
form,1;
valid,1;
strings,1;
here,1;
whether,1;
or,1;
for,1;
parser,1;
or,1;
due,1;
until,1;
most,1;
number,1;
cases
have,1;
been,1;
explored.,1;
If,1;
type—something
like,1;
like,1;
arbitrary,1;
more,1;
complex,1;
It,1;
hood,1;
actually,1;
very,1;
straightfor-
ward,1;
an,1;
trait,1;
implementing,1;
types,1;
like,1;
or,1;
bool,1;
read,1;
necessary,1;
number,1;
valid,1;
instance,1;
themselves,,1;
types,1;
like,1;
or,1;
produce,1;
number,1;
dictate,1;
number,1;
times,1;
on,1;
even,1;
an,1;
implements
Arbitrary,1;
by,1;
arbitrary,1;
on,1;
each,1;
type!,1;
To,1;
fuzz-
ing,1;
further,,1;
cargo-fuzz.
Property-Based,1;
want,1;
program,1;
great,1;
result,1;
add(1,,1;
wrong.,1;
number,1;
properties
indeed,1;
first,1;
want,1;
confident,1;
cor-
rect.,1;
for,1;
want
to,1;
If,1;
result,1;
or,1;
output,1;
looking,1;
for,1;
directly
related,1;
such,1;
whether,1;
operations,1;
outcome,1;
every,1;
library,1;
or,1;
or,1;
an,1;
matrix,1;
multiplication).
If,1;
generating,1;
until,1;
condition,1;
met
sounds,1;
like,1;
fuzzing,,1;
because,1;
is—smarter,1;
property
you’re,1;
for,1;
more,1;
guided,1;
by,1;
developer,1;
like,1;
number,1;
or,1;
string,1;
more,1;
fuzz-
ers,1;
may,1;
require,1;
may,1;
grow,1;
kind,1;
searching,1;
well.
If,1;
SEQUENCES,1;
allow,1;
arbitrary,1;
aren’t,1;
limited,1;
example,,1;
want,1;
behaves,1;
perform,1;
operations,1;
on,1;
an,1;
perform,1;
each,1;
on,1;
Foo,,1;
for,1;
even,1;
operations,1;
violates,1;
property-
violating,1;
found!
Testing
95Test,1;
Augmentation
Let’s,1;
passes
all,1;
tests.,1;
day,,1;
fails,1;
or,1;
for,1;
con-
ditions,,1;
operations,1;
on,1;
order,,1;
such
as,1;
memory.
Catching,1;
tests,1;
don’t,1;
over,1;
or,1;
each,1;
times,1;
even,1;
may,1;
case,1;
sufficiently,1;
or,1;
tests,1;
first,1;
tool,1;
an,1;
for,1;
intermediate,1;
an,1;
internal,,1;
simplified
representation,1;
helps,1;
syntax,1;
tests,1;
Miri,1;
Miri,1;
like,1;
a
normal,1;
tests,1;
in
return,,1;
Miri,1;
program,1;
state,1;
each,1;
Miri,1;
detect,1;
program,1;
types,1;
such,1;
they’ve,1;
been,1;
dropped,,1;
or,1;
operations,1;
program,1;
may,1;
result,1;
failures,1;
example,,1;
very,1;
unsound,1;
exclusive,1;
mut,1;
x,1;
*mut,1;
x;
let,1;
*x,,1;
*x),1;
6-8:,1;
Miri,1;
points,1;
wrong:
error:,1;
for,1;
Unique,1;
an,1;
appropriate,1;
borrow,1;
|,1;
*x,,1;
*x),1;
for,1;
Unique,1;
an,1;
appropriate,1;
borrow,1;
development,,1;
aren’t,1;
by,1;
output,1;
may,1;
better!
Another,1;
tool,1;
looking,1;
Loom,,1;
library,1;
tries,1;
tests,1;
every,1;
concurrent
operations.,1;
At,1;
cross-thread,1;
points,1;
tests,1;
over,1;
order,1;
threads,1;
points,1;
each,1;
once,1;
first,1;
once,1;
memory,1;
(which,1;
threads,1;
inappropriately.,1;
If,1;
fails,,1;
an,1;
threads,1;
order,1;
how
the,1;
tests,1;
because,1;
hard,1;
tests,1;
times,1;
may
not,1;
If,1;
times,1;
good,1;
tests,1;
part,1;
changes,1;
tests,1;
or,1;
fail,
whereas,1;
may,1;
latency
profile,,1;
number,1;
or,1;
metric,1;
loop,1;
or,1;
distributed,1;
multicore,1;
section,,1;
may,1;
tests,1;
them.,1;
particularly,1;
I/O,1;
each,1;
turn.
Performance,1;
vary,1;
for,1;
fast,1;
memory,1;
or,1;
more,1;
subtle.,1;
example,,1;
memory,,1;
cause,1;
to
clock,1;
fact,,1;
may,1;
even,1;
Or,,1;
another,1;
perspective,,1;
may,1;
or,1;
may,1;
due,1;
no,1;
eliminate,1;
benchmarks,1;
repeat-
edly,1;
on,1;
so,,1;
try,1;
from
the,1;
benchmarks,1;
us.,1;
each,1;
times,1;
has
tools,1;
example,,1;
on,1;
like,1;
hdrhistogram,1;
enable,1;
statistics,1;
like,1;
samples
we,1;
To,1;
even,1;
more,1;
techniques,1;
like,1;
statistics,1;
corresponds,1;
on,1;
beyond,1;
luckily,1;
been,1;
by,1;
others.,1;
crate,,1;
for,1;
more,1;
for,1;
appropriate,1;
number,1;
times,1;
result,1;
It,1;
which
includes,1;
analysis,1;
even,1;
trends,1;
over,1;
eliminate,1;
on,1;
configuration,1;
least,1;
eliminate,1;
compile,1;
time,,1;
unroll,1;
perform,1;
every,1;
code.,1;
Normally,1;
fast,1;
compiler’s,1;
invalid,1;
mut,1;
fast,1;
output,1;
like,1;
or,1;
cargo-asm,
you’d,1;
for,1;
nowhere,1;
been,1;
completely.,1;
actually,1;
vector,1;
operations,1;
eliminated,1;
code.,1;
so,,1;
for,1;
for,1;
benchmarking,,1;
standard
library,1;
been,1;
topic,1;
pending,1;
useful,1;
discussing,1;
here,1;
At,1;
core,
it’s,1;
an,1;
x,1;
It,1;
return,1;
used),1;
result,1;
such,1;
computed,1;
compile,1;
time,,1;
inject
the,1;
result,1;
for,1;
many,,1;
needs.,1;
example,,1;
6-9,1;
no,1;
mut,1;
6-10:,1;
arbitrary,1;
each,1;
perform,1;
each,1;
order,,1;
or,1;
oth-
erwise,1;
(that’s,1;
may,1;
each,1;
say,,1;
&vs.,1;
That’s,1;
because,1;
the
caveat,1;
perform,1;
on,1;
argument.,1;
It,1;
mutate,1;
black_box(&vs),,1;
loop,1;
on
that,1;
Overhead,1;
wrong
thing.,1;
example,,1;
want,1;
To,1;
like,1;
fast,1;
here?
This,1;
may,1;
like,1;
achieves,1;
goal,,1;
fast,1;
loop,1;
most,1;
loop,1;
behind,1;
integer,1;
for,1;
output,,1;
sequence
of,1;
points,1;
least,1;
releases,1;
output,1;
receives.,1;
That’s,1;
thing,1;
may,1;
well,1;
mostly,1;
for,1;
getting,1;
time,,1;
reading,1;
configuration,1;
or,1;
new,1;
time,,1;
actually,1;
once,1;
sure,1;
loop,1;
want,1;
or,1;
benchmark.,1;
If,1;
different
timing,1;
cases
that,1;
require,1;
different,1;
strategies!
Summary
In,1;
great,1;
We,1;
number,1;
and
techniques,1;
useful,1;
code.,1;
on,1;
aspects,1;
intermediate,1;
on,1;
we
will,1;
more,1;
on,1;
code.,1;
See,1;
on,1;
67
MACROS
Macros,1;
are,,1;
tool,1;
for,1;
for,1;
for,1;
generating,1;
every,1;
substitution,1;
for,1;
macros,1;
different,1;
different,1;
forms,1;
macros,1;
chapter.,1;
macros,1;
come
in,1;
handy,1;
with
more,1;
use.
Programmers,1;
languages,1;
may,1;
each,1;
to
false,,1;
or,1;
If,1;
case,1;
foryou,,1;
macros,1;
something
“bad.”,1;
Macros,1;
macros,1;
macro_rules!,1;
macros,1;
resort,1;
for,1;
followed,1;
by,1;
an,1;
like,1;
regular,,1;
for,1;
until,1;
macros,1;
recognized,1;
macros,1;
been,1;
declara-
tive,1;
macros,1;
macro_rules!,1;
this,,1;
merely,1;
indicates,1;
different,1;
compile,1;
parser,1;
annotated
with,1;
!,,1;
parser,1;
them.,1;
like,1;
or,1;
an,1;
example,,1;
(at,1;
macro
where,1;
an,1;
or,1;
expected.
It,1;
may,1;
obvious,1;
why,1;
macros,1;
called
declarative.,1;
don’t,1;
fact,1;
don’t,1;
output,,1;
want,1;
output,1;
like,1;
declare,1;
so,,1;
macros,1;
a
limited,1;
Use,1;
macros,1;
useful,1;
the
same,1;
over,1;
like,1;
for,1;
or,1;
macros,1;
most,1;
macros,1;
such,1;
tests,1;
want,1;
different,1;
like,1;
7-1.
fn,1;
test_inner<T>(init:,1;
...,1;
}
#[test]
fn,1;
test_1u8_frobnified(),1;
{
test_inner(1i128,,1;
works,,1;
error.,1;
macros,1;
better,,1;
{
$(
mod,1;
test_inner::<$t>(1,,1;
}
#[test]
fn,1;
test_inner::<$t>(1,,1;
u8_tests,
//,1;
for,1;
expands,1;
each,1;
trivial,,1;
Each,1;
test_battery!,1;
generating,1;
tests,1;
for,1;
argu-
ments.,1;
We,1;
tests,1;
for,1;
different,1;
for,1;
significantly,1;
reduced,1;
forget,1;
a
­particular,1;
configuration!
The,1;
for,1;
trait,1;
If,1;
want,1;
trait,1;
for,1;
number,1;
types,1;
even,1;
trait,1;
want,1;
for,1;
an,1;
like,1;
7-3.
macro_rules!,1;
for,1;
{
fn,1;
i8,,1;
...,1;
*/];
Listing,1;
Using,1;
trait,1;
for,1;
types,1;
swoop
Here,,1;
an,1;
for,1;
each,1;
type
whose,1;
may,1;
why,1;
for,1;
We,1;
do
that,,1;
types,1;
for,1;
types,1;
experimental,1;
for,1;
enumerating
the,1;
types,1;
beyond,1;
for,1;
example,,1;
an,1;
trait,1;
integer,1;
wondering,1;
or,1;
more,1;
macros,1;
and
integrate,1;
language.,1;
rule,1;
changes,1;
on,1;
otherwise,,1;
dictates,1;
characters,1;
turned,1;
lowest-level,1;
such,1;
characters,,1;
string,1;
at
this,1;
there’s,1;
no,1;
example,,1;
(value,1;
by,1;
turning
text,1;
example,,1;
no,1;
whitespace,,1;
(the,1;
no,1;
string,1;
been,1;
turned,1;
assigns,1;
invo-
cations,,1;
ultimately,1;
syntax,1;
tree,1;
by,1;
code.,1;
an,1;
example,,1;
x,1;
x,1;
|,1;
When,1;
syntax,1;
represents,1;
an,1;
integer,1;
syntax,1;
tree,1;
assigns,1;
grammar.
Rust,1;
macros,1;
dictate,1;
syntax,1;
tree,1;
gets
turned,1;
during
parsing,,1;
tokens,
which,1;
ultimately,1;
become,1;
syntax,1;
tree,1;
for,1;
yet,,1;
sequence.,1;
When,1;
the
indicated,1;
evaluates,1;
over,1;
the
tokens,1;
syntax,1;
tree,1;
tree,1;
where
the,1;
was.
Technically,,1;
for,1;
like,1;
string,1;
example,,1;
x,1;
first,1;
tree,1;
third
is,1;
trees:,1;
valid,1;
parse.,1;
example,,1;
for,1;
x,1;
inside,1;
valid,1;
for,1;
because,1;
macros,1;
valid,1;
cannot
have,1;
say,,1;
first,1;
or,1;
an,1;
follows,1;
x,1;
an,1;
like,1;
trait,1;
or,1;
or,1;
macros,1;
invalid,1;
because,1;
compile!
That’s,1;
macros,1;
contained
within,1;
exhaustive,1;
syntax,1;
macros,1;
cover,1;
macros,1;
each,1;
an,1;
When,1;
first,1;
last,,1;
that
matches,1;
by,1;
rule,1;
};
}
Listing,1;
components
Matchers
You,1;
tree,1;
tries,1;
tree,1;
an,1;
example,,1;
That,1;
sign,1;
followed,1;
by,1;
If,1;
x,1;
matcher,,1;
5,1;
valid,1;
$b:expr,,1;
an,1;
(the,1;
pretty,1;
like,1;
example,,1;
matcher
accepts,1;
or,1;
more,1;
(),),1;
key/value
pairs,1;
key,1;
$value:expr),+
And,,1;
complex,1;
for,1;
key,1;
or,1;
sure,1;
key,1;
for,1;
for,1;
for,1;
even,1;
for,1;
types,1;
reference,1;
These,,1;
for,1;
enable,1;
most,1;
straightforward
code,1;
If,,1;
want,1;
matcher,,1;
may,1;
want,1;
try,1;
don’t,1;
follow,1;
syntax,1;
macro_rules!,1;
more,1;
detail,1;
later,1;
matcher,,1;
variables,1;
each,1;
$key,1;
example
in,1;
part,1;
you
can,1;
syntax,1;
repeated,1;
once,1;
each,1;
expansion,1;
holding,1;
appropriate,1;
for,1;
each,1;
for,1;
example,,1;
for,1;
matcher,,1;
for,1;
each,1;
matched:
$(map.insert($key,,1;
here,1;
want,1;
for,1;
each,1;
repetition,,1;
repetition,,1;
inside,1;
each,1;
(in,1;
case,1;
more,1;
may,1;
macros,1;
being
hygienic,1;
or,1;
When,1;
macros,1;
mean
that,1;
affect,1;
variables,1;
aren’t,1;
trivial,1;
declare,1;
foo,,1;
macro’s,1;
by,1;
(the,1;
Similarly,,1;
macros,1;
variables,1;
explicitly,1;
most,1;
time,,1;
namespace,1;
into.,1;
example,,1;
that
tries,1;
site.
macro_rules!,1;
let_foo,1;
{
($x:expr),1;
expands,1;
2;
let_foo!(2);
assert_eq!(foo,,1;
Macros,1;
expands,1;
assert,1;
looks,1;
like,1;
by,1;
different,1;
no,1;
fact,,1;
complain,1;
an,1;
unused,1;
very,1;
macros,1;
shadowing,1;
or,1;
overwriting,1;
because,1;
hygienic,1;
beyond,1;
macros,1;
namespace,1;
for,1;
new,1;
func-
tions,1;
scope,,1;
new,1;
elsewhere,1;
new,1;
macros,1;
affect,1;
like,1;
this,,1;
more,1;
trait,1;
most,1;
lack,1;
for,1;
types,1;
macros,1;
particularly,1;
want,1;
types,1;
mod,1;
Result,1;
To,1;
on,1;
safe,1;
side,,1;
sure,1;
specified,1;
types,1;
like,1;
or,1;
::std,1;
in
no_std,1;
affect,1;
key,1;
remember,1;
because,1;
If,1;
If,,1;
on,1;
an,1;
explicitly,1;
any
identifier,1;
an,1;
variable
in,1;
please_set,1;
{
($i:ident,,1;
{
$i,1;
mut,1;
x,1;
x,1;
Giving,1;
macros,1;
site
We,1;
x,1;
x,1;
macro’s,1;
note,1;
on,1;
macros,1;
pretty,1;
much
everything,1;
macros,1;
If,1;
try,1;
further,1;
declare
a,1;
want,1;
crate,,1;
If,1;
crate,,1;
mod,1;
macros,1;
That,1;
or,1;
by,1;
parser,1;
code
generation,,1;
At,1;
gathers,1;
program,1;
with.
Procedural,1;
macros,1;
because,1;
very,1;
involved,1;
on,1;
compiler’s,1;
more,1;
or,1;
holds,,1;
macros,1;
three,1;
different,1;
each,1;
like,1;
macro_rules!,1;
generates
Attribute,1;
like,1;
#[test]
Derive,1;
like,1;
three,1;
types,1;
underlying,1;
mechanism:,1;
pro-
vides,1;
return,1;
differ,1;
output,1;
han-
dled.,1;
cover,1;
each,1;
form,1;
Like,1;
macros,1;
hygienic,1;
interact-
ing,1;
surrounding,1;
your
macros,1;
explicitly,1;
surrounding,1;
discuss
later).
Attribute,1;
assigned,1;
to
wholesale,,1;
inputs:,1;
tree,1;
the
attribute,1;
tree,1;
may,1;
allow,1;
such,1;
by,1;
or,1;
epilogue,1;
or,1;
by,1;
derive,1;
different,1;
may,1;
seem,1;
derive,1;
macros,1;
behind,1;
derive,1;
macros,1;
now-well-known
#[derive(Serialize,,1;
magic.
Derive,1;
macros,1;
macros,
since,1;
such,1;
arguments.,1;
macros,1;
allow,1;
placed,1;
inside,1;
give
clues,1;
derive,1;
markers,1;
macros.
The,1;
Macros
Before,1;
each,1;
different,1;
types,1;
discussing,1;
why,1;
may,1;
want,1;
twice,1;
for,1;
increased,1;
compile,1;
time.
Procedural,1;
macros,1;
significantly,1;
compile,1;
times,1;
for,1;
first,1;
example,,1;
crate,,1;
streams,1;
compile,1;
by,1;
macros,1;
compiles,1;
times,1;
faster,1;
debug
mode,,1;
for,1;
most,1;
even,1;
differ-
ence,1;
second,1;
why,1;
macros,1;
compile,1;
for,1;
realizing,1;
actually,1;
more,1;
adds,1;
compile,1;
macros,1;
rarely,1;
overall,1;
compile,1;
wait,1;
for,1;
thing,1;
most,1;
macros,1;
don’t,1;
That,1;
particularly,1;
involved,,1;
may,1;
compiles,1;
spend-
ing,1;
on,1;
an,1;
good,1;
for,1;
each,1;
We’ll
start,1;
derive,1;
Use,1;
macros,1;
for,1;
thing,1;
trait,1;
traits,1;
derive,1;
for,1;
trait,1;
trait,1;
for,1;
may,1;
seem,1;
like,1;
trait,1;
once,1;
or,1;
twice,,1;
derive,1;
for,1;
second,1;
condition,1;
may,1;
seem,1;
stranger,,1;
mean
for,1;
trait,1;
like,1;
If,1;
you
were,1;
an,1;
output,1;
each,1;
You’d,1;
every,1;
field—
and,1;
derive(Clone),1;
every,1;
gen-
eral,,1;
want,1;
trait,1;
developer’s,1;
If,1;
no,1;
obvious,1;
for,1;
or,1;
obvious,1;
derive,1;
Use,1;
macros,1;
rule,1;
You
might,1;
macros,1;
want,1;
macro_rules!,,1;
macros,1;
all!
There,1;
particularly,1;
good,1;
for,1;
becoming
so,1;
hard,1;
execute,1;
phf
crate,,1;
or,1;
compile,1;
string,1;
characters,1;
the
corresponding,1;
general,,1;
merely,1;
trans-
form,1;
compile,1;
actually,1;
over,1;
good,1;
for,1;
you
can,1;
for,1;
macros,1;
intentionally,1;
Use,1;
Attribute,1;
leaves,1;
macros,1;
value.
Test,1;
very,1;
want,1;
or,1;
tests,1;
may,1;
this,,1;
read,1;
an,1;
like,1;
setup,1;
each,1;
or,1;
like,1;
a
given,1;
repeated,1;
once,1;
each,1;
like,1;
macros,1;
functions,1;
hello(name:,1;
configuration,1;
struct,1;
Essentially,,1;
Similarly,,1;
asynchronous,1;
I/O,1;
automatically,1;
asynchronous,1;
saving,1;
setup,1;
every,1;
asynchronous,1;
want,1;
inject,1;
example,,1;
like,1;
like,1;
allow,1;
by,1;
an,1;
every,1;
by,1;
want,1;
beyond,1;
merely,1;
traits,1;
for,1;
these
cases,,1;
macros,1;
great
example,1;
by,1;
trait,1;
more,1;
types,1;
by,1;
generating,1;
introducing,1;
don’t,1;
shoot,1;
been,1;
derive,1;
trait,1;
been,1;
for,1;
macros,1;
TokenStream,1;
be
iterated,1;
over,1;
an,1;
punctuation,
or,1;
another,1;
TokenStream,1;
enclosed,1;
like,1;
or,1;
syntax,1;
wish,1;
valid,1;
If,1;
want,1;
input
specifically,1;
want,1;
crate,,1;
parser,1;
TokenStream,1;
an,1;
most,1;
want,1;
produce,1;
program,1;
first,1;
TokenStream,1;
second,1;
to
use,1;
FromStr,,1;
string,1;
TokenStream,1;
these;,1;
want,1;
prepend,1;
macro’s
input,,1;
TokenStream,1;
for,1;
implements,1;
pretty-prints,1;
handy,1;
for,1;
very,1;
more,1;
every,1;
example,,1;
con-
sider,1;
like,1;
for,1;
{
impl,1;
::core::fmt::Debug,1;
for,1;
{
fn,1;
::core::fmt::Formatter<'_>),1;
::core::write!(f,,1;
7-7:,1;
very,1;
for,1;
implementing,1;
Technically,,1;
occurs,1;
inside,1;
for,1;
(the,1;
an,1;
invalid,1;
like,1;
That,1;
carried,1;
error.,1;
When,1;
inside,1;
argu-
ment,1;
error’s,1;
flexible,,1;
enable,1;
produce,1;
compile_error!,1;
causes,1;
an,1;
placed,1;
string,1;
may,1;
seem,1;
very,1;
until,1;
for,1;
compile_error!,1;
invoca-
tion,1;
effectively
telling,1;
source.,1;
seem,1;
part,1;
even,1;
even,1;
been,1;
syn’s,1;
works,,1;
an,1;
Error::to_compile_error,1;
TokenStream,1;
compile_error!,1;
particularly,1;
neat,1;
syn’s,1;
holds,1;
each,1;
distinct
­compile_error!,1;
produce,1;
errors,1;
power,1;
there;,1;
When,1;
an,1;
for,1;
dictates,1;
If,1;
Span::call_site(),,1;
resolved,1;
isolated
from,1;
surrounding,1;
If,,1;
on,1;
resolved,1;
hygienic,1;
because,1;
for,1;
macro_rules!,,1;
which,,1;
for,1;
covered,1;
each,1;
useful,1;
code.,1;
underpin,1;
each,1;
trait.,1;
page.
Macros
1158
ASYNCHRONOUS,1;
not
­s,1;
At,1;
an,1;
asynchro-
nous,1;
program,1;
wait,1;
for,1;
asynchronous,1;
may,1;
insufficient,1;
actually,1;
To,1;
understand,1;
asynchronous,1;
programming
model,1;
first,1;
That,1;
understand,1;
synchronous,1;
programming
model,1;
understand,1;
asynchronous,1;
an,1;
asynchronous,1;
by,1;
asynchronous,1;
first,1;
place;,1;
actually,1;
synchronous,1;
asynchronous,1;
models,,1;
first,1;
programs.
Computers,1;
Really,1;
fact,,1;
most,1;
for,1;
Unless,1;
decompressing,1;
or,1;
chances,1;
for,1;
operations,1;
for,1;
packet
to,1;
for,1;
for,1;
even,1;
for,1;
read,1;
memory,1;
From,1;
by,1;
most,1;
such,1;
When,1;
more,1;
Take,1;
utilization—it’s,1;
low,1;
Interfaces
Synchronous,1;
allow,1;
program,1;
rather,,1;
program),1;
execute,1;
each,1;
wait,1;
for,1;
synchronous,1;
gets
to,1;
wild,1;
stuff,,1;
return,1;
program,1;
there.,1;
for,1;
later,1;
an,1;
fair,1;
Unless,1;
synchronous,1;
completes,1;
puts,1;
until,1;
reports
that,1;
func-
tion,1;
executing,1;
performs,1;
operations,1;
also
often,1;
blocking,,1;
has
to,1;
wait,1;
for,1;
external,1;
order,1;
for,1;
further,1;
until,1;
synchronous,1;
or,1;
blocking,,1;
on,1;
until,1;
waiting,,1;
time.
118
Chapter,1;
allow,1;
thing,1;
want,1;
program,1;
wait,1;
for,1;
or,1;
network
packet,,1;
an,1;
for,1;
Similarly,,1;
even,1;
useful,1;
while,1;
option
as,1;
most,1;
concurrent,1;
program,,1;
each,1;
for
executing,1;
threads,1;
can
make,1;
If,1;
thread
may,1;
runnable,,1;
work.
Usually,,1;
threads,1;
each,1;
like,1;
or,1;
channel,1;
example,,1;
for,1;
another,1;
for,1;
threads,1;
on,1;
channel,1;
three,1;
gives,1;
operations,1;
(in,1;
threads,1;
aren’t,1;
execute,1;
another,1;
make
progress,1;
for,1;
task,,1;
like,1;
for,1;
threads,1;
threads,1;
more,1;
another,1;
starts,1;
platforms,,1;
new,1;
threads,1;
by,1;
threads,1;
on,1;
ultimately,1;
the
same,1;
require,1;
threads,1;
number,1;
want,1;
threads,1;
concurrency,1;
executing,1;
If,1;
like,1;
_-_-_
Asynchronous,1;
threads,,1;
executing,1;
time—but,1;
threads,1;
by,1;
or,1;
want,1;
while,1;
good,1;
thing—who,1;
want,1;
faster,1;
on,1;
more,1;
program,1;
more,1;
Mutex.,1;
may,1;
want,1;
types,1;
concurrent
program,1;
enable,1;
them.,1;
detail,1;
10.
Asynchronous,1;
synchronous,1;
alter-
native:,1;
asynchronous,1;
or,1;
nonblocking,1;
asynchronous,1;
may,1;
result,1;
straightaway,,1;
may,1;
instead,1;
result,1;
later,1;
gives,1;
until,1;
an,1;
Poll,,1;
8-1:,1;
or,1;
return,1;
functions,1;
an,1;
later,1;
chap-
ter,,1;
perform,1;
remember,1;
nonblocking,1;
functions,1;
allow,1;
perform,1;
example,,1;
want,1;
read,1;
an,1;
to
do,1;
loop,1;
until,1;
Poll::Ready.,1;
threads,1;
or,1;
loop,1;
here,1;
don’t,1;
want,1;
loop,1;
three,1;
times,1;
second,1;
minutes,1;
until,1;
while,1;
new,1;
That’s,1;
every,1;
library,1;
nonblocking,1;
every,1;
library,1;
different,1;
return,1;
unwieldy.,1;
polling,1;
Future
trait.,1;
later,1;
chapter).
trait,1;
Poll<Self::Output>;
}
Listing,1;
trait,1;
may,1;
produce,1;
languages,1;
promises—they,1;
When,1;
trait,1;
like,1;
like,1;
return,1;
fact,1;
least,1;
a
standardized,1;
pending,1;
values,,1;
don’t,1;
general,,1;
returned,1;
Poll::Ready.,1;
well,1;
safe,1;
returned,1;
implements,1;
To,1;
first,1;
tries,1;
forward,1;
channel,1;
rx,1;
output,1;
channel,1;
Receiver<T>,,1;
rx.next().await,1;
8-3:,1;
await
Asynchronous,1;
looks,1;
very,1;
synchronous,1;
We,1;
each,1;
loop,1;
until,1;
no,1;
more,1;
each,1;
corresponds,1;
synchronous,1;
block.,1;
instead,1;
by,1;
trait.,1;
Since,1;
each,1;
starts,1;
necessary,1;
state,1;
place
the,1;
result,1;
demonstrates.
enum,1;
Option<Sender<T>>),
WaitingForSend(SendFuture<T>,,1;
Option<Receiver<T>>),
}
impl<T>,1;
for,1;
Poll<Self::Output>,1;
{
match,1;
3
Forward::WaitingForReceive(recv,,1;
Poll::Ready((rx,,1;
v,1;
Try,1;
on,1;
more,1;
Poll::Ready(tx),1;
rx,1;
Try,1;
on,1;
{
Poll::Pending
}
}
}
}
}
Listing,1;
implementing,1;
future
You’ll,1;
rarely,1;
like,1;
gives
important,1;
insight,1;
hood,,1;
an,1;
fact,1;
return,1;
We,1;
so
that,1;
different,1;
on,1;
for,1;
ReceiveFuture,1;
(the,1;
polled,1;
for,1;
here,1;
for,1;
declare,1;
output,1;
because,1;
actually,1;
return,1;
no,1;
everything
from,1;
channel,1;
output,1;
more,1;
exam-
ple,,1;
Result,1;
errors,1;
receive(),1;
polling,1;
for,1;
completion,1;
for,1;
another,1;
by,1;
matching,1;
on,1;
3.,1;
first,1;
for,1;
ReceiveFuture,,1;
no,1;
return,1;
we
have,1;
by,1;
order,1;
so,,1;
because,1;
state,1;
an,1;
Option,,1;
with
Option::take,1;
anyway,1;
needed
to,1;
borrow,1;
checker,1;
on,1;
pending,1;
or,1;
actually,1;
necessary,1;
for,1;
correctness,1;
implementing,1;
for,1;
an
optimization.
We,1;
hand-wrote,1;
state,1;
number,1;
state,1;
like,1;
intermediate,1;
state,1;
types
of,1;
Sender::send,1;
return,1;
If,1;
instead,1;
returned,1;
we’d
have,1;
no,1;
types,1;
for,1;
receiver;,1;
returned,1;
return,1;
work,,1;
may,1;
noticed,1;
looks,1;
like,1;
an,1;
asynchronous,1;
of
Iterator.,1;
noticed,1;
library,1;
on,1;
trait,1;
for,1;
types,1;
asynchronous,1;
may,1;
such,1;
loop,1;
over,1;
directly!
Ultimately,,1;
hard,1;
hard,1;
hard,1;
handling,,1;
for,1;
example,,1;
there’s,1;
postfix
operator,,1;
more,1;
convenient,1;
for,1;
like,1;
such,1;
even,1;
like,1;
state,1;
Receiver<T>,,1;
rx.next().await,1;
don’t,1;
an,1;
why,1;
Rust
community,1;
an,1;
understand,1;
To,1;
first,1;
generators—the,1;
by,1;
compiler-
generated,1;
or,1;
yield,,1;
later,1;
Take,1;
forward,1;
func-
tion,1;
for,1;
example.,1;
channel,1;
more,1;
nonblocking,1;
channel,1;
clears,1;
want,1;
If,1;
forward,1;
no,1;
forward,1;
generator.
124
Chapter,1;
forward,1;
state,1;
It,1;
an,1;
by,1;
state,1;
A
method,1;
on,1;
(also,1;
allow,1;
yielding,
which,1;
effectively,1;
while,1;
state,1;
on,1;
When,1;
later,1;
want,1;
(the,1;
for,1;
state,1;
self
to,1;
thing,1;
8-6.
generator,1;
Receiver<T>,,1;
mut,1;
r,1;
r,1;
r,1;
mut,1;
r,1;
};
},1;
Poll::Ready(());,1;
async/await,1;
actually,1;
by,1;
handy,1;
number,1;
struct,1;
or,1;
an,1;
may,1;
seem,1;
magical
once,1;
every,1;
or,1;
return,1;
variables,1;
restored,1;
later,1;
compiler-
generated,1;
part,1;
variables,1;
read,1;
or,1;
read,1;
on,1;
Problem,1;
marvelous.
One,1;
forward,1;
async/await,1;
functions,1;
like,1;
8-4.
If,1;
for,1;
borrow,1;
checker,1;
no,1;
inside,1;
would
reject,1;
code.,1;
by,1;
convince
the,1;
borrow,1;
checker,1;
inspect,1;
compiler
turns,1;
state,1;
verify,1;
rx,1;
dropped,,1;
on,1;
returns.
THE,1;
state,1;
state,1;
point.,1;
If,1;
say,,1;
8KiB,1;
contains
only,1;
such,1;
nesting,1;
on,1;
code.,1;
may,1;
func-
tion,1;
structures,,1;
fair,1;
fact,,1;
gener-
ator-based,1;
by,1;
looking,1;
for,1;
or,1;
complex,1;
on,1;
When,1;
particularly,1;
you
can,1;
try,1;
state,1;
functions,1;
or,1;
you
can,1;
Box::pin),1;
by,1;
an,1;
bet,1;
on,1;
benchmarks,1;
challenge,1;
from
the,1;
clear,1;
what
happens,1;
reference,1;
reference,1;
rx,1;
message
is,1;
knows,1;
try,1;
the
generator,1;
When,1;
inside,1;
Receiver<T>,,1;
Future>
{
let,1;
mut,1;
polling,1;
forward,1;
forward,1;
If,1;
may,1;
produce,1;
returned,1;
instead,1;
Poll::Ready(None)),
those,1;
forwarded,1;
later,1;
by,1;
may,1;
sees,1;
here,1;
When,1;
forward,1;
generator,,1;
the
while,1;
loop,1;
number,1;
times,1;
or,1;
If,1;
returned,1;
reference,1;
forward,1;
Thus,,1;
rx,1;
no,1;
reside
at,1;
locations,1;
memory,,1;
no,1;
here,1;
case,1;
holds,1;
very,1;
construct,,1;
because,1;
you
wouldn’t,1;
point.,1;
for,1;
supporting,1;
trait.,1;
briefly,,1;
marker
trait,1;
implementing,1;
safely,1;
cover,1;
here,,1;
part,1;
simplification.,1;
trait,1;
Pin<&mut,1;
Poll<Self::Output>;
}
Listing,1;
trait,1;
on,1;
Pin<&mut,1;
behind,1;
want,1;
for,1;
structure.
But,1;
move?,1;
To,1;
works,,1;
key,1;
pointer:,1;
P,1;
mut,1;
mut,1;
for,1;
Target,1;
key,1;
here,,1;
over,1;
times,1;
holds,1;
That,1;
holds,1;
P,1;
or
Pin<Rc<MyType>>,1;
or,1;
Pin<&mut,1;
for,1;
sure,1;
once,1;
behind,1;
self-references,1;
section,,1;
P,1;
no,1;
actually,1;
type
indeed,1;
promises,1;
for,1;
example,,1;
on,1;
If,1;
constructor,1;
Pin<&mut,1;
Pin.,1;
no,1;
it!,1;
We,1;
the
same,1;
none,1;
may,1;
first,1;
constructor,1;
for,1;
traits,1;
example,,1;
implements,1;
get_unchecked_mut,1;
for,1;
get_unchecked_mut,1;
DerefMut,1;
for,1;
P,1;
Yet,1;
thing,1;
for,1;
moved,1;
Pin<&mut,1;
Deref,,1;
DerefMut,,1;
Drop,1;
behind,1;
get_unchecked_mut,1;
gives,1;
behind,1;
once,1;
or,1;
memory,,1;
If,1;
weren’t,1;
Pin<&mut,1;
Self>,1;
safe,1;
of
get_unchecked_mut,1;
on,1;
Pin<&mut,1;
Pin.,1;
If,1;
Pin<&mut,1;
on,1;
moved,1;
surprisingly,,1;
implements,1;
Deref<Target,1;
for,1;
for,1;
example,,1;
discuss
in,1;
good,1;
why,1;
an,1;
beyond,1;
If,1;
behind,1;
an,1;
Pin<&mut,1;
behind,1;
may,1;
unsafely,1;
even,1;
documentation,1;
while,1;
reading,1;
noticed,1;
and
safely,1;
changes,1;
behind,1;
Pin.,1;
because,1;
Therefore,,1;
invariants:,1;
placed,1;
getting,1;
reference,1;
unsafe
anyway,,1;
why,1;
That,1;
require,1;
instead,1;
get_unchecked_mut,1;
safe,1;
moved,1;
answer,1;
question,1;
neat,1;
safe,1;
want,1;
first,1;
types,1;
may,1;
(like
a,1;
self-references,1;
the
type,1;
guarantee,,1;
unfortunately,
with,1;
very,1;
with.,1;
because,1;
even,1;
whether,1;
been
moved,1;
or,1;
trait,1;
for,1;
safe,1;
That,1;
promises,1;
use
any,1;
may,1;
an,1;
by,1;
for,1;
types,1;
explicitly,1;
types,1;
types,1;
!Unpin.
For,1;
types,1;
Unpin,,1;
Deref,,1;
new(pointer:,1;
Self;
}
impl<P>,1;
DerefMut,1;
for,1;
DerefMut,,1;
{
fn,1;
safe,1;
for,1;
safe,1;
because,1;
moved,1;
Deref,,1;
DerefMut,,1;
Drop,1;
for,1;
reference,1;
once,1;
Unpin,,1;
moved,1;
even,1;
it
was,1;
pinned,,1;
satisfy,1;
those
requirements!
Similarly,,1;
get_unchecked_mut,1;
because,1;
Unpin,,1;
declared
that,1;
moved,1;
even,1;
pinned,,1;
require-
ment,1;
no,1;
for,1;
safe,1;
safe,1;
fact,,1;
even,1;
gives,1;
P,1;
8Ways,1;
new,1;
Unpin,,1;
new,1;
first,1;
If,1;
Unpin,,1;
easy—we,1;
If,1;
ways:,1;
by,1;
or,1;
been,1;
pinned,,1;
for,1;
traits,1;
on,1;
too.,1;
on,1;
Pin.,1;
behind,1;
Pin<Box<T>>.,1;
no,1;
follows,1;
Deref,,1;
Drop,1;
on,1;
topic,1;
implements,1;
for,1;
even,1;
is
not,1;
assertion,1;
an,1;
for,1;
an,1;
for,1;
safe,1;
even,1;
moved,1;
Pin.,1;
enable,1;
option,,1;
more,1;
involved,,1;
smidgen,1;
code.,1;
We,1;
We,1;
by,1;
shadowing,1;
or,1;
by,1;
may,1;
even,1;
{
($var:ident),1;
mut,1;
mut,1;
$var),1;
for,1;
macro
ensures,1;
on,1;
already.,1;
shadowing,1;
(which,1;
the
Pin,1;
­contract,1;
for,1;
scope):
let,1;
pin_mut!(foo);,1;
foo.poll(),1;
instance,1;
later,1;
violates,1;
contract.,1;
on,1;
rendering,1;
ends.
Pinning,1;
on,1;
noticed,1;
none,1;
asynchronous,1;
you.
Think,1;
r,1;
an,1;
simplification,1;
Pin<&mut,1;
Self>,1;
for,1;
desug-
aring,1;
actually,1;
more,1;
8-12.
1,1;
{
mut,1;
loop,1;
r,
Poll::Pending,1;
more,1;
neat,1;
valid,1;
result,1;
on,1;
Beyond,1;
That,1;
safe,1;
because,1;
for,1;
the
containing,1;
due,1;
polled,1;
for,1;
state,1;
Since,1;
corresponds,1;
(it,1;
so
that,1;
once,1;
no,1;
Thus,,1;
safe.
Going,1;
pretty,1;
side,,1;
another,1;
may,1;
been,1;
If,1;
later,1;
whether,1;
make
progress,1;
That,1;
loop,1;
on,1;
until
they’ve,1;
returned,1;
for,1;
more,1;
useful,1;
like,1;
your
web,1;
want,1;
useful,1;
It,1;
until,1;
another,1;
pass,,1;
condition,1;
It,1;
on,1;
on,1;
channel,”,1;
interrupt,”,1;
or,1;
even,1;
may,1;
may,1;
even,1;
events.
To,1;
Waker,1;
to
go,1;
sleep,,1;
Waker,1;
polls.,1;
gives,1;
for,1;
more,1;
lies!
trait,1;
Pin<&mut,1;
cx:,1;
Poll<Self::Output>;
}
Listing,1;
trait,1;
Context,1;
Waker.,1;
Context,,1;
a
Waker,1;
asynchronous,1;
for,1;
on,1;
Waker,1;
no,1;
defined
by,1;
Waker.,1;
Waker,1;
generic
over,1;
Or,,1;
more,1;
precisely,,1;
Waker,1;
Waker,1;
Waker,1;
functions,1;
involved,1;
aren’t,1;
for,1;
building
blocks,1;
It,1;
for,1;
well,1;
an,1;
Waker,1;
instance,1;
turned,1;
produce,1;
safe,1;
Waker,1;
Contract
So,1;
actually,1;
Waker.,1;
The
idea,1;
on,1;
by,1;
follow,1;
contract.,1;
At,1;
instead,1;
like,1;
or,1;
on,1;
no,1;
children.,1;
no,1;
instead,1;
may,1;
return,1;
why,1;
for,1;
wait,1;
channel,1;
wait,1;
for,1;
external,1;
TCP,1;
read).
Those,1;
wait,1;
for,1;
follow,1;
Waker,1;
on,1;
Waker,1;
wait,1;
for,1;
on,1;
an,1;
chan-
nel.,1;
It,1;
Waker,1;
inside,1;
part,1;
channel,1;
When,1;
injects,1;
by,1;
on,1;
Waker,1;
external,1;
more,1;
involved,,1;
for,1;
knows,1;
generating,1;
knows,1;
or,1;
library,1;
an,1;
completes
or,1;
such,1;
external,1;
entity.,1;
an,1;
like,1;
system
call,1;
for,1;
mecha-
nism,,1;
every,1;
time
an,1;
wait,1;
threads,1;
for,1;
behind,1;
scenes,1;
appropriate,1;
interaction,1;
on,1;
system,,1;
sources,1;
for,1;
When,1;
wait,1;
for,1;
an,1;
external,1;
executor’s,1;
state,1;
(which,1;
by,1;
alongside,1;
Waker.,1;
When,1;
no,1;
make
progress,,1;
gathers,1;
sources,1;
pending,1;
futures
are,1;
for,1;
system,,1;
return,1;
on,1;
new,1;
Linux,,1;
achieved,1;
pretty,1;
every,1;
system
provide,1;
When,1;
wake
on,1;
sources,1;
system
reported,1;
part,1;
an,1;
sources,1;
on,1;
no,1;
more,1;
useful,1;
It,1;
bundling,1;
more,1;
different,1;
When,1;
Waker,1;
state,1;
so
that,1;
actually,1;
this,,1;
such,1;
an,1;
running,,1;
an,1;
time,,1;
state,1;
wish,1;
generic
over,1;
example,,1;
instead,1;
or,1;
File,1;
library,1;
AsyncRead,1;
on,1;
like,1;
traits,1;
for,1;
diffi-
cult,1;
over,1;
example,,1;
while,1;
easily
adapted,1;
necessary),,1;
no,1;
traits,1;
for,1;
or,1;
for,1;
Is,1;
may,1;
seem,1;
example,,1;
for,1;
external,1;
seem,1;
for,1;
on,1;
Waker,1;
anyway!,1;
particular
future,1;
runnable.,1;
That,1;
sure,1;
sleeping,1;
more,1;
for,1;
polling,1;
each,1;
until,1;
polling,1;
later,1;
case,1;
messages
back,1;
on,1;
When,1;
other
becomes,1;
versa.,1;
to
sleep,,1;
more,1;
If,1;
an,1;
thousands,1;
shouldn’t,1;
because,1;
an,1;
If,1;
executing,1;
asynchronous,1;
very,1;
an,1;
asynchronous,1;
program,1;
form,1;
may,1;
number,1;
may,1;
interact,1;
each,1;
tree,1;
executor’s,1;
“run”,1;
on,1;
task,,1;
forward,1;
each,1;
future(s),1;
Waker,1;
for,1;
each,1;
so
that,1;
later,1;
That,1;
while,1;
for,1;
Waker,1;
methods.
When,1;
task,,1;
starts,1;
from
the,1;
how
136
Chapter,1;
Since,1;
knows,1;
fields,,1;
each,1;
edge,1;
choice,1;
case,1;
for,1;
first,1;
or,1;
for,1;
such,1;
choice,1;
It,1;
wasteful.,1;
Waker,1;
Context,1;
Waker,1;
on,1;
polled,1;
state,1;
on,1;
Waker.,1;
state,1;
synchronous,1;
asynchronous,1;
an,1;
executing,1;
If,1;
occupies,1;
for,1;
a
prolonged,1;
executing,1;
or,1;
loop,1;
for,1;
during,1;
Usually,,1;
actually,1;
threads,1;
steal,1;
busy,1;
threads,,1;
more,1;
solution.,1;
situation,1;
threads,1;
no,1;
until,1;
operations,1;
general,,1;
very,1;
executing,1;
or,1;
functions,1;
an,1;
asynchronous,1;
operations,1;
asynchronous,1;
operations,1;
or,1;
on,1;
threads,1;
like,1;
also
provide,1;
for,1;
asynchronous
code,1;
or,1;
for,1;
voluntarily,1;
yield,,1;
part,1;
solution.,1;
good,1;
rule,1;
no,1;
for,1;
more,1;
It,1;
asynchronous,1;
may,1;
by,1;
example.,1;
server
implementation,1;
TcpStream),1;
over,1;
server(socket:,1;
{
handle_client(stream).await?;
}
}
Listing,1;
connections,1;
sequentially
The,1;
server,1;
new,1;
connections,1;
new,1;
“run,1;
program,1;
on,1;
That,1;
return,1;
until,1;
server,1;
may,1;
never
(another,1;
every,1;
new,1;
8-14,1;
new,1;
Since,1;
no,1;
concurrency.,1;
server,1;
handle_client,1;
don’t,1;
loop,1;
until,1;
return,1;
on,1;
by,1;
loop,1;
server,1;
new,1;
connections,1;
server(socket:,1;
mut,1;
connections,1;
8This,1;
least,1;
connections,1;
very,1;
because,1;
busy-loops,
switching,1;
connections,1;
new,1;
each,1;
each,1;
time,,1;
It,1;
ultimately,1;
for,1;
server,1;
for,1;
connections,1;
an,1;
exclusive,1;
reference,1;
(poll,1;
each,1;
by,1;
on,1;
on,1;
on,1;
scenes.,1;
hold
&muts,1;
gives,1;
an,1;
server(socket:,1;
new,1;
represents,1;
for,1;
more,1;
connections
//,1;
concurrently,1;
more,1;
polled,1;
task,,1;
like,1;
continues,1;
concurrently,1;
on,1;
polled,1;
by
the,1;
If,1;
running,,1;
because,1;
no,1;
executor’s,1;
server,1;
example,,1;
server,1;
for,1;
Since,1;
executor
has,1;
returned,1;
Multi-threaded,1;
threads,1;
that
continue,1;
even,1;
user’s
code,,1;
this,,1;
behind,1;
scenes,1;
implements,1;
why,1;
necessary,1;
allow,1;
moment.,1;
most,1;
code.,1;
Take,1;
the
Rust,1;
promises,1;
isn’t,
and,1;
At,1;
and
likely,1;
read,1;
this,,1;
precise,1;
for,1;
code
are,1;
even,1;
beyond,1;
most,1;
code.
Your,1;
gives,1;
for,1;
may,1;
do
with,1;
for,1;
program,1;
cor-
rect.”,1;
example,,1;
valid,1;
or,1;
like,1;
head,1;
or,1;
power,1;
assumptions,1;
for,1;
may,1;
creep,1;
in.
Crucially,,1;
checking,,1;
beyond,1;
When,1;
allow,1;
operations,1;
per-
form,1;
operations,1;
because,1;
unsafe
allows,1;
Next,,1;
follow,1;
order,1;
safe,1;
code.,1;
safely.
The,1;
about
its,1;
different,1;
meanings.,1;
block.,1;
example,,1;
9-1,1;
even,1;
code.,1;
Here,,1;
that
there,1;
SomeType<T>,1;
safe,1;
second,1;
Here,,1;
even,1;
SomeType<T>,1;
as_ref(&self),1;
{
unsafe,1;
safe,1;
listings,1;
differ,1;
because,1;
contracts.,1;
decr,1;
To,1;
like,1;
Rc.,1;
decr,1;
decrements,1;
decrement,1;
may,1;
trigger,1;
If,1;
decr,1;
second-to-last,1;
Rc,1;
a
given,1;
reference,1;
count,1;
dropped—but
the,1;
program,1;
on,1;
dan-
gling,1;
program,1;
violates,1;
runtime.,1;
general,,1;
program,1;
triggers,1;
outcome,1;
unpredictable.,1;
cover,1;
later,1;
chapter.
Conversely,,1;
no,1;
Rc,1;
reference,1;
count
using,1;
safe,1;
safe,1;
inside,1;
for,1;
fact,1;
We,1;
safe,1;
to
an,1;
operation,,1;
unsafe
responsibly.
For,1;
every,1;
an,1;
That,1;
declare,1;
an,1;
any
unsafe,1;
or,1;
operations,1;
inside,1;
mistake,,1;
through
the,1;
RFC,1;
2585.,1;
RFC,1;
an,1;
performs,1;
operations,1;
an,1;
inside,1;
become,1;
hard,1;
every,1;
perform,1;
realizing,1;
it!,1;
example,,1;
decr,1;
*std::ptr::null(),1;
any
unsafe,1;
enable,1;
operations,1;
because,1;
indicates,1;
question,1;
hold.
Unsafe,1;
an,1;
for,1;
operations,1;
If,1;
want,1;
an,1;
X,
Y,,1;
on,1;
block.,1;
once,1;
sign,1;
allowed
to,1;
rather,,1;
enable,1;
an,1;
Technically,,1;
external,1;
variables,1;
don’t,1;
allow,1;
types,1;
another,1;
knows,1;
or,1;
even,1;
section,,1;
wrong,1;
for,1;
grown-up,1;
neat,1;
new,1;
most,1;
raw
pointer,1;
*mut,1;
more,1;
or,1;
don’t,1;
chapter.,1;
types,1;
mostly,1;
because,1;
reference,1;
an,1;
block.,1;
want,1;
You’ll,1;
useful,1;
such,1;
reading,1;
or,1;
on,1;
&*ptr,1;
may,1;
reference,,1;
pointer,,1;
*mut,1;
want,1;
*mut,1;
reference,1;
ptr,1;
may,1;
wondering,1;
*mut,1;
std::ptr::NonNull<T>.,1;
specification,1;
practical,1;
*mut,1;
*mut,1;
(see,1;
“Lifetime,1;
1),
whereas,1;
covariant.,1;
and
NonNull<T>,1;
differ,1;
types,1;
whether,1;
or,1;
If,1;
It,1;
optimization,1;
niche
optimization:,1;
knows,1;
types,1;
like,1;
Option<NonNull<T>>,1;
case,1;
by,1;
If,1;
*mut,1;
T.
Unrepresentable,1;
liveness,1;
system,,1;
such,1;
self-referential
struct,1;
like,1;
valid,1;
for,1;
may,1;
even,1;
forever,,1;
even,1;
Take,1;
an,1;
here,1;
make
up,1;
alongside,1;
{
name:,1;
str,
age:,1;
failing,,1;
reference,1;
inside,1;
Person,1;
no,1;
reference,1;
or,1;
like,1;
(which,1;
exist),,1;
because,1;
reference,1;
no,1;
problem
because,1;
don’t,1;
have
to,1;
sure,1;
pointer,,1;
on,1;
&*ptr,1;
instead,1;
unsafely,1;
appropriate,1;
times,1;
valid.
A,1;
like,1;
for,1;
runtime
when,1;
no,1;
valid,1;
reference,1;
away,,1;
more,1;
like,1;
a
Weak,1;
an,1;
even,1;
arbitrary,1;
like,1;
you
can,1;
by,1;
most,1;
structures,,1;
like,1;
an,1;
for,1;
each,1;
read,1;
want,1;
to
learn,1;
even,1;
reference,1;
for,1;
this,,1;
illegal,1;
pointer
point,1;
beyond,1;
triggers,1;
arbitrary,1;
compiler
could,1;
If,1;
read,1;
because,1;
like,1;
reference,,1;
or,1;
for,1;
key,1;
library,1;
types,1;
to
turn,1;
such,1;
example,,1;
[]::len.,1;
reconstruct,1;
by,1;
return,1;
underlying,1;
thing.
Playing,1;
Fast,1;
want,1;
because,1;
because,1;
(very,1;
so.
The,1;
first,1;
by,1;
most,1;
for,1;
play,1;
reference,,1;
assert,1;
raw
pointer,1;
fact,1;
reference,1;
kind,1;
particularly,1;
handy,1;
or,1;
*mut,1;
std::ffi::c_void,,1;
func-
tion,1;
void,1;
Similarly,,1;
void,1;
type.
Pointer,1;
useful,1;
want,1;
sequence
of,1;
like,1;
characters,,1;
and
arrays,,1;
or,1;
#[repr(C)],1;
such,1;
types,1;
serialization.,1;
want,1;
try,1;
for,1;
Functions
Arguably,1;
most,1;
to
call,1;
Deeper,1;
most,1;
functions,1;
because,1;
operate,1;
on,1;
interact,1;
no,1;
an,1;
enable,
as,1;
interact,1;
with.,1;
general,,1;
three,1;
interact,1;
declare,1;
functions,1;
variables,1;
(which,1;
When,1;
declare,1;
such,1;
by,1;
external,1;
program,1;
such,1;
library,1;
Since,1;
inherently,1;
If,1;
bets,1;
memory,1;
contents,1;
clobber,1;
Code
147references,1;
Similarly,,1;
by,1;
external,1;
time,,1;
filled,1;
don’t,1;
an,1;
for,1;
Pass,1;
on,1;
operations,1;
safe,1;
by,1;
introducing,1;
example,,1;
an,1;
try,1;
an,1;
beyond,1;
slice.,1;
But,
given,1;
safe,1;
includes,1;
on,1;
or,1;
return,1;
an,1;
Option,1;
That,1;
no,1;
cause
undefined,1;
even,1;
an,1;
beyond,1;
key,1;
letting,1;
key,1;
wrong,1;
hash.
However,,1;
may,1;
their
tightest,1;
To,1;
knows,1;
struc-
tures,1;
Such,1;
to
indicate,1;
safe,1;
for,1;
rarely,1;
optimize.
Custom,1;
on,1;
That,1;
on,1;
beyond,1;
by,1;
or,1;
Since,1;
functions,1;
hard,1;
good,1;
unsafe
functions.,1;
functions,1;
may,1;
want,1;
valid,1;
for,1;
may,1;
example,,1;
pointer,,1;
for,1;
number,1;
3
(normally,1;
or,1;
handy,1;
construct-
ing,1;
by,1;
or,1;
dealing,1;
or,1;
valid,1;
by,1;
filled,1;
holds,1;
valid,1;
for,1;
Or,,1;
outer,1;
It,1;
implements,1;
safe,1;
(separately,1;
from
the,1;
Drop,1;
ManuallyDrop.,1;
That,1;
leaves,1;
explicitly,1;
such
as,1;
Drop,1;
trait.,1;
dropped,,1;
no,1;
safe,1;
try,1;
why,1;
destructor,1;
because,1;
tries,1;
pointer,,1;
for,1;
time!,1;
particularly,1;
useful,1;
memory,,1;
such,1;
an,1;
arena,1;
surrounding,1;
Waker,1;
a
data,1;
holds,1;
Waker,1;
been,1;
such,1;
safe,1;
(through
Waker::wake,1;
fact,1;
valid,1;
follow,1;
the
documentation,1;
holds,1;
functions,1;
surrounding,1;
actually,1;
produce,1;
code.
The,1;
for,1;
program,1;
on,1;
such,1;
branches,1;
the
line,1;
an,1;
may,1;
cause,1;
program,1;
believed,1;
ptr,1;
holds,1;
number,1;
functions,1;
odd
pointers—those,1;
assumptions,1;
first,1;
functions,1;
even,1;
if
that,1;
T’s,1;
(see,1;
on,1;
array,1;
or,1;
packed,1;
second,1;
functions,1;
operate,1;
on,1;
don’t,1;
functions,1;
(they,1;
register,,1;
for,1;
example,,1;
even,1;
twice,1;
handy,1;
aren’t,1;
further,1;
because,1;
an,1;
on,1;
love,1;
the
provided,1;
That,1;
fact,1;
for,1;
an,1;
reference,1;
say,,1;
return,1;
well,1;
rendering,1;
or,1;
dropped,1;
That’s,1;
in—it,1;
sign,1;
no,1;
cause,1;
undefined
behavior,1;
documentation,1;
for,1;
case,1;
for,1;
method.
150
Chapter,1;
9Implementing,1;
traits,1;
aren’t,1;
on,1;
correctness,1;
by,1;
example,,1;
trait,1;
for,1;
traits,1;
least,1;
specified,1;
documentation,1;
for,1;
trait.,1;
Thus,,1;
cover,1;
traits,1;
here,1;
common
examples,1;
library,1;
traits,1;
safe,1;
or,1;
more,1;
traits,1;
for,1;
for,1;
most,1;
types,1;
for,1;
by,1;
case,1;
auto-traits,,1;
members,1;
question,1;
Send
or,1;
occurs,1;
due,1;
At,1;
first,1;
no,1;
may,1;
raw
pointer,1;
or,1;
may,1;
safe,1;
weak—after,1;
why,1;
types,1;
themselves,,1;
even,1;
not
realize,1;
developer,1;
unsafely,1;
those
types,1;
or,1;
inadvertently
introduce,1;
types,1;
an,1;
explicitly,1;
sign,1;
followed,1;
mistake,1;
forget,1;
add
bounds,1;
impl<T:,1;
for,1;
trait,1;
memory,1;
allocator
in,1;
We,1;
topic,1;
gives,1;
for,1;
the
GlobalAlloc,1;
trait,1;
Layout),1;
*mut,1;
*mut,1;
9-4:,1;
trait,1;
trait,1;
for,1;
new,1;
for,1;
memory,,1;
Each,1;
number,1;
because,1;
on,1;
the
implementer,1;
methods.,1;
trait,1;
memory,1;
such,1;
If,1;
trait,1;
an,1;
unaligned,1;
trigger,1;
safe
code,1;
rule,1;
trigger,1;
memory,1;
safe,1;
cause,1;
Unpin
The,1;
trait,1;
surprise,1;
It,1;
may,1;
even,1;
surprise,1;
reading,1;
trait,1;
types,1;
aren’t,1;
moved,1;
they’ve,1;
been,1;
placed,1;
It,1;
safely,1;
why,1;
an,1;
trait.,1;
for,1;
safely,1;
or,1;
type;,1;
form,1;
or,1;
Pin::get_unchecked_mut.,1;
safe,1;
for,1;
Drop,1;
trait!
When,1;
Drop,1;
for,1;
even,1;
for,1;
covered,1;
by,1;
which
must,1;
such,1;
an,1;
first,1;
place.
When,1;
traits,1;
wild,1;
follow,1;
trait,1;
safe,1;
trait,1;
memory,1;
trait,1;
trait,1;
good,1;
Rc,1;
9Send,,1;
operations,1;
memory,1;
an,1;
threads,1;
try,1;
reference,1;
trait,1;
good,1;
counterexample.,1;
triggers,1;
memory,1;
no,1;
safe,1;
trigger,1;
memory,1;
due,1;
an,1;
trait,1;
trait,1;
most,1;
RFC,1;
on,1;
trait,1;
safe,1;
later,1;
on,1;
because,1;
like,1;
an,1;
incorrect,1;
trait,1;
cause,1;
good,1;
memory,1;
trigger,1;
errors,1;
example,,1;
traits,1;
even,1;
faced,1;
say,,1;
returned,1;
different,1;
each,1;
too—there,1;
unsafe
code,1;
such,1;
for,1;
an,1;
dereferenced,1;
dif-
ferent,1;
each,1;
Such,1;
on,1;
a
contract,1;
or,1;
actually,1;
claimed,1;
rather,,1;
claim!
NOTE
An,1;
implication,1;
traits,1;
like,1;
safe,1;
unsafe
code,1;
on,1;
safe,1;
correctness.,1;
only
to,1;
traits,,1;
Responsibility
So,1;
do
with,1;
code.,1;
say,,1;
knows,1;
valid,1;
reference,1;
time,,1;
subject,1;
safe,1;
raises,1;
question,1;
safe,1;
even,1;
first
place.,1;
When,1;
safe,1;
When,1;
safe,1;
different,1;
section,,1;
wielding,1;
power,1;
code.
The,1;
for,1;
safe,1;
At,1;
hard,1;
dos,1;
but
many,1;
or,1;
settled,,1;
sure,1;
If,1;
double-check
the,1;
reference,1;
declare,1;
by,1;
talk-
ing,1;
threads,1;
an,1;
or,1;
ultimately,1;
safe,1;
three,1;
ways:,1;
or,1;
first,1;
sane,1;
on,1;
sane,1;
here,1;
very,1;
new,1;
smarter,1;
along,,1;
or,1;
cause,1;
another,1;
code
may,1;
no,1;
sane,1;
over,1;
by,1;
on,1;
dif-
ferent,1;
platform,1;
or,1;
program,1;
differently!,1;
why,1;
even,1;
fine.,1;
like,1;
second,1;
roulette
just,1;
because,1;
errors,1;
If,1;
pointer,,1;
for,1;
example,,1;
program,1;
(in,1;
an,1;
may,1;
least,1;
wrong.,1;
errors,1;
manifest,1;
output,,1;
or,1;
don’t,1;
program,1;
program,1;
state,1;
silently,1;
or,1;
memory,1;
could
be,1;
exposed,1;
external,1;
cause,1;
ongo-
ing,1;
or,1;
challenge,1;
defined—the,1;
eliminate,1;
or,1;
even,1;
miscompile,1;
code.,1;
program,1;
on
what,1;
question,1;
undefined
behavior,1;
why,1;
no,1;
manifests.
W,1;
an,1;
unpredictable.,1;
That,1;
because,1;
or,1;
follows,1;
rarely,1;
clear,1;
until
runtime—it’s,1;
be.,1;
different,1;
version.
If,1;
aren’t,1;
underlying,1;
perform,1;
Nearly,1;
question,1;
want,1;
good,1;
illustration,1;
interact,1;
hard,1;
most,1;
understand,1;
unsafe
code,1;
dictates,1;
for,1;
for,1;
sounds,,1;
examples.
Reference,1;
very,1;
reference,1;
types,1;
Specifically,
references,1;
aligned,,1;
valid,1;
for,1;
addition,,1;
an
exclusive,1;
reference,1;
memory,1;
exclusive,1;
whether,1;
or,1;
reference,1;
even,1;
it!
Shared,1;
is
not,1;
during,1;
That,1;
over,1;
This
applies,1;
transitively,,1;
an,1;
*mut,1;
mutate,1;
*mut,1;
even,1;
rule,1;
by,1;
types,1;
like,1;
an,1;
result,1;
for,1;
for,1;
safely,1;
reference,1;
packed,1;
struct,1;
Since,1;
repr(Rust),1;
may,1;
aligned,,1;
creating,1;
an,1;
exist!,1;
for,1;
obtaining,1;
reference,1;
first,1;
creating,1;
reference,,1;
confused
with,1;
operands,1;
via,1;
RFC,1;
been,1;
writing.
Primitive,1;
Types
Some,1;
types,1;
on,1;
example,,1;
bool,1;
allowed
to,1;
or,1;
hold
a,1;
or,1;
above,1;
most,1;
types,1;
may,1;
seem,1;
stem
from,1;
enable,1;
good,1;
illustration,1;
types,1;
chapter.,1;
To,1;
recap,
the,1;
optimization,1;
example,,1;
reference,1;
an,1;
an,1;
byte.,1;
Booleans,1;
further.,1;
Since,1;
bool,1;
or,1;
an,1;
Option<Option<bool>>,1;
bears,1;
whether,1;
implements,1;
optimization,1;
or,1;
hitting,1;
later,1;
on,1;
memory,1;
like,1;
an,1;
exclusive,1;
reference,1;
memory,1;
explicitly,1;
or,1;
on
that,1;
example,,1;
Boxes,1;
undefined
behavior,1;
That’s,1;
case,1;
even,1;
because,1;
reference,1;
yet,,1;
valid,1;
for,1;
type.
The,1;
most,1;
want,1;
for,1;
read,1;
say,,1;
network.
Until,1;
been,1;
read,1;
memory,1;
valid,1;
read,1;
because,1;
memory,1;
for,1;
values
that,1;
aren’t,1;
(it,1;
knows,1;
no,1;
assumptions,1;
Box<T>,1;
bool,1;
or,1;
safe,1;
by,1;
memory,1;
inside,1;
very,1;
useful,1;
tool,1;
may,1;
an,1;
for,1;
three,1;
contents,1;
or,1;
once,1;
valid,1;
new,1;
holds,1;
reading,1;
reading,1;
finally,,1;
contents,1;
assertion,1;
backing,1;
memory,1;
valid,1;
9-5,1;
an,1;
safely
initialize,1;
array,1;
explicitly,1;
Option<u8>),1;
mut,1;
buf,1;
mut,1;
g),1;
std::iter::from_fn(gen).take(4096).enumerate(),1;
init:,1;
{
MaybeUninit::slice_assume_init_ref(&buf[..last])
};
//,1;
...,1;
init,1;
Using,1;
safely,1;
an,1;
buf,1;
[0;,1;
4096],1;
first,1;
before
executing,,1;
even,1;
noticeable,1;
on,1;
sufficiently,1;
Here,,1;
instead,1;
allow,1;
array
to,1;
on,1;
partially,1;
If,1;
causes,1;
an,1;
been,1;
any.,1;
backing,1;
memory,1;
holds,,1;
say,,1;
memory,1;
aspect,1;
operations,1;
safe,1;
prepared,1;
handle
panics.,1;
handler,1;
on,1;
most,1;
platforms,1;
program,1;
on,1;
instead,1;
unwind,1;
unwinding,1;
scope,,1;
func-
tion,,1;
enclosed,1;
until,1;
first,1;
for,1;
If,1;
don’t,1;
unwinding,1;
for,1;
example,,1;
i),1;
T::default();
}
}
}
}
Listing,1;
seemingly,1;
safe,1;
for,1;
vector,1;
T::default,1;
First,
fill_default,1;
(which,1;
At,1;
When,1;
vector,1;
indicates,1;
more,1;
Ts,1;
actually,1;
due,1;
example,,1;
T::default,1;
panicked,1;
on,1;
Ts,1;
actually,1;
uninitialized
memory!
The,1;
case,1;
We,1;
unwinding,1;
on,1;
correctness
of,1;
for,1;
problems,
you’ll,1;
want,1;
for,1;
may,1;
safe,1;
whether,1;
question,1;
over,1;
situation,1;
operator,1;
return,1;
If,1;
this,,1;
sure,1;
safe,1;
execute,1;
rarer,1;
for,1;
an,1;
different,1;
types,1;
memory,1;
even,1;
the
same,1;
whether,1;
safe,1;
different,1;
fact,,1;
even,1;
the
same,1;
example,,1;
Baz;
Unsafe,1;
Foo<Bar>;
type,1;
Type,1;
lack,1;
for,1;
repr(Rust),1;
code—just,1;
because,1;
types,1;
interchangeable,,1;
types,1;
different,1;
At,1;
for,1;
types,1;
for,1;
now,,1;
given,,1;
with.
Even,1;
types,1;
types,1;
example,,1;
while,1;
UnsafeCell<T>,,1;
window,1;
once,1;
for,1;
example,,1;
an,1;
Option<T>,1;
may,1;
invalid,1;
for,1;
Option),,1;
MaybeUninit<T>
can,1;
optimization,1;
an,1;
for,1;
Option,1;
discriminator.
It’s,1;
cause,1;
once,1;
types,1;
an,1;
example,,1;
Wrapper<PhantomData<u8>>,1;
Wrapper<PhantomData<i8>>,1;
different,1;
even,1;
types,1;
{
item:,1;
for,1;
PhantomData<u8>,1;
Sneaky,1;
for,1;
Sneaky,1;
9-8:,1;
Wrapper,1;
types,1;
hard,1;
right.
All,1;
types,1;
for,1;
example,,1;
types,1;
involved,1;
their
trait,1;
or,1;
types,1;
gives,1;
very,1;
Drop,1;
borrow,1;
checker,1;
tool,1;
for,1;
ensuring
the,1;
compile,1;
time,,1;
gives,1;
borrow,1;
checker,1;
beyond,1;
detail,1;
code.,1;
To,1;
understand,1;
checking,,1;
Rust
compiler’s,1;
for,1;
second,1;
reference,1;
mut,1;
x,1;
x);
x,1;
dictates,1;
whether,1;
Foo,,1;
whether,1;
compile,1;
or,1;
When,1;
x,1;
dropped,1;
We,1;
borrow,1;
necessary,1;
x,1;
x,1;
reference,1;
x,1;
Since,1;
exclusive,1;
reference,1;
for,1;
allow,1;
allow,1;
Drop,1;
may,1;
reference,1;
warmed,1;
reference,1;
even,1;
mut,1;
mut,1;
x,1;
x);
x,1;
dictate,1;
whether,1;
say
whether,1;
compile,1;
or,1;
implements,1;
Drop,1;
most,1;
scope,,1;
or,1;
dropped,,1;
Foo,,1;
reference,1;
may,1;
instead,1;
PhantomData<Foo<'a>>
or,1;
case,1;
actually,1;
dropped,,1;
reference,1;
x,1;
kind,1;
want,1;
because,1;
even,1;
detect,1;
logic,1;
Normally,1;
affect,1;
exception:,1;
implementing,1;
Box<T>,1;
x,1;
Drop,1;
memory,,1;
beyond,1;
for,1;
x,1;
dropped!
To,1;
types,1;
like,1;
this,,1;
an,1;
partially,1;
temporary
escape,1;
hatch,1;
until,1;
adds,1;
for,1;
types,1;
Drop,1;
or,1;
beyond,1;
by,1;
Drop,1;
for,1;
..
This,1;
hatch,1;
declare,1;
param-
eter,1;
like,1;
new,1;
Box<T>,1;
holds,1;
*mut,1;
Box<T>,1;
thus
that,1;
don’t,1;
Box<T>,1;
dropped,,1;
Box<T>,1;
live,1;
until,1;
dropped,1;
shortened,1;
x,1;
true,
since,1;
T::drop,,1;
may,1;
access,,1;
say,,1;
reference,1;
even,1;
Box<T>,1;
on,1;
like.
struct,1;
Box<T>,1;
{
t:,1;
NonNull<T>,,1;
*mut,1;
for,1;
for,1;
Box<T>,1;
...,1;
for,1;
maximally,1;
check
This,1;
interaction,1;
miss,,1;
attribute.,1;
serve
as,1;
Drop,1;
wild,1;
future,
you’ll,1;
for,1;
consideration,1;
for,1;
Drop,1;
sure,1;
live,1;
example,,1;
delayed,1;
later,1;
or,1;
trigger,1;
mostly,1;
behind,1;
may,1;
more,1;
unsafe
code,1;
safe,1;
even,1;
key,1;
sure,1;
safe,1;
instead,1;
techniques,1;
more,1;
confident,1;
correctness,1;
unsafe
code,1;
there’s,1;
no,1;
whether
the,1;
safe,1;
interaction,1;
kind,1;
good,1;
example
of,1;
may,1;
for,1;
produce,1;
reference,1;
may,1;
safe,1;
time,,1;
safe,1;
of
Unpin,1;
for,1;
no,1;
nowhere,1;
near,1;
new,1;
boundary,1;
of
all,1;
relates,1;
block.,1;
boundary,1;
here,1;
an,1;
part,1;
bits.”,1;
example,,1;
declare,1;
public,1;
or,1;
the
same,1;
on,1;
traits,1;
for,1;
on,1;
implementing,1;
traits,1;
remember,1;
an,1;
for,1;
If,,1;
on,1;
crate,,1;
acciden-
tally,1;
an,1;
If,1;
such,1;
rule,1;
an,1;
on,1;
over,1;
fields,,1;
(including,1;
safe,1;
block.,1;
Here,,1;
too,,1;
boundary,1;
reasoning,
it’s,1;
encapsulate,1;
form,1;
an,1;
That,1;
for,1;
yet,,1;
open,1;
by,1;
encapsulate,1;
complex,1;
safe,1;
interface,,1;
When,1;
try,1;
public,1;
very,1;
small,1;
number,1;
on,1;
don’t,1;
code.,1;
Removing,1;
year,1;
now,,1;
want,1;
chances
are,1;
don’t,1;
even,1;
good,1;
an,1;
docu-
ment,1;
safe,1;
Here,,1;
completeness,1;
If,1;
or,1;
type—then,1;
every,1;
documentation,1;
too.,1;
read,1;
documentation,1;
an,1;
on-demand,1;
read,1;
may,1;
obvious,1;
blocks—think,1;
question,1;
slice::get_unchecked,1;
fact,1;
may,1;
long.,1;
That’s,1;
good,1;
times,1;
by,1;
for,1;
realizing,1;
actually,1;
don’t,1;
uphold
a,1;
key,1;
You’ll,1;
year,1;
on.
164
Chapter,1;
9Before,1;
read,1;
miss,,1;
them.,1;
covered,1;
more,1;
should
also,1;
reference,1;
chances,1;
even,1;
about
whether,1;
reference,1;
an,1;
pro-
duction,,1;
first,1;
intermediate,1;
Miri,1;
compile,1;
instead
interprets,1;
Miri,1;
more,1;
program,1;
obviously,1;
bad,,1;
like,1;
read,1;
Miri,1;
very,1;
for,1;
because,1;
Miri,1;
execute,1;
Miri,1;
Miri,1;
execute,1;
suite.,1;
It,1;
actually,1;
runs,,1;
won’t
catch,1;
Miri,1;
an,1;
for,1;
detect,1;
runtime.,1;
fidelity,1;
vary,1;
loved,1;
tool,1;
Google’s,1;
number,1;
memory,1;
such,1;
memory,1;
code.,1;
operate,1;
on,1;
order,1;
actually,1;
runs,,1;
key,1;
effectively,1;
for,1;
every,1;
regression,1;
tests,1;
over,1;
suite
improves,,1;
by,1;
new,1;
tests,1;
points,1;
don’t,1;
forget,1;
generously,1;
unsafe
code.,1;
triggering,1;
assumptions,1;
like,1;
size
Unsafe,1;
usize,1;
on,1;
for,1;
If,1;
concerned,1;
macros,1;
execute,1;
touted
as,1;
why,1;
charade.,1;
concern,1;
incorrect,1;
for,1;
argue,1;
very,1;
least,1;
on,1;
may,1;
program,1;
successful,1;
safe,1;
languages,1;
for,1;
form,1;
or,1;
assembly.,1;
on,1;
correctness,1;
code,
the,1;
languages,1;
on,1;
correctness,1;
different,1;
safe,1;
unsafe
code,,1;
errors,1;
due,1;
two,,1;
or,1;
due,1;
other.,1;
correctness,1;
interaction,1;
exemplified,1;
by,1;
like,1;
continues,1;
borrow,1;
checker,1;
for,1;
explicitly,1;
aren’t,1;
present,1;
like,1;
by,1;
concurrency,1;
on,1;
new,1;
direction!
166
Chapter,1;
910
CONCURRENCY,1;
L,1;
L,1;
L,1;
implement
support,1;
for,1;
concurrent,1;
to
use,1;
concurrency,1;
or,1;
high-performance,1;
suf-
ficient,1;
underlying,1;
for,1;
may,1;
three,1;
flavors:,1;
concurrency,1;
multicore,1;
concurrent,1;
program,1;
different,1;
even,1;
more,1;
preemption,1;
represents,1;
aspect,1;
multi-
threading.,1;
safe,1;
for,1;
by,1;
more,1;
or,1;
program,1;
threads,1;
only
one,1;
parallel),,1;
may,1;
types,1;
techniques,1;
whether,1;
threads,1;
actually,1;
execute,1;
more,1;
or,1;
chapter.,1;
When,1;
particularly,1;
neat,1;
type-based,1;
library
feature,1;
Since,1;
propagate,1;
program,1;
most,1;
traits,,1;
and
channels.,1;
reiterate,1;
here,,1;
concurrency,1;
also
explore,1;
concurrency,1;
interact,1;
diving,1;
operations,1;
concurrent,1;
code.
The,1;
good,1;
for,1;
concurrent,1;
concurrency,1;
why,1;
concurrency,1;
challenging,1;
first,1;
That,1;
for,1;
concurrent,1;
code?
Correctness
The,1;
concurrency,1;
access—to,1;
If,1;
want,1;
for,1;
reading,1;
an,1;
or,1;
once,1;
arise,,1;
form,1;
data
race,1;
occurs,1;
state,1;
while,1;
second,1;
read,1;
or,1;
additional
168
Chapter,1;
second,1;
may,1;
read,1;
partially,1;
state,
clobber,1;
first,1;
or,1;
first,1;
general,,1;
behavior.
Data,1;
part,1;
concurrent,1;
race
condition,1;
occurs,1;
outcomes,1;
sequence
of,1;
on,1;
the
system.,1;
threads,1;
executing,1;
or,1;
Race,1;
conditions,,1;
inherently,1;
for,1;
particularly,1;
chapter.
Performance
Often,,1;
concurrency,1;
programs,1;
Or,,1;
more,1;
enable,1;
perform,1;
more,1;
operations,1;
second,1;
by,1;
more,1;
hardware,1;
on,1;
by,1;
while,1;
another,1;
waiting,
or,1;
by,1;
threads,1;
serially,1;
on,1;
core.,1;
devel-
opers,1;
kind,1;
program,1;
program,1;
more,1;
such,1;
program,1;
completes,1;
unit
of,1;
concurrent,1;
programs,1;
achieve,1;
such,1;
scaling
is,1;
more,1;
increases,1;
two,,1;
more,1;
programs,1;
even,1;
more,1;
because,1;
threads
are,1;
for,1;
resource.
It,1;
more,1;
helps,1;
harder.,1;
If,1;
involved,1;
particularly,1;
standing,1;
discussing,1;
kind,1;
number,1;
are
mutual,1;
exhaustion,,1;
concurrent,1;
execute,1;
time,,1;
no,1;
or,1;
explicitly,1;
enforces,1;
critical,1;
program,1;
example,,1;
over,1;
an,1;
effectively,1;
implements,1;
execute,1;
exclusion,1;
critical,1;
example,,1;
for,1;
memory,1;
exclusion,1;
for,1;
memory,1;
Similarly,,1;
operations,1;
may,1;
seem,1;
such,1;
creating,1;
different,1;
names
in,1;
directory,,1;
may,1;
inside,1;
concurrent,1;
for,1;
memory,1;
allocator!
Mutual,1;
exclusion,1;
most,1;
obvious,1;
portion,1;
program,1;
number,1;
achieve,1;
limited,1;
by,1;
exclusive,,1;
restrict,1;
theoretically,1;
minded,,1;
on,1;
result,1;
exclusive,1;
sections,1;
computed,1;
even,1;
achieve,1;
concurrency,1;
interact,1;
may,1;
on,1;
TCP,1;
memory,1;
limited,1;
for,1;
concurrency.,1;
no,1;
for,1;
apart,1;
for,1;
such,1;
require,1;
even,1;
more,1;
topic,1;
chapter.,1;
rarely,1;
more
something,1;
10False,1;
Sharing
False,1;
occurs,1;
operations,1;
shouldn’t,1;
one
another,1;
This
usually,1;
because,1;
operations,1;
on,1;
even,1;
resource.
The,1;
operations,1;
operations,1;
execute,1;
serially,1;
instead,1;
two,,1;
for,1;
each
of,1;
operations,1;
like,1;
because,1;
over
all,1;
order,1;
different,1;
threads,1;
to
avoid,1;
operations,1;
different,1;
“dining,1;
philosophers,1;
problem,”,1;
for,1;
may,1;
by,1;
underlying,1;
algo-
rithm,,1;
right.,1;
solve,,1;
good,1;
more,1;
occurs,1;
on,1;
we
discussed,1;
on,1;
memory,1;
amortize,1;
memory,1;
on,1;
most,1;
every,1;
memory,1;
reading,1;
or,1;
play,1;
different,1;
on,1;
the
same,1;
execute,1;
even,1;
disjoint.
This,1;
seem,1;
matter,,1;
kind,1;
an,1;
an,1;
array,1;
integer,1;
threads,1;
on,1;
for,1;
every,1;
If,1;
operations,1;
most,1;
may,1;
counters!
The,1;
avoiding,1;
so
that,1;
That,1;
on,1;
different,1;
lines.,1;
inflates,1;
your
data,1;
structures,,1;
benchmarks,1;
a
problem.
Concurrency,1;
aspect,1;
concurrency,1;
introducing,1;
concurrency,1;
first,1;
good
at,1;
been,1;
for,1;
time,,1;
expensive,1;
locks,,1;
channels,,1;
or,1;
concurrent,1;
concurrency,1;
number,1;
is
why,1;
may,1;
surprise,1;
you.
If,1;
read,1;
Frank
McSherry’s,1;
(https://www
.frankmcsherry.org/assets/COST.pdf),,1;
particularly
egregious,1;
“costly,1;
three,1;
for,1;
concurrency,1;
programs,1;
memory,1;
every,1;
concurrency,1;
here,1;
on,1;
three,1;
Memory
Shared,1;
memory,1;
concurrency,1;
conceptually,,1;
very,1;
cooperate,1;
by,1;
on,1;
regions,1;
memory,1;
form,1;
state,1;
by,1;
or,1;
for,1;
concurrent,1;
threads,1;
may,1;
on,1;
such
as,1;
threads,1;
perform,1;
over,1;
may,1;
performing,1;
different,1;
require,1;
state,
such,1;
another,1;
memory,1;
choice,1;
struc-
tures,1;
significant,,1;
especially,1;
threads,1;
involved,1;
closely.,1;
beyond,1;
very,1;
reader/writer,1;
allow,1;
more,1;
concurrent
reads,1;
reader/writer,1;
concurrent,1;
aim,1;
for,1;
good,1;
say,,1;
concurrent,1;
general,,1;
memory,1;
want,1;
for,1;
aspects,1;
for,1;
memory,1;
concurrency,1;
good,1;
for,1;
state,1;
state,1;
and
another,1;
state,1;
g,,1;
memory,1;
concurrency,1;
If,1;
case,
the,1;
more,1;
designs.
NOTE
Some,1;
concurrent,1;
number,1;
may,1;
due,1;
mat-
ters,,1;
for,1;
pool,1;
model,,1;
threads,1;
execute,1;
for,1;
example,,1;
pool,1;
incoming,1;
for,1;
asynchronous,1;
pool,1;
execute,1;
an,1;
more
accurately,,1;
tasks).
The,1;
lines,1;
memory,1;
concurrency,1;
memory,1;
concurrency,1;
queue,1;
return,1;
example,,1;
paral-
lelism,1;
library,1;
perform,1;
over,1;
every,1;
scenes,1;
subranges,,1;
hands,1;
threads,1;
pool,1;
for,1;
on,1;
vector,1;
threads,,1;
threads,1;
supports,1;
stealing.
Work,1;
key,1;
most,1;
premise
is,1;
there’s,1;
no,1;
more,1;
steal,1;
been,1;
assigned,1;
different,1;
been,1;
the
same,1;
even,1;
every,1;
may,1;
more,1;
others.,1;
sit,1;
wait,1;
for,1;
threads,1;
threads,1;
overall,1;
supports,1;
threads,1;
steal,1;
a
Concurrency,1;
pool.,1;
If,1;
bet,1;
or,1;
least,1;
an,1;
scratch.
Worker,1;
good,1;
each,1;
performs,1;
performs,1;
on,1;
varies.,1;
every,1;
performs,1;
computation;,1;
perform
it,1;
on,1;
different,1;
underlying,1;
asynchro-
nous,1;
runtime,,1;
each,1;
Future::poll;,1;
on,1;
dif-
ferent,1;
futures.,1;
If,1;
threads,1;
your
thread,1;
different,1;
more,1;
pool,1;
memory,1;
hands,1;
threads,1;
connection.,1;
connections,1;
external,1;
new,1;
connection
is,1;
or,1;
block.,1;
When,1;
threads,1;
may,1;
for,1;
pool,1;
managing,1;
cycles.,1;
returned,1;
pool,1;
state,1;
by,1;
pool,1;
state,1;
whether,1;
on,1;
or,1;
on,1;
the
server,,1;
been,1;
concurrency,1;
model.,1;
pool,1;
threads,1;
that
share,1;
one
for,1;
each,1;
Each,1;
queue,1;
That,1;
state
might,1;
threads,1;
may,1;
interact,1;
wishes,1;
When,1;
performs,1;
and
responds,1;
result,1;
operation,,1;
exclusive,1;
no,1;
or,1;
beyond,1;
for,1;
key,1;
say,,1;
an,1;
for,1;
a
database,1;
for,1;
each
of,1;
perform,1;
proceed
to,1;
more,1;
on,1;
request,1;
server,1;
request,1;
for,1;
or,1;
even,1;
thousands,1;
request,1;
each,1;
contrary,,1;
most,1;
each,1;
require,1;
exclusive,1;
whether,1;
on,1;
own
or,1;
fact,,1;
very,1;
pool,1;
example,,1;
an,1;
multi-
threaded,1;
asynchronous,1;
an,1;
asynchronous,1;
each,1;
pool.,1;
Thus,,1;
may,1;
to
thread,1;
pool,1;
every,1;
maintains,1;
exclusive,1;
resource.
The,1;
concurrency,1;
well,1;
for,1;
operate,1;
independently,,1;
or,1;
no,1;
for,1;
concurrency,1;
each,1;
resource.,1;
example,
an,1;
an,1;
for,1;
each,1;
server,1;
an,1;
for,1;
each,1;
well,1;
significantly,1;
or,1;
may,1;
on,1;
each,1;
exclusive,1;
8,,1;
concurrency
without,1;
like,1;
joins,1;
some,,1;
or,1;
all
of,1;
no,1;
involved,,1;
require,1;
Even
spawning,1;
an,1;
require,1;
polling,1;
most,1;
want,1;
concurrency,1;
example,,1;
for,1;
each,1;
connections,1;
more,1;
host,1;
computer.,1;
That,1;
executor
to,1;
spread,1;
first,1;
question,1;
Send—if,1;
threads,1;
for,1;
no,1;
possible;,1;
second,1;
operate,1;
number,1;
on,1;
Thus,,1;
achieve,1;
parallelism
with,1;
explicitly,1;
want,1;
to
run,1;
because,1;
first,1;
requirement,,1;
func-
tion,1;
require,1;
Send.
A,1;
NCHRONIZ,1;
ATION,1;
for,1;
asynchronous,1;
asynchronous,1;
channels,,1;
reader/writer,1;
locks,,1;
We,1;
8,,1;
may,1;
is
inadvisable.
However,,1;
asynchronous,1;
slower
than,1;
synchronous,1;
because,1;
perform,1;
necessary,1;
may,1;
want,1;
to
use,1;
synchronous,1;
even,1;
asynchronous,1;
example,,1;
while,1;
for,1;
time,,1;
for,1;
for,1;
until,1;
actually,1;
cause,1;
problems.,1;
want,1;
or,1;
perform,1;
long-running,1;
operations,1;
while,1;
shouldn’t,1;
such,1;
sure,1;
synchronous,1;
performance
improvements.,1;
If,1;
by,1;
an,1;
asynchronous,1;
10Lower-Level,1;
library,1;
pro-
vides,1;
underlying,1;
with.,1;
types,1;
each,1;
over,1;
types,1;
communi-
cate,1;
Mutexes,,1;
channels,,1;
concurrent,1;
ultimately,1;
handy,1;
on,1;
cooperation,1;
threads,1;
like,1;
example,,1;
or,1;
types,1;
threads,1;
try,1;
load,,1;
compare_
exchange.,1;
section,,1;
useful,1;
memory,1;
operations,1;
memory,1;
variables,1;
or,1;
to”,1;
memory,1;
It’s
important,1;
understand,1;
machinery,,1;
least,1;
order,1;
concurrent,1;
memory,1;
program
reads,1;
or,1;
assigns,1;
new,1;
It,1;
on,1;
program,1;
or,1;
memory,1;
to
store,1;
intermediate,1;
computations.,1;
subject,1;
number,1;
on,1;
transformations,,1;
ultimately,1;
actually,1;
memory,1;
memory,1;
memory,1;
regis-
ter,,1;
operate,1;
on,1;
small,1;
memory,1;
or,1;
on,1;
If,1;
more,1;
or,1;
automatically,1;
or,1;
hardware,1;
program,1;
example,,1;
execute,1;
or,1;
even,1;
order,,1;
they
don’t,1;
on,1;
each,1;
other.,1;
each,1;
DRAM,,1;
memory,1;
may,1;
that
memory,1;
by,1;
most,1;
transform,1;
don’t,1;
affect,1;
program,
so,1;
execution,,1;
on,1;
Therefore,,1;
CPUs,1;
each,1;
may,1;
may,1;
operations,1;
on,1;
Similarly,,1;
different,1;
for,1;
memory,1;
form,1;
types,1;
types,1;
because,1;
an,1;
once,1;
stores,,1;
while,1;
by,1;
of
contrast,1;
example,,1;
new,1;
one
for,1;
each,1;
8-byte,1;
If,1;
perform,1;
borrow,1;
checker,1;
for,1;
read
the,1;
first,1;
an,1;
It,1;
reading,1;
the
new,1;
for,1;
first,1;
for,1;
second,1;
element,,1;
actually,1;
by,1;
thread.
The,1;
live,1;
module.,1;
Each,1;
supports,1;
multiple
variations,1;
for,1;
like,1;
whether,1;
differentiate
between,1;
an,1;
usize,1;
(which,1;
types,1;
for,1;
loading,1;
hold,,1;
more,1;
complex,1;
mapping,1;
example,,1;
on,1;
value.
Memory,1;
on,1;
types,1;
an,1;
Ordering,
which,1;
dictates,1;
memory,1;
different,1;
threads,,1;
an,1;
value
178
Chapter,1;
by,1;
memory,1;
each,1;
on,1;
why,1;
over,1;
necessary,1;
counterintuitive,,1;
because,1;
like,1;
read,1;
programs,1;
bottom,1;
by,1;
actually,1;
when
it,1;
or,1;
even,1;
on,1;
may,1;
other
threads,,1;
even,1;
later,1;
program,1;
order,1;
been,1;
like,1;
each,1;
memory,1;
sees,1;
different,1;
threads,,1;
memory,1;
locations,1;
If,1;
threads,1;
memory,1;
even,1;
first,1;
may,1;
for,1;
absent,1;
memory,1;
puts,1;
on,1;
valid,1;
example,,1;
T2,,1;
because,1;
on,1;
hard,1;
don’t,1;
mind-
bending,,1;
very,1;
precise,1;
very
intuitive,1;
We,1;
simplified,,1;
by,1;
instead,1;
on,1;
architecture.,1;
memory,1;
treelike,1;
storage,1;
leaves,1;
roots,1;
storage,1;
on,1;
memory,1;
caches,,1;
different,1;
on,1;
different,1;
When,1;
performs,1;
memory,1;
starts,1;
request,1;
for,1;
memory,1;
memory.
When,1;
performs,1;
load,,1;
request,1;
until,1;
there.,1;
lies
the,1;
aren’t,1;
until,1;
written
memory,1;
been,1;
CPUs,1;
execute,1;
instruc-
tions,1;
memory,1;
time,,1;
ordering,,1;
request,1;
precise,1;
CPUs,1;
memory,1;
by,1;
we,,1;
dictate,1;
on,1;
concurrent,1;
executions,1;
an,1;
different,1;
on,1;
mapping,1;
semantics,,1;
each,1;
section.
Relaxed,1;
Ordering
Relaxed,1;
beyond,1;
fact,1;
atomic.,1;
gives,1;
no,1;
different,1;
form,1;
10-2,1;
program,1;
threads,1;
variables,1;
r1,1;
r2,1;
threads,1;
t2,,1;
r2,1;
until,1;
assigns,1;
on,1;
reading,1;
X.,1;
relaxed,1;
memory,1;
ordering,,1;
involved.,1;
here,1;
r2,1;
3,,1;
output,1;
or,1;
3.,1;
That,1;
no,1;
on,1;
3.,1;
for,1;
program,1;
even,1;
sleep
by,1;
or,1;
on,1;
another,1;
core.,1;
first,1;
on,1;
read,1;
Therefore,,1;
10Y,1;
by,1;
r1,1;
X.,1;
by,1;
2.
The,1;
relaxed,1;
memory,1;
because,1;
on,1;
concurrent,1;
That,1;
relaxed
memory,1;
ordering,,1;
on,1;
respected,1;
atomics,1;
weren’t,1;
promises,1;
concurrent,1;
for,1;
execution,,1;
relaxed,1;
kind,1;
fine.,1;
example,,1;
fine.,1;
say,,1;
program,1;
r2,1;
figure
out,1;
security,1;
been,1;
believing,1;
don’t,1;
each,1;
like,1;
order,1;
program,1;
order,1;
or,1;
memory,1;
Ordering::Release,,1;
(acquire,1;
plus
release).,1;
At,1;
an,1;
another,1;
restrict,1;
on,1;
threads,1;
involved.,1;
because,1;
every,1;
on,1;
(the,1;
execute,1;
read,1;
or,1;
memory,1;
operations,1;
memory,1;
on
execution:
1.,1;
moved,1;
forward,1;
past,1;
moved,1;
Ordering::Acquire,1;
an,1;
memory,1;
10-2,1;
memory,1;
for,1;
r1,1;
r2,1;
10-2,1;
memory,1;
no,1;
for,1;
to
see,1;
r2,1;
To,1;
cause,1;
very,1;
first,1;
Ordering::Release,,1;
dictates,1;
so
we’re,1;
useful,1;
beyond,1;
example.,1;
exclusion,1;
want,1;
while,1;
holds,1;
exe-
cuted,1;
while,1;
actually,1;
holding,1;
enable,1;
performing,1;
an,1;
moved,1;
actually,1;
or,1;
released!
NOTE
On,1;
like,1;
no,1;
and
Ordering::Acquire,1;
over,1;
Ordering::Relaxed.,1;
the
case,,1;
program,1;
may,1;
speedups,1;
for,1;
memory,1;
hard,1;
very,1;
each,1;
sees,1;
results
consistent,1;
threads,1;
by,1;
Release.,1;
threads,1;
by,1;
other
threads,1;
That’s,1;
10which,1;
case,1;
produce,1;
unexpected,1;
outcome.
static,1;
Z:,1;
{
X.store(true,,1;
{
Y.store(true,,1;
(!X.load(Ordering::Acquire)),1;
{}
1,1;
(!Y.load(Ordering::Acquire)),1;
{}
2,1;
}
});
Listing,1;
threads,1;
for,1;
once,1;
so,,1;
adds,1;
to
Z.,1;
instead,1;
for,1;
become,1;
so,,1;
adds,1;
At,1;
question,1;
for,1;
Z,1;
threads,1;
terminate?,1;
Z,1;
Z,1;
sees,1;
evaluates,1;
Z,1;
sees,1;
if
t1,1;
evaluates,1;
To,1;
simplify,1;
for,1;
each,1;
completion,1;
once,1;
Z,1;
twice,1;
threads,1;
3,,1;
for,1;
Z,1;
Similarly,,1;
Z,1;
once,1;
threads,1;
order,1;
3,,1;
condition,1;
for,1;
Z,1;
want,1;
has
to,1;
Since,1;
until,1;
by,1;
runs,,1;
inability,1;
Z,1;
mostly,1;
for,1;
this
Concurrency,1;
aren’t,1;
limited,1;
no,1;
concerned,,1;
while,1;
as
having,1;
an,1;
even,1;
if
that,1;
outrageous,1;
loaded.,1;
property:,1;
sees,1;
sees,1;
by,1;
true—there,1;
none.
It,1;
sees,1;
by,1;
aren’t,1;
concerned,1;
with.,1;
sees,1;
sees,1;
by,1;
It,1;
sees,1;
by,1;
thread
and,1;
no,1;
expectation,1;
threads,1;
order,1;
every,1;
case,1;
for,1;
example.,1;
To,1;
achieve,1;
consistency.
Sequential,1;
threads,1;
part,1;
an,1;
each,1;
corre-
sponds,1;
least,1;
instruct,1;
for,1;
formalism,1;
threads,,1;
executions,1;
up.
If,1;
memory,1;
Z,1;
threads,1;
we
originally,1;
consistency,,1;
or,1;
different,1;
types,1;
10observed,1;
for,1;
an,1;
new,1;
want,1;
To,1;
why,1;
exclusion,1;
whether,1;
We,1;
To,1;
acquire,1;
for,1;
then
sets,1;
critical,1;
FnOnce()),1;
Wait,1;
for,1;
become,1;
fact,1;
lock.
LOCK.store(true,,1;
while,1;
holding,1;
lock.
LOCK.store(false,,1;
10-5:,1;
incorrect,1;
exclusion,1;
mostly,1;
works,,1;
threads,1;
while,1;
they
both,1;
enter,1;
critical,1;
section,,1;
during,1;
another,1;
read,1;
or,1;
It,1;
swaps,1;
behind,1;
notifies,1;
compare_exchange.
static,1;
FnOnce()),1;
Wait,1;
for,1;
become,1;
{
Ok(false),1;
|,1;
Err(false),1;
while,1;
holding,1;
lock.
LOCK.store(false,,1;
exclusion,1;
care
of,1;
first,1;
second,1;
respectively:,1;
read,1;
Result,1;
indicates,1;
successfully,1;
(Ok),1;
or,1;
useful,1;
with
an,1;
for,1;
like,1;
an,1;
try,1;
load.
NOTE
Note,1;
whether,1;
If,1;
on,1;
stores,,1;
argu-
ments.,1;
first,1;
dictates,1;
for,1;
case,1;
successfully,1;
dictates,1;
memory,1;
for,1;
load
if,1;
developer,1;
by,1;
on,1;
on,1;
inside,1;
such,1;
very,1;
been,1;
theoretically,1;
distributed,1;
many,,1;
aware,,1;
underlying,1;
form,1;
hardware,1;
10can,1;
become,1;
bottleneck:,1;
time,,1;
there’s,1;
portion,1;
fact,,1;
CPUs,1;
for,1;
(take,1;
grows,1;
more,1;
the
more,1;
CPUs,1;
documentation,1;
weak,1;
even,1;
atomic
variable’s,1;
case.
This,1;
seem,1;
an,1;
answer,1;
example,,1;
instead,1;
read,1;
by,1;
an,1;
been,1;
library,1;
implements,1;
on,1;
loop,1;
once,1;
conditional
store,1;
more,1;
Since,1;
loop,1;
instead,1;
on,1;
better
machine,1;
on,1;
on,1;
fetch_and,,1;
more,1;
operations,1;
operations,1;
meaningful,1;
order,1;
for,1;
powerful,,1;
threads,1;
want,1;
while,1;
threads,1;
involved,,1;
underlying,1;
while,1;
on,1;
operations,1;
commute,,1;
retry,1;
just
because,1;
another,1;
perform,1;
on,1;
perform,1;
on,1;
exclusive,1;
an,1;
number,1;
pool,1;
threads,1;
If,1;
threads,1;
time,,1;
counter,1;
perform,1;
read,1;
and
guarantee,1;
on,1;
returned,1;
by,1;
method.,1;
an,1;
Ordering::Relaxed),1;
adds,1;
no,1;
more,1;
compare_exchange
because,1;
don’t,1;
require,1;
threads,1;
retry,1;
for,1;
hardware,1;
even,1;
involved,1;
CPUs,1;
threads,1;
try,1;
on,1;
operations,1;
due,1;
significantly,1;
contended,1;
variables,1;
more,1;
each,1;
contended,,1;
fetch_update,1;
deceptively,1;
compare_exchange_weak,1;
more,1;
concurrent,1;
subsystem.,1;
such,1;
array,1;
want,1;
hands,1;
on,1;
techniques,1;
can
help,1;
concurrent,1;
Simple
It,1;
fact,1;
more
likely,1;
concurrent,1;
concurrent,1;
follow,1;
concurrency,1;
require,1;
intricate,1;
atomics,1;
or,1;
Begin
with,1;
threads,1;
or,1;
cooperate,1;
locks,,1;
about.,1;
by,1;
implementing,1;
by,1;
fast,1;
perform,1;
fast,1;
for,1;
why,1;
complex,1;
error-prone,1;
benchmarks,1;
out
exactly,1;
part,1;
Focus,1;
on,1;
try,1;
small,1;
concurrent,1;
or,1;
another,1;
If,1;
so,,1;
atomics,1;
until,1;
there’s,1;
Ordering::SeqCst
and,1;
iterate,1;
Tests
As,1;
insight,1;
code
may,1;
hide,,1;
tests,1;
good,1;
bugs.
Stress,1;
tests,1;
don’t,1;
perform,1;
complex,1;
threads,1;
operations,1;
example,,1;
concurrent,1;
map,,1;
test
might,1;
threads,1;
insert,1;
or,1;
threads,1;
read,1;
such,1;
threads,1;
Such,1;
for,1;
outcome,1;
or,1;
trigger,1;
operations,1;
that
buggy,1;
tests,1;
resemble,1;
fuzz,1;
tests,1;
instead,1;
gen­
erates,1;
memory,1;
like,1;
tests,1;
good,1;
manifest,1;
an,1;
assertion,1;
or,1;
kind,1;
concurrency,1;
or,1;
particularly,1;
challenge,1;
concurrent,1;
different,1;
threads,1;
interleave.,1;
memory,1;
for,1;
thread
to,1;
tests,1;
execute,1;
every,1;
over,1;
threads,1;
execute,1;
their
reads,1;
Parallelism)
189Model,1;
Checking,1;
Loom
Luckily,,1;
tool,1;
simplify,1;
form,1;
crate,,1;
Loom
here,,1;
by,1;
read,1;
an,1;
does.
Loom,1;
form,1;
model.,1;
tries,1;
intelligently,1;
by,1;
executing,1;
case,1;
To,1;
detect
and,1;
types,1;
for,1;
types,1;
library,1;
allow,1;
threads,1;
one
another;,1;
includes,1;
most,1;
types,1;
std::sync,1;
std::thread,1;
others.,1;
types,1;
tests.,1;
perform,1;
points,1;
each,1;
interaction,1;
Essentially,,1;
tree,1;
executions,1;
for,1;
each,1;
tries,1;
execute,1;
executions,1;
in
extremely,1;
executions,1;
hundred
years.,1;
great,1;
for,1;
kind,1;
operations,1;
or,1;
require,1;
threads,1;
code.,1;
may,1;
want,1;
documentation,1;
more,1;
manifest,1;
another,1;
strategic,1;
concurrent,1;
may,1;
even,1;
state,1;
concurrent
code,1;
Checking,1;
bet,1;
Google’s,1;
TSan.,1;
TSan
automatically,1;
by,1;
every,1;
memory,1;
runs,,1;
state,1;
memory,1;
operations,1;
synchronized
(lots,1;
indicates,1;
over,1;
over,1;
like,1;
Loom,,1;
adds,1;
constant-factor
overhead,1;
factor,1;
times,1;
small,1;
can
execute,1;
even,1;
most,1;
complex,1;
argu-
ment,1;
RUSTFLAGS),,1;
hopefully,1;
option.,1;
like
out-of-bounds,1;
memory,1;
memory,1;
memory,,1;
may,1;
want,1;
concurrent,1;
seem,1;
try,1;
them.,1;
concurrent,1;
the
additional,1;
changes,1;
cause,1;
no,1;
particularly,1;
cause,1;
disappearing,1;
concurrency,1;
by,1;
most,1;
techniques.
There,1;
why,1;
such,1;
an,1;
most,1;
speak-
ing,,1;
output
points),1;
time,,1;
especially,1;
program,1;
very,1;
perform,1;
may,1;
for,1;
read,1;
output,1;
raced,1;
with
an,1;
condition,1;
second,1;
why,1;
concurrent,1;
output,1;
by,1;
If,1;
holds,1;
output,1;
It,1;
output,1;
threads,1;
try,1;
given
line,1;
characters,1;
threads,1;
output
lock,,1;
another,1;
every,1;
is
involved,1;
broken,1;
due,1;
threads,,1;
or,1;
because,1;
two
threads,1;
general,,1;
like,1;
try,1;
That,1;
or,1;
or,1;
or,1;
per-thread,1;
hard,1;
critical,1;
an,1;
good,1;
handy,1;
I’m,1;
crate,,1;
good,1;
first,1;
covered,1;
correctness,1;
concurrent,1;
concurrency,1;
successful,1;
concurrent,1;
asynchronous,1;
concurrency,1;
explicitly,1;
asynchronous,1;
We,1;
different,1;
work,,1;
techniques,1;
for,1;
concurrent,1;
like,1;
code.,1;
lower,1;
levels,1;
allow,1;
G,1;
shocking,
I,1;
often,,1;
by,1;
such,1;
code.,1;
can
achieve,1;
first,1;
Rust
functions,1;
languages,1;
func-
tions,1;
variables,1;
types,1;
types,1;
flow,1;
want,1;
crossing,1;
boundary,1;
language
and,1;
inside,1;
If,1;
program,1;
shares
memory,1;
another,1;
program,1;
aren’t,1;
dynamically,1;
linked,1;
library,1;
program,1;
arise.
Crossing,1;
extern
FFI,1;
code.,1;
assigned,1;
addresses,1;
a
given,1;
allow,1;
memory,1;
for,1;
external,1;
conven-
tions,1;
functions,1;
such,1;
each,1;
filled,1;
or,1;
binary.,1;
functions,1;
may,1;
even
have,1;
for,1;
each,1;
don’t,1;
inter-
nally,1;
by,1;
or
static,1;
binary.,1;
knows,1;
memory,1;
each,1;
final
machine,1;
or,1;
read,1;
variable.
Since,1;
don’t,1;
for,1;
them—you,1;
may,1;
func-
tions,1;
different,1;
gener-
ate,1;
there’s,1;
no,1;
for,1;
want
to,1;
or,1;
such,1;
different,1;
different,1;
for,1;
produce,1;
for,1;
an,1;
external,1;
or,1;
such,1;
manner,1;
for,1;
elsewhere,1;
Otherwise,,1;
for,1;
or,1;
and
no,1;
fact,,1;
for,1;
it!
194
Chapter,1;
note,1;
times,1;
once.,1;
declaration,1;
for,1;
If,1;
no,1;
for,1;
declaration,1;
or,1;
on,1;
Compilation,1;
time!,1;
understand,1;
monolithic,1;
program,1;
programs,1;
each,1;
perform,1;
other.,1;
At,1;
three,1;
linking—handled,1;
different,1;
components.
The,1;
first,1;
by,1;
most,1;
checking,,1;
borrow,1;
checking,,1;
no,1;
That,1;
actually,1;
on,1;
a
given,1;
over,1;
once.,1;
example,,1;
compiles,1;
different,1;
them.,1;
It,1;
also
invoke,1;
tool,1;
for,1;
even,1;
compile,1;
separately!
Once,1;
for,1;
every,1;
wired,1;
files,,1;
by,1;
every,1;
reference,1;
memory,1;
another,1;
compile,1;
It,1;
each,1;
the
object,1;
may,1;
been,1;
may,1;
sure,1;
addresses,1;
for,1;
symbols.
A,1;
linked,1;
or,1;
each,1;
reference,1;
on,1;
each,1;
reference,1;
tries,1;
program,1;
more,1;
for,1;
for,1;
declare,1;
RS_DEBUG,1;
via,1;
We,1;
resolved,1;
time.
#[no_mangle]
pub,1;
RS_DEBUG:,1;
bool,1;
#[no_mangle],1;
RS_DEBUG,1;
another,1;
for,1;
example,,1;
another,1;
(non-FFI),1;
RS_DEBUG,1;
elsewhere,1;
part,1;
public,1;
on,1;
#[no_mangle].,1;
don’t,1;
for
RS_DEBUG,,1;
It,1;
surrounding,1;
declaration,1;
on,1;
Since
it’s,1;
don’t,1;
an,1;
for,1;
inside,1;
an,1;
variables,1;
aren’t,1;
by,1;
default,,1;
whether,1;
block.,1;
variables,1;
declare,1;
declare,1;
functions,1;
very,1;
non-Rust,1;
external
hello_foreign,1;
...,1;
}
extern,1;
{
fn,1;
hello_foreign(i:,1;
i32);
}
Listing,1;
section.
If,1;
like,1;
or,1;
explicitly,1;
specify,1;
library,1;
attribute.,1;
If,1;
an,1;
for,1;
example,,1;
an,1;
linked,1;
library,1;
external,1;
or,1;
by,1;
annotating,1;
declara-
tion,1;
Similarly,,1;
for,1;
"<export_symbol_name>"].
Link,1;
dictates,1;
kind,1;
which
indicates,1;
linked,1;
compile,1;
external,1;
by,1;
runtime.,1;
size,,1;
more,1;
secure,1;
because,1;
upgrade,1;
deploys,1;
upgrade,1;
code.,1;
If,,1;
say,,1;
security,1;
update,,1;
library,1;
on,1;
host,1;
compilation,,1;
an,1;
library,1;
update.
Dynamic,1;
produce,1;
Since,1;
includes,1;
linked,1;
output,,1;
each,1;
external,1;
includes,1;
small,1;
library,1;
forwards,1;
access.
Foreign,1;
may,1;
seem,1;
very,1;
advan-
tage,1;
over,1;
ease,1;
anyone
who,1;
includes,1;
sure,1;
such,1;
library,1;
for,1;
like,1;
or,1;
on,1;
most,1;
for,1;
more,1;
libraries.,1;
needs
to,1;
library,1;
for,1;
order,1;
to
run,1;
output,,1;
choice,1;
linking.
Dynamic,1;
good,1;
default,,1;
may,1;
for,1;
particularly,1;
or,1;
for
very,1;
small,1;
or,1;
library,1;
Use,1;
dictate,1;
or,1;
allow,1;
To,1;
dictates,1;
each,1;
overview,,1;
dictates:
•
•
•
•
How,1;
for,1;
on,1;
or,1;
or,1;
like,1;
restored,1;
by,1;
over,1;
by,1;
com-
piler,,1;
want,1;
external,1;
code
because,1;
external,1;
convention.
Every,1;
Using,1;
on,1;
for,1;
because,1;
every,1;
case,1;
If,1;
"Rust",,1;
program,1;
boundary,1;
external,1;
gained,1;
new,1;
declaration,,1;
"C-unwind";,1;
wish,1;
it
you,1;
read,1;
RFC,1;
supports,1;
number,1;
string,1;
(in,1;
library,1;
interface,,1;
on,1;
conven-
tion.,1;
general,,1;
rarely,1;
particularly,1;
or,1;
(which,1;
part,1;
That,1;
fn()),,1;
different,1;
extern
"system",1;
BINARY,1;
compile,1;
tests,1;
or,1;
or,1;
languages,,1;
compile,1;
library,1;
like,1;
wraps,1;
mostly,1;
because,1;
as
anything,1;
code.,1;
Since,1;
each,1;
types,1;
may,1;
crate,,1;
no,1;
compile,1;
library,1;
rlibs,
of,1;
each,1;
rlibs,1;
informa-
tion,1;
necessary,1;
distributed,1;
meaningful,1;
way.
So,1;
want,1;
library,1;
another,1;
language?,1;
library,1;
form,1;
dynamically,1;
linked,1;
on,1;
.dylib,1;
on,1;
on,1;
Windows),1;
linked,1;
on,1;
.lib,1;
on,1;
Those
files,1;
like,1;
by,1;
by,1;
interact,1;
produce,1;
crate-type
field,1;
an,1;
array,1;
library,1;
automatically,1;
library,1;
example,,1;
best
practice,1;
explicitly,1;
good,1;
ol’
Rust,1;
library.
There,1;
number,1;
different,1;
here,1;
produce,1;
library,1;
avail-
able—that,1;
public,1;
#[no_mangle],1;
variables,1;
constants,1;
even,1;
no,1;
meaningful,1;
library,1;
memory,1;
on,1;
section,,1;
over,1;
aspects,1;
types,1;
cross
the,1;
aren’t,1;
boundary.,1;
When,1;
declare,1;
com-
municated,1;
declare,1;
for,1;
on,1;
When,1;
declare,1;
first,1;
sure,1;
up.,1;
on,1;
an,1;
int,
the,1;
an,1;
To,1;
guesswork,1;
for,1;
library,1;
types,1;
on,1;
whether,1;
width,,1;
note,1;
integer,1;
types,1;
like,1;
types,1;
may,1;
like,1;
encoded,1;
more,1;
complex,1;
types,1;
like,1;
mapping,1;
manually.,1;
example,,1;
string,1;
byte,,1;
string,1;
separately,,1;
gen-
erally,1;
string,1;
types,1;
over,1;
assuming,1;
side
uses,1;
string,1;
types,1;
for,1;
want,1;
first,1;
may,1;
for,1;
types,1;
such,1;
types,1;
an,1;
by,1;
default,,1;
very,1;
least,1;
#[repr(C)],1;
and
alignment,1;
If,1;
specifies,1;
for,1;
or,1;
whether,1;
or,1;
an,1;
this:
enum,1;
Baz,1;
#[repr(C)],,1;
encoded,1;
integer,1;
for,1;
an,1;
first,1;
second,1;
each,1;
variant,,1;
11-3:,1;
for,1;
enum
NOTE
Technically,,1;
specification,1;
first,1;
every,1;
subse-
quent,1;
dif-
ference,1;
for,1;
others—those,1;
set.
You,1;
mapping,1;
types,1;
for,1;
valid,1;
for,1;
trouble,1;
more,1;
like,1;
produce,1;
once.,1;
11-3,,1;
for,1;
pro-
duced,1;
by,1;
|,1;
Baz,1;
valid,1;
for,1;
If,1;
an,1;
for,1;
individually,,1;
an,1;
constants,1;
for,1;
each,1;
Bit*,1;
traits,1;
for,1;
isize,1;
for,1;
example,,1;
byte.,1;
data-carrying,1;
an,1;
#[repr(C)],1;
causes,1;
tagged,1;
That,1;
#[repr(C)],1;
struct,1;
fields,,1;
first,1;
encoded,1;
none,1;
fields,,1;
second,1;
for,1;
each,1;
example,,1;
con-
sider,1;
f64,1;
FooTag,1;
Baz,1;
f64,1;
#[repr(C)],1;
tagged,1;
TIMIZ,1;
ATION,1;
invalid,1;
no,1;
optimization,1;
an,1;
interaction,1;
an,1;
example,,1;
thing,1;
an
all-zero,1;
memory,,1;
freed,1;
by,1;
case,1;
memory,1;
on,1;
boundary.,1;
boundary,1;
memory,1;
memory,1;
needs
to,1;
returned,1;
appropriate,1;
for,1;
memory
or,1;
exposes,1;
freeing,1;
returned,1;
no,1;
11-5
shows,1;
an,1;
library,1;
memory,1;
for,1;
new,1;
object.
extern,1;
*mut,1;
another,1;
by,1;
new
//,1;
deallocates,1;
*mut,1;
memory,1;
functions,1;
form,1;
pair,,1;
the
caller,1;
new,1;
returned,1;
for,1;
by,1;
functions,1;
turn),,1;
once,1;
resource.,1;
memory,1;
new,1;
deallocates,1;
If,1;
new,1;
an,1;
c_int),1;
*mut,1;
BIO
Listing,1;
memory,1;
BIO_new_mem_buf,1;
instead,1;
the
backing,1;
memory,1;
on,1;
for,1;
obtaining,1;
on,1;
memory,1;
later,1;
deallocated,,1;
once,1;
no,1;
by,1;
or,1;
even,1;
rule,1;
thumb,,1;
allow,1;
memory,1;
gives,1;
more,1;
memory,1;
example,,1;
on,1;
operating
Foreign,1;
Interfaces
203system,,1;
may,1;
want,1;
If,1;
memory,,1;
instead,1;
memory,1;
or,1;
more,1;
memory,1;
may,1;
even,1;
for,1;
memory,1;
example,,1;
or,1;
Similarly,
if,1;
more,1;
memory,1;
while,1;
running,,1;
such,1;
on,1;
memory,1;
may,1;
runtime.,1;
such,1;
memory.
When,1;
for,1;
or,1;
is
likely,1;
most,1;
for,1;
for,1;
each,1;
boundary,1;
an,1;
conven-
tion.,1;
That,1;
an,1;
reference,1;
C
code,1;
a
panic,1;
unwind,1;
past,1;
automatically,1;
such,1;
may,1;
may,1;
want,1;
detect,1;
translate,1;
an,1;
most,1;
actually,1;
interfaces
with,1;
ultimately,1;
present,1;
safe,1;
reading,1;
through
the,1;
safe,1;
most,1;
safely,1;
encapsulating,1;
implementing,1;
confused.,1;
each,1;
next.
204
Chapter,1;
Lifetimes
If,1;
there’s,1;
chance,1;
external,1;
behind,1;
sure,1;
safe,1;
an,1;
exclusive,1;
reference,1;
by,1;
safe,1;
read,1;
memory,1;
external,1;
simultaneously
modifying,,1;
want,1;
good,1;
live,1;
for,1;
example,,1;
an,1;
Context,1;
Context,1;
Context,1;
valid,1;
for,1;
safe,1;
for,1;
by,1;
borrow,1;
Context,1;
Sync
Do,1;
for,1;
types,1;
an,1;
external,1;
library,1;
library,1;
explicitly,1;
types,1;
It,1;
safe,1;
external,1;
trigger,1;
behavior.
Sometimes,,1;
may,1;
even,1;
want,1;
dummy,1;
types,1;
example,,1;
an,1;
loop,1;
library,1;
*mut,1;
library,1;
documentation,1;
for,1;
external,1;
library,1;
may,1;
by,1;
here,1;
no,1;
implementing,1;
state,1;
struct,1;
()>);
pub,1;
EventLoop,1;
{
unsafe,1;
};
EventLoop(std::marker::PhantomData)
}
impl,1;
EventLoop,1;
an,1;
by,1;
introducing,1;
EventLoop,1;
actually,1;
the
underlying,1;
external,1;
enforces,1;
call
Foreign,1;
on,1;
part,1;
by,1;
EventLoop,1;
by,1;
(which,1;
Sync).
Using,1;
()>,1;
“undo”,1;
auto-traits,1;
here,1;
an,1;
trait,1;
like,1;
for,1;
may,1;
noticed,1;
prevents,1;
or,1;
on,1;
the
library,1;
an,1;
don’t,1;
want,1;
for,1;
each,1;
every,1;
memory,1;
state,1;
shouldn’t,1;
state,1;
void,1;
void*,,1;
*mut,1;
type-erased,1;
like,1;
pointer,,1;
thing,1;
points,1;
effectively,1;
visibility,1;
modifiers,1;
no,1;
visibility,1;
*mut,1;
there’s,1;
an,1;
returned,1;
supplying,1;
different,1;
To,1;
kind,1;
*mut,1;
for,1;
even,1;
for,1;
void*,,1;
instead,1;
different,1;
types,1;
for,1;
each,1;
example,
in,1;
11-9,1;
types,1;
struct,1;
struct,1;
*mut,1;
*mut,1;
*mut,1;
types,1;
better,,1;
distinct
types,,1;
now
impossible,1;
Adding,1;
types,1;
types,1;
for,1;
external,1;
library,1;
number,1;
is
time-consuming.,1;
corner,1;
require,1;
more,1;
developed,1;
tool,1;
avail-
able,1;
for,1;
library,1;
want,1;
with.,1;
others,,1;
wraps,1;
appropriate,1;
for,1;
convenient,1;
want,1;
that
be,1;
If,,1;
on,1;
want,1;
on,1;
every,1;
source
code,,1;
library,1;
for,1;
package.
NOTE
If,1;
platform,1;
script,1;
for,1;
cause
platform-related,1;
declare,1;
script,1;
by,1;
"<some-file.rs>",1;
compiling
your,1;
crate,,1;
compile,1;
compile,1;
The
build,1;
script,1;
declare,1;
script,1;
build.rs,,1;
don’t,1;
declare,1;
very,1;
handy,1;
compile,1;
library,1;
dynamically,1;
declare,1;
declare,1;
for,1;
changes,1;
for,1;
on,1;
very,1;
beware,1;
detect,1;
or,1;
rain,1;
on,1;
such,1;
for,1;
script,1;
through
the,1;
compile,1;
by,1;
To,1;
first,1;
script,1;
library,1;
read,1;
say,,1;
OUT_DIR.,1;
autogenerated,,1;
prac-
tice,1;
library,1;
example,
openssl-sys).,1;
If,1;
don’t,1;
follow,1;
new,1;
more,1;
illegal,1;
for,1;
external,1;
library,1;
key,1;
upgrade,1;
entire
ecosystem,1;
new,1;
library,1;
once.,1;
new,1;
versions
of,1;
upgrade,1;
causes,1;
slightly—
without,1;
safely,1;
wraps
the,1;
types,1;
public,1;
library,1;
crate,,1;
on,1;
for,1;
library!
If,1;
instead,1;
library,1;
intend,1;
to
use,1;
for,1;
native,1;
library,1;
other
languages.,1;
become,1;
library,1;
grows,1;
developed,1;
tool,1;
automate
this,1;
Like,1;
cbindgen,1;
library,1;
for,1;
Since,1;
represents,1;
looking,1;
over,1;
sure,1;
unwieldy,,1;
produce,1;
code.,1;
If,1;
on,1;
most,1;
commonly
used,1;
for,1;
every,1;
interact,1;
C,
and,1;
very,1;
different,1;
types,1;
case,1;
for,1;
C++.,1;
At,1;
for,1;
generating,1;
example,,1;
C++
features,1;
like,1;
aren’t,1;
If,1;
have
to,1;
cxx,1;
covered,1;
external,1;
well,1;
external,1;
code.,1;
types,1;
types,1;
different,1;
languages,1;
we
talked,1;
cbindgen,1;
tools,,1;
more,1;
chapter,
we’ll,1;
more,1;
like,1;
library,1;
may,1;
like,1;
memory,1;
may,1;
TA,1;
L,1;
for,1;
clear
what,1;
At,1;
very,1;
allow,1;
on,1;
on,1;
whether,1;
or,1;
an,1;
of
72MHz,1;
such,1;
an,1;
system,,1;
or,1;
even,1;
dynamically,1;
Much,1;
on,1;
#![no_std],1;
investigateRust’s,1;
play,1;
such,1;
an,1;
environment.
Opting,1;
pieces.,1;
dictates,1;
checking,,1;
borrow,1;
checking,,1;
conversion,1;
code.,1;
there’s,1;
useful,1;
most,1;
like,1;
access,,1;
time,,1;
for
printing,1;
reading,1;
compos-
ite,,1;
on,1;
more,1;
alloc.,1;
fact,,1;
types,1;
functions,1;
library,1;
bottom,1;
library,1;
on,1;
hardware,1;
program,1;
types,1;
such,1;
Option,1;
and
Result,,1;
operations,1;
such,1;
memory,1;
library,1;
no,1;
no,1;
no,1;
no,1;
memory,1;
types,1;
like,1;
nowhere,1;
holds,1;
memory,1;
such,1;
and
dynamically,1;
strings,1;
time,,1;
because,1;
the
three,1;
libraries.,1;
even,1;
Option,1;
std::option::Option.
However,,1;
an,1;
environment,,1;
such,1;
on,1;
an,1;
embedded
device,1;
no,1;
system,,1;
an,1;
or,1;
an,1;
no,1;
meaningful,1;
or,1;
there’s
no,1;
File,1;
or,1;
may,1;
memory,1;
memory,1;
memory,1;
on,1;
fly,1;
such,1;
#![no_std],1;
attribute.,1;
(#!),1;
(see,1;
on,1;
don’t,1;
on,1;
12However,,1;
#![no_std],1;
does—it,1;
library,1;
explicitly,1;
#![no_std],1;
may,1;
fact,1;
be
compatible,1;
intentional:,1;
library,1;
example,,1;
gives,1;
more,1;
types,1;
live,1;
for,1;
on,1;
more,1;
platforms.
NOTE
Since,1;
an,1;
an,1;
Otherwise,,1;
may,1;
on,1;
aren’t,1;
no,1;
why,1;
types,1;
traits—like,1;
every,1;
to
use,1;
them?,1;
why,1;
don’t,1;
macros,1;
every,1;
automatically,1;
imports,1;
an,1;
std::prelude::rust_2021::*,1;
edition’s
prelude,1;
aren’t,1;
beyond,1;
this
­auto-inclusion—they,1;
merely,1;
for,1;
key,1;
macros,1;
different,1;
regions,1;
each,1;
memory,1;
program,1;
there’s,1;
for,1;
there’s,1;
supports,1;
regions,1;
memory
at,1;
runtime,,1;
for,1;
memory,1;
types,1;
are
all,1;
memory,,1;
grow,1;
returned,1;
functions,1;
borrow,1;
contiguous
memory,1;
managed,1;
by,1;
an,1;
regions,1;
memory,1;
no,1;
dictated
by,1;
well,1;
for,1;
most,1;
an,1;
an,1;
for,1;
new,1;
memory,1;
for,1;
past,1;
reuse.
In,1;
an,1;
system,,1;
#![no_std],1;
types,1;
on,1;
memory
allocator,1;
system,,1;
part,1;
library,1;
opting,1;
like,1;
std),1;
most,1;
like,1;
BTreeMap.,1;
on,1;
for,1;
key,1;
hashing,,1;
an,1;
types,1;
types,1;
std::,1;
on,1;
no,1;
by,1;
program,1;
because,1;
an,1;
or,1;
because,1;
has
too,1;
memory,1;
memory,1;
first,1;
place.
NOTE
Some,1;
like,1;
Linux,1;
may,1;
allow,1;
errors,1;
such,1;
want,1;
inner
types,1;
or,1;
Vec::try_reserve),1;
or,1;
propagate,1;
errors,1;
core.,1;
or,1;
don’t,1;
even,1;
time!,1;
utilize,1;
memory,1;
front—either,1;
or,1;
frame—for,1;
number,1;
vector,1;
hold,,1;
usize
that,1;
tracks,1;
To,1;
array,1;
tracks,1;
number,1;
If,1;
reaches
the,1;
size,,1;
gives,1;
an,1;
such,1;
vector,1;
generics.
214
Chapter,1;
12struct,1;
{
values:,1;
N],
len:,1;
N>,1;
{
fn,1;
T),1;
Result<(),,1;
self.len,1;
vector,1;
over,1;
number,1;
vector,1;
an,1;
known
at,1;
compile,1;
on,1;
like,1;
by,1;
array.
NOTE
We,1;
Option,,1;
require,1;
may,1;
runtime.,1;
an,1;
or,1;
user-level,1;
form,1;
first,1;
such,1;
When,1;
code
panics,1;
by,1;
or,1;
handler,1;
dictates,1;
what
happens,1;
When,1;
case,1;
on,1;
most
targets,1;
std—the,1;
handler,1;
first,1;
hook,1;
optionally,1;
by,1;
It,1;
unwinds,1;
or,1;
on,1;
for,1;
configuration,1;
or,1;
targets,1;
example,,1;
targets,1;
for,1;
such,1;
targets,1;
Library
215supply,1;
To,1;
end,,1;
#[panic_handler],1;
program,1;
That
function,1;
program,1;
form,1;
return,1;
by,1;
return,1;
the
Rust,1;
no,1;
follows,1;
valid,1;
for,1;
handler,1;
handler,1;
unwinds,1;
handler,1;
loop,1;
abort,1;
or,1;
for,1;
first,1;
thing,1;
actually,1;
library,1;
That,1;
setup,1;
for,1;
runtime,,1;
output,1;
on,1;
program,1;
crate,,1;
for,1;
Linux,1;
differ,1;
well,1;
on,1;
platforms,1;
setup,1;
supported,,1;
presents,1;
on,1;
platforms,1;
memory,1;
may,1;
even,1;
program,1;
starts.,1;
want,1;
#![no_main],1;
crate-level,1;
attribute.,1;
developer,1;
started,,1;
such,1;
by,1;
launch,1;
for,1;
platforms,1;
no,1;
symbol,
like,1;
most,1;
initial,1;
variables,1;
may,1;
even,1;
specified,1;
code.,1;
such,1;
explicitly,1;
memory,1;
initial,1;
data
values,1;
specified,1;
program,1;
Out-of-Memory,1;
program,1;
wishes,1;
for,1;
an,1;
dictate,1;
specify,1;
an,1;
an,1;
like,1;
to
allocate,1;
more,1;
memory,,1;
handler,1;
on,1;
std-enabled
platforms,1;
an,1;
abort,1;
on,1;
platform,1;
for,1;
example,,1;
obviously,1;
At,1;
on,1;
such,1;
program,1;
explicitly,1;
an,1;
handler,1;
handler,1;
execution,,1;
tried
to,1;
executing,1;
memory,1;
asked,1;
for!
NOTE
By,1;
read,1;
this,,1;
handler,1;
may,1;
been,1;
most,1;
likely).,1;
under-
way,1;
handler,1;
kind,1;
“hook”,1;
fly,1;
like,1;
Accesses
In,1;
fact,1;
fair,1;
program,1;
execute,1;
instruc-
tions,1;
say,,1;
each,1;
or,1;
whether,1;
actually,1;
result,1;
by,1;
hardware,1;
designers,1;
specified,1;
beyond,1;
communicate
with,1;
hardware,1;
memory,1;
state
of,1;
regions,1;
while,1;
starts,1;
memory,1;
rendering,1;
pipeline;,1;
individual
bytes,1;
mode),1;
on,1;
memory,,1;
for,1;
each,1;
memory,1;
region,1;
assumptions,1;
may,1;
no,1;
hardware,1;
such,1;
safely,1;
elide,1;
memory,1;
read,1;
twice,1;
row!
A,1;
program,1;
diverted,1;
aren’t,1;
Execution,1;
diverted,1;
no,1;
underlying,1;
exceptions,1;
or,1;
or,1;
execution
of,1;
starts,1;
handler,1;
for,1;
executions,1;
been,1;
order,1;
or,1;
jumps,,1;
different,1;
order,1;
program,1;
or,1;
operations,1;
form,1;
operations,1;
hardware,1;
operations,1;
no,1;
operations,1;
aren’t,1;
another,1;
hardware,1;
operations,1;
don’t,1;
even,1;
different,1;
helps,1;
situation,,1;
memory,1;
an,1;
prevents,1;
non-volatile,1;
memory,1;
You’ll,1;
very,1;
rarely,1;
documentation,1;
an,1;
read.
INCLUDING,1;
rarely,1;
for,1;
hardware,1;
CPUs,1;
boot,1;
or,1;
At,1;
an,1;
RFC,1;
mostly,1;
been,1;
yet,,1;
book.
218
Chapter,1;
on,1;
creative.,1;
remember,1;
output,1;
library,1;
for,1;
compiles,1;
an,1;
(.a),1;
appropriate,1;
archiving
tool,1;
at
where,1;
placed,1;
archive—probably,1;
If,1;
platform,1;
even,1;
don’t,1;
encapsulating,1;
behind,1;
infamously,1;
complex,1;
pulled
from,1;
more,1;
illegal,1;
3.,1;
time,,1;
state,1;
on,1;
like,1;
3-2.
NOTE
Make,1;
sure,1;
on,1;
that
applies,1;
programs,1;
example,,1;
most,1;
program,1;
violates,1;
struct,1;
On;
pub,1;
struct,1;
struct,1;
R2>(PhantomData<(R1,,1;
mut,1;
bool,1;
{
None
},1;
initial,1;
state,1;
correct.
registers::off("r1");
registers::off("r2");
unsafe,1;
first_on(self),1;
Pair<On,,1;
for,1;
Pair<On,,1;
for,1;
operation
There,1;
code.,1;
first,1;
we
ensure,1;
instance,1;
by,1;
static
Boolean,1;
constructor,1;
initial,1;
state,1;
valid,1;
valid,1;
state,1;
second,1;
PhantomData
to,1;
types,1;
That,1;
types,1;
the
runtime,1;
state,1;
don’t,1;
or,1;
any
state,1;
runtime.,1;
no,1;
on,1;
asked,1;
enable,1;
types,1;
program,1;
case.
Cross-Compilation
Usually,,1;
programs,1;
on,1;
on,1;
dinky,1;
hardware,1;
sock
for,1;
That,1;
for,1;
cross-compilation—you,1;
compile,1;
environment,,1;
compile,1;
for,1;
That’s,1;
the
only,1;
though.,1;
exam-
ple,,1;
produce,1;
12artifacts,1;
for,1;
platforms,1;
for,1;
every,1;
platform,1;
may,1;
actually,1;
for,1;
limited,1;
memory,,1;
or,1;
even
something,1;
may,1;
want,1;
"s",1;
for,1;
sizes.
Cross-compiling,1;
host,1;
platform,1;
host,1;
platform,1;
output,1;
specify,1;
platforms,1;
triples,,1;
form,1;
part,1;
dictates,1;
armv7,,1;
or,1;
wasm32,,1;
to
use,1;
for,1;
emitted,1;
code.,1;
part,1;
on,1;
on,1;
affect,1;
meaningful,1;
mostly,1;
even,1;
part,1;
format,1;
dictates,1;
Linux,1;
files,,1;
dictates,1;
Windows,1;
files,,1;
default,,1;
platform,1;
host,1;
platform,
which,1;
why,1;
say,,1;
compile,1;
for,1;
Linux,1;
on,1;
may,1;
want,1;
even,1;
such,1;
of
forwarding,1;
binary
artifacts,1;
on,1;
platform.,1;
appropriate,1;
library,1;
for,1;
library,1;
standard
library,1;
for,1;
host,1;
platform,1;
on,1;
platform,1;
dictates,1;
standard
library,1;
example,,1;
while,1;
like,1;
an,1;
error.,1;
handy,1;
for,1;
require,1;
(recall,1;
even,1;
#![no_std],1;
have
use,1;
If,1;
trigger,1;
accidentally
bring,1;
Library
221PL,1;
library,1;
for,1;
supports,1;
by,1;
That,1;
command,1;
install
the,1;
appropriate,1;
library,1;
for,1;
If,1;
no,1;
library,1;
for,1;
compile,1;
by,1;
rust-src,1;
component,1;
alloc)
when,1;
by,1;
further,1;
teach
rustc,1;
beyond,1;
for,1;
specification,1;
good,1;
covered,1;
precisely,,1;
over,1;
adds,1;
programs,1;
interact,1;
memory,1;
very,1;
hardware,1;
safely,1;
encapsulate,1;
least,1;
hardware,1;
Next,,1;
small,1;
very,1;
by,1;
discussing,1;
navigate,,1;
even,1;
contribute,1;
ecosystem.
222
Chapter,1;
rarely,1;
every,1;
on,1;
by,1;
bad,,1;
or,1;
subject,1;
today’s
developer,1;
experience.
In,1;
new,1;
more,1;
on,1;
and
contribute,1;
Since,1;
There?
Despite,1;
youth,,1;
an,1;
hard,1;
If,1;
may,1;
appropriate,1;
statistics,1;
superficial,1;
on,1;
each,1;
may,1;
for,1;
there’s,1;
plethora,1;
tools,,1;
fea-
tures,1;
for,1;
decisions.
In,1;
section,,1;
tools,,1;
fea-
tures,1;
over,1;
may,1;
come
in,1;
useful,1;
for,1;
here,1;
graph.,1;
At,1;
allow,1;
licenses,,1;
deny-list,1;
versions,,1;
detect,1;
Git,1;
detect,1;
different,1;
graph.,1;
this,,1;
may,1;
even,1;
more,1;
handy,1;
lints,1;
macros,1;
inspect,1;
output,,1;
or,1;
cargo-expand,1;
an,1;
tool,1;
tool,1;
presents,1;
an,1;
gives,1;
(the,1;
mapping,1;
intermediate,1;
part,1;
useful,1;
because,1;
for,1;
example,,1;
monomorphization),1;
opportunities,1;
compile,1;
whether,1;
or,1;
update,,1;
new,1;
versions,,1;
an,1;
tool,1;
for,1;
on,1;
due,1;
an,1;
may,1;
for,1;
dependency’s,1;
types,1;
past,1;
they’ve,1;
become
redundant,,1;
or,1;
moved,1;
tool,1;
helps,1;
trim,1;
for,1;
over,1;
themselves.,1;
every,1;
useful,1;
lesser-known,1;
for,1;
regularly,
and,1;
on,1;
for,1;
an,1;
for,1;
single
piece,1;
contiguous,1;
memory,1;
or,1;
great,1;
may,1;
need
multiple,1;
library,1;
detect,1;
changes,1;
in
performance,1;
over,1;
crate.
cxx
Provides,1;
safe,1;
for,1;
from
Rust,1;
C++.,1;
If,1;
more,1;
for
much,1;
compatibility,,1;
library,1;
well,1;
multi-consumer,1;
channel,1;
flexible,,1;
It,1;
supports,1;
asynchronous,1;
synchronous,1;
great,1;
bridge,1;
High,1;
struc-
ture,,1;
or,1;
values,,1;
most,1;
an,1;
HDR,1;
insight,1;
heapless’s
data,1;
by,1;
memory,,1;
for,1;
or,1;
trait,1;
library,1;
for,1;
deduplication,,1;
significantly,1;
such,1;
values,,1;
like,1;
min,1;
or,1;
like,1;
an,1;
iterator,1;
on,1;
for,1;
types,1;
with
something,1;
like,1;
macros,1;
for,1;
anno-
tated,1;
safe,1;
most,1;
hassle,1;
getting,1;
for,1;
on,1;
good,1;
library,1;
and
226
Chapter,1;
13hard-to-misuse,1;
great,1;
most,1;
secure-by-
default,1;
an,1;
an,1;
entries,1;
kind,1;
managing,1;
managed,1;
somehow.
static_assertions
Provides,1;
may,1;
compile,1;
assert,1;
like,1;
implements,1;
trait,1;
or,1;
for,1;
well-known,1;
library,1;
command,1;
the
Rust,1;
When,1;
like,1;
exhaustive,1;
matching,1;
like,1;
It,1;
implementing,1;
leaves,1;
critical,1;
application.
tower
Effectively,1;
an,1;
on,1;
At,1;
represents,1;
request,1;
may,1;
library,1;
great,1;
looks,1;
like,1;
ser-
vice,1;
on,1;
types,1;
you’re
tracing,1;
want,1;
library,1;
for,1;
tracing,,1;
Tooling
The,1;
may,1;
know
to,1;
for,1;
very,1;
about.,1;
You’ll,1;
or,1;
supports,1;
very,1;
handy,1;
first,1;
an,1;
for,1;
command,,1;
miri,1;
Miri,1;
compiles,1;
particularly,1;
handy,1;
for,1;
broken,1;
your
minimum,1;
neat,1;
the
Rust,1;
library,1;
documentation,1;
for,1;
Rust
compiler,1;
on,1;
an,1;
handy,1;
aren’t,1;
first,1;
for,1;
graph.,1;
useful,1;
tree,1;
an,1;
tree,1;
showing,1;
dependency.
So,,1;
for,1;
example,,1;
tree,1;
on,1;
want,1;
eliminate,1;
why,1;
being
pulled,1;
information
about,1;
why,1;
each,1;
question,1;
enabled.
Speaking,1;
for,1;
or,1;
for,1;
When,1;
whether,1;
program,1;
by,1;
If,1;
does,
Cargo,1;
program,1;
passed
228
Chapter,1;
command,1;
argu-
ment,1;
bar.,1;
even,1;
command,1;
by,1;
on,1;
more,1;
projects,,1;
may,1;
more,1;
for,1;
accumulating,1;
for,1;
for,1;
each,1;
aren’t,1;
different,1;
fair,1;
proj-
ects.,1;
want,1;
more,1;
sure,1;
clean,1;
too,,1;
clean,1;
clean,1;
cause,1;
for,1;
subdirectory,,1;
for,1;
note,1;
different,1;
every,1;
or,1;
such,1;
configuration,1;
like,1;
crate,,1;
for,1;
each,1;
crate,,1;
crates
had,1;
wait,1;
for,1;
tons,1;
particularly,1;
or,1;
script,1;
native,1;
If,1;
want,1;
even,1;
there’s,1;
inside,1;
compiler
for,1;
each,1;
useful,1;
contribute,1;
lesser-known,1;
prove,1;
enterprising,1;
developers.,1;
first,1;
-Zprint-
type-sizes,1;
types,1;
for,1;
or,1;
memory,1;
-Zprint-type-sizes,1;
computed,1;
for,1;
each,1;
turning,,1;
say,,1;
usize,1;
on,1;
size,,1;
sure,1;
don’t,1;
over,1;
may,1;
types,1;
significantly,1;
differ,1;
or,1;
every,1;
or,1;
for,1;
try,1;
-Cforce-frame-pointers,1;
yes.,1;
more,1;
unwind,1;
lot
during,1;
an,1;
for,1;
unwinding,1;
(remember,1;
pro-
file),,1;
may,1;
encounter.
The,1;
library,1;
small,1;
languages,,1;
for,1;
server,1;
or,1;
an
X.509,1;
certificate,1;
parser,1;
40,1;
different,1;
on,1;
Option,1;
alongside,1;
over,1;
trait,1;
types,1;
avail-
able,1;
so
you,1;
section,,1;
present,1;
from
the,1;
library,1;
may,1;
simplify,1;
or,1;
code.
Macros,1;
free-standing,1;
write!,1;
format,1;
strings,1;
or,1;
implements,1;
may,1;
it—but
one,1;
write!,1;
formatted,1;
That,1;
write!(&mut,1;
"{}+1={}",,1;
formatted,1;
an,1;
iterator,1;
once.,1;
handy,1;
functions,1;
13iterators,1;
don’t,1;
want,1;
or,1;
an,1;
case,1;
an,1;
exclusive,1;
an,1;
swaps,1;
the
owned,1;
referent.,1;
situation,1;
an,1;
exclusive,1;
reference,,1;
such,1;
See,1;
also
mem::take,1;
for,1;
handy,1;
library,1;
types,1;
for,1;
I/O,1;
operations,1;
small,1;
read,1;
or
write,1;
underlying,1;
I/O,1;
resource.,1;
types,1;
underlying,1;
Read,1;
or,1;
Read,1;
themselves,,1;
operations,1;
I/O,1;
such,1;
small,1;
significantly,1;
don’t,1;
cross
the,1;
3,,1;
useful,1;
want,1;
types,1;
or,1;
You’ll
rarely,1;
(recall,1;
necessary),,1;
return,1;
return,1;
types,1;
functions,1;
may,1;
or,1;
may,1;
for,1;
types,1;
or,1;
types,1;
13-1,1;
an,1;
interface.
struct,1;
methods:,1;
an,1;
an
argument,,1;
an,1;
on,1;
reference,1;
for,1;
server,1;
an,1;
If,1;
get_entity
take,1;
Strings
to,1;
even,1;
by,1;
interface,,1;
an,1;
first,1;
We,1;
could
instead,1;
for,1;
types,1;
thing.
Cow,1;
13-2,1;
an,1;
instead,1;
Ecosystem
231struct,1;
require
allocation
With,1;
construction,,1;
method.,1;
return,1;
no,1;
an,1;
an,1;
<'a>,1;
instance,1;
instance,1;
by,1;
on,1;
Otherwise,,1;
no,1;
longer-lasting
clones,1;
an,1;
great,1;
part,1;
an,1;
library,1;
on,1;
the
FFI,1;
boundary,1;
an,1;
oft-neglected,1;
std::collections,1;
for,1;
need
a,1;
or,1;
like,1;
constant-time,1;
or,1;
even,1;
no,1;
memory,1;
(they,1;
may,1;
that
VecDeque<T>,1;
AsRef<[T]>.
Methods
Let’s,1;
neat,1;
methods.,1;
Arc<T>,1;
gives,1;
If,1;
gives,1;
behind,1;
Arc;,1;
new,1;
Arc<T>,1;
holds,1;
swaps,1;
gives,1;
new,1;
Arc.
The,1;
an,1;
form,1;
an,1;
instance,1;
new
one.,1;
an,1;
x,1;
by,1;
for,1;
such,1;
want
to,1;
or,1;
exposed,1;
by,1;
When,1;
implementing,1;
appropriate,1;
on,1;
Formatter
that’s,1;
or,1;
for,1;
included
methods,1;
on,1;
or,1;
entries,1;
key/value,1;
an,1;
more,1;
creating,1;
new,1;
an,1;
an,1;
operate,1;
on,1;
by,1;
avoiding,1;
implements,1;
That,1;
lower,1;
an,1;
upper,1;
x.clamp(min,,1;
min,1;
x,1;
x,1;
x,1;
types,1;
Result,1;
That,1;
gives,1;
versa.,1;
When,1;
for,1;
faster,1;
preserves,1;
an,1;
later,1;
vector,1;
by,1;
for,1;
on,1;
swaps,1;
by,1;
constant-time,1;
aware,,1;
it
will,1;
vector,1;
Wild
As,1;
aren’t,1;
Knowing,1;
understand,1;
purpose,,1;
them.,1;
may,1;
for,1;
day!
Index,1;
Pointers
Index,1;
allow,1;
data
structure,1;
borrow,1;
example,,1;
such,1;
by,1;
by,1;
and
one,1;
by,1;
different,1;
don’t,1;
want,1;
underlying,1;
times,1;
too.,1;
or,1;
reference
counting,1;
entry.,1;
references,
but,1;
become,1;
because,1;
live,1;
well,1;
like,1;
indeferences—
instead.,1;
each,1;
data
structure,1;
like,1;
To,1;
perform,1;
an,1;
operation,,1;
first,1;
structure
to,1;
index,,1;
the
referenced,1;
even,1;
wish!
The,1;
crate,,1;
order,1;
order,,1;
good,1;
example
of,1;
places,
both,1;
keys,,1;
want,1;
case,1;
key,1;
key/value,1;
mapping,1;
key,1;
To,1;
iterate
over,1;
map,,1;
To,1;
looks,1;
(the,1;
pointer),,1;
key’s
value,1;
Vec.
The,1;
crate,,1;
implements,1;
another,1;
edge,1;
or,1;
for,1;
example,,1;
nodes,1;
an,1;
edge,1;
edge,1;
or,1;
To,1;
for,1;
entries,,1;
data
from,1;
If,1;
the
new,1;
for,1;
moved.
Drop,1;
Guards
Drop,1;
even,1;
exclusion,1;
then
sets,1;
consider
what,1;
panics—the,1;
cleanup,,1;
and
no,1;
enter,1;
exclusion,1;
guards
provide,1;
an,1;
more,1;
example,,1;
FnOnce()),1;
while,1;
true).is_err(),1;
DropGuard<'a>(&'a,1;
Drop,1;
for,1;
{
fn,1;
drop(&mut,1;
Using,1;
an,1;
unwinding,1;
implements,1;
Drop,1;
place
the,1;
cleanup,1;
Any,1;
necessary,1;
DropGuard.,1;
When,1;
whether,1;
due,1;
or,1;
dropped,,1;
destructor,1;
runs,,1;
assigned,1;
dropped
at,1;
scope,,1;
been,1;
executed.
This,1;
even,1;
even,1;
If,1;
no,1;
locals,
when,1;
library,1;
may,1;
wish,1;
state,1;
valid
only,1;
for,1;
example,,1;
like,1;
propagate,1;
information
through,1;
no,1;
good,1;
the
thread,1;
state,1;
thread
was,1;
even,1;
returned,1;
due,1;
a
drop,1;
state,1;
Cell,1;
or,1;
because,1;
thread
locals,1;
types,1;
for,1;
for,1;
Traits
Extension,1;
traits,1;
allow,1;
trait,1;
different,1;
example,,1;
an,1;
trait,1;
for,1;
adds,1;
number,1;
for,1;
common),1;
iterator,1;
example,,1;
adds,1;
more,1;
operations,1;
trait,1;
from
tower-service.
Extension,1;
traits,1;
useful,1;
the
base,1;
or,1;
trait,1;
own
so,1;
rarely,1;
sees,1;
releases,1;
cause,1;
trait,1;
trait,1;
an,1;
Service),1;
methods.,1;
It,1;
for,1;
implements,1;
for,1;
on,1;
library,1;
types,1;
traits,1;
automatically,1;
Along,1;
traits,,1;
or,1;
functions,1;
form,1;
re-exports
some,1;
particularly,1;
traits,,1;
want,1;
want,1;
module.,1;
lower,1;
explicitly,1;
by
name.,1;
library,1;
specify,1;
great,1;
for,1;
trait,1;
trait,1;
example,,1;
crate,,1;
traits,1;
traits,1;
scope,,1;
general,,1;
imports,1;
example,,1;
adds,1;
new,1;
new,1;
trait,1;
on,1;
on,1;
no,1;
compile,1;
ambiguous.
Interestingly,1;
while,1;
imports,1;
RFC,1;
on,1;
not
require,1;
library,1;
new,1;
for,1;
such,1;
RFC
goes,1;
great,1;
detail,1;
read,1;
gist
is,1;
releases,1;
require,1;
invasive,1;
changes,1;
to
dependents,,1;
like,1;
edge,1;
because,1;
oth-
erwise,1;
fraction,1;
changes,1;
require,1;
new,1;
very,1;
actually,1;
case,1;
imports,1;
by,1;
crate,,1;
maintainers,1;
imports,1;
for,1;
whether,1;
version
bump.
Staying,1;
Up,1;
such,1;
evolving,1;
new,1;
every,1;
changes,1;
infeasible,,1;
new,1;
library,1;
additions,,1;
It
mainly,1;
for,1;
each,1;
new,1;
recommend
you,1;
reading,1;
language.,1;
reading,1;
changelogs
for,1;
well,1;
near,1;
bottom,1;
changes,1;
weren’t
large,1;
warrant,1;
may,1;
on,1;
https://doc.rust-lang.org/edition-guide/,
which,1;
new,1;
each,1;
edition.,1;
every,1;
three,1;
new,1;
library,1;
enable,1;
may,1;
want
to,1;
teams,,1;
well,1;
reports,
larger,1;
edition,1;
planning,1;
To,1;
great,1;
each
focus,1;
on,1;
aspect,1;
may,1;
over
at,1;
another,1;
great,1;
insight,1;
every,1;
part,1;
case,1;
for,1;
most,1;
languages,,1;
members,1;
constantly,1;
new,1;
new,1;
techniques,1;
another,1;
language.,1;
covered,1;
been,1;
by,1;
thousands,1;
threads,,1;
discussions,1;
even,1;
once,1;
while,1;
new,1;
feature,,1;
good,1;
(https://users.rust-lang.org/),,1;
(https://twitter.com/
rustlang).,1;
don’t,1;
or,1;
time—
pick,1;
like,1;
great,1;
for,1;
Week,1;
It,1;
well,1;
discussions,1;
new,1;
opportunities,1;
for,1;
and
Rust,1;
It,1;
even,1;
Discerning,1;
may,1;
even,1;
good,1;
new,1;
on,1;
read,1;
for,1;
number,1;
for,1;
very,1;
sur-
vey,1;
learning.,1;
on,1;
different,1;
you
can,1;
for,1;
challenge,1;
on,1;
especially,1;
hard,1;
even,1;
an,1;
constantly,1;
documentation,1;
for,1;
or,1;
aspect,1;
works.,1;
seem,1;
like,1;
improv-
ing.,1;
by,1;
learning.,1;
It,1;
while,1;
experience.
Listening,1;
or,1;
techniques,1;
an,1;
struggling,1;
on,1;
You’ll,1;
like,1;
practices.,1;
sit,1;
actually,1;
understand,1;
on,1;
more,1;
even,1;
here,1;
well,1;
https://github.com/jamesmunns/­
awesome-rust-streaming/.,1;
developers
who,1;
or,1;
channel,1;
Action:,1;
like,1;
time
between,1;
for,1;
projects,,1;
for,1;
on,1;
Nushell,
their,1;
on,1;
“new,1;
great,1;
on,1;
walks
The,1;
Ecosystem
239through,1;
for,1;
Simulator!)
and,1;
well-known,1;
hood.
Given,1;
no,1;
surprise,1;
kind,1;
or,1;
form,1;
great,1;
avenue
for,1;
If,1;
or,1;
aspect,1;
by,1;
there’s,1;
no,1;
or,1;
here,1;
want,1;
whether,1;
love,1;
library,1;
first,1;
lose,1;
very,1;
targets,1;
with—go,1;
more,1;
satisfying,1;
long-standing,1;
while,1;
suggestions.,1;
tools.,1;
high-quality
codebase,1;
good,1;
documentation,1;
an,1;
yourself),,1;
great,1;
for,1;
issues.,1;
If,1;
through
the,1;
for,1;
or,1;
more,1;
level-
ing,1;
contribute,1;
trickier,1;
another,1;
library,1;
or,1;
because,1;
allow,1;
on,1;
If,1;
fact,1;
suggests,1;
someone
else,1;
may,1;
for,1;
Data
structures,1;
for,1;
great,1;
subjects,
but,1;
more,1;
scratch”,1;
kind,1;
looking,1;
or,1;
Such,1;
good,1;
turned,1;
If,1;
Tolnay,1;
maintains,1;
may,1;
inspiration.,1;
If,1;
looking,1;
more,1;
there’s,1;
Yet,1;
don’t,1;
by,1;
state,1;
affairs,1;
constantly,1;
good,1;
beyond,1;
beginner,1;
Here’s,1;
new,1;
or,1;
good,1;
particularly,1;
or
nuanced,1;
looking,1;
like,1;
are
more,1;
while,1;
others,,1;
like,1;
more,1;
guide-
like,,1;
sources,1;
(https://doc.rust-lang.org/nomicon/),,1;
par-
ticular,,1;
more,1;
books,1;
library,1;
or,1;
want,1;
try,1;
trove,1;
Guidelines,1;
a
Rust,1;
Guidelines,1;
(https://rust-lang.github
.io/unsafe-code-guidelines/),,1;
by,1;
read,1;
more.
NOTE
One,1;
specification,1;
for,1;
language.,1;
like,1;
for,1;
or,1;
on,1;
number,1;
books,1;
are
enormously,1;
Macros,1;
for,1;
example,,1;
indis-
pensable,1;
want,1;
filled,1;
for,1;
great,1;
Fuzz,1;
fuzz,1;
more,1;
(https://rust-lang-nursery.github.io/rust-cookbook/),,1;
even,1;
a
resource,1;
for,1;
more,1;
(https://lborb.
github.io/book/unofficial.html)!
If,1;
more,1;
hands-on,1;
an,1;
server,1;
well,1;
If,1;
more,1;
Entirely,1;
an,1;
read,1;
If,1;
looking,1;
for,1;
an,1;
through
the,1;
great,1;
detail,1;
while,1;
(https://fasterthanli.me/tags/rust/),1;
want,1;
conversational,1;
style.
When,1;
more,1;
confident,1;
abilities,1;
more,1;
reference,1;
great,1;
for,1;
looking,1;
It,1;
for,1;
most,1;
even,1;
looking,1;
intimately,1;
are
pretty,1;
finally,,1;
want,1;
try.
There,1;
each,1;
question,1;
even,1;
wrong,
you’ll,1;
by,1;
been,1;
well,1;
by,1;
try,1;
others.,1;
an,1;
new,1;
every,1;
new,1;
or,1;
try,1;
reading,1;
or,1;
here,1;
on,1;
form,1;
post,,1;
tweet-
ing,,1;
or,1;
or,1;
thing,1;
try,1;
newfound,1;
to
someone,1;
understand,1;
so,,1;
getting,1;
looking,1;
or,1;
sure,1;
(https://rustbeginners.github.io/awesome-rust-mentors/).Summary
In,1;
covered,1;
beyond,1;
work-
space.,1;
We,1;
useful,1;
tools,,1;
continues,1;
discussed
how,1;
hands,1;
contribute,1;
there’s,1;
(asterisk),,1;
236–237
?,1;
62–65
A
abstract,1;
syntax,1;
tree,1;
memory,1;
ordering,,1;
79
Arc::make_mut,1;
236–237
async/await,,1;
121–133
multithreading,,1;
138–139
standardized,1;
polling,,1;
121
synchronous,1;
175–176
atomic,1;
216
macros,,1;
110,,1;
49
no_main,,1;
216
repr,,1;
library,1;
207–209
bitflags,1;
30,,1;
48–49
Borrow,1;
checker,,1;
8,,1;
231
byte-aligned,1;
values,,1;
memory,,1;
198–199
The,1;
38,,1;
clippy,,1;
224
cargo-hack,,1;
159–160
cbindgen,1;
208
Cell,1;
12
cfg,1;
conditions,,1;
39
Clone::clone_from,1;
195
codegen-units,,1;
75
coherence,,1;
compilation,,1;
174
const,,1;
lints,,1;
236–237
crates.,1;
See,1;
225
cross-compilation,,1;
59
debugging,1;
75
declarative,1;
153
derive,1;
110,,1;
111
#[derive(Trait)],,1;
guards,,1;
234–235
drop_in_place,1;
dispatch,,1;
memory,1;
types,1;
handling,,1;
46
extension,1;
traits,,1;
ordering,,1;
on,1;
226
187–188
flume,1;
147,
193–209
Formatter::debug_*,1;
232–233
fragment,1;
106
frame,1;
trait,1;
110,,1;
93–94heap,,1;
6,,1;
226
Heisenbugs,,1;
trait,1;
14–15
generic,1;
traits,,1;
236–237
#[global_allocator],1;
memory,,1;
12
Into,1;
226
J
Jung,,1;
38
layout,,1;
21–23
leaf,1;
memory,,1;
Entirely,1;
Ryan,,1;
239
libraries
alloc,,1;
225
cxx,,1;
226
Index
247libraries,1;
234
itertools,,1;
97,,1;
190
metered,,1;
234
pin-project,,1;
212–213,,1;
227
structopt,,1;
227
tracing,,1;
optimization,1;
171
lock-free,1;
173
Loom,1;
97,,1;
110,,1;
112
cfg!,,1;
70
compile_fail!,,1;
110,,1;
110,,1;
109–115
write!,,1;
traits,,1;
34
matchers,,1;
Frank,,1;
memory,,1;
memory,,1;
6–7
terminology,,1;
2–3
types,1;
ordering,,1;
113
methods,,1;
232
Clone::clone_from,,1;
on,1;
types,1;
232–233
inherent,,1;
41
Instant::elapsed,,1;
233
Result::transpose,,1;
233
Vec::swap_remove,,1;
intermediate,1;
119–120
#[must_use],1;
170,,1;
values,,1;
205
#![no_std],1;
Yet,1;
files,,1;
traits,,1;
44–45
Once,1;
59–61
opaque,1;
206
Oppermann,,1;
vs.,1;
22
panic,1;
75
testing,,1;
226
place,,1;
134
polling,1;
polling,,1;
121
preludes,,1;
213,,1;
operator,1;
conditions,,1;
169
raw,1;
memory,1;
ordering,,1;
memory,1;
ordering,,1;
239
Rust,1;
38,,1;
237
Rust,1;
Cookbook,,1;
242
Rust,1;
Fuzz,1;
242
Rust,1;
242
Rust,1;
RFC,1;
documents
RFC,1;
1105,,1;
38,,1;
2582,,1;
Guidelines,1;
241
rustc,,1;
228
S
safety,,1;
129,,1;
169,,1;
172
“Scalability!,1;
traits,,1;
structures,,1;
205–206
sequentially,1;
memory
ordering,,1;
memory,1;
114–115
spawn,1;
138–139
specialization,,1;
212–213,,1;
Developers,1;
dispatch,,1;
memory,,1;
memory,,1;
ordering,,1;
trees,,1;
triples,,1;
Week,1;
trees,,1;
242
tower,1;
227–228
trait,1;
31–33
trait,1;
54–55
Borrow,,1;
28–31
common,,1;
39–40
compilation,,1;
40
Debug,,1;
24–28
Display,,1;
trait,1;
32
implementations,,1;
39
PartialOrd,,1;
39
sealed,,1;
40
Sized,,1;
31–33
trait,1;
131,,1;
152–153
transcribers,,1;
inference,,1;
8,,1;
traits,1;
types,1;
34–35
fragment,,1;
34
ManuallyDrop,,1;
memory,,1;
19–24
Once,,1;
156
reference,,1;
155–156
Result,,1;
system,,1;
48–50
Index
251U
undefined,1;
131,,1;
152–153
unreachable_unchecked,1;
versions,,1;
142–153
unsafe,1;
129,,1;
155–158
values
dropping,,1;
8–9
overview,,1;
models,,1;
3–4
low-level,1;
models,,1;
size,,1;
stealing,,1;
an,1;
for,1;
Rustaceans,1;
Dogma,,1;
by,1;
on,1;
Internet
to,1;
connected,1;
informed.,1;
That,1;
for,1;
urgent,1;
over,1;
for,1;
through
activism,,1;
by,1;
With
your,1;
digital,1;
future.
LEARN,1;
for,1;
more,1;
information.
More,1;
books,1;
from
NO,1;
STARCH,1;
for,1;
for,1;
Software,1;
riccomini,1;
klabnik,1;
ryaboy
288,1;
Portable,,1;
Computers—
Craft,1;
jonathan,1;
LINUX,1;
SUPERUSER,1;
and
technical,1;
L,1;
who’ve,1;
on,1;
It,1;
codebases,,1;
asynchronous,1;
like,1;
Waker,1;
types,1;
well,1;
async/await,1;
like,1;
code.,1;
You’ll,1;
like,1;
trait,1;
delve,1;
expert,1;
on,1;
handling,,1;
interoperate,1;
non-Rust
libraries,1;
or,1;
and
embedded,1;
environments
You’ll,1;
idiomatic,,1;
on,1;
principles
•,1;
effectively,1;
interact,1;
functions,1;
Organize,1;
complex,1;
so
that,1;
for,1;
Rustaceans,1;
will
help,1;
more,1;
while,1;
mechanisms.
ABOUT,1;
been,1;
Rust”
YouTube,1;
like,1;
he
built,1;
high-performance,1;
over,1;
MIT.,1;
first,1;
book.
CURRENT,1;
2021
T,1;
G,1;
™
www.nostarch.com
$39.99,1;
($59.99,1;
CDN)
,1;
